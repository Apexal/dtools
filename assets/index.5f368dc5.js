var Re=Object.defineProperty;var Me=(nt,E,at)=>E in nt?Re(nt,E,{enumerable:!0,configurable:!0,writable:!0,value:at}):nt[E]=at;var we=(nt,E,at)=>(Me(nt,typeof E!="symbol"?E+"":E,at),at),Pe=(nt,E,at)=>{if(!E.has(nt))throw TypeError("Cannot "+at)};var Yt=(nt,E,at)=>(Pe(nt,E,"read from private field"),at?at.call(nt):E.get(nt)),le=(nt,E,at)=>{if(E.has(nt))throw TypeError("Cannot add the same private member more than once");E instanceof WeakSet?E.add(nt):E.set(nt,at)},he=(nt,E,at,D)=>(Pe(nt,E,"write to private field"),D?D.call(nt,at):E.set(nt,at),at),Fe=(nt,E,at,D)=>({set _(wt){he(nt,E,wt,at)},get _(){return Yt(nt,E,D)}}),Ae=(nt,E,at)=>(Pe(nt,E,"access private method"),at);const p$1=function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const wt of document.querySelectorAll('link[rel="modulepreload"]'))D(wt);new MutationObserver(wt=>{for(const dt of wt)if(dt.type==="childList")for(const vt of dt.addedNodes)vt.tagName==="LINK"&&vt.rel==="modulepreload"&&D(vt)}).observe(document,{childList:!0,subtree:!0});function at(wt){const dt={};return wt.integrity&&(dt.integrity=wt.integrity),wt.referrerpolicy&&(dt.referrerPolicy=wt.referrerpolicy),wt.crossorigin==="use-credentials"?dt.credentials="include":wt.crossorigin==="anonymous"?dt.credentials="omit":dt.credentials="same-origin",dt}function D(wt){if(wt.ep)return;wt.ep=!0;const dt=at(wt);fetch(wt.href,dt)}};p$1();var n,l$1,u$1,t$1,o$2,r$1,e$2={},c$1=[],s$1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a$1(nt,E){for(var at in E)nt[at]=E[at];return nt}function h(nt){var E=nt.parentNode;E&&E.removeChild(nt)}function v$1(nt,E,at){var D,wt,dt,vt={};for(dt in E)dt=="key"?D=E[dt]:dt=="ref"?wt=E[dt]:vt[dt]=E[dt];if(arguments.length>2&&(vt.children=arguments.length>3?n.call(arguments,2):at),typeof nt=="function"&&nt.defaultProps!=null)for(dt in nt.defaultProps)vt[dt]===void 0&&(vt[dt]=nt.defaultProps[dt]);return y$1(nt,vt,D,wt,null)}function y$1(nt,E,at,D,wt){var dt={type:nt,props:E,key:at,ref:D,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:wt==null?++u$1:wt};return wt==null&&l$1.vnode!=null&&l$1.vnode(dt),dt}function d$1(nt){return nt.children}function _(nt,E){this.props=nt,this.context=E}function k$1(nt,E){if(E==null)return nt.__?k$1(nt.__,nt.__.__k.indexOf(nt)+1):null;for(var at;E<nt.__k.length;E++)if((at=nt.__k[E])!=null&&at.__e!=null)return at.__e;return typeof nt.type=="function"?k$1(nt):null}function b$1(nt){var E,at;if((nt=nt.__)!=null&&nt.__c!=null){for(nt.__e=nt.__c.base=null,E=0;E<nt.__k.length;E++)if((at=nt.__k[E])!=null&&at.__e!=null){nt.__e=nt.__c.base=at.__e;break}return b$1(nt)}}function m$1(nt){(!nt.__d&&(nt.__d=!0)&&t$1.push(nt)&&!g$1.__r++||r$1!==l$1.debounceRendering)&&((r$1=l$1.debounceRendering)||o$2)(g$1)}function g$1(){for(var nt;g$1.__r=t$1.length;)nt=t$1.sort(function(E,at){return E.__v.__b-at.__v.__b}),t$1=[],nt.some(function(E){var at,D,wt,dt,vt,Ct;E.__d&&(vt=(dt=(at=E).__v).__e,(Ct=at.__P)&&(D=[],(wt=a$1({},dt)).__v=dt.__v+1,j$1(Ct,dt,wt,at.__n,Ct.ownerSVGElement!==void 0,dt.__h!=null?[vt]:null,D,vt==null?k$1(dt):vt,dt.__h),z$1(D,dt),dt.__e!=vt&&b$1(dt)))})}function w$1(nt,E,at,D,wt,dt,vt,Ct,bt,it){var Y,pt,gt,et,B,J,G,st=D&&D.__k||c$1,lt=st.length;for(at.__k=[],Y=0;Y<E.length;Y++)if((et=at.__k[Y]=(et=E[Y])==null||typeof et=="boolean"?null:typeof et=="string"||typeof et=="number"||typeof et=="bigint"?y$1(null,et,null,null,et):Array.isArray(et)?y$1(d$1,{children:et},null,null,null):et.__b>0?y$1(et.type,et.props,et.key,null,et.__v):et)!=null){if(et.__=at,et.__b=at.__b+1,(gt=st[Y])===null||gt&&et.key==gt.key&&et.type===gt.type)st[Y]=void 0;else for(pt=0;pt<lt;pt++){if((gt=st[pt])&&et.key==gt.key&&et.type===gt.type){st[pt]=void 0;break}gt=null}j$1(nt,et,gt=gt||e$2,wt,dt,vt,Ct,bt,it),B=et.__e,(pt=et.ref)&&gt.ref!=pt&&(G||(G=[]),gt.ref&&G.push(gt.ref,null,et),G.push(pt,et.__c||B,et)),B!=null?(J==null&&(J=B),typeof et.type=="function"&&et.__k===gt.__k?et.__d=bt=x(et,bt,nt):bt=P(nt,et,gt,st,B,bt),typeof at.type=="function"&&(at.__d=bt)):bt&&gt.__e==bt&&bt.parentNode!=nt&&(bt=k$1(gt))}for(at.__e=J,Y=lt;Y--;)st[Y]!=null&&(typeof at.type=="function"&&st[Y].__e!=null&&st[Y].__e==at.__d&&(at.__d=k$1(D,Y+1)),N(st[Y],st[Y]));if(G)for(Y=0;Y<G.length;Y++)M(G[Y],G[++Y],G[++Y])}function x(nt,E,at){for(var D,wt=nt.__k,dt=0;wt&&dt<wt.length;dt++)(D=wt[dt])&&(D.__=nt,E=typeof D.type=="function"?x(D,E,at):P(at,D,D,wt,D.__e,E));return E}function P(nt,E,at,D,wt,dt){var vt,Ct,bt;if(E.__d!==void 0)vt=E.__d,E.__d=void 0;else if(at==null||wt!=dt||wt.parentNode==null)t:if(dt==null||dt.parentNode!==nt)nt.appendChild(wt),vt=null;else{for(Ct=dt,bt=0;(Ct=Ct.nextSibling)&&bt<D.length;bt+=2)if(Ct==wt)break t;nt.insertBefore(wt,dt),vt=dt}return vt!==void 0?vt:wt.nextSibling}function C(nt,E,at,D,wt){var dt;for(dt in at)dt==="children"||dt==="key"||dt in E||H(nt,dt,null,at[dt],D);for(dt in E)wt&&typeof E[dt]!="function"||dt==="children"||dt==="key"||dt==="value"||dt==="checked"||at[dt]===E[dt]||H(nt,dt,E[dt],at[dt],D)}function $(nt,E,at){E[0]==="-"?nt.setProperty(E,at):nt[E]=at==null?"":typeof at!="number"||s$1.test(E)?at:at+"px"}function H(nt,E,at,D,wt){var dt;t:if(E==="style")if(typeof at=="string")nt.style.cssText=at;else{if(typeof D=="string"&&(nt.style.cssText=D=""),D)for(E in D)at&&E in at||$(nt.style,E,"");if(at)for(E in at)D&&at[E]===D[E]||$(nt.style,E,at[E])}else if(E[0]==="o"&&E[1]==="n")dt=E!==(E=E.replace(/Capture$/,"")),E=E.toLowerCase()in nt?E.toLowerCase().slice(2):E.slice(2),nt.l||(nt.l={}),nt.l[E+dt]=at,at?D||nt.addEventListener(E,dt?T$1:I,dt):nt.removeEventListener(E,dt?T$1:I,dt);else if(E!=="dangerouslySetInnerHTML"){if(wt)E=E.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(E!=="href"&&E!=="list"&&E!=="form"&&E!=="tabIndex"&&E!=="download"&&E in nt)try{nt[E]=at==null?"":at;break t}catch{}typeof at=="function"||(at!=null&&(at!==!1||E[0]==="a"&&E[1]==="r")?nt.setAttribute(E,at):nt.removeAttribute(E))}}function I(nt){this.l[nt.type+!1](l$1.event?l$1.event(nt):nt)}function T$1(nt){this.l[nt.type+!0](l$1.event?l$1.event(nt):nt)}function j$1(nt,E,at,D,wt,dt,vt,Ct,bt){var it,Y,pt,gt,et,B,J,G,st,lt,tt,ct,ut,At=E.type;if(E.constructor!==void 0)return null;at.__h!=null&&(bt=at.__h,Ct=E.__e=at.__e,E.__h=null,dt=[Ct]),(it=l$1.__b)&&it(E);try{t:if(typeof At=="function"){if(G=E.props,st=(it=At.contextType)&&D[it.__c],lt=it?st?st.props.value:it.__:D,at.__c?J=(Y=E.__c=at.__c).__=Y.__E:("prototype"in At&&At.prototype.render?E.__c=Y=new At(G,lt):(E.__c=Y=new _(G,lt),Y.constructor=At,Y.render=O),st&&st.sub(Y),Y.props=G,Y.state||(Y.state={}),Y.context=lt,Y.__n=D,pt=Y.__d=!0,Y.__h=[]),Y.__s==null&&(Y.__s=Y.state),At.getDerivedStateFromProps!=null&&(Y.__s==Y.state&&(Y.__s=a$1({},Y.__s)),a$1(Y.__s,At.getDerivedStateFromProps(G,Y.__s))),gt=Y.props,et=Y.state,pt)At.getDerivedStateFromProps==null&&Y.componentWillMount!=null&&Y.componentWillMount(),Y.componentDidMount!=null&&Y.__h.push(Y.componentDidMount);else{if(At.getDerivedStateFromProps==null&&G!==gt&&Y.componentWillReceiveProps!=null&&Y.componentWillReceiveProps(G,lt),!Y.__e&&Y.shouldComponentUpdate!=null&&Y.shouldComponentUpdate(G,Y.__s,lt)===!1||E.__v===at.__v){Y.props=G,Y.state=Y.__s,E.__v!==at.__v&&(Y.__d=!1),Y.__v=E,E.__e=at.__e,E.__k=at.__k,E.__k.forEach(function(kt){kt&&(kt.__=E)}),Y.__h.length&&vt.push(Y);break t}Y.componentWillUpdate!=null&&Y.componentWillUpdate(G,Y.__s,lt),Y.componentDidUpdate!=null&&Y.__h.push(function(){Y.componentDidUpdate(gt,et,B)})}if(Y.context=lt,Y.props=G,Y.__v=E,Y.__P=nt,tt=l$1.__r,ct=0,"prototype"in At&&At.prototype.render)Y.state=Y.__s,Y.__d=!1,tt&&tt(E),it=Y.render(Y.props,Y.state,Y.context);else do Y.__d=!1,tt&&tt(E),it=Y.render(Y.props,Y.state,Y.context),Y.state=Y.__s;while(Y.__d&&++ct<25);Y.state=Y.__s,Y.getChildContext!=null&&(D=a$1(a$1({},D),Y.getChildContext())),pt||Y.getSnapshotBeforeUpdate==null||(B=Y.getSnapshotBeforeUpdate(gt,et)),ut=it!=null&&it.type===d$1&&it.key==null?it.props.children:it,w$1(nt,Array.isArray(ut)?ut:[ut],E,at,D,wt,dt,vt,Ct,bt),Y.base=E.__e,E.__h=null,Y.__h.length&&vt.push(Y),J&&(Y.__E=Y.__=null),Y.__e=!1}else dt==null&&E.__v===at.__v?(E.__k=at.__k,E.__e=at.__e):E.__e=L(at.__e,E,at,D,wt,dt,vt,bt);(it=l$1.diffed)&&it(E)}catch(kt){E.__v=null,(bt||dt!=null)&&(E.__e=Ct,E.__h=!!bt,dt[dt.indexOf(Ct)]=null),l$1.__e(kt,E,at)}}function z$1(nt,E){l$1.__c&&l$1.__c(E,nt),nt.some(function(at){try{nt=at.__h,at.__h=[],nt.some(function(D){D.call(at)})}catch(D){l$1.__e(D,at.__v)}})}function L(nt,E,at,D,wt,dt,vt,Ct){var bt,it,Y,pt=at.props,gt=E.props,et=E.type,B=0;if(et==="svg"&&(wt=!0),dt!=null){for(;B<dt.length;B++)if((bt=dt[B])&&"setAttribute"in bt==!!et&&(et?bt.localName===et:bt.nodeType===3)){nt=bt,dt[B]=null;break}}if(nt==null){if(et===null)return document.createTextNode(gt);nt=wt?document.createElementNS("http://www.w3.org/2000/svg",et):document.createElement(et,gt.is&&gt),dt=null,Ct=!1}if(et===null)pt===gt||Ct&&nt.data===gt||(nt.data=gt);else{if(dt=dt&&n.call(nt.childNodes),it=(pt=at.props||e$2).dangerouslySetInnerHTML,Y=gt.dangerouslySetInnerHTML,!Ct){if(dt!=null)for(pt={},B=0;B<nt.attributes.length;B++)pt[nt.attributes[B].name]=nt.attributes[B].value;(Y||it)&&(Y&&(it&&Y.__html==it.__html||Y.__html===nt.innerHTML)||(nt.innerHTML=Y&&Y.__html||""))}if(C(nt,gt,pt,wt,Ct),Y)E.__k=[];else if(B=E.props.children,w$1(nt,Array.isArray(B)?B:[B],E,at,D,wt&&et!=="foreignObject",dt,vt,dt?dt[0]:at.__k&&k$1(at,0),Ct),dt!=null)for(B=dt.length;B--;)dt[B]!=null&&h(dt[B]);Ct||("value"in gt&&(B=gt.value)!==void 0&&(B!==nt.value||et==="progress"&&!B||et==="option"&&B!==pt.value)&&H(nt,"value",B,pt.value,!1),"checked"in gt&&(B=gt.checked)!==void 0&&B!==nt.checked&&H(nt,"checked",B,pt.checked,!1))}return nt}function M(nt,E,at){try{typeof nt=="function"?nt(E):nt.current=E}catch(D){l$1.__e(D,at)}}function N(nt,E,at){var D,wt;if(l$1.unmount&&l$1.unmount(nt),(D=nt.ref)&&(D.current&&D.current!==nt.__e||M(D,null,E)),(D=nt.__c)!=null){if(D.componentWillUnmount)try{D.componentWillUnmount()}catch(dt){l$1.__e(dt,E)}D.base=D.__P=null}if(D=nt.__k)for(wt=0;wt<D.length;wt++)D[wt]&&N(D[wt],E,typeof nt.type!="function");at||nt.__e==null||h(nt.__e),nt.__e=nt.__d=void 0}function O(nt,E,at){return this.constructor(nt,at)}function S(nt,E,at){var D,wt,dt;l$1.__&&l$1.__(nt,E),wt=(D=typeof at=="function")?null:at&&at.__k||E.__k,dt=[],j$1(E,nt=(!D&&at||E).__k=v$1(d$1,null,[nt]),wt||e$2,e$2,E.ownerSVGElement!==void 0,!D&&at?[at]:wt?null:E.firstChild?n.call(E.childNodes):null,dt,!D&&at?at:wt?wt.__e:E.firstChild,D),z$1(dt,nt)}n=c$1.slice,l$1={__e:function(nt,E,at,D){for(var wt,dt,vt;E=E.__;)if((wt=E.__c)&&!wt.__)try{if((dt=wt.constructor)&&dt.getDerivedStateFromError!=null&&(wt.setState(dt.getDerivedStateFromError(nt)),vt=wt.__d),wt.componentDidCatch!=null&&(wt.componentDidCatch(nt,D||{}),vt=wt.__d),vt)return wt.__E=wt}catch(Ct){nt=Ct}throw nt}},u$1=0,_.prototype.setState=function(nt,E){var at;at=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=a$1({},this.state),typeof nt=="function"&&(nt=nt(a$1({},at),this.props)),nt&&a$1(at,nt),nt!=null&&this.__v&&(E&&this.__h.push(E),m$1(this))},_.prototype.forceUpdate=function(nt){this.__v&&(this.__e=!0,nt&&this.__h.push(nt),m$1(this))},_.prototype.render=d$1,t$1=[],o$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g$1.__r=0;var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(nt){if(nt.__esModule)return nt;var E=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(nt).forEach(function(at){var D=Object.getOwnPropertyDescriptor(nt,at);Object.defineProperty(E,at,D.get?D:{enumerable:!0,get:function(){return nt[at]}})}),E}function commonjsRequire(nt){throw new Error('Could not dynamically require "'+nt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(E,at){module.exports=at()})(commonjsGlobal,()=>(()=>{var __webpack_modules__=[,(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.VerbosityLevel=E.Util=E.UnknownErrorException=E.UnexpectedResponseException=E.UNSUPPORTED_FEATURES=E.TextRenderingMode=E.StreamType=E.RenderingIntentFlag=E.PermissionFlag=E.PasswordResponses=E.PasswordException=E.PageActionEventType=E.OPS=E.MissingPDFException=E.InvalidPDFException=E.ImageKind=E.IDENTITY_MATRIX=E.FormatError=E.FontType=E.FeatureTest=E.FONT_IDENTITY_MATRIX=E.DocumentActionEventType=E.CMapCompressionType=E.BaseException=E.AnnotationType=E.AnnotationStateModelType=E.AnnotationReviewState=E.AnnotationReplyType=E.AnnotationMode=E.AnnotationMarkedState=E.AnnotationFlag=E.AnnotationFieldFlag=E.AnnotationBorderStyleType=E.AnnotationActionEventType=E.AbortException=void 0,E.arrayByteLength=Pt,E.arraysToBytes=yt,E.assert=jt,E.bytesToString=ft,E.createPromiseCapability=ee,E.createValidAbsoluteUrl=qt,E.escapeString=se,E.getModificationDate=fe,E.getVerbosityLevel=St,E.info=Lt,E.isArrayBuffer=ce,E.isArrayEqual=re,E.isAscii=te,E.objectFromMap=Ot,E.objectSize=xt,E.setVerbosityLevel=Ft,E.shadow=rt,E.string32=Rt,E.stringToBytes=mt,E.stringToPDFString=Ut,E.stringToUTF16BEString=Kt,E.stringToUTF8String=Zt,E.unreachable=Dt,E.utf8StringToString=ie,E.warn=$t,at(2);const D=[1,0,0,1,0,0];E.IDENTITY_MATRIX=D;const wt=[.001,0,0,.001,0,0];E.FONT_IDENTITY_MATRIX=wt;const dt={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};E.RenderingIntentFlag=dt;const vt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};E.AnnotationMode=vt;const Ct={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};E.PermissionFlag=Ct;const bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};E.TextRenderingMode=bt;const it={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};E.ImageKind=it;const Y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};E.AnnotationType=Y;const pt={MARKED:"Marked",REVIEW:"Review"};E.AnnotationStateModelType=pt;const gt={MARKED:"Marked",UNMARKED:"Unmarked"};E.AnnotationMarkedState=gt;const et={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};E.AnnotationReviewState=et;const B={GROUP:"Group",REPLY:"R"};E.AnnotationReplyType=B;const J={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};E.AnnotationFlag=J;const G={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};E.AnnotationFieldFlag=G;const st={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};E.AnnotationBorderStyleType=st;const lt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};E.AnnotationActionEventType=lt;const tt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};E.DocumentActionEventType=tt;const ct={O:"PageOpen",C:"PageClose"};E.PageActionEventType=ct;const ut={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};E.StreamType=ut;const At={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};E.FontType=At;const kt={ERRORS:0,WARNINGS:1,INFOS:5};E.VerbosityLevel=kt;const V={NONE:0,BINARY:1,STREAM:2};E.CMapCompressionType=V;const Q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};E.OPS=Q;const ot={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};E.UNSUPPORTED_FEATURES=ot;const _t={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};E.PasswordResponses=_t;let ht=kt.WARNINGS;function Ft(Mt){Number.isInteger(Mt)&&(ht=Mt)}function St(){return ht}function Lt(Mt){ht>=kt.INFOS&&console.log(`Info: ${Mt}`)}function $t(Mt){ht>=kt.WARNINGS&&console.log(`Warning: ${Mt}`)}function Dt(Mt){throw new Error(Mt)}function jt(Mt,Tt){Mt||Dt(Tt)}function Nt(Mt){if(!Mt)return!1;switch(Mt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qt(Mt,Tt=null,Et=null){if(!Mt)return null;try{if(Et&&typeof Mt=="string"){if(Et.addDefaultProtocol&&Mt.startsWith("www.")){const Xt=Mt.match(/\./g);Xt&&Xt.length>=2&&(Mt=`http://${Mt}`)}if(Et.tryConvertEncoding)try{Mt=Zt(Mt)}catch{}}const Gt=Tt?new URL(Mt,Tt):new URL(Mt);if(Nt(Gt))return Gt}catch{}return null}function rt(Mt,Tt,Et){return Object.defineProperty(Mt,Tt,{value:Et,enumerable:!0,configurable:!0,writable:!1}),Et}const W=function(){function Tt(Et,Gt){this.constructor===Tt&&Dt("Cannot initialize BaseException."),this.message=Et,this.name=Gt}return Tt.prototype=new Error,Tt.constructor=Tt,Tt}();E.BaseException=W;class U extends W{constructor(Tt,Et){super(Tt,"PasswordException"),this.code=Et}}E.PasswordException=U;class Z extends W{constructor(Tt,Et){super(Tt,"UnknownErrorException"),this.details=Et}}E.UnknownErrorException=Z;class A extends W{constructor(Tt){super(Tt,"InvalidPDFException")}}E.InvalidPDFException=A;class R extends W{constructor(Tt){super(Tt,"MissingPDFException")}}E.MissingPDFException=R;class q extends W{constructor(Tt,Et){super(Tt,"UnexpectedResponseException"),this.status=Et}}E.UnexpectedResponseException=q;class K extends W{constructor(Tt){super(Tt,"FormatError")}}E.FormatError=K;class X extends W{constructor(Tt){super(Tt,"AbortException")}}E.AbortException=X;function ft(Mt){(typeof Mt!="object"||Mt===null||Mt.length===void 0)&&Dt("Invalid argument for bytesToString");const Tt=Mt.length,Et=8192;if(Tt<Et)return String.fromCharCode.apply(null,Mt);const Gt=[];for(let Xt=0;Xt<Tt;Xt+=Et){const Qt=Math.min(Xt+Et,Tt),Jt=Mt.subarray(Xt,Qt);Gt.push(String.fromCharCode.apply(null,Jt))}return Gt.join("")}function mt(Mt){typeof Mt!="string"&&Dt("Invalid argument for stringToBytes");const Tt=Mt.length,Et=new Uint8Array(Tt);for(let Gt=0;Gt<Tt;++Gt)Et[Gt]=Mt.charCodeAt(Gt)&255;return Et}function Pt(Mt){if(Mt.length!==void 0)return Mt.length;if(Mt.byteLength!==void 0)return Mt.byteLength;Dt("Invalid argument for arrayByteLength")}function yt(Mt){const Tt=Mt.length;if(Tt===1&&Mt[0]instanceof Uint8Array)return Mt[0];let Et=0;for(let Qt=0;Qt<Tt;Qt++)Et+=Pt(Mt[Qt]);let Gt=0;const Xt=new Uint8Array(Et);for(let Qt=0;Qt<Tt;Qt++){let Jt=Mt[Qt];Jt instanceof Uint8Array||(typeof Jt=="string"?Jt=mt(Jt):Jt=new Uint8Array(Jt));const de=Jt.byteLength;Xt.set(Jt,Gt),Gt+=de}return Xt}function Rt(Mt){return String.fromCharCode(Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255)}function xt(Mt){return Object.keys(Mt).length}function Ot(Mt){const Tt=Object.create(null);for(const[Et,Gt]of Mt)Tt[Et]=Gt;return Tt}function Bt(){const Mt=new Uint8Array(4);return Mt[0]=1,new Uint32Array(Mt.buffer,0,1)[0]===1}function Ht(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return rt(this,"isLittleEndian",Bt())}static get isEvalSupported(){return rt(this,"isEvalSupported",Ht())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}E.FeatureTest=Wt;const It=[...Array(256).keys()].map(Mt=>Mt.toString(16).padStart(2,"0"));class zt{static makeHexColor(Tt,Et,Gt){return`#${It[Tt]}${It[Et]}${It[Gt]}`}static scaleMinMax(Tt,Et){let Gt;Tt[0]?(Tt[0]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[0],Et[1]*=Tt[0],Tt[3]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[3],Et[3]*=Tt[3]):(Gt=Et[0],Et[0]=Et[2],Et[2]=Gt,Gt=Et[1],Et[1]=Et[3],Et[3]=Gt,Tt[1]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[1],Et[3]*=Tt[1],Tt[2]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[2],Et[1]*=Tt[2]),Et[0]+=Tt[4],Et[1]+=Tt[4],Et[2]+=Tt[5],Et[3]+=Tt[5]}static transform(Tt,Et){return[Tt[0]*Et[0]+Tt[2]*Et[1],Tt[1]*Et[0]+Tt[3]*Et[1],Tt[0]*Et[2]+Tt[2]*Et[3],Tt[1]*Et[2]+Tt[3]*Et[3],Tt[0]*Et[4]+Tt[2]*Et[5]+Tt[4],Tt[1]*Et[4]+Tt[3]*Et[5]+Tt[5]]}static applyTransform(Tt,Et){const Gt=Tt[0]*Et[0]+Tt[1]*Et[2]+Et[4],Xt=Tt[0]*Et[1]+Tt[1]*Et[3]+Et[5];return[Gt,Xt]}static applyInverseTransform(Tt,Et){const Gt=Et[0]*Et[3]-Et[1]*Et[2],Xt=(Tt[0]*Et[3]-Tt[1]*Et[2]+Et[2]*Et[5]-Et[4]*Et[3])/Gt,Qt=(-Tt[0]*Et[1]+Tt[1]*Et[0]+Et[4]*Et[1]-Et[5]*Et[0])/Gt;return[Xt,Qt]}static getAxialAlignedBoundingBox(Tt,Et){const Gt=zt.applyTransform(Tt,Et),Xt=zt.applyTransform(Tt.slice(2,4),Et),Qt=zt.applyTransform([Tt[0],Tt[3]],Et),Jt=zt.applyTransform([Tt[2],Tt[1]],Et);return[Math.min(Gt[0],Xt[0],Qt[0],Jt[0]),Math.min(Gt[1],Xt[1],Qt[1],Jt[1]),Math.max(Gt[0],Xt[0],Qt[0],Jt[0]),Math.max(Gt[1],Xt[1],Qt[1],Jt[1])]}static inverseTransform(Tt){const Et=Tt[0]*Tt[3]-Tt[1]*Tt[2];return[Tt[3]/Et,-Tt[1]/Et,-Tt[2]/Et,Tt[0]/Et,(Tt[2]*Tt[5]-Tt[4]*Tt[3])/Et,(Tt[4]*Tt[1]-Tt[5]*Tt[0])/Et]}static apply3dTransform(Tt,Et){return[Tt[0]*Et[0]+Tt[1]*Et[1]+Tt[2]*Et[2],Tt[3]*Et[0]+Tt[4]*Et[1]+Tt[5]*Et[2],Tt[6]*Et[0]+Tt[7]*Et[1]+Tt[8]*Et[2]]}static singularValueDecompose2dScale(Tt){const Et=[Tt[0],Tt[2],Tt[1],Tt[3]],Gt=Tt[0]*Et[0]+Tt[1]*Et[2],Xt=Tt[0]*Et[1]+Tt[1]*Et[3],Qt=Tt[2]*Et[0]+Tt[3]*Et[2],Jt=Tt[2]*Et[1]+Tt[3]*Et[3],de=(Gt+Jt)/2,ge=Math.sqrt((Gt+Jt)**2-4*(Gt*Jt-Qt*Xt))/2,pe=de+ge||1,ae=de-ge||1;return[Math.sqrt(pe),Math.sqrt(ae)]}static normalizeRect(Tt){const Et=Tt.slice(0);return Tt[0]>Tt[2]&&(Et[0]=Tt[2],Et[2]=Tt[0]),Tt[1]>Tt[3]&&(Et[1]=Tt[3],Et[3]=Tt[1]),Et}static intersect(Tt,Et){const Gt=Math.max(Math.min(Tt[0],Tt[2]),Math.min(Et[0],Et[2])),Xt=Math.min(Math.max(Tt[0],Tt[2]),Math.max(Et[0],Et[2]));if(Gt>Xt)return null;const Qt=Math.max(Math.min(Tt[1],Tt[3]),Math.min(Et[1],Et[3])),Jt=Math.min(Math.max(Tt[1],Tt[3]),Math.max(Et[1],Et[3]));return Qt>Jt?null:[Gt,Qt,Xt,Jt]}static bezierBoundingBox(Tt,Et,Gt,Xt,Qt,Jt,de,ge){const pe=[],ae=[[],[]];let _e,ue,ye,ne,Se,ve,Ce,xe;for(let ke=0;ke<2;++ke){if(ke===0?(ue=6*Tt-12*Gt+6*Qt,_e=-3*Tt+9*Gt-9*Qt+3*de,ye=3*Gt-3*Tt):(ue=6*Et-12*Xt+6*Jt,_e=-3*Et+9*Xt-9*Jt+3*ge,ye=3*Xt-3*Et),Math.abs(_e)<1e-12){if(Math.abs(ue)<1e-12)continue;ne=-ye/ue,0<ne&&ne<1&&pe.push(ne);continue}Ce=ue*ue-4*ye*_e,xe=Math.sqrt(Ce),!(Ce<0)&&(Se=(-ue+xe)/(2*_e),0<Se&&Se<1&&pe.push(Se),ve=(-ue-xe)/(2*_e),0<ve&&ve<1&&pe.push(ve))}let me=pe.length,oe;const be=me;for(;me--;)ne=pe[me],oe=1-ne,ae[0][me]=oe*oe*oe*Tt+3*oe*oe*ne*Gt+3*oe*ne*ne*Qt+ne*ne*ne*de,ae[1][me]=oe*oe*oe*Et+3*oe*oe*ne*Xt+3*oe*ne*ne*Jt+ne*ne*ne*ge;return ae[0][be]=Tt,ae[1][be]=Et,ae[0][be+1]=de,ae[1][be+1]=ge,ae[0].length=ae[1].length=be+2,[Math.min(...ae[0]),Math.min(...ae[1]),Math.max(...ae[0]),Math.max(...ae[1])]}}E.Util=zt;const Vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ut(Mt){if(Mt[0]>="\xEF"){let Et;if(Mt[0]==="\xFE"&&Mt[1]==="\xFF"?Et="utf-16be":Mt[0]==="\xFF"&&Mt[1]==="\xFE"?Et="utf-16le":Mt[0]==="\xEF"&&Mt[1]==="\xBB"&&Mt[2]==="\xBF"&&(Et="utf-8"),Et)try{const Gt=new TextDecoder(Et,{fatal:!0}),Xt=mt(Mt);return Gt.decode(Xt)}catch(Gt){$t(`stringToPDFString: "${Gt}".`)}}const Tt=[];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Vt[Mt.charCodeAt(Et)];Tt.push(Xt?String.fromCharCode(Xt):Mt.charAt(Et))}return Tt.join("")}function se(Mt){return Mt.replace(/([()\\\n\r])/g,Tt=>Tt===`
`?"\\n":Tt==="\r"?"\\r":`\\${Tt}`)}function te(Mt){return/^[\x00-\x7F]*$/.test(Mt)}function Kt(Mt){const Tt=["\xFE\xFF"];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Mt.charCodeAt(Et);Tt.push(String.fromCharCode(Xt>>8&255),String.fromCharCode(Xt&255))}return Tt.join("")}function Zt(Mt){return decodeURIComponent(escape(Mt))}function ie(Mt){return unescape(encodeURIComponent(Mt))}function ce(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.byteLength!==void 0}function re(Mt,Tt){if(Mt.length!==Tt.length)return!1;for(let Et=0,Gt=Mt.length;Et<Gt;Et++)if(Mt[Et]!==Tt[Et])return!1;return!0}function fe(Mt=new Date){return[Mt.getUTCFullYear().toString(),(Mt.getUTCMonth()+1).toString().padStart(2,"0"),Mt.getUTCDate().toString().padStart(2,"0"),Mt.getUTCHours().toString().padStart(2,"0"),Mt.getUTCMinutes().toString().padStart(2,"0"),Mt.getUTCSeconds().toString().padStart(2,"0")].join("")}function ee(){const Mt=Object.create(null);let Tt=!1;return Object.defineProperty(Mt,"settled",{get(){return Tt}}),Mt.promise=new Promise(function(Et,Gt){Mt.resolve=function(Xt){Tt=!0,Et(Xt)},Mt.reject=function(Xt){Tt=!0,Gt(Xt)}}),Mt}},(nt,E,at)=>{at(3)},(nt,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.isNodeJS=void 0;const at=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");E.isNodeJS=at},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var nt,at,D,wt,dt,vt,Ct,bt,it,Te,pt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:et,NodeCMapReaderFactory:B,NodeStandardFontDataFactory:J}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=et,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=B,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=J}let createPDFNetworkStream;function setPDFNetworkStreamFactory(et){createPDFNetworkStream=et}function getDocument(et){const B=new PDFDocumentLoadingTask;let J;if(typeof et=="string"||et instanceof URL)J={url:et};else if((0,_util.isArrayBuffer)(et))J={data:et};else if(et instanceof PDFDataRangeTransport)J={range:et};else{if(typeof et!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!et.url&&!et.data&&!et.range)throw new Error("Invalid parameter object: need either .data, .range or .url");J=et}const G=Object.create(null);let st=null,lt=null;for(const ct in J){const ut=J[ct];switch(ct){case"url":if(typeof window!="undefined")try{G[ct]=new URL(ut,window.location).href;continue}catch(At){(0,_util.warn)(`Cannot create valid URL: "${At}".`)}else if(typeof ut=="string"||ut instanceof URL){G[ct]=ut.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":st=ut;continue;case"worker":lt=ut;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&ut instanceof Buffer)G[ct]=new Uint8Array(ut);else{if(ut instanceof Uint8Array)break;if(typeof ut=="string")G[ct]=(0,_util.stringToBytes)(ut);else if(typeof ut=="object"&&ut!==null&&!isNaN(ut.length))G[ct]=new Uint8Array(ut);else if((0,_util.isArrayBuffer)(ut))G[ct]=new Uint8Array(ut);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}G[ct]=ut}if(G.CMapReaderFactory=G.CMapReaderFactory||DefaultCMapReaderFactory,G.StandardFontDataFactory=G.StandardFontDataFactory||DefaultStandardFontDataFactory,G.ignoreErrors=G.stopAtErrors!==!0,G.fontExtraProperties=G.fontExtraProperties===!0,G.pdfBug=G.pdfBug===!0,G.enableXfa=G.enableXfa===!0,(!Number.isInteger(G.rangeChunkSize)||G.rangeChunkSize<1)&&(G.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof G.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(G.docBaseUrl))&&(G.docBaseUrl=null),(!Number.isInteger(G.maxImageSize)||G.maxImageSize<-1)&&(G.maxImageSize=-1),typeof G.cMapUrl!="string"&&(G.cMapUrl=null),typeof G.standardFontDataUrl!="string"&&(G.standardFontDataUrl=null),typeof G.useWorkerFetch!="boolean"&&(G.useWorkerFetch=G.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&G.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof G.isEvalSupported!="boolean"&&(G.isEvalSupported=!0),typeof G.disableFontFace!="boolean"&&(G.disableFontFace=_is_node.isNodeJS),typeof G.useSystemFonts!="boolean"&&(G.useSystemFonts=!_is_node.isNodeJS&&!G.disableFontFace),(typeof G.ownerDocument!="object"||G.ownerDocument===null)&&(G.ownerDocument=globalThis.document),typeof G.disableRange!="boolean"&&(G.disableRange=!1),typeof G.disableStream!="boolean"&&(G.disableStream=!1),typeof G.disableAutoFetch!="boolean"&&(G.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(G.verbosity),!lt){const ct={verbosity:G.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};lt=ct.port?PDFWorker.fromPort(ct):new PDFWorker(ct),B._worker=lt}const tt=B.docId;return lt.promise.then(function(){if(B.destroyed)throw new Error("Loading aborted");const ct=_fetchDocument(lt,G,st,tt),ut=new Promise(function(At){let kt;st?kt=new _transport_stream.PDFDataTransportStream({length:G.length,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:G.disableRange,disableStream:G.disableStream},st):G.data||(kt=createPDFNetworkStream({url:G.url,length:G.length,httpHeaders:G.httpHeaders,withCredentials:G.withCredentials,rangeChunkSize:G.rangeChunkSize,disableRange:G.disableRange,disableStream:G.disableStream})),At(kt)});return Promise.all([ct,ut]).then(function([At,kt]){if(B.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(tt,At,lt.port),Q=new WorkerTransport(V,B,kt,G);B._transport=Q,V.send("Ready",null)})}).catch(B._capability.reject),B}async function _fetchDocument(et,B,J,G){if(et.destroyed)throw new Error("Worker was destroyed");J&&(B.length=J.length,B.initialData=J.initialData,B.progressiveDone=J.progressiveDone,B.contentDispositionFilename=J.contentDispositionFilename);const st=await et.messageHandler.sendWithPromise("GetDocRequest",{docId:G,apiVersion:"2.14.305",source:{data:B.data,url:B.url,password:B.password,disableAutoFetch:B.disableAutoFetch,rangeChunkSize:B.rangeChunkSize,length:B.length},maxImageSize:B.maxImageSize,disableFontFace:B.disableFontFace,docBaseUrl:B.docBaseUrl,ignoreErrors:B.ignoreErrors,isEvalSupported:B.isEvalSupported,fontExtraProperties:B.fontExtraProperties,enableXfa:B.enableXfa,useSystemFonts:B.useSystemFonts,cMapUrl:B.useWorkerFetch?B.cMapUrl:null,standardFontDataUrl:B.useWorkerFetch?B.standardFontDataUrl:null});if(et.destroyed)throw new Error("Worker was destroyed");return st}const E=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Fe(E,nt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var B;this.destroyed=!0,await((B=this._transport)==null?void 0:B.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=E;nt=new WeakMap,le(PDFDocumentLoadingTask,nt,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(B,J,G=!1,st=null){this.length=B,this.initialData=J,this.progressiveDone=G,this.contentDispositionFilename=st,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(B){this._rangeListeners.push(B)}addProgressListener(B){this._progressListeners.push(B)}addProgressiveReadListener(B){this._progressiveReadListeners.push(B)}addProgressiveDoneListener(B){this._progressiveDoneListeners.push(B)}onDataRange(B,J){for(const G of this._rangeListeners)G(B,J)}onDataProgress(B,J){this._readyCapability.promise.then(()=>{for(const G of this._progressListeners)G(B,J)})}onDataProgressiveRead(B){this._readyCapability.promise.then(()=>{for(const J of this._progressiveReadListeners)J(B)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const B of this._progressiveDoneListeners)B()})}transportReady(){this._readyCapability.resolve()}requestDataRange(B,J){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(B,J){this._pdfInfo=B,this._transport=J,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(B){return this._transport.getPage(B)}getPageIndex(B){return this._transport.getPageIndex(B)}getDestinations(){return this._transport.getDestinations()}getDestination(B){return this._transport.getDestination(B)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(B=!1){return this._transport.startCleanup(B||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(B,J,G,st,lt=!1){this._pageIndex=B,this._pageInfo=J,this._ownerDocument=st,this._transport=G,this._stats=lt?new _display_utils.StatTimer:null,this._pdfBug=lt,this.commonObjs=G.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:B,rotation:J=this.rotate,offsetX:G=0,offsetY:st=0,dontFlip:lt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:B,rotation:J,offsetX:G,offsetY:st,dontFlip:lt})}getAnnotations({intent:B="display"}={}){const J=this._transport.getRenderingIntent(B);let G=this._annotationPromises.get(J.cacheKey);return G||(G=this._transport.getAnnotations(this._pageIndex,J.renderingIntent),this._annotationPromises.set(J.cacheKey,G),G=G.then(st=>{for(const lt of st)lt.titleObj!==void 0&&Object.defineProperty(lt,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),lt.titleObj.str}}),lt.contentsObj!==void 0&&Object.defineProperty(lt,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),lt.contentsObj.str}});return st})),G}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var B;return((B=this._transport._htmlForXfa)==null?void 0:B.children[this._pageIndex])||null}render({canvasContext:B,viewport:J,intent:G="display",annotationMode:st=_util.AnnotationMode.ENABLE,transform:lt=null,imageLayer:tt=null,canvasFactory:ct=null,background:ut=null,optionalContentConfigPromise:At=null,annotationCanvasMap:kt=null,pageColors:V=null}){var $t,Dt;(($t=arguments[0])==null?void 0:$t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&st===_util.AnnotationMode.ENABLE&&(st=_util.AnnotationMode.ENABLE_FORMS)),((Dt=arguments[0])==null?void 0:Dt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&st===_util.AnnotationMode.ENABLE&&(st=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const Q=this._transport.getRenderingIntent(G,st);this.pendingCleanup=!1,At||(At=this._transport.getOptionalContentConfig());let ot=this._intentStates.get(Q.cacheKey);ot||(ot=Object.create(null),this._intentStates.set(Q.cacheKey,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const _t=ct||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ht=!!(Q.renderingIntent&_util.RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=(0,_util.createPromiseCapability)(),ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(Q));const Ft=jt=>{ot.renderTasks.delete(St),(this.cleanupAfterRender||ht)&&(this.pendingCleanup=!0),this._tryCleanup(),jt?(St.capability.reject(jt),this._abortOperatorList({intentState:ot,reason:jt instanceof Error?jt:new Error(jt)})):St.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},St=new InternalRenderTask({callback:Ft,params:{canvasContext:B,viewport:J,transform:lt,imageLayer:tt,background:ut},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:_t,useRequestAnimationFrame:!ht,pdfBug:this._pdfBug,pageColors:V});(ot.renderTasks||(ot.renderTasks=new Set)).add(St);const Lt=St.task;return Promise.all([ot.displayReadyCapability.promise,At]).then(([jt,Nt])=>{if(this.pendingCleanup){Ft();return}this._stats&&this._stats.time("Rendering"),St.initializeGraphics({transparency:jt,optionalContentConfig:Nt}),St.operatorListChanged()}).catch(Ft),Lt}getOperatorList({intent:B="display",annotationMode:J=_util.AnnotationMode.ENABLE}={}){function G(){lt.operatorList.lastChunk&&(lt.opListReadCapability.resolve(lt.operatorList),lt.renderTasks.delete(tt))}const st=this._transport.getRenderingIntent(B,J,!0);let lt=this._intentStates.get(st.cacheKey);lt||(lt=Object.create(null),this._intentStates.set(st.cacheKey,lt));let tt;return lt.opListReadCapability||(tt=Object.create(null),tt.operatorListChanged=G,lt.opListReadCapability=(0,_util.createPromiseCapability)(),(lt.renderTasks||(lt.renderTasks=new Set)).add(tt),lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(st)),lt.opListReadCapability.promise}streamTextContent({disableCombineTextItems:B=!1,includeMarkedContent:J=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:B!==!0,includeMarkedContent:J===!0},{highWaterMark:100,size(st){return st.items.length}})}getTextContent(B={}){if(this._transport._htmlForXfa)return this.getXfa().then(G=>_xfa_text.XfaText.textContent(G));const J=this.streamTextContent(B);return new Promise(function(G,st){function lt(){tt.read().then(function({value:ut,done:At}){if(At){G(ct);return}Object.assign(ct.styles,ut.styles),ct.items.push(...ut.items),lt()},st)}const tt=J.getReader(),ct={items:[],styles:Object.create(null)};lt()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const B=[];for(const J of this._intentStates.values())if(this._abortOperatorList({intentState:J,reason:new Error("Page was destroyed."),force:!0}),!J.opListReadCapability)for(const G of J.renderTasks)B.push(G.completed),G.cancel();this.objs.clear();for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(B)}cleanup(B=!1){return this.pendingCleanup=!0,this._tryCleanup(B)}_tryCleanup(B=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:J,operatorList:G}of this._intentStates.values())if(J.size>0||!G.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,B&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(B,J){const G=this._intentStates.get(J);!G||(this._stats&&this._stats.timeEnd("Page Request"),G.displayReadyCapability&&G.displayReadyCapability.resolve(B))}_renderPageChunk(B,J){for(let G=0,st=B.length;G<st;G++)J.operatorList.fnArray.push(B.fnArray[G]),J.operatorList.argsArray.push(B.argsArray[G]);J.operatorList.lastChunk=B.lastChunk;for(const G of J.renderTasks)G.operatorListChanged();B.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:B,cacheKey:J}){const st=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:B,cacheKey:J,annotationStorage:B&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),lt=this._intentStates.get(J);lt.streamReader=st;const tt=()=>{st.read().then(({value:ct,done:ut})=>{if(ut){lt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ct,lt),tt())},ct=>{if(lt.streamReader=null,!this._transport.destroyed){if(lt.operatorList){lt.operatorList.lastChunk=!0;for(const ut of lt.renderTasks)ut.operatorListChanged();this._tryCleanup()}if(lt.displayReadyCapability)lt.displayReadyCapability.reject(ct);else if(lt.opListReadCapability)lt.opListReadCapability.reject(ct);else throw ct}})};tt()}_abortOperatorList({intentState:B,reason:J,force:G=!1}){if(!!B.streamReader){if(!G){if(B.renderTasks.size>0)return;if(J instanceof _display_utils.RenderingCancelledException){B.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:B,reason:J,force:!0}),B.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(B.streamReader.cancel(new _util.AbortException(J.message)).catch(()=>{}),B.streamReader=null,!this._transport.destroyed){for(const[st,lt]of this._intentStates)if(lt===B){this._intentStates.delete(st);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(B,J){const G={data:structuredClone(B,J)};this._deferred.then(()=>{for(const st of this._listeners)st.call(this,G)})}addEventListener(B,J){this._listeners.push(J)}removeEventListener(B,J){const G=this._listeners.indexOf(J);this._listeners.splice(G,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const et=(at=document==null?void 0:document.currentScript)==null?void 0:at.src;et&&(PDFWorkerUtil.fallbackWorkerSrc=et.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(et,B){let J;try{if(J=new URL(et),!J.origin||J.origin==="null")return!1}catch{return!1}const G=new URL(B,J);return J.origin===G.origin},PDFWorkerUtil.createCDNWrapper=function(et){const B=`importScripts("${et}");`;return URL.createObjectURL(new Blob([B]))}}const _PDFWorker=class{constructor({name:et=null,port:B=null,verbosity:J=(0,_util.getVerbosityLevel)()}={}){if(B&&Yt(_PDFWorker,D).has(B))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=et,this.destroyed=!1,this.verbosity=J,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,B){Yt(_PDFWorker,D).set(B,this),this._initializeFromPort(B);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(et){this._port=et,this._messageHandler=new _message_handler.MessageHandler("main","worker",et),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let et=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,et)||(et=PDFWorkerUtil.createCDNWrapper(new URL(et,window.location).href));const B=new Worker(et),J=new _message_handler.MessageHandler("main","worker",B),G=()=>{B.removeEventListener("error",st),J.destroy(),B.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},st=()=>{this._webWorker||G()};B.addEventListener("error",st),J.on("test",tt=>{if(B.removeEventListener("error",st),this.destroyed){G();return}tt?(this._messageHandler=J,this._port=B,this._webWorker=B,this._readyCapability.resolve(),J.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),J.destroy(),B.terminate())}),J.on("ready",tt=>{if(B.removeEventListener("error",st),this.destroyed){G();return}try{lt()}catch{this._setupFakeWorker()}});const lt=()=>{const tt=new Uint8Array;J.send("test",tt,[tt.buffer])};lt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(et=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const B=new LoopbackPort;this._port=B;const J=`fake${PDFWorkerUtil.fakeWorkerId++}`,G=new _message_handler.MessageHandler(J+"_worker",J,B);et.setup(G,B);const st=new _message_handler.MessageHandler(J,J+"_worker",B);this._messageHandler=st,this._readyCapability.resolve(),st.send("configure",{verbosity:this.verbosity})}).catch(et=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${et.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Yt(_PDFWorker,D).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(et){if(!(et!=null&&et.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt(this,D).has(et.port)?Yt(this,D).get(et.port):new _PDFWorker(et)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var et;try{return((et=globalThis.pdfjsWorker)==null?void 0:et.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;D=new WeakMap,le(PDFWorker,D,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(B,J,G,st){le(this,wt,null);le(this,dt,new Map);le(this,vt,new Map);le(this,Ct,null);this.messageHandler=B,this.loadingTask=J,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:J.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:st.ownerDocument,styleElement:st.styleElement}),this._params=st,st.useWorkerFetch||(this.CMapReaderFactory=new st.CMapReaderFactory({baseUrl:st.cMapUrl,isCompressed:st.cMapPacked}),this.StandardFontDataFactory=new st.StandardFontDataFactory({baseUrl:st.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=G,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Yt(this,wt)}getRenderingIntent(B,J=_util.AnnotationMode.ENABLE,G=!1){let st=_util.RenderingIntentFlag.DISPLAY,lt="";switch(B){case"any":st=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":st=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${B}`)}switch(J){case _util.AnnotationMode.DISABLE:st+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:st+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:st+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,lt=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${J}`)}return G&&(st+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:st,cacheKey:`${st}_${lt}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const B=[];for(const G of Yt(this,dt).values())B.push(G._destroy());Yt(this,dt).clear(),Yt(this,vt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const J=this.messageHandler.sendWithPromise("Terminate",null);return B.push(J),Promise.all(B).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),he(this,Ct,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:B,loadingTask:J}=this;B.on("GetReader",(G,st)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=lt=>{this._lastProgress={loaded:lt.loaded,total:lt.total}},st.onPull=()=>{this._fullReader.read().then(function({value:lt,done:tt}){if(tt){st.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(lt),"GetReader - expected an ArrayBuffer."),st.enqueue(new Uint8Array(lt),1,[lt])}).catch(lt=>{st.error(lt)})},st.onCancel=lt=>{this._fullReader.cancel(lt),st.ready.catch(tt=>{if(!this.destroyed)throw tt})}}),B.on("ReaderHeadersReady",G=>{const st=(0,_util.createPromiseCapability)(),lt=this._fullReader;return lt.headersReady.then(()=>{var tt;(!lt.isStreamingSupported||!lt.isRangeSupported)&&(this._lastProgress&&((tt=J.onProgress)==null||tt.call(J,this._lastProgress)),lt.onProgress=ct=>{var ut;(ut=J.onProgress)==null||ut.call(J,{loaded:ct.loaded,total:ct.total})}),st.resolve({isStreamingSupported:lt.isStreamingSupported,isRangeSupported:lt.isRangeSupported,contentLength:lt.contentLength})},st.reject),st.promise}),B.on("GetRangeReader",(G,st)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const lt=this._networkStream.getRangeReader(G.begin,G.end);if(!lt){st.close();return}st.onPull=()=>{lt.read().then(function({value:tt,done:ct}){if(ct){st.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(tt),"GetRangeReader - expected an ArrayBuffer."),st.enqueue(new Uint8Array(tt),1,[tt])}).catch(tt=>{st.error(tt)})},st.onCancel=tt=>{lt.cancel(tt),st.ready.catch(ct=>{if(!this.destroyed)throw ct})}}),B.on("GetDoc",({pdfInfo:G})=>{this._numPages=G.numPages,this._htmlForXfa=G.htmlForXfa,delete G.htmlForXfa,J._capability.resolve(new PDFDocumentProxy(G,this))}),B.on("DocException",function(G){let st;switch(G.name){case"PasswordException":st=new _util.PasswordException(G.message,G.code);break;case"InvalidPDFException":st=new _util.InvalidPDFException(G.message);break;case"MissingPDFException":st=new _util.MissingPDFException(G.message);break;case"UnexpectedResponseException":st=new _util.UnexpectedResponseException(G.message,G.status);break;case"UnknownErrorException":st=new _util.UnknownErrorException(G.message,G.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}J._capability.reject(st)}),B.on("PasswordRequest",G=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),J.onPassword){const st=lt=>{lt instanceof Error?this._passwordCapability.reject(lt):this._passwordCapability.resolve({password:lt})};try{J.onPassword(st,G.code)}catch(lt){this._passwordCapability.reject(lt)}}else this._passwordCapability.reject(new _util.PasswordException(G.message,G.code));return this._passwordCapability.promise}),B.on("DataLoaded",G=>{var st;(st=J.onProgress)==null||st.call(J,{loaded:G.length,total:G.length}),this.downloadInfoCapability.resolve(G)}),B.on("StartRenderPage",G=>{if(this.destroyed)return;Yt(this,dt).get(G.pageIndex)._startRenderPage(G.transparency,G.cacheKey)}),B.on("commonobj",([G,st,lt])=>{var tt;if(!this.destroyed&&!this.commonObjs.has(G))switch(st){case"Font":const ct=this._params;if("error"in lt){const kt=lt.error;(0,_util.warn)(`Error during font loading: ${kt}`),this.commonObjs.resolve(G,kt);break}let ut=null;ct.pdfBug&&((tt=globalThis.FontInspector)==null?void 0:tt.enabled)&&(ut={registerFont(kt,V){globalThis.FontInspector.fontAdded(kt,V)}});const At=new _font_loader.FontFaceObject(lt,{isEvalSupported:ct.isEvalSupported,disableFontFace:ct.disableFontFace,ignoreErrors:ct.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:ut});this.fontLoader.bind(At).catch(kt=>B.sendWithPromise("FontFallback",{id:G})).finally(()=>{!ct.fontExtraProperties&&At.data&&(At.data=null),this.commonObjs.resolve(G,At)});break;case"FontPath":case"Image":this.commonObjs.resolve(G,lt);break;default:throw new Error(`Got unknown common object type ${st}`)}}),B.on("obj",([G,st,lt,tt])=>{var ut;if(this.destroyed)return;const ct=Yt(this,dt).get(st);if(!ct.objs.has(G))switch(lt){case"Image":ct.objs.resolve(G,tt);const At=8e6;if(tt){let kt;if(tt.bitmap){const{bitmap:V,width:Q,height:ot}=tt;kt=Q*ot*4,ct._bitmaps.add(V)}else kt=((ut=tt.data)==null?void 0:ut.length)||0;kt>At&&(ct.cleanupAfterRender=!0)}break;case"Pattern":ct.objs.resolve(G,tt);break;default:throw new Error(`Got unknown object type ${lt}`)}}),B.on("DocProgress",G=>{var st;this.destroyed||(st=J.onProgress)==null||st.call(J,{loaded:G.loaded,total:G.total})}),B.on("DocStats",G=>{this.destroyed||he(this,wt,Object.freeze({streamTypes:Object.freeze(G.streamTypes),fontTypes:Object.freeze(G.fontTypes)}))}),B.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),B.on("FetchBuiltInCMap",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(G):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),B.on("FetchStandardFontData",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(G):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:B}){var J,G;this.destroyed||(G=(J=this.loadingTask).onUnsupportedFeature)==null||G.call(J,B)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(B){if(!Number.isInteger(B)||B<=0||B>this._numPages)return Promise.reject(new Error("Invalid page request."));const J=B-1,G=Yt(this,vt).get(J);if(G)return G;const st=this.messageHandler.sendWithPromise("GetPage",{pageIndex:J}).then(lt=>{if(this.destroyed)throw new Error("Transport destroyed");const tt=new PDFPageProxy(J,lt,this,this._params.ownerDocument,this._params.pdfBug);return Yt(this,dt).set(J,tt),tt});return Yt(this,vt).set(J,st),st}getPageIndex(B){return typeof B!="object"||B===null||!Number.isInteger(B.num)||B.num<0||!Number.isInteger(B.gen)||B.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:B.num,gen:B.gen})}getAnnotations(B,J){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:B,intent:J})}saveDocument(){var B,J;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(J=(B=this._fullReader)==null?void 0:B.filename)!=null?J:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(B){return typeof B!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:B})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(B){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:B})}getStructTree(B){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:B})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(B=>new _optional_content_config.OptionalContentConfig(B))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Yt(this,Ct)||he(this,Ct,this.messageHandler.sendWithPromise("GetMetadata",null).then(B=>{var J,G,st,lt;return{info:B[0],metadata:B[1]?new _metadata.Metadata(B[1]):null,contentDispositionFilename:(G=(J=this._fullReader)==null?void 0:J.filename)!=null?G:null,contentLength:(lt=(st=this._fullReader)==null?void 0:st.contentLength)!=null?lt:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(B=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const J of Yt(this,dt).values())if(!J.cleanup())throw new Error(`startCleanup: Page ${J.pageNumber} is currently rendering.`);this.commonObjs.clear(),B||this.fontLoader.clear(),he(this,Ct,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const B=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:B.disableAutoFetch,enableXfa:B.enableXfa})}}wt=new WeakMap,dt=new WeakMap,vt=new WeakMap,Ct=new WeakMap;class PDFObjects{constructor(){le(this,it);le(this,bt,Object.create(null))}get(B,J=null){if(J){const st=Ae(this,it,Te).call(this,B);return st.capability.promise.then(()=>J(st.data)),null}const G=Yt(this,bt)[B];if(!(G!=null&&G.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${B}.`);return G.data}has(B){const J=Yt(this,bt)[B];return(J==null?void 0:J.capability.settled)||!1}resolve(B,J=null){const G=Ae(this,it,Te).call(this,B);G.data=J,G.capability.resolve()}clear(){he(this,bt,Object.create(null))}}bt=new WeakMap,it=new WeakSet,Te=function(B){const J=Yt(this,bt)[B];return J||(Yt(this,bt)[B]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(B){this._internalRenderTask=B,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const gt=class{constructor({callback:B,params:J,objs:G,commonObjs:st,annotationCanvasMap:lt,operatorList:tt,pageIndex:ct,canvasFactory:ut,useRequestAnimationFrame:At=!1,pdfBug:kt=!1,pageColors:V=null}){this.callback=B,this.params=J,this.objs=G,this.commonObjs=st,this.annotationCanvasMap=lt,this.operatorListIdx=null,this.operatorList=tt,this._pageIndex=ct,this.canvasFactory=ut,this._pdfBug=kt,this.pageColors=V,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=At===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=J.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:B=!1,optionalContentConfig:J}){var ut;if(this.cancelled)return;if(this._canvas){if(Yt(gt,pt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Yt(gt,pt).add(this._canvas)}this._pdfBug&&((ut=globalThis.StepperManager)==null?void 0:ut.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:G,viewport:st,transform:lt,imageLayer:tt,background:ct}=this.params;this.gfx=new _canvas.CanvasGraphics(G,this.commonObjs,this.objs,this.canvasFactory,tt,J,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:lt,viewport:st,transparency:B,background:ct}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(B=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Yt(gt,pt).delete(this._canvas),this.callback(B||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Yt(gt,pt).delete(this._canvas),this.callback())))}};let InternalRenderTask=gt;pt=new WeakMap,le(InternalRenderTask,pt,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.StatTimer=E.RenderingCancelledException=E.PixelsPerInch=E.PageViewport=E.PDFDateString=E.DOMStandardFontDataFactory=E.DOMSVGFactory=E.DOMCanvasFactory=E.DOMCMapReaderFactory=void 0,E.deprecated=ut,E.getFilenameFromUrl=G,E.getPdfFilenameFromUrl=st,E.getXfaPageViewport=V,E.isDataScheme=B,E.isPdfFile=J,E.isValidFetchUrl=tt,E.loadScript=ct;var D=at(6),wt=at(1);const dt="http://www.w3.org/2000/svg",Q=class{};let vt=Q;we(vt,"CSS",96),we(vt,"PDF",72),we(vt,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF),E.PixelsPerInch=vt;class Ct extends D.BaseCanvasFactory{constructor({ownerDocument:_t=globalThis.document}={}){super(),this._document=_t}_createCanvas(_t,ht){const Ft=this._document.createElement("canvas");return Ft.width=_t,Ft.height=ht,Ft}}E.DOMCanvasFactory=Ct;async function bt(ot,_t=!1){if(tt(ot,document.baseURI)){const ht=await fetch(ot);if(!ht.ok)throw new Error(ht.statusText);return _t?new Uint8Array(await ht.arrayBuffer()):(0,wt.stringToBytes)(await ht.text())}return new Promise((ht,Ft)=>{const St=new XMLHttpRequest;St.open("GET",ot,!0),_t&&(St.responseType="arraybuffer"),St.onreadystatechange=()=>{if(St.readyState===XMLHttpRequest.DONE){if(St.status===200||St.status===0){let Lt;if(_t&&St.response?Lt=new Uint8Array(St.response):!_t&&St.responseText&&(Lt=(0,wt.stringToBytes)(St.responseText)),Lt){ht(Lt);return}}Ft(new Error(St.statusText))}},St.send(null)})}class it extends D.BaseCMapReaderFactory{_fetchData(_t,ht){return bt(_t,this.isCompressed).then(Ft=>({cMapData:Ft,compressionType:ht}))}}E.DOMCMapReaderFactory=it;class Y extends D.BaseStandardFontDataFactory{_fetchData(_t){return bt(_t,!0)}}E.DOMStandardFontDataFactory=Y;class pt extends D.BaseSVGFactory{_createSVG(_t){return document.createElementNS(dt,_t)}}E.DOMSVGFactory=pt;class gt{constructor({viewBox:_t,scale:ht,rotation:Ft,offsetX:St=0,offsetY:Lt=0,dontFlip:$t=!1}){this.viewBox=_t,this.scale=ht,this.rotation=Ft,this.offsetX=St,this.offsetY=Lt;const Dt=(_t[2]+_t[0])/2,jt=(_t[3]+_t[1])/2;let Nt,qt,rt,W;switch(Ft%=360,Ft<0&&(Ft+=360),Ft){case 180:Nt=-1,qt=0,rt=0,W=1;break;case 90:Nt=0,qt=1,rt=1,W=0;break;case 270:Nt=0,qt=-1,rt=-1,W=0;break;case 0:Nt=1,qt=0,rt=0,W=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}$t&&(rt=-rt,W=-W);let U,Z,A,R;Nt===0?(U=Math.abs(jt-_t[1])*ht+St,Z=Math.abs(Dt-_t[0])*ht+Lt,A=Math.abs(_t[3]-_t[1])*ht,R=Math.abs(_t[2]-_t[0])*ht):(U=Math.abs(Dt-_t[0])*ht+St,Z=Math.abs(jt-_t[1])*ht+Lt,A=Math.abs(_t[2]-_t[0])*ht,R=Math.abs(_t[3]-_t[1])*ht),this.transform=[Nt*ht,qt*ht,rt*ht,W*ht,U-Nt*ht*Dt-rt*ht*jt,Z-qt*ht*Dt-W*ht*jt],this.width=A,this.height=R}clone({scale:_t=this.scale,rotation:ht=this.rotation,offsetX:Ft=this.offsetX,offsetY:St=this.offsetY,dontFlip:Lt=!1}={}){return new gt({viewBox:this.viewBox.slice(),scale:_t,rotation:ht,offsetX:Ft,offsetY:St,dontFlip:Lt})}convertToViewportPoint(_t,ht){return wt.Util.applyTransform([_t,ht],this.transform)}convertToViewportRectangle(_t){const ht=wt.Util.applyTransform([_t[0],_t[1]],this.transform),Ft=wt.Util.applyTransform([_t[2],_t[3]],this.transform);return[ht[0],ht[1],Ft[0],Ft[1]]}convertToPdfPoint(_t,ht){return wt.Util.applyInverseTransform([_t,ht],this.transform)}}E.PageViewport=gt;class et extends wt.BaseException{constructor(_t,ht){super(_t,"RenderingCancelledException"),this.type=ht}}E.RenderingCancelledException=et;function B(ot){const _t=ot.length;let ht=0;for(;ht<_t&&ot[ht].trim()==="";)ht++;return ot.substring(ht,ht+5).toLowerCase()==="data:"}function J(ot){return typeof ot=="string"&&/\.pdf$/i.test(ot)}function G(ot){const _t=ot.indexOf("#"),ht=ot.indexOf("?"),Ft=Math.min(_t>0?_t:ot.length,ht>0?ht:ot.length);return ot.substring(ot.lastIndexOf("/",Ft)+1,Ft)}function st(ot,_t="document.pdf"){if(typeof ot!="string")return _t;if(B(ot))return(0,wt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),_t;const ht=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,St=ht.exec(ot);let Lt=Ft.exec(St[1])||Ft.exec(St[2])||Ft.exec(St[3]);if(Lt&&(Lt=Lt[0],Lt.includes("%")))try{Lt=Ft.exec(decodeURIComponent(Lt))[0]}catch{}return Lt||_t}class lt{constructor(){this.started=Object.create(null),this.times=[]}time(_t){_t in this.started&&(0,wt.warn)(`Timer is already running for ${_t}`),this.started[_t]=Date.now()}timeEnd(_t){_t in this.started||(0,wt.warn)(`Timer has not been started for ${_t}`),this.times.push({name:_t,start:this.started[_t],end:Date.now()}),delete this.started[_t]}toString(){const _t=[];let ht=0;for(const Ft of this.times){const St=Ft.name;St.length>ht&&(ht=St.length)}for(const Ft of this.times){const St=Ft.end-Ft.start;_t.push(`${Ft.name.padEnd(ht)} ${St}ms
`)}return _t.join("")}}E.StatTimer=lt;function tt(ot,_t){try{const{protocol:ht}=_t?new URL(ot,_t):new URL(ot);return ht==="http:"||ht==="https:"}catch{return!1}}function ct(ot,_t=!1){return new Promise((ht,Ft)=>{const St=document.createElement("script");St.src=ot,St.onload=function(Lt){_t&&St.remove(),ht(Lt)},St.onerror=function(){Ft(new Error(`Cannot load script at: ${St.src}`))},(document.head||document.documentElement).appendChild(St)})}function ut(ot){console.log("Deprecated API usage: "+ot)}let At;class kt{static toDateObject(_t){if(!_t||typeof _t!="string")return null;At||(At=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ht=At.exec(_t);if(!ht)return null;const Ft=parseInt(ht[1],10);let St=parseInt(ht[2],10);St=St>=1&&St<=12?St-1:0;let Lt=parseInt(ht[3],10);Lt=Lt>=1&&Lt<=31?Lt:1;let $t=parseInt(ht[4],10);$t=$t>=0&&$t<=23?$t:0;let Dt=parseInt(ht[5],10);Dt=Dt>=0&&Dt<=59?Dt:0;let jt=parseInt(ht[6],10);jt=jt>=0&&jt<=59?jt:0;const Nt=ht[7]||"Z";let qt=parseInt(ht[8],10);qt=qt>=0&&qt<=23?qt:0;let rt=parseInt(ht[9],10)||0;return rt=rt>=0&&rt<=59?rt:0,Nt==="-"?($t+=qt,Dt+=rt):Nt==="+"&&($t-=qt,Dt-=rt),new Date(Date.UTC(Ft,St,Lt,$t,Dt,jt))}}E.PDFDateString=kt;function V(ot,{scale:_t=1,rotation:ht=0}){const{width:Ft,height:St}=ot.attributes.style,Lt=[0,0,parseInt(Ft),parseInt(St)];return new gt({viewBox:Lt,scale:_t,rotation:ht})}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.BaseStandardFontDataFactory=E.BaseSVGFactory=E.BaseCanvasFactory=E.BaseCMapReaderFactory=void 0;var D=at(1);class wt{constructor(){this.constructor===wt&&(0,D.unreachable)("Cannot initialize BaseCanvasFactory.")}create(it,Y){if(it<=0||Y<=0)throw new Error("Invalid canvas size");const pt=this._createCanvas(it,Y);return{canvas:pt,context:pt.getContext("2d")}}reset(it,Y,pt){if(!it.canvas)throw new Error("Canvas is not specified");if(Y<=0||pt<=0)throw new Error("Invalid canvas size");it.canvas.width=Y,it.canvas.height=pt}destroy(it){if(!it.canvas)throw new Error("Canvas is not specified");it.canvas.width=0,it.canvas.height=0,it.canvas=null,it.context=null}_createCanvas(it,Y){(0,D.unreachable)("Abstract method `_createCanvas` called.")}}E.BaseCanvasFactory=wt;class dt{constructor({baseUrl:it=null,isCompressed:Y=!1}){this.constructor===dt&&(0,D.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=it,this.isCompressed=Y}async fetch({name:it}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!it)throw new Error("CMap name must be specified.");const Y=this.baseUrl+it+(this.isCompressed?".bcmap":""),pt=this.isCompressed?D.CMapCompressionType.BINARY:D.CMapCompressionType.NONE;return this._fetchData(Y,pt).catch(gt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Y}`)})}_fetchData(it,Y){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseCMapReaderFactory=dt;class vt{constructor({baseUrl:it=null}){this.constructor===vt&&(0,D.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=it}async fetch({filename:it}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!it)throw new Error("Font filename must be specified.");const Y=`${this.baseUrl}${it}`;return this._fetchData(Y).catch(pt=>{throw new Error(`Unable to load font data at: ${Y}`)})}_fetchData(it){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseStandardFontDataFactory=vt;class Ct{constructor(){this.constructor===Ct&&(0,D.unreachable)("Cannot initialize BaseSVGFactory.")}create(it,Y){if(it<=0||Y<=0)throw new Error("Invalid SVG dimensions");const pt=this._createSVG("svg:svg");return pt.setAttribute("version","1.1"),pt.setAttribute("width",`${it}px`),pt.setAttribute("height",`${Y}px`),pt.setAttribute("preserveAspectRatio","none"),pt.setAttribute("viewBox",`0 0 ${it} ${Y}`),pt}createElement(it){if(typeof it!="string")throw new Error("Invalid SVG element type");return this._createSVG(it)}_createSVG(it){(0,D.unreachable)("Abstract method `_createSVG` called.")}}E.BaseSVGFactory=Ct},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.FontLoader=E.FontFaceObject=void 0;var D=at(1);class wt{constructor({docId:bt,onUnsupportedFeature:it,ownerDocument:Y=globalThis.document,styleElement:pt=null}){this.constructor===wt&&(0,D.unreachable)("Cannot initialize BaseFontLoader."),this.docId=bt,this._onUnsupportedFeature=it,this._document=Y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(bt){this.nativeFontFaces.push(bt),this._document.fonts.add(bt)}insertRule(bt){let it=this.styleElement;it||(it=this.styleElement=this._document.createElement("style"),it.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(it));const Y=it.sheet;Y.insertRule(bt,Y.cssRules.length)}clear(){for(const bt of this.nativeFontFaces)this._document.fonts.delete(bt);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(bt){if(bt.attached||bt.missingFile)return;if(bt.attached=!0,this.isFontLoadingAPISupported){const Y=bt.createNativeFontFace();if(Y){this.addNativeFontFace(Y);try{await Y.loaded}catch(pt){throw this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,D.warn)(`Failed to load font '${Y.family}': '${pt}'.`),bt.disableFontFace=!0,pt}}return}const it=bt.createFontFaceRule();if(it){if(this.insertRule(it),this.isSyncFontLoadingSupported)return;await new Promise(Y=>{const pt=this._queueLoadingCallback(Y);this._prepareFontLoadEvent([it],[bt],pt)})}}_queueLoadingCallback(bt){(0,D.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var it;const bt=!!((it=this._document)!=null&&it.fonts);return(0,D.shadow)(this,"isFontLoadingAPISupported",bt)}get isSyncFontLoadingSupported(){(0,D.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,D.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(bt,it,Y){(0,D.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let dt;E.FontLoader=dt,E.FontLoader=dt=class extends wt{constructor(bt){super(bt),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let bt=!1;if(typeof navigator=="undefined")bt=!0;else{const it=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(it==null?void 0:it[1])>=14&&(bt=!0)}return(0,D.shadow)(this,"isSyncFontLoadingSupported",bt)}_queueLoadingCallback(bt){function it(){for((0,D.assert)(!pt.done,"completeRequest() cannot be called twice."),pt.done=!0;Y.requests.length>0&&Y.requests[0].done;){const gt=Y.requests.shift();setTimeout(gt.callback,0)}}const Y=this.loadingContext,pt={id:`pdfjs-font-loading-${Y.nextRequestId++}`,done:!1,complete:it,callback:bt};return Y.requests.push(pt),pt}get _loadTestFont(){const bt=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,D.shadow)(this,"_loadTestFont",bt())}_prepareFontLoadEvent(bt,it,Y){function pt(Ft,St){return Ft.charCodeAt(St)<<24|Ft.charCodeAt(St+1)<<16|Ft.charCodeAt(St+2)<<8|Ft.charCodeAt(St+3)&255}function gt(Ft,St,Lt,$t){const Dt=Ft.substring(0,St),jt=Ft.substring(St+Lt);return Dt+$t+jt}let et,B;const J=this._document.createElement("canvas");J.width=1,J.height=1;const G=J.getContext("2d");let st=0;function lt(Ft,St){if(st++,st>30){(0,D.warn)("Load test font never loaded."),St();return}if(G.font="30px "+Ft,G.fillText(".",0,20),G.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(lt.bind(null,Ft,St))}const tt=`lt${Date.now()}${this.loadTestFontId++}`;let ct=this._loadTestFont;ct=gt(ct,976,tt.length,tt);const At=16,kt=1482184792;let V=pt(ct,At);for(et=0,B=tt.length-3;et<B;et+=4)V=V-kt+pt(tt,et)|0;et<tt.length&&(V=V-kt+pt(tt+"XXX",et)|0),ct=gt(ct,At,4,(0,D.string32)(V));const Q=`url(data:font/opentype;base64,${btoa(ct)});`,ot=`@font-face {font-family:"${tt}";src:${Q}}`;this.insertRule(ot);const _t=[];for(const Ft of it)_t.push(Ft.loadedName);_t.push(tt);const ht=this._document.createElement("div");ht.style.visibility="hidden",ht.style.width=ht.style.height="10px",ht.style.position="absolute",ht.style.top=ht.style.left="0px";for(const Ft of _t){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Ft,ht.appendChild(St)}this._document.body.appendChild(ht),lt(tt,()=>{ht.remove(),Y.complete()})}};class vt{constructor(bt,{isEvalSupported:it=!0,disableFontFace:Y=!1,ignoreErrors:pt=!1,onUnsupportedFeature:gt,fontRegistry:et=null}){this.compiledGlyphs=Object.create(null);for(const B in bt)this[B]=bt[B];this.isEvalSupported=it!==!1,this.disableFontFace=Y===!0,this.ignoreErrors=pt===!0,this._onUnsupportedFeature=gt,this.fontRegistry=et}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let bt;if(!this.cssFontInfo)bt=new FontFace(this.loadedName,this.data,{});else{const it={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(it.style=`oblique ${this.cssFontInfo.italicAngle}deg`),bt=new FontFace(this.cssFontInfo.fontFamily,this.data,it)}return this.fontRegistry&&this.fontRegistry.registerFont(this),bt}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const bt=(0,D.bytesToString)(this.data),it=`url(data:${this.mimetype};base64,${btoa(bt)});`;let Y;if(!this.cssFontInfo)Y=`@font-face {font-family:"${this.loadedName}";src:${it}}`;else{let pt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(pt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${pt}src:${it}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,it),Y}getPathGenerator(bt,it){if(this.compiledGlyphs[it]!==void 0)return this.compiledGlyphs[it];let Y;try{Y=bt.get(this.loadedName+"_path_"+it)}catch(pt){if(!this.ignoreErrors)throw pt;return this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,D.warn)(`getPathGenerator - ignoring character: "${pt}".`),this.compiledGlyphs[it]=function(gt,et){}}if(this.isEvalSupported&&D.FeatureTest.isEvalSupported){const pt=[];for(const gt of Y){const et=gt.args!==void 0?gt.args.join(","):"";pt.push("c.",gt.cmd,"(",et,`);
`)}return this.compiledGlyphs[it]=new Function("c","size",pt.join(""))}return this.compiledGlyphs[it]=function(pt,gt){for(const et of Y)et.cmd==="scale"&&(et.args=[gt,-gt]),pt[et.cmd].apply(pt,et.args)}}}E.FontFaceObject=vt},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationStorage=void 0;var D=at(9),wt=at(1);class dt{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(Ct,bt){const it=this._storage.get(Ct);return it===void 0?bt:Object.assign(bt,it)}getRawValue(Ct){return this._storage.get(Ct)}setValue(Ct,bt){const it=this._storage.get(Ct);let Y=!1;if(it!==void 0)for(const[pt,gt]of Object.entries(bt))it[pt]!==gt&&(Y=!0,it[pt]=gt);else Y=!0,this._storage.set(Ct,bt);Y&&this._setModified()}getAll(){return this._storage.size>0?(0,wt.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const Ct=new D.MurmurHash3_64;for(const[bt,it]of this._storage)Ct.update(`${bt}:${JSON.stringify(it)}`);return Ct.hexdigest()}}E.AnnotationStorage=dt},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MurmurHash3_64=void 0;var D=at(1);const wt=3285377520,dt=4294901760,vt=65535;class Ct{constructor(it){this.h1=it?it&4294967295:wt,this.h2=it?it&4294967295:wt}update(it){let Y,pt;if(typeof it=="string"){Y=new Uint8Array(it.length*2),pt=0;for(let kt=0,V=it.length;kt<V;kt++){const Q=it.charCodeAt(kt);Q<=255?Y[pt++]=Q:(Y[pt++]=Q>>>8,Y[pt++]=Q&255)}}else if((0,D.isArrayBuffer)(it))Y=it.slice(),pt=Y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const gt=pt>>2,et=pt-gt*4,B=new Uint32Array(Y.buffer,0,gt);let J=0,G=0,st=this.h1,lt=this.h2;const tt=3432918353,ct=461845907,ut=tt&vt,At=ct&vt;for(let kt=0;kt<gt;kt++)kt&1?(J=B[kt],J=J*tt&dt|J*ut&vt,J=J<<15|J>>>17,J=J*ct&dt|J*At&vt,st^=J,st=st<<13|st>>>19,st=st*5+3864292196):(G=B[kt],G=G*tt&dt|G*ut&vt,G=G<<15|G>>>17,G=G*ct&dt|G*At&vt,lt^=G,lt=lt<<13|lt>>>19,lt=lt*5+3864292196);switch(J=0,et){case 3:J^=Y[gt*4+2]<<16;case 2:J^=Y[gt*4+1]<<8;case 1:J^=Y[gt*4],J=J*tt&dt|J*ut&vt,J=J<<15|J>>>17,J=J*ct&dt|J*At&vt,gt&1?st^=J:lt^=J}this.h1=st,this.h2=lt}hexdigest(){let it=this.h1,Y=this.h2;it^=Y>>>1,it=it*3981806797&dt|it*36045&vt,Y=Y*4283543511&dt|((Y<<16|it>>>16)*2950163797&dt)>>>16,it^=Y>>>1,it=it*444984403&dt|it*60499&vt,Y=Y*3301882366&dt|((Y<<16|it>>>16)*3120437893&dt)>>>16,it^=Y>>>1;const pt=(it>>>0).toString(16),gt=(Y>>>0).toString(16);return pt.padStart(8,"0")+gt.padStart(8,"0")}}E.MurmurHash3_64=Ct},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.CanvasGraphics=void 0;var D=at(1),wt=at(11),dt=at(12),vt=at(3),Ct=at(5);const bt=16,it=100,Y=4096,pt=15,gt=10,et=1e3,B=16,J=1.000001;function G(rt,W){if(rt._removeMirroring)throw new Error("Context is already forwarding operations.");rt.__originalSave=rt.save,rt.__originalRestore=rt.restore,rt.__originalRotate=rt.rotate,rt.__originalScale=rt.scale,rt.__originalTranslate=rt.translate,rt.__originalTransform=rt.transform,rt.__originalSetTransform=rt.setTransform,rt.__originalResetTransform=rt.resetTransform,rt.__originalClip=rt.clip,rt.__originalMoveTo=rt.moveTo,rt.__originalLineTo=rt.lineTo,rt.__originalBezierCurveTo=rt.bezierCurveTo,rt.__originalRect=rt.rect,rt.__originalClosePath=rt.closePath,rt.__originalBeginPath=rt.beginPath,rt._removeMirroring=()=>{rt.save=rt.__originalSave,rt.restore=rt.__originalRestore,rt.rotate=rt.__originalRotate,rt.scale=rt.__originalScale,rt.translate=rt.__originalTranslate,rt.transform=rt.__originalTransform,rt.setTransform=rt.__originalSetTransform,rt.resetTransform=rt.__originalResetTransform,rt.clip=rt.__originalClip,rt.moveTo=rt.__originalMoveTo,rt.lineTo=rt.__originalLineTo,rt.bezierCurveTo=rt.__originalBezierCurveTo,rt.rect=rt.__originalRect,rt.closePath=rt.__originalClosePath,rt.beginPath=rt.__originalBeginPath,delete rt._removeMirroring},rt.save=function(){W.save(),this.__originalSave()},rt.restore=function(){W.restore(),this.__originalRestore()},rt.translate=function(Z,A){W.translate(Z,A),this.__originalTranslate(Z,A)},rt.scale=function(Z,A){W.scale(Z,A),this.__originalScale(Z,A)},rt.transform=function(Z,A,R,q,K,X){W.transform(Z,A,R,q,K,X),this.__originalTransform(Z,A,R,q,K,X)},rt.setTransform=function(Z,A,R,q,K,X){W.setTransform(Z,A,R,q,K,X),this.__originalSetTransform(Z,A,R,q,K,X)},rt.resetTransform=function(){W.resetTransform(),this.__originalResetTransform()},rt.rotate=function(Z){W.rotate(Z),this.__originalRotate(Z)},rt.clip=function(Z){W.clip(Z),this.__originalClip(Z)},rt.moveTo=function(U,Z){W.moveTo(U,Z),this.__originalMoveTo(U,Z)},rt.lineTo=function(U,Z){W.lineTo(U,Z),this.__originalLineTo(U,Z)},rt.bezierCurveTo=function(U,Z,A,R,q,K){W.bezierCurveTo(U,Z,A,R,q,K),this.__originalBezierCurveTo(U,Z,A,R,q,K)},rt.rect=function(U,Z,A,R){W.rect(U,Z,A,R),this.__originalRect(U,Z,A,R)},rt.closePath=function(){W.closePath(),this.__originalClosePath()},rt.beginPath=function(){W.beginPath(),this.__originalBeginPath()}}function st(rt){if(rt._transformStack&&(rt._transformStack=[]),!rt.mozCurrentTransform){rt._originalSave=rt.save,rt._originalRestore=rt.restore,rt._originalRotate=rt.rotate,rt._originalScale=rt.scale,rt._originalTranslate=rt.translate,rt._originalTransform=rt.transform,rt._originalSetTransform=rt.setTransform,rt._originalResetTransform=rt.resetTransform,rt._transformMatrix=rt._transformMatrix||[1,0,0,1,0,0],rt._transformStack=[];try{const W=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(rt),"lineWidth");rt._setLineWidth=W.set,rt._getLineWidth=W.get,Object.defineProperty(rt,"lineWidth",{set:function(Z){this._setLineWidth(Z*J)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(rt,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(rt,"mozCurrentTransformInverse",{get:function(){const[U,Z,A,R,q,K]=this._transformMatrix,X=U*R-Z*A,ft=Z*A-U*R;return[R/X,Z/ft,A/ft,U/X,(R*q-A*K)/ft,(Z*q-U*K)/X]}}),rt.save=function(){const U=this._transformMatrix;this._transformStack.push(U),this._transformMatrix=U.slice(0,6),this._originalSave()},rt.restore=function(){this._transformStack.length===0&&(0,D.warn)("Tried to restore a ctx when the stack was already empty.");const U=this._transformStack.pop();U&&(this._transformMatrix=U,this._originalRestore())},rt.translate=function(U,Z){const A=this._transformMatrix;A[4]=A[0]*U+A[2]*Z+A[4],A[5]=A[1]*U+A[3]*Z+A[5],this._originalTranslate(U,Z)},rt.scale=function(U,Z){const A=this._transformMatrix;A[0]*=U,A[1]*=U,A[2]*=Z,A[3]*=Z,this._originalScale(U,Z)},rt.transform=function(U,Z,A,R,q,K){const X=this._transformMatrix;this._transformMatrix=[X[0]*U+X[2]*Z,X[1]*U+X[3]*Z,X[0]*A+X[2]*R,X[1]*A+X[3]*R,X[0]*q+X[2]*K+X[4],X[1]*q+X[3]*K+X[5]],rt._originalTransform(U,Z,A,R,q,K)},rt.setTransform=function(U,Z,A,R,q,K){this._transformMatrix=[U,Z,A,R,q,K],rt._originalSetTransform(U,Z,A,R,q,K)},rt.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],rt._originalResetTransform()},rt.rotate=function(U){const Z=Math.cos(U),A=Math.sin(U),R=this._transformMatrix;this._transformMatrix=[R[0]*Z+R[2]*A,R[1]*Z+R[3]*A,R[0]*-A+R[2]*Z,R[1]*-A+R[3]*Z,R[4],R[5]],this._originalRotate(U)}}}class lt{constructor(W){this.canvasFactory=W,this.cache=Object.create(null)}getCanvas(W,U,Z,A){let R;return this.cache[W]!==void 0?(R=this.cache[W],this.canvasFactory.reset(R,U,Z),R.context.setTransform(1,0,0,1,0,0)):(R=this.canvasFactory.create(U,Z),this.cache[W]=R),A&&st(R.context),R}delete(W){delete this.cache[W]}clear(){for(const W in this.cache){const U=this.cache[W];this.canvasFactory.destroy(U),delete this.cache[W]}}}function tt(rt,W,U,Z,A,R,q,K,X,ft){const[mt,Pt,yt,Rt,xt,Ot]=rt.mozCurrentTransform;if(Pt===0&&yt===0){const Wt=q*mt+xt,It=Math.round(Wt),zt=K*Rt+Ot,Vt=Math.round(zt),Ut=(q+X)*mt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(K+ft)*Rt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(Math.sign(mt),0,0,Math.sign(Rt),It,Vt),rt.drawImage(W,U,Z,A,R,0,0,se,Kt),rt.setTransform(mt,Pt,yt,Rt,xt,Ot),[se,Kt]}if(mt===0&&Rt===0){const Wt=K*yt+xt,It=Math.round(Wt),zt=q*Pt+Ot,Vt=Math.round(zt),Ut=(K+ft)*yt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(q+X)*Pt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(0,Math.sign(Pt),Math.sign(yt),0,It,Vt),rt.drawImage(W,U,Z,A,R,0,0,Kt,se),rt.setTransform(mt,Pt,yt,Rt,xt,Ot),[Kt,se]}rt.drawImage(W,U,Z,A,R,q,K,X,ft);const Bt=Math.hypot(mt,Pt),Ht=Math.hypot(yt,Rt);return[Bt*X,Ht*ft]}function ct(rt){const{width:W,height:U}=rt;if(W>et||U>et)return null;const Z=1e3,A=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),R=W+1;let q=new Uint8Array(R*(U+1)),K,X,ft;const mt=W+7&-8;let Pt=new Uint8Array(mt*U),yt=0;for(const It of rt.data){let zt=128;for(;zt>0;)Pt[yt++]=It&zt?0:255,zt>>=1}let Rt=0;for(yt=0,Pt[yt]!==0&&(q[0]=1,++Rt),X=1;X<W;X++)Pt[yt]!==Pt[yt+1]&&(q[X]=Pt[yt]?2:1,++Rt),yt++;for(Pt[yt]!==0&&(q[X]=2,++Rt),K=1;K<U;K++){yt=K*mt,ft=K*R,Pt[yt-mt]!==Pt[yt]&&(q[ft]=Pt[yt]?1:8,++Rt);let It=(Pt[yt]?4:0)+(Pt[yt-mt]?8:0);for(X=1;X<W;X++)It=(It>>2)+(Pt[yt+1]?4:0)+(Pt[yt-mt+1]?8:0),A[It]&&(q[ft+X]=A[It],++Rt),yt++;if(Pt[yt-mt]!==Pt[yt]&&(q[ft+X]=Pt[yt]?2:4,++Rt),Rt>Z)return null}for(yt=mt*(U-1),ft=K*R,Pt[yt]!==0&&(q[ft]=8,++Rt),X=1;X<W;X++)Pt[yt]!==Pt[yt+1]&&(q[ft+X]=Pt[yt]?4:8,++Rt),yt++;if(Pt[yt]!==0&&(q[ft+X]=4,++Rt),Rt>Z)return null;const xt=new Int32Array([0,R,-1,0,-R,0,0,0,1]);let Ot,Bt,Ht;for(vt.isNodeJS?Bt=[]:Ot=new Path2D,K=0;Rt&&K<=U;K++){let It=K*R;const zt=It+W;for(;It<zt&&!q[It];)It++;if(It===zt)continue;Ot?Ot.moveTo(It%R,K):Ht=[It%R,K];const Vt=It;let Ut=q[It];do{const se=xt[Ut];do It+=se;while(!q[It]);const te=q[It];te!==5&&te!==10?(Ut=te,q[It]=0):(Ut=te&51*Ut>>4,q[It]&=Ut>>2|Ut<<2),Ot?Ot.lineTo(It%R,It/R|0):Ht.push(It%R,It/R|0),q[It]||--Rt}while(Vt!==It);Ot||Bt.push(Ht),--K}return Pt=null,q=null,function(It){if(It.save(),It.scale(1/W,-1/U),It.translate(0,-U),Ot)It.fill(Ot);else{It.beginPath();for(const zt of Bt){It.moveTo(zt[0],zt[1]);for(let Vt=2,Ut=zt.length;Vt<Ut;Vt+=2)It.lineTo(zt[Vt],zt[Vt+1])}It.fill()}It.beginPath(),It.restore()}}class ut{constructor(W,U){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=D.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=D.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,W,U])}clone(){const W=Object.create(this);return W.clipBox=this.clipBox.slice(),W}setCurrentPoint(W,U){this.x=W,this.y=U}updatePathMinMax(W,U,Z){[U,Z]=D.Util.applyTransform([U,Z],W),this.minX=Math.min(this.minX,U),this.minY=Math.min(this.minY,Z),this.maxX=Math.max(this.maxX,U),this.maxY=Math.max(this.maxY,Z)}updateRectMinMax(W,U){const Z=D.Util.applyTransform(U,W),A=D.Util.applyTransform(U.slice(2),W);this.minX=Math.min(this.minX,Z[0],A[0]),this.minY=Math.min(this.minY,Z[1],A[1]),this.maxX=Math.max(this.maxX,Z[0],A[0]),this.maxY=Math.max(this.maxY,Z[1],A[1])}updateScalingPathMinMax(W,U){D.Util.scaleMinMax(W,U),this.minX=Math.min(this.minX,U[0]),this.maxX=Math.max(this.maxX,U[1]),this.minY=Math.min(this.minY,U[2]),this.maxY=Math.max(this.maxY,U[3])}updateCurvePathMinMax(W,U,Z,A,R,q,K,X,ft,mt){const Pt=D.Util.bezierBoundingBox(U,Z,A,R,q,K,X,ft);if(mt){mt[0]=Math.min(mt[0],Pt[0],Pt[2]),mt[1]=Math.max(mt[1],Pt[0],Pt[2]),mt[2]=Math.min(mt[2],Pt[1],Pt[3]),mt[3]=Math.max(mt[3],Pt[1],Pt[3]);return}this.updateRectMinMax(W,Pt)}getPathBoundingBox(W=wt.PathType.FILL,U=null){const Z=[this.minX,this.minY,this.maxX,this.maxY];if(W===wt.PathType.STROKE){U||(0,D.unreachable)("Stroke bounding box must include transform.");const A=D.Util.singularValueDecompose2dScale(U),R=A[0]*this.lineWidth/2,q=A[1]*this.lineWidth/2;Z[0]-=R,Z[1]-=q,Z[2]+=R,Z[3]+=q}return Z}updateClipFromPath(){const W=D.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(W||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(W){this.clipBox=W,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(W=wt.PathType.FILL,U=null){return D.Util.intersect(this.clipBox,this.getPathBoundingBox(W,U))}}function At(rt,W,U=null){if(typeof ImageData!="undefined"&&W instanceof ImageData){rt.putImageData(W,0,0);return}const Z=W.height,A=W.width,R=Z%B,q=(Z-R)/B,K=R===0?q:q+1,X=rt.createImageData(A,B);let ft=0,mt;const Pt=W.data,yt=X.data;let Rt,xt,Ot,Bt,Ht,Wt,It,zt;if(U)switch(U.length){case 1:Ht=U[0],Wt=U[0],It=U[0],zt=U[0];break;case 4:Ht=U[0],Wt=U[1],It=U[2],zt=U[3];break}if(W.kind===D.ImageKind.GRAYSCALE_1BPP){const Vt=Pt.byteLength,Ut=new Uint32Array(yt.buffer,0,yt.byteLength>>2),se=Ut.length,te=A+7>>3;let Kt=4294967295,Zt=D.FeatureTest.isLittleEndian?4278190080:255;for(zt&&zt[0]===255&&zt[255]===0&&([Kt,Zt]=[Zt,Kt]),Rt=0;Rt<K;Rt++){for(Ot=Rt<q?B:R,mt=0,xt=0;xt<Ot;xt++){const ie=Vt-ft;let ce=0;const re=ie>te?A:ie*8-7,fe=re&-8;let ee=0,Mt=0;for(;ce<fe;ce+=8)Mt=Pt[ft++],Ut[mt++]=Mt&128?Kt:Zt,Ut[mt++]=Mt&64?Kt:Zt,Ut[mt++]=Mt&32?Kt:Zt,Ut[mt++]=Mt&16?Kt:Zt,Ut[mt++]=Mt&8?Kt:Zt,Ut[mt++]=Mt&4?Kt:Zt,Ut[mt++]=Mt&2?Kt:Zt,Ut[mt++]=Mt&1?Kt:Zt;for(;ce<re;ce++)ee===0&&(Mt=Pt[ft++],ee=128),Ut[mt++]=Mt&ee?Kt:Zt,ee>>=1}for(;mt<se;)Ut[mt++]=0;rt.putImageData(X,0,Rt*B)}}else if(W.kind===D.ImageKind.RGBA_32BPP){const Vt=!!(Ht||Wt||It);for(xt=0,Bt=A*B*4,Rt=0;Rt<q;Rt++){if(yt.set(Pt.subarray(ft,ft+Bt)),ft+=Bt,Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,xt),xt+=B}if(Rt<K){if(Bt=A*R*4,yt.set(Pt.subarray(ft,ft+Bt)),Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,xt)}}else if(W.kind===D.ImageKind.RGB_24BPP){const Vt=!!(Ht||Wt||It);for(Ot=B,Bt=A*Ot,Rt=0;Rt<K;Rt++){for(Rt>=q&&(Ot=R,Bt=A*Ot),mt=0,xt=Bt;xt--;)yt[mt++]=Pt[ft++],yt[mt++]=Pt[ft++],yt[mt++]=Pt[ft++],yt[mt++]=255;if(Vt)for(let Ut=0;Ut<mt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,Rt*B)}}else throw new Error(`bad image kind: ${W.kind}`)}function kt(rt,W){if(W.bitmap){rt.drawImage(W.bitmap,0,0);return}const U=W.height,Z=W.width,A=U%B,R=(U-A)/B,q=A===0?R:R+1,K=rt.createImageData(Z,B);let X=0;const ft=W.data,mt=K.data;for(let Pt=0;Pt<q;Pt++){const yt=Pt<R?B:A;({srcPos:X}=(0,dt.applyMaskImageData)({src:ft,srcPos:X,dest:mt,width:Z,height:yt})),rt.putImageData(K,0,Pt*B)}}function V(rt,W){const U=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let Z=0,A=U.length;Z<A;Z++){const R=U[Z];rt[R]!==void 0&&(W[R]=rt[R])}rt.setLineDash!==void 0&&(W.setLineDash(rt.getLineDash()),W.lineDashOffset=rt.lineDashOffset)}function Q(rt,W){rt.strokeStyle=rt.fillStyle=W||"#000000",rt.fillRule="nonzero",rt.globalAlpha=1,rt.lineWidth=1,rt.lineCap="butt",rt.lineJoin="miter",rt.miterLimit=10,rt.globalCompositeOperation="source-over",rt.font="10px sans-serif",rt.setLineDash!==void 0&&(rt.setLineDash([]),rt.lineDashOffset=0)}function ot(rt,W,U,Z){const A=rt.length;for(let R=3;R<A;R+=4){const q=rt[R];if(q===0)rt[R-3]=W,rt[R-2]=U,rt[R-1]=Z;else if(q<255){const K=255-q;rt[R-3]=rt[R-3]*q+W*K>>8,rt[R-2]=rt[R-2]*q+U*K>>8,rt[R-1]=rt[R-1]*q+Z*K>>8}}}function _t(rt,W,U){const Z=rt.length,A=1/255;for(let R=3;R<Z;R+=4){const q=U?U[rt[R]]:rt[R];W[R]=W[R]*q*A|0}}function ht(rt,W,U){const Z=rt.length;for(let A=3;A<Z;A+=4){const R=rt[A-3]*77+rt[A-2]*152+rt[A-1]*28;W[A]=U?W[A]*U[R>>8]>>8:W[A]*R>>16}}function Ft(rt,W,U,Z,A,R,q,K,X,ft,mt){const Pt=!!R,yt=Pt?R[0]:0,Rt=Pt?R[1]:0,xt=Pt?R[2]:0;let Ot;A==="Luminosity"?Ot=ht:Ot=_t;const Ht=Math.min(Z,Math.ceil(1048576/U));for(let Wt=0;Wt<Z;Wt+=Ht){const It=Math.min(Ht,Z-Wt),zt=rt.getImageData(K-ft,Wt+(X-mt),U,It),Vt=W.getImageData(K,Wt+X,U,It);Pt&&ot(zt.data,yt,Rt,xt),Ot(zt.data,Vt.data,q),W.putImageData(Vt,K,Wt+X)}}function St(rt,W,U,Z){const A=Z[0],R=Z[1],q=Z[2]-A,K=Z[3]-R;q===0||K===0||(Ft(W.context,U,q,K,W.subtype,W.backdrop,W.transferMap,A,R,W.offsetX,W.offsetY),rt.save(),rt.globalAlpha=1,rt.globalCompositeOperation="source-over",rt.setTransform(1,0,0,1,0,0),rt.drawImage(U.canvas,0,0),rt.restore())}function Lt(rt,W){const U=D.Util.singularValueDecompose2dScale(rt);U[0]=Math.fround(U[0]),U[1]=Math.fround(U[1]);const Z=Math.fround((globalThis.devicePixelRatio||1)*Ct.PixelsPerInch.PDF_TO_CSS_UNITS);return W!==void 0?W:U[0]<=Z||U[1]<=Z}const $t=["butt","round","square"],Dt=["miter","round","bevel"],jt={},Nt={};class qt{constructor(W,U,Z,A,R,q,K,X){this.ctx=W,this.current=new ut(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=U,this.objs=Z,this.canvasFactory=A,this.imageLayer=R,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=q,this.cachedCanvases=new lt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(X==null?void 0:X.background)||null,this.foregroundColor=(X==null?void 0:X.foreground)||null,W&&st(W),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(W,U=null){return typeof W=="string"?W.startsWith("g_")?this.commonObjs.get(W):this.objs.get(W):U}beginDrawing({transform:W,viewport:U,transparency:Z=!1,background:A=null}){const R=this.ctx.canvas.width,q=this.ctx.canvas.height,K=A||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const ft=this.backgroundColor=this.ctx.fillStyle;let mt=!0,Pt=K;if(this.ctx.fillStyle=K,Pt=this.ctx.fillStyle,mt=typeof Pt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Pt),X==="#000000"&&ft==="#ffffff"||X===ft||!mt)this.foregroundColor=this.backgroundColor=null;else{const yt=parseInt(Pt.slice(1),16),Rt=(yt&&16711680)>>16,xt=(yt&&65280)>>8,Ot=yt&&255,Bt=Wt=>(Wt/=255,Wt<=.03928?Wt/12.92:((Wt+.055)/1.055)**2.4),Ht=Math.round(.2126*Bt(Rt)+.7152*Bt(xt)+.0722*Bt(Ot));this.selectColor=(Wt,It,zt)=>{const Vt=.2126*Bt(Wt)+.7152*Bt(It)+.0722*Bt(zt);return Math.round(Vt)===Ht?ft:X}}}if(this.ctx.fillStyle=this.backgroundColor||K,this.ctx.fillRect(0,0,R,q),this.ctx.restore(),Z){const X=this.cachedCanvases.getCanvas("transparent",R,q,!0);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),Q(this.ctx,this.foregroundColor),W&&(this.ctx.transform.apply(this.ctx,W),this.outputScaleX=W[0],this.outputScaleY=W[0]),this.ctx.transform.apply(this.ctx,U.transform),this.viewportScale=U.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(W,U,Z,A){const R=W.argsArray,q=W.fnArray;let K=U||0;const X=R.length;if(X===K)return K;const ft=X-K>gt&&typeof Z=="function",mt=ft?Date.now()+pt:0;let Pt=0;const yt=this.commonObjs,Rt=this.objs;let xt;for(;;){if(A!==void 0&&K===A.nextBreakPoint)return A.breakIt(K,Z),K;if(xt=q[K],xt!==D.OPS.dependency)this[xt].apply(this,R[K]);else for(const Ot of R[K]){const Bt=Ot.startsWith("g_")?yt:Rt;if(!Bt.has(Ot))return Bt.get(Ot,Z),K}if(K++,K===X)return K;if(ft&&++Pt>gt){if(Date.now()>mt)return Z(),K;Pt=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const W of this._cachedBitmapsMap.values()){for(const U of W.values())typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement&&(U.width=U.height=0);W.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(W,U){const Z=W.width,A=W.height;let R=Math.max(Math.hypot(U[0],U[1]),1),q=Math.max(Math.hypot(U[2],U[3]),1),K=Z,X=A,ft="prescale1",mt,Pt;for(;R>2&&K>1||q>2&&X>1;){let yt=K,Rt=X;R>2&&K>1&&(yt=Math.ceil(K/2),R/=K/yt),q>2&&X>1&&(Rt=Math.ceil(X/2),q/=X/Rt),mt=this.cachedCanvases.getCanvas(ft,yt,Rt,!1),Pt=mt.context,Pt.clearRect(0,0,yt,Rt),Pt.drawImage(W,0,0,K,X,0,0,yt,Rt),W=mt.canvas,K=yt,X=Rt,ft=ft==="prescale1"?"prescale2":"prescale1"}return{img:W,paintWidth:K,paintHeight:X}}_createMaskCanvas(W){const U=this.ctx,{width:Z,height:A}=W,R=this.current.fillColor,q=this.current.patternFill,K=U.mozCurrentTransform;let X,ft,mt,Pt;if((W.bitmap||W.data)&&W.count>1){const se=W.bitmap||W.data.buffer,te=K.slice(0,4);ft=JSON.stringify(q?te:[te,R]),X=this._cachedBitmapsMap.get(se),X||(X=new Map,this._cachedBitmapsMap.set(se,X));const Kt=X.get(ft);if(Kt&&!q){const Zt=Math.round(Math.min(K[0],K[2])+K[4]),ie=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Kt,offsetX:Zt,offsetY:ie}}mt=Kt}mt||(Pt=this.cachedCanvases.getCanvas("maskCanvas",Z,A,!1),kt(Pt.context,W));let yt=D.Util.transform(K,[1/Z,0,0,-1/A,0,0]);yt=D.Util.transform(yt,[1,0,0,1,0,-A]);const Rt=D.Util.applyTransform([0,0],yt),xt=D.Util.applyTransform([Z,A],yt),Ot=D.Util.normalizeRect([Rt[0],Rt[1],xt[0],xt[1]]),Bt=Math.round(Ot[2]-Ot[0])||1,Ht=Math.round(Ot[3]-Ot[1])||1,Wt=this.cachedCanvases.getCanvas("fillCanvas",Bt,Ht,!0),It=Wt.context,zt=Math.min(Rt[0],xt[0]),Vt=Math.min(Rt[1],xt[1]);It.translate(-zt,-Vt),It.transform.apply(It,yt),mt||(mt=this._scaleImage(Pt.canvas,It.mozCurrentTransformInverse),mt=mt.img,X&&q&&X.set(ft,mt)),It.imageSmoothingEnabled=Lt(It.mozCurrentTransform,W.interpolate),tt(It,mt,0,0,mt.width,mt.height,0,0,Z,A),It.globalCompositeOperation="source-in";const Ut=D.Util.transform(It.mozCurrentTransformInverse,[1,0,0,1,-zt,-Vt]);return It.fillStyle=q?R.getPattern(U,this,Ut,wt.PathType.FILL):R,It.fillRect(0,0,Z,A),X&&!q&&(this.cachedCanvases.delete("fillCanvas"),X.set(ft,Wt.canvas)),{canvas:Wt.canvas,offsetX:Math.round(zt),offsetY:Math.round(Vt)}}setLineWidth(W){W!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=W,this.ctx.lineWidth=W}setLineCap(W){this.ctx.lineCap=$t[W]}setLineJoin(W){this.ctx.lineJoin=Dt[W]}setMiterLimit(W){this.ctx.miterLimit=W}setDash(W,U){const Z=this.ctx;Z.setLineDash!==void 0&&(Z.setLineDash(W),Z.lineDashOffset=U)}setRenderingIntent(W){}setFlatness(W){}setGState(W){for(let U=0,Z=W.length;U<Z;U++){const A=W[U],R=A[0],q=A[1];switch(R){case"LW":this.setLineWidth(q);break;case"LC":this.setLineCap(q);break;case"LJ":this.setLineJoin(q);break;case"ML":this.setMiterLimit(q);break;case"D":this.setDash(q[0],q[1]);break;case"RI":this.setRenderingIntent(q);break;case"FL":this.setFlatness(q);break;case"Font":this.setFont(q[0],q[1]);break;case"CA":this.current.strokeAlpha=A[1];break;case"ca":this.current.fillAlpha=A[1],this.ctx.globalAlpha=A[1];break;case"BM":this.ctx.globalCompositeOperation=q;break;case"SMask":this.current.activeSMask=q?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=q}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const W=this.inSMaskMode;this.current.activeSMask&&!W?this.beginSMaskMode():!this.current.activeSMask&&W&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const W=this.ctx.canvas.width,U=this.ctx.canvas.height,Z="smaskGroupAt"+this.groupLevel,A=this.cachedCanvases.getCanvas(Z,W,U,!0);this.suspendedCtx=this.ctx,this.ctx=A.context;const R=this.ctx;R.setTransform.apply(R,this.suspendedCtx.mozCurrentTransform),V(this.suspendedCtx,R),G(R,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(W){if(!this.current.activeSMask)return;W?(W[0]=Math.floor(W[0]),W[1]=Math.floor(W[1]),W[2]=Math.ceil(W[2]),W[3]=Math.ceil(W[3])):W=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const U=this.current.activeSMask,Z=this.suspendedCtx;St(Z,U,this.ctx,W),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const W=this.current;this.stateStack.push(W),this.current=W.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(W,U,Z,A,R,q){this.ctx.transform(W,U,Z,A,R,q),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(W,U,Z){const A=this.ctx,R=this.current;let q=R.x,K=R.y,X,ft;const mt=A.mozCurrentTransform,Pt=mt[0]===0&&mt[3]===0||mt[1]===0&&mt[2]===0,yt=Pt?Z.slice(0):null;for(let Rt=0,xt=0,Ot=W.length;Rt<Ot;Rt++)switch(W[Rt]|0){case D.OPS.rectangle:q=U[xt++],K=U[xt++];const Bt=U[xt++],Ht=U[xt++],Wt=q+Bt,It=K+Ht;A.moveTo(q,K),Bt===0||Ht===0?A.lineTo(Wt,It):(A.lineTo(Wt,K),A.lineTo(Wt,It),A.lineTo(q,It)),Pt||R.updateRectMinMax(mt,[q,K,Wt,It]),A.closePath();break;case D.OPS.moveTo:q=U[xt++],K=U[xt++],A.moveTo(q,K),Pt||R.updatePathMinMax(mt,q,K);break;case D.OPS.lineTo:q=U[xt++],K=U[xt++],A.lineTo(q,K),Pt||R.updatePathMinMax(mt,q,K);break;case D.OPS.curveTo:X=q,ft=K,q=U[xt+4],K=U[xt+5],A.bezierCurveTo(U[xt],U[xt+1],U[xt+2],U[xt+3],q,K),R.updateCurvePathMinMax(mt,X,ft,U[xt],U[xt+1],U[xt+2],U[xt+3],q,K,yt),xt+=6;break;case D.OPS.curveTo2:X=q,ft=K,A.bezierCurveTo(q,K,U[xt],U[xt+1],U[xt+2],U[xt+3]),R.updateCurvePathMinMax(mt,X,ft,q,K,U[xt],U[xt+1],U[xt+2],U[xt+3],yt),q=U[xt+2],K=U[xt+3],xt+=4;break;case D.OPS.curveTo3:X=q,ft=K,q=U[xt+2],K=U[xt+3],A.bezierCurveTo(U[xt],U[xt+1],q,K,q,K),R.updateCurvePathMinMax(mt,X,ft,U[xt],U[xt+1],q,K,q,K,yt),xt+=4;break;case D.OPS.closePath:A.closePath();break}Pt&&R.updateScalingPathMinMax(mt,yt),R.setCurrentPoint(q,K)}closePath(){this.ctx.closePath()}stroke(W){W=typeof W!="undefined"?W:!0;const U=this.ctx,Z=this.current.strokeColor;U.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Z=="object"&&(Z==null?void 0:Z.getPattern)?(U.save(),U.strokeStyle=Z.getPattern(U,this,U.mozCurrentTransformInverse,wt.PathType.STROKE),this.rescaleAndStroke(!1),U.restore()):this.rescaleAndStroke(!0)),W&&this.consumePath(this.current.getClippedPathBoundingBox()),U.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(W){W=typeof W!="undefined"?W:!0;const U=this.ctx,Z=this.current.fillColor,A=this.current.patternFill;let R=!1;A&&(U.save(),U.fillStyle=Z.getPattern(U,this,U.mozCurrentTransformInverse,wt.PathType.FILL),R=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(U.fill("evenodd"),this.pendingEOFill=!1):U.fill()),R&&U.restore(),W&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jt}eoClip(){this.pendingClip=Nt}beginText(){this.current.textMatrix=D.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const W=this.pendingTextPaths,U=this.ctx;if(W===void 0){U.beginPath();return}U.save(),U.beginPath();for(let Z=0;Z<W.length;Z++){const A=W[Z];U.setTransform.apply(U,A.transform),U.translate(A.x,A.y),A.addToPath(U,A.fontSize)}U.restore(),U.clip(),U.beginPath(),delete this.pendingTextPaths}setCharSpacing(W){this.current.charSpacing=W}setWordSpacing(W){this.current.wordSpacing=W}setHScale(W){this.current.textHScale=W/100}setLeading(W){this.current.leading=-W}setFont(W,U){const Z=this.commonObjs.get(W),A=this.current;if(!Z)throw new Error(`Can't find font for ${W}`);if(A.fontMatrix=Z.fontMatrix||D.FONT_IDENTITY_MATRIX,(A.fontMatrix[0]===0||A.fontMatrix[3]===0)&&(0,D.warn)("Invalid font matrix for font "+W),U<0?(U=-U,A.fontDirection=-1):A.fontDirection=1,this.current.font=Z,this.current.fontSize=U,Z.isType3Font)return;const R=Z.loadedName||"sans-serif";let q="normal";Z.black?q="900":Z.bold&&(q="bold");const K=Z.italic?"italic":"normal",X=`"${R}", ${Z.fallbackName}`;let ft=U;U<bt?ft=bt:U>it&&(ft=it),this.current.fontSizeScale=U/ft,this.ctx.font=`${K} ${q} ${ft}px ${X}`}setTextRenderingMode(W){this.current.textRenderingMode=W}setTextRise(W){this.current.textRise=W}moveText(W,U){this.current.x=this.current.lineX+=W,this.current.y=this.current.lineY+=U}setLeadingMoveText(W,U){this.setLeading(-U),this.moveText(W,U)}setTextMatrix(W,U,Z,A,R,q){this.current.textMatrix=[W,U,Z,A,R,q],this.current.textMatrixScale=Math.hypot(W,U),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(W,U,Z,A){const R=this.ctx,q=this.current,K=q.font,X=q.textRenderingMode,ft=q.fontSize/q.fontSizeScale,mt=X&D.TextRenderingMode.FILL_STROKE_MASK,Pt=!!(X&D.TextRenderingMode.ADD_TO_PATH_FLAG),yt=q.patternFill&&!K.missingFile;let Rt;(K.disableFontFace||Pt||yt)&&(Rt=K.getPathGenerator(this.commonObjs,W)),K.disableFontFace||yt?(R.save(),R.translate(U,Z),R.beginPath(),Rt(R,ft),A&&R.setTransform.apply(R,A),(mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fill(),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.stroke(),R.restore()):((mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fillText(W,U,Z),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.strokeText(W,U,Z)),Pt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:R.mozCurrentTransform,x:U,y:Z,fontSize:ft,addToPath:Rt})}get isFontSubpixelAAEnabled(){const{context:W}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);W.scale(1.5,1),W.fillText("I",0,10);const U=W.getImageData(0,0,10,10).data;let Z=!1;for(let A=3;A<U.length;A+=4)if(U[A]>0&&U[A]<255){Z=!0;break}return(0,D.shadow)(this,"isFontSubpixelAAEnabled",Z)}showText(W){const U=this.current,Z=U.font;if(Z.isType3Font)return this.showType3Text(W);const A=U.fontSize;if(A===0)return;const R=this.ctx,q=U.fontSizeScale,K=U.charSpacing,X=U.wordSpacing,ft=U.fontDirection,mt=U.textHScale*ft,Pt=W.length,yt=Z.vertical,Rt=yt?1:-1,xt=Z.defaultVMetrics,Ot=A*U.fontMatrix[0],Bt=U.textRenderingMode===D.TextRenderingMode.FILL&&!Z.disableFontFace&&!U.patternFill;R.save(),R.transform.apply(R,U.textMatrix),R.translate(U.x,U.y+U.textRise),ft>0?R.scale(mt,-1):R.scale(mt,1);let Ht;if(U.patternFill){R.save();const Ut=U.fillColor.getPattern(R,this,R.mozCurrentTransformInverse,wt.PathType.FILL);Ht=R.mozCurrentTransform,R.restore(),R.fillStyle=Ut}let Wt=U.lineWidth;const It=U.textMatrixScale;if(It===0||Wt===0){const Ut=U.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;(Ut===D.TextRenderingMode.STROKE||Ut===D.TextRenderingMode.FILL_STROKE)&&(Wt=this.getSinglePixelWidth())}else Wt/=It;q!==1&&(R.scale(q,q),Wt/=q),R.lineWidth=Wt;let zt=0,Vt;for(Vt=0;Vt<Pt;++Vt){const Ut=W[Vt];if(typeof Ut=="number"){zt+=Rt*Ut*A/1e3;continue}let se=!1;const te=(Ut.isSpace?X:0)+K,Kt=Ut.fontChar,Zt=Ut.accent;let ie,ce,re=Ut.width;if(yt){const ee=Ut.vmetric||xt,Mt=-(Ut.vmetric?ee[1]:re*.5)*Ot,Tt=ee[2]*Ot;re=ee?-ee[0]:re,ie=Mt/q,ce=(zt+Tt)/q}else ie=zt/q,ce=0;if(Z.remeasure&&re>0){const ee=R.measureText(Kt).width*1e3/A*q;if(re<ee&&this.isFontSubpixelAAEnabled){const Mt=re/ee;se=!0,R.save(),R.scale(Mt,1),ie/=Mt}else re!==ee&&(ie+=(re-ee)/2e3*A/q)}if(this.contentVisible&&(Ut.isInFont||Z.missingFile)){if(Bt&&!Zt)R.fillText(Kt,ie,ce);else if(this.paintChar(Kt,ie,ce,Ht),Zt){const ee=ie+A*Zt.offset.x/q,Mt=ce-A*Zt.offset.y/q;this.paintChar(Zt.fontChar,ee,Mt,Ht)}}let fe;yt?fe=re*Ot-te*ft:fe=re*Ot+te*ft,zt+=fe,se&&R.restore()}yt?U.y-=zt:U.x+=zt*mt,R.restore(),this.compose()}showType3Text(W){const U=this.ctx,Z=this.current,A=Z.font,R=Z.fontSize,q=Z.fontDirection,K=A.vertical?1:-1,X=Z.charSpacing,ft=Z.wordSpacing,mt=Z.textHScale*q,Pt=Z.fontMatrix||D.FONT_IDENTITY_MATRIX,yt=W.length,Rt=Z.textRenderingMode===D.TextRenderingMode.INVISIBLE;let xt,Ot,Bt,Ht;if(!(Rt||R===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,U.save(),U.transform.apply(U,Z.textMatrix),U.translate(Z.x,Z.y),U.scale(mt,q),xt=0;xt<yt;++xt){if(Ot=W[xt],typeof Ot=="number"){Ht=K*Ot*R/1e3,this.ctx.translate(Ht,0),Z.x+=Ht*mt;continue}const Wt=(Ot.isSpace?ft:0)+X,It=A.charProcOperatorList[Ot.operatorListId];if(!It){(0,D.warn)(`Type3 character "${Ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ot,this.save(),U.scale(R,R),U.transform.apply(U,Pt),this.executeOperatorList(It),this.restore()),Bt=D.Util.applyTransform([Ot.width,0],Pt)[0]*R+Wt,U.translate(Bt,0),Z.x+=Bt*mt}U.restore(),this.processingType3=null}}setCharWidth(W,U){}setCharWidthAndBounds(W,U,Z,A,R,q){this.ctx.rect(Z,A,R-Z,q-A),this.ctx.clip(),this.endPath()}getColorN_Pattern(W){let U;if(W[0]==="TilingPattern"){const Z=W[1],A=this.baseTransform||this.ctx.mozCurrentTransform.slice(),R={createCanvasGraphics:q=>new qt(q,this.commonObjs,this.objs,this.canvasFactory)};U=new wt.TilingPattern(W,Z,this.ctx,R,A)}else U=this._getPattern(W[1],W[2]);return U}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(W,U,Z){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,W,U,Z))||D.Util.makeHexColor(W,U,Z);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(W,U,Z){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,W,U,Z))||D.Util.makeHexColor(W,U,Z);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(W,U=null){let Z;return this.cachedPatterns.has(W)?Z=this.cachedPatterns.get(W):(Z=(0,wt.getShadingPattern)(this.objs.get(W)),this.cachedPatterns.set(W,Z)),U&&(Z.matrix=U),Z}shadingFill(W){if(!this.contentVisible)return;const U=this.ctx;this.save();const Z=this._getPattern(W);U.fillStyle=Z.getPattern(U,this,U.mozCurrentTransformInverse,wt.PathType.SHADING);const A=U.mozCurrentTransformInverse;if(A){const R=U.canvas,q=R.width,K=R.height,X=D.Util.applyTransform([0,0],A),ft=D.Util.applyTransform([0,K],A),mt=D.Util.applyTransform([q,0],A),Pt=D.Util.applyTransform([q,K],A),yt=Math.min(X[0],ft[0],mt[0],Pt[0]),Rt=Math.min(X[1],ft[1],mt[1],Pt[1]),xt=Math.max(X[0],ft[0],mt[0],Pt[0]),Ot=Math.max(X[1],ft[1],mt[1],Pt[1]);this.ctx.fillRect(yt,Rt,xt-yt,Ot-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,D.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,D.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(W,U){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(W)&&W.length===6&&this.transform.apply(this,W),this.baseTransform=this.ctx.mozCurrentTransform,U)){const Z=U[2]-U[0],A=U[3]-U[1];this.ctx.rect(U[0],U[1],Z,A),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,U),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(W){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const U=this.ctx;W.isolated||(0,D.info)("TODO: Support non-isolated groups."),W.knockout&&(0,D.warn)("Knockout groups not supported.");const Z=U.mozCurrentTransform;if(W.matrix&&U.transform.apply(U,W.matrix),!W.bbox)throw new Error("Bounding box is required.");let A=D.Util.getAxialAlignedBoundingBox(W.bbox,U.mozCurrentTransform);const R=[0,0,U.canvas.width,U.canvas.height];A=D.Util.intersect(A,R)||[0,0,0,0];const q=Math.floor(A[0]),K=Math.floor(A[1]);let X=Math.max(Math.ceil(A[2])-q,1),ft=Math.max(Math.ceil(A[3])-K,1),mt=1,Pt=1;X>Y&&(mt=X/Y,X=Y),ft>Y&&(Pt=ft/Y,ft=Y),this.current.startNewPathAndClipBox([0,0,X,ft]);let yt="groupAt"+this.groupLevel;W.smask&&(yt+="_smask_"+this.smaskCounter++%2);const Rt=this.cachedCanvases.getCanvas(yt,X,ft,!0),xt=Rt.context;xt.scale(1/mt,1/Pt),xt.translate(-q,-K),xt.transform.apply(xt,Z),W.smask?this.smaskStack.push({canvas:Rt.canvas,context:xt,offsetX:q,offsetY:K,scaleX:mt,scaleY:Pt,subtype:W.smask.subtype,backdrop:W.smask.backdrop,transferMap:W.smask.transferMap||null,startTransformInverse:null}):(U.setTransform(1,0,0,1,0,0),U.translate(q,K),U.scale(mt,Pt),U.save()),V(U,xt),this.ctx=xt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(U),this.groupLevel++}endGroup(W){if(!this.contentVisible)return;this.groupLevel--;const U=this.ctx,Z=this.groupStack.pop();if(this.ctx=Z,this.ctx.imageSmoothingEnabled=!1,W.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,A);const R=D.Util.getAxialAlignedBoundingBox([0,0,U.canvas.width,U.canvas.height],A);this.ctx.drawImage(U.canvas,0,0),this.ctx.restore(),this.compose(R)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(W,U,Z,A,R){if(this.save(),Array.isArray(U)&&U.length===4){const q=U[2]-U[0],K=U[3]-U[1];if(R&&this.annotationCanvasMap){Z=Z.slice(),Z[4]-=U[0],Z[5]-=U[1],U=U.slice(),U[0]=U[1]=0,U[2]=q,U[3]=K;const[X,ft]=D.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:mt}=this,Pt=Math.ceil(q*this.outputScaleX*mt),yt=Math.ceil(K*this.outputScaleY*mt);this.annotationCanvas=this.canvasFactory.create(Pt,yt);const{canvas:Rt,context:xt}=this.annotationCanvas,Ot=`var(--zoom-factor) * ${Ct.PixelsPerInch.PDF_TO_CSS_UNITS}`;Rt.style.width=`calc(${q}px * ${Ot})`,Rt.style.height=`calc(${K}px * ${Ot})`,this.annotationCanvasMap.set(W,Rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=xt,this.ctx.setTransform(X,0,0,-ft,0,K*ft),st(this.ctx),Q(this.ctx,this.foregroundColor)}else Q(this.ctx,this.foregroundColor),this.ctx.rect(U[0],U[1],q,K),this.ctx.clip(),this.endPath()}this.current=new ut(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,Z),this.transform.apply(this,A)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(W){if(!this.contentVisible)return;const U=W.count;W=this.getObject(W.data,W),W.count=U;const Z=this.ctx,A=this.processingType3;if(A&&(A.compiled===void 0&&(A.compiled=ct(W)),A.compiled)){A.compiled(Z);return}const R=this._createMaskCanvas(W),q=R.canvas;Z.save(),Z.setTransform(1,0,0,1,0,0),Z.drawImage(q,R.offsetX,R.offsetY),Z.restore(),this.compose()}paintImageMaskXObjectRepeat(W,U,Z=0,A=0,R,q){if(!this.contentVisible)return;W=this.getObject(W.data,W);const K=this.ctx;K.save();const X=K.mozCurrentTransform;K.transform(U,Z,A,R,0,0);const ft=this._createMaskCanvas(W);K.setTransform(1,0,0,1,0,0);for(let mt=0,Pt=q.length;mt<Pt;mt+=2){const yt=D.Util.transform(X,[U,Z,A,R,q[mt],q[mt+1]]),[Rt,xt]=D.Util.applyTransform([0,0],yt);K.drawImage(ft.canvas,Rt,xt)}K.restore(),this.compose()}paintImageMaskXObjectGroup(W){if(!this.contentVisible)return;const U=this.ctx,Z=this.current.fillColor,A=this.current.patternFill;for(let R=0,q=W.length;R<q;R++){const K=W[R],X=K.width,ft=K.height,mt=this.cachedCanvases.getCanvas("maskCanvas",X,ft,!1),Pt=mt.context;Pt.save(),kt(Pt,K),Pt.globalCompositeOperation="source-in",Pt.fillStyle=A?Z.getPattern(Pt,this,U.mozCurrentTransformInverse,wt.PathType.FILL):Z,Pt.fillRect(0,0,X,ft),Pt.restore(),U.save(),U.transform.apply(U,K.transform),U.scale(1,-1),tt(U,mt.canvas,0,0,X,ft,0,-1,1,1),U.restore()}this.compose()}paintImageXObject(W){if(!this.contentVisible)return;const U=this.getObject(W);if(!U){(0,D.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(U)}paintImageXObjectRepeat(W,U,Z,A){if(!this.contentVisible)return;const R=this.getObject(W);if(!R){(0,D.warn)("Dependent image isn't ready yet");return}const q=R.width,K=R.height,X=[];for(let ft=0,mt=A.length;ft<mt;ft+=2)X.push({transform:[U,0,0,Z,A[ft],A[ft+1]],x:0,y:0,w:q,h:K});this.paintInlineImageXObjectGroup(R,X)}paintInlineImageXObject(W){if(!this.contentVisible)return;const U=W.width,Z=W.height,A=this.ctx;this.save(),A.scale(1/U,-1/Z);let R;if(typeof HTMLElement=="function"&&W instanceof HTMLElement||!W.data)R=W;else{const ft=this.cachedCanvases.getCanvas("inlineImage",U,Z,!1),mt=ft.context;At(mt,W,this.current.transferMaps),R=ft.canvas}const q=this._scaleImage(R,A.mozCurrentTransformInverse);A.imageSmoothingEnabled=Lt(A.mozCurrentTransform,W.interpolate);const[K,X]=tt(A,q.img,0,0,q.paintWidth,q.paintHeight,0,-Z,U,Z);if(this.imageLayer){const ft=this.getCanvasPosition(0,-Z);this.imageLayer.appendImage({imgData:W,left:ft[0],top:ft[1],width:K,height:X})}this.compose(),this.restore()}paintInlineImageXObjectGroup(W,U){if(!this.contentVisible)return;const Z=this.ctx,A=W.width,R=W.height,q=this.cachedCanvases.getCanvas("inlineImage",A,R,!1),K=q.context;At(K,W,this.current.transferMaps);for(let X=0,ft=U.length;X<ft;X++){const mt=U[X];if(Z.save(),Z.transform.apply(Z,mt.transform),Z.scale(1,-1),tt(Z,q.canvas,mt.x,mt.y,mt.w,mt.h,0,-1,1,1),this.imageLayer){const Pt=this.getCanvasPosition(mt.x,mt.y);this.imageLayer.appendImage({imgData:W,left:Pt[0],top:Pt[1],width:A,height:R})}Z.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(W){}markPointProps(W,U){}beginMarkedContent(W){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(W,U){W==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(U)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(W){const U=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(W);const Z=this.ctx;this.pendingClip&&(U||(this.pendingClip===Nt?Z.clip("evenodd"):Z.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Z.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const W=this.ctx.mozCurrentTransform;if(W[1]===0&&W[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(W[0]),Math.abs(W[3]));else{const U=Math.abs(W[0]*W[3]-W[2]*W[1]),Z=Math.hypot(W[0],W[2]),A=Math.hypot(W[1],W[3]);this._cachedGetSinglePixelWidth=Math.max(Z,A)/U}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:W}=this.current,U=this.ctx.mozCurrentTransform;let Z,A;if(U[1]===0&&U[2]===0){const R=Math.abs(U[0]),q=Math.abs(U[3]);if(W===0)Z=1/R,A=1/q;else{const K=R*W,X=q*W;Z=K<1?1/K:1,A=X<1?1/X:1}}else{const R=Math.abs(U[0]*U[3]-U[2]*U[1]),q=Math.hypot(U[0],U[1]),K=Math.hypot(U[2],U[3]);if(W===0)Z=K/R,A=q/R;else{const X=W*R;Z=K>X?K/X:1,A=q>X?q/X:1}}this._cachedScaleForStroking=[Z,A]}return this._cachedScaleForStroking}rescaleAndStroke(W){const{ctx:U}=this,{lineWidth:Z}=this.current,[A,R]=this.getScaleForStroking();if(U.lineWidth=Z||1,A===1&&R===1){U.stroke();return}let q,K,X;W&&(q=U.mozCurrentTransform.slice(),K=U.getLineDash().slice(),X=U.lineDashOffset),U.scale(A,R);const ft=Math.max(A,R);U.setLineDash(U.getLineDash().map(mt=>mt/ft)),U.lineDashOffset/=ft,U.stroke(),W&&(U.setTransform(...q),U.setLineDash(K),U.lineDashOffset=X)}getCanvasPosition(W,U){const Z=this.ctx.mozCurrentTransform;return[Z[0]*W+Z[2]*U+Z[4],Z[1]*W+Z[3]*U+Z[5]]}isContentVisible(){for(let W=this.markedContentStack.length-1;W>=0;W--)if(!this.markedContentStack[W].visible)return!1;return!0}}E.CanvasGraphics=qt;for(const rt in D.OPS)qt.prototype[rt]!==void 0&&(qt.prototype[D.OPS[rt]]=qt.prototype[rt])},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.TilingPattern=E.PathType=void 0,E.getShadingPattern=et;var D=at(1),wt=at(3);const dt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};E.PathType=dt;function vt(G,st){if(!st||wt.isNodeJS)return;const lt=st[2]-st[0],tt=st[3]-st[1],ct=new Path2D;ct.rect(st[0],st[1],lt,tt),G.clip(ct)}class Ct{constructor(){this.constructor===Ct&&(0,D.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,D.unreachable)("Abstract method `getPattern` called.")}}class bt extends Ct{constructor(st){super(),this._type=st[1],this._bbox=st[2],this._colorStops=st[3],this._p0=st[4],this._p1=st[5],this._r0=st[6],this._r1=st[7],this.matrix=null}_createGradient(st){let lt;this._type==="axial"?lt=st.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(lt=st.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const tt of this._colorStops)lt.addColorStop(tt[0],tt[1]);return lt}getPattern(st,lt,tt,ct){let ut;if(ct===dt.STROKE||ct===dt.FILL){const At=lt.current.getClippedPathBoundingBox(ct,st.mozCurrentTransform)||[0,0,0,0],kt=Math.ceil(At[2]-At[0])||1,V=Math.ceil(At[3]-At[1])||1,Q=lt.cachedCanvases.getCanvas("pattern",kt,V,!0),ot=Q.context;ot.clearRect(0,0,ot.canvas.width,ot.canvas.height),ot.beginPath(),ot.rect(0,0,ot.canvas.width,ot.canvas.height),ot.translate(-At[0],-At[1]),tt=D.Util.transform(tt,[1,0,0,1,At[0],At[1]]),ot.transform.apply(ot,lt.baseTransform),this.matrix&&ot.transform.apply(ot,this.matrix),vt(ot,this._bbox),ot.fillStyle=this._createGradient(ot),ot.fill(),ut=st.createPattern(Q.canvas,"no-repeat");const _t=new DOMMatrix(tt);try{ut.setTransform(_t)}catch(ht){(0,D.warn)(`RadialAxialShadingPattern.getPattern: "${ht==null?void 0:ht.message}".`)}}else vt(st,this._bbox),ut=this._createGradient(st);return ut}}function it(G,st,lt,tt,ct,ut,At,kt){const V=st.coords,Q=st.colors,ot=G.data,_t=G.width*4;let ht;V[lt+1]>V[tt+1]&&(ht=lt,lt=tt,tt=ht,ht=ut,ut=At,At=ht),V[tt+1]>V[ct+1]&&(ht=tt,tt=ct,ct=ht,ht=At,At=kt,kt=ht),V[lt+1]>V[tt+1]&&(ht=lt,lt=tt,tt=ht,ht=ut,ut=At,At=ht);const Ft=(V[lt]+st.offsetX)*st.scaleX,St=(V[lt+1]+st.offsetY)*st.scaleY,Lt=(V[tt]+st.offsetX)*st.scaleX,$t=(V[tt+1]+st.offsetY)*st.scaleY,Dt=(V[ct]+st.offsetX)*st.scaleX,jt=(V[ct+1]+st.offsetY)*st.scaleY;if(St>=jt)return;const Nt=Q[ut],qt=Q[ut+1],rt=Q[ut+2],W=Q[At],U=Q[At+1],Z=Q[At+2],A=Q[kt],R=Q[kt+1],q=Q[kt+2],K=Math.round(St),X=Math.round(jt);let ft,mt,Pt,yt,Rt,xt,Ot,Bt;for(let Ht=K;Ht<=X;Ht++){if(Ht<$t){let Ut;Ht<St?Ut=0:Ut=(St-Ht)/(St-$t),ft=Ft-(Ft-Lt)*Ut,mt=Nt-(Nt-W)*Ut,Pt=qt-(qt-U)*Ut,yt=rt-(rt-Z)*Ut}else{let Ut;Ht>jt?Ut=1:$t===jt?Ut=0:Ut=($t-Ht)/($t-jt),ft=Lt-(Lt-Dt)*Ut,mt=W-(W-A)*Ut,Pt=U-(U-R)*Ut,yt=Z-(Z-q)*Ut}let Wt;Ht<St?Wt=0:Ht>jt?Wt=1:Wt=(St-Ht)/(St-jt),Rt=Ft-(Ft-Dt)*Wt,xt=Nt-(Nt-A)*Wt,Ot=qt-(qt-R)*Wt,Bt=rt-(rt-q)*Wt;const It=Math.round(Math.min(ft,Rt)),zt=Math.round(Math.max(ft,Rt));let Vt=_t*Ht+It*4;for(let Ut=It;Ut<=zt;Ut++)Wt=(ft-Ut)/(ft-Rt),Wt<0?Wt=0:Wt>1&&(Wt=1),ot[Vt++]=mt-(mt-xt)*Wt|0,ot[Vt++]=Pt-(Pt-Ot)*Wt|0,ot[Vt++]=yt-(yt-Bt)*Wt|0,ot[Vt++]=255}}function Y(G,st,lt){const tt=st.coords,ct=st.colors;let ut,At;switch(st.type){case"lattice":const kt=st.verticesPerRow,V=Math.floor(tt.length/kt)-1,Q=kt-1;for(ut=0;ut<V;ut++){let ot=ut*kt;for(let _t=0;_t<Q;_t++,ot++)it(G,lt,tt[ot],tt[ot+1],tt[ot+kt],ct[ot],ct[ot+1],ct[ot+kt]),it(G,lt,tt[ot+kt+1],tt[ot+1],tt[ot+kt],ct[ot+kt+1],ct[ot+1],ct[ot+kt])}break;case"triangles":for(ut=0,At=tt.length;ut<At;ut+=3)it(G,lt,tt[ut],tt[ut+1],tt[ut+2],ct[ut],ct[ut+1],ct[ut+2]);break;default:throw new Error("illegal figure")}}class pt extends Ct{constructor(st){super(),this._coords=st[2],this._colors=st[3],this._figures=st[4],this._bounds=st[5],this._bbox=st[7],this._background=st[8],this.matrix=null}_createMeshCanvas(st,lt,tt){const kt=Math.floor(this._bounds[0]),V=Math.floor(this._bounds[1]),Q=Math.ceil(this._bounds[2])-kt,ot=Math.ceil(this._bounds[3])-V,_t=Math.min(Math.ceil(Math.abs(Q*st[0]*1.1)),3e3),ht=Math.min(Math.ceil(Math.abs(ot*st[1]*1.1)),3e3),Ft=Q/_t,St=ot/ht,Lt={coords:this._coords,colors:this._colors,offsetX:-kt,offsetY:-V,scaleX:1/Ft,scaleY:1/St},$t=_t+2*2,Dt=ht+2*2,jt=tt.getCanvas("mesh",$t,Dt,!1),Nt=jt.context,qt=Nt.createImageData(_t,ht);if(lt){const W=qt.data;for(let U=0,Z=W.length;U<Z;U+=4)W[U]=lt[0],W[U+1]=lt[1],W[U+2]=lt[2],W[U+3]=255}for(const W of this._figures)Y(qt,W,Lt);return Nt.putImageData(qt,2,2),{canvas:jt.canvas,offsetX:kt-2*Ft,offsetY:V-2*St,scaleX:Ft,scaleY:St}}getPattern(st,lt,tt,ct){vt(st,this._bbox);let ut;if(ct===dt.SHADING)ut=D.Util.singularValueDecompose2dScale(st.mozCurrentTransform);else if(ut=D.Util.singularValueDecompose2dScale(lt.baseTransform),this.matrix){const kt=D.Util.singularValueDecompose2dScale(this.matrix);ut=[ut[0]*kt[0],ut[1]*kt[1]]}const At=this._createMeshCanvas(ut,ct===dt.SHADING?null:this._background,lt.cachedCanvases);return ct!==dt.SHADING&&(st.setTransform.apply(st,lt.baseTransform),this.matrix&&st.transform.apply(st,this.matrix)),st.translate(At.offsetX,At.offsetY),st.scale(At.scaleX,At.scaleY),st.createPattern(At.canvas,"no-repeat")}}class gt extends Ct{getPattern(){return"hotpink"}}function et(G){switch(G[0]){case"RadialAxial":return new bt(G);case"Mesh":return new pt(G);case"Dummy":return new gt}throw new Error(`Unknown IR type: ${G[0]}`)}const B={COLORED:1,UNCOLORED:2};class J{static get MAX_PATTERN_SIZE(){return(0,D.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(st,lt,tt,ct,ut){this.operatorList=st[2],this.matrix=st[3]||[1,0,0,1,0,0],this.bbox=st[4],this.xstep=st[5],this.ystep=st[6],this.paintType=st[7],this.tilingType=st[8],this.color=lt,this.ctx=tt,this.canvasGraphicsFactory=ct,this.baseTransform=ut}createPatternCanvas(st){const lt=this.operatorList,tt=this.bbox,ct=this.xstep,ut=this.ystep,At=this.paintType,kt=this.tilingType,V=this.color,Q=this.canvasGraphicsFactory;(0,D.info)("TilingType: "+kt);const ot=tt[0],_t=tt[1],ht=tt[2],Ft=tt[3],St=D.Util.singularValueDecompose2dScale(this.matrix),Lt=D.Util.singularValueDecompose2dScale(this.baseTransform),$t=[St[0]*Lt[0],St[1]*Lt[1]],Dt=this.getSizeAndScale(ct,this.ctx.canvas.width,$t[0]),jt=this.getSizeAndScale(ut,this.ctx.canvas.height,$t[1]),Nt=st.cachedCanvases.getCanvas("pattern",Dt.size,jt.size,!0),qt=Nt.context,rt=Q.createCanvasGraphics(qt);rt.groupLevel=st.groupLevel,this.setFillAndStrokeStyleToContext(rt,At,V);let W=ot,U=_t,Z=ht,A=Ft;return ot<0&&(W=0,Z+=Math.abs(ot)),_t<0&&(U=0,A+=Math.abs(_t)),qt.translate(-(Dt.scale*W),-(jt.scale*U)),rt.transform(Dt.scale,0,0,jt.scale,0,0),qt.save(),this.clipBbox(rt,W,U,Z,A),rt.baseTransform=rt.ctx.mozCurrentTransform.slice(),rt.executeOperatorList(lt),rt.endDrawing(),{canvas:Nt.canvas,scaleX:Dt.scale,scaleY:jt.scale,offsetX:W,offsetY:U}}getSizeAndScale(st,lt,tt){st=Math.abs(st);const ct=Math.max(J.MAX_PATTERN_SIZE,lt);let ut=Math.ceil(st*tt);return ut>=ct?ut=ct:tt=ut/st,{scale:tt,size:ut}}clipBbox(st,lt,tt,ct,ut){const At=ct-lt,kt=ut-tt;st.ctx.rect(lt,tt,At,kt),st.current.updateRectMinMax(st.ctx.mozCurrentTransform,[lt,tt,ct,ut]),st.clip(),st.endPath()}setFillAndStrokeStyleToContext(st,lt,tt){const ct=st.ctx,ut=st.current;switch(lt){case B.COLORED:const At=this.ctx;ct.fillStyle=At.fillStyle,ct.strokeStyle=At.strokeStyle,ut.fillColor=At.fillStyle,ut.strokeColor=At.strokeStyle;break;case B.UNCOLORED:const kt=D.Util.makeHexColor(tt[0],tt[1],tt[2]);ct.fillStyle=kt,ct.strokeStyle=kt,ut.fillColor=kt,ut.strokeColor=kt;break;default:throw new D.FormatError(`Unsupported paint type: ${lt}`)}}getPattern(st,lt,tt,ct){let ut=tt;ct!==dt.SHADING&&(ut=D.Util.transform(ut,lt.baseTransform),this.matrix&&(ut=D.Util.transform(ut,this.matrix)));const At=this.createPatternCanvas(lt);let kt=new DOMMatrix(ut);kt=kt.translate(At.offsetX,At.offsetY),kt=kt.scale(1/At.scaleX,1/At.scaleY);const V=st.createPattern(At.canvas,"repeat");try{V.setTransform(kt)}catch(Q){(0,D.warn)(`TilingPattern.getPattern: "${Q==null?void 0:Q.message}".`)}return V}}E.TilingPattern=J},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.applyMaskImageData=wt;var D=at(1);function wt({src:dt,srcPos:vt=0,dest:Ct,destPos:bt=0,width:it,height:Y,inverseDecode:pt=!1}){const gt=D.FeatureTest.isLittleEndian?4278190080:255,[et,B]=pt?[0,gt]:[gt,0],J=it>>3,G=it&7,st=dt.length;Ct=new Uint32Array(Ct.buffer);for(let lt=0;lt<Y;lt++){for(const ct=vt+J;vt<ct;vt++){const ut=vt<st?dt[vt]:255;Ct[bt++]=ut&128?B:et,Ct[bt++]=ut&64?B:et,Ct[bt++]=ut&32?B:et,Ct[bt++]=ut&16?B:et,Ct[bt++]=ut&8?B:et,Ct[bt++]=ut&4?B:et,Ct[bt++]=ut&2?B:et,Ct[bt++]=ut&1?B:et}if(G===0)continue;const tt=vt<st?dt[vt++]:255;for(let ct=0;ct<G;ct++)Ct[bt++]=tt&1<<7-ct?B:et}return{srcPos:vt,destPos:bt}}},(nt,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.GlobalWorkerOptions=void 0;const at=Object.create(null);E.GlobalWorkerOptions=at,at.workerPort=at.workerPort===void 0?null:at.workerPort,at.workerSrc=at.workerSrc===void 0?"":at.workerSrc},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MessageHandler=void 0;var D=at(1);const wt={UNKNOWN:0,DATA:1,ERROR:2},dt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function vt(bt){switch(bt instanceof Error||typeof bt=="object"&&bt!==null||(0,D.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),bt.name){case"AbortException":return new D.AbortException(bt.message);case"MissingPDFException":return new D.MissingPDFException(bt.message);case"PasswordException":return new D.PasswordException(bt.message,bt.code);case"UnexpectedResponseException":return new D.UnexpectedResponseException(bt.message,bt.status);case"UnknownErrorException":return new D.UnknownErrorException(bt.message,bt.details);default:return new D.UnknownErrorException(bt.message,bt.toString())}}class Ct{constructor(it,Y,pt){this.sourceName=it,this.targetName=Y,this.comObj=pt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=gt=>{const et=gt.data;if(et.targetName!==this.sourceName)return;if(et.stream){this._processStreamMessage(et);return}if(et.callback){const J=et.callbackId,G=this.callbackCapabilities[J];if(!G)throw new Error(`Cannot resolve callback ${J}`);if(delete this.callbackCapabilities[J],et.callback===wt.DATA)G.resolve(et.data);else if(et.callback===wt.ERROR)G.reject(vt(et.reason));else throw new Error("Unexpected callback case");return}const B=this.actionHandler[et.action];if(!B)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const J=this.sourceName,G=et.sourceName;new Promise(function(st){st(B(et.data))}).then(function(st){pt.postMessage({sourceName:J,targetName:G,callback:wt.DATA,callbackId:et.callbackId,data:st})},function(st){pt.postMessage({sourceName:J,targetName:G,callback:wt.ERROR,callbackId:et.callbackId,reason:vt(st)})});return}if(et.streamId){this._createStreamSink(et);return}B(et.data)},pt.addEventListener("message",this._onComObjOnMessage)}on(it,Y){const pt=this.actionHandler;if(pt[it])throw new Error(`There is already an actionName called "${it}"`);pt[it]=Y}send(it,Y,pt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,data:Y},pt)}sendWithPromise(it,Y,pt){const gt=this.callbackId++,et=(0,D.createPromiseCapability)();this.callbackCapabilities[gt]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,callbackId:gt,data:Y},pt)}catch(B){et.reject(B)}return et.promise}sendWithStream(it,Y,pt,gt){const et=this.streamId++,B=this.sourceName,J=this.targetName,G=this.comObj;return new ReadableStream({start:st=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et]={controller:st,startCall:lt,pullCall:null,cancelCall:null,isClosed:!1},G.postMessage({sourceName:B,targetName:J,action:it,streamId:et,data:Y,desiredSize:st.desiredSize},gt),lt.promise},pull:st=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].pullCall=lt,G.postMessage({sourceName:B,targetName:J,stream:dt.PULL,streamId:et,desiredSize:st.desiredSize}),lt.promise},cancel:st=>{(0,D.assert)(st instanceof Error,"cancel must have a valid reason");const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].cancelCall=lt,this.streamControllers[et].isClosed=!0,G.postMessage({sourceName:B,targetName:J,stream:dt.CANCEL,streamId:et,reason:vt(st)}),lt.promise}},pt)}_createStreamSink(it){const Y=it.streamId,pt=this.sourceName,gt=it.sourceName,et=this.comObj,B=this,J=this.actionHandler[it.action],G={enqueue(st,lt=1,tt){if(this.isCancelled)return;const ct=this.desiredSize;this.desiredSize-=lt,ct>0&&this.desiredSize<=0&&(this.sinkCapability=(0,D.createPromiseCapability)(),this.ready=this.sinkCapability.promise),et.postMessage({sourceName:pt,targetName:gt,stream:dt.ENQUEUE,streamId:Y,chunk:st},tt)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:pt,targetName:gt,stream:dt.CLOSE,streamId:Y}),delete B.streamSinks[Y])},error(st){(0,D.assert)(st instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:pt,targetName:gt,stream:dt.ERROR,streamId:Y,reason:vt(st)}))},sinkCapability:(0,D.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:it.desiredSize,ready:null};G.sinkCapability.resolve(),G.ready=G.sinkCapability.promise,this.streamSinks[Y]=G,new Promise(function(st){st(J(it.data,G))}).then(function(){et.postMessage({sourceName:pt,targetName:gt,stream:dt.START_COMPLETE,streamId:Y,success:!0})},function(st){et.postMessage({sourceName:pt,targetName:gt,stream:dt.START_COMPLETE,streamId:Y,reason:vt(st)})})}_processStreamMessage(it){const Y=it.streamId,pt=this.sourceName,gt=it.sourceName,et=this.comObj,B=this.streamControllers[Y],J=this.streamSinks[Y];switch(it.stream){case dt.START_COMPLETE:it.success?B.startCall.resolve():B.startCall.reject(vt(it.reason));break;case dt.PULL_COMPLETE:it.success?B.pullCall.resolve():B.pullCall.reject(vt(it.reason));break;case dt.PULL:if(!J){et.postMessage({sourceName:pt,targetName:gt,stream:dt.PULL_COMPLETE,streamId:Y,success:!0});break}J.desiredSize<=0&&it.desiredSize>0&&J.sinkCapability.resolve(),J.desiredSize=it.desiredSize,new Promise(function(G){G(J.onPull&&J.onPull())}).then(function(){et.postMessage({sourceName:pt,targetName:gt,stream:dt.PULL_COMPLETE,streamId:Y,success:!0})},function(G){et.postMessage({sourceName:pt,targetName:gt,stream:dt.PULL_COMPLETE,streamId:Y,reason:vt(G)})});break;case dt.ENQUEUE:if((0,D.assert)(B,"enqueue should have stream controller"),B.isClosed)break;B.controller.enqueue(it.chunk);break;case dt.CLOSE:if((0,D.assert)(B,"close should have stream controller"),B.isClosed)break;B.isClosed=!0,B.controller.close(),this._deleteStreamController(B,Y);break;case dt.ERROR:(0,D.assert)(B,"error should have stream controller"),B.controller.error(vt(it.reason)),this._deleteStreamController(B,Y);break;case dt.CANCEL_COMPLETE:it.success?B.cancelCall.resolve():B.cancelCall.reject(vt(it.reason)),this._deleteStreamController(B,Y);break;case dt.CANCEL:if(!J)break;new Promise(function(G){G(J.onCancel&&J.onCancel(vt(it.reason)))}).then(function(){et.postMessage({sourceName:pt,targetName:gt,stream:dt.CANCEL_COMPLETE,streamId:Y,success:!0})},function(G){et.postMessage({sourceName:pt,targetName:gt,stream:dt.CANCEL_COMPLETE,streamId:Y,reason:vt(G)})}),J.sinkCapability.reject(vt(it.reason)),J.isCancelled=!0,delete this.streamSinks[Y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(it,Y){await Promise.allSettled([it.startCall&&it.startCall.promise,it.pullCall&&it.pullCall.promise,it.cancelCall&&it.cancelCall.promise]),delete this.streamControllers[Y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}E.MessageHandler=Ct},(nt,E,at)=>{var dt,vt;Object.defineProperty(E,"__esModule",{value:!0}),E.Metadata=void 0;var D=at(1);class wt{constructor({parsedData:bt,rawData:it}){le(this,dt,void 0);le(this,vt,void 0);he(this,dt,bt),he(this,vt,it)}getRaw(){return Yt(this,vt)}get(bt){var it;return(it=Yt(this,dt).get(bt))!=null?it:null}getAll(){return(0,D.objectFromMap)(Yt(this,dt))}has(bt){return Yt(this,dt).has(bt)}}dt=new WeakMap,vt=new WeakMap,E.Metadata=wt},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.OptionalContentConfig=void 0;var D=at(1);class wt{constructor(Ct,bt){this.visible=!0,this.name=Ct,this.intent=bt}}class dt{constructor(Ct){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,Ct!==null){this.name=Ct.name,this.creator=Ct.creator,this._order=Ct.order;for(const bt of Ct.groups)this._groups.set(bt.id,new wt(bt.name,bt.intent));if(Ct.baseState==="OFF")for(const bt of this._groups)bt.visible=!1;for(const bt of Ct.on)this._groups.get(bt).visible=!0;for(const bt of Ct.off)this._groups.get(bt).visible=!1}}_evaluateVisibilityExpression(Ct){const bt=Ct.length;if(bt<2)return!0;const it=Ct[0];for(let Y=1;Y<bt;Y++){const pt=Ct[Y];let gt;if(Array.isArray(pt))gt=this._evaluateVisibilityExpression(pt);else if(this._groups.has(pt))gt=this._groups.get(pt).visible;else return(0,D.warn)(`Optional content group not found: ${pt}`),!0;switch(it){case"And":if(!gt)return!1;break;case"Or":if(gt)return!0;break;case"Not":return!gt;default:return!0}}return it==="And"}isVisible(Ct){if(this._groups.size===0)return!0;if(!Ct)return(0,D.warn)("Optional content group not defined."),!0;if(Ct.type==="OCG")return this._groups.has(Ct.id)?this._groups.get(Ct.id).visible:((0,D.warn)(`Optional content group not found: ${Ct.id}`),!0);if(Ct.type==="OCMD"){if(Ct.expression)return this._evaluateVisibilityExpression(Ct.expression);if(!Ct.policy||Ct.policy==="AnyOn"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!0}return!1}else if(Ct.policy==="AllOn"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!1}return!0}else if(Ct.policy==="AnyOff"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!0}return!1}else if(Ct.policy==="AllOff"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!1}return!0}return(0,D.warn)(`Unknown optional content policy ${Ct.policy}.`),!0}return(0,D.warn)(`Unknown group type ${Ct.type}.`),!0}setVisibility(Ct,bt=!0){if(!this._groups.has(Ct)){(0,D.warn)(`Optional content group not found: ${Ct}`);return}this._groups.get(Ct).visible=!!bt}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,D.objectFromMap)(this._groups):null}getGroup(Ct){return this._groups.get(Ct)||null}}E.OptionalContentConfig=dt},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFDataTransportStream=void 0;var D=at(1),wt=at(5);class dt{constructor(it,Y){(0,D.assert)(Y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=it.progressiveDone||!1,this._contentDispositionFilename=it.contentDispositionFilename||null;const pt=it.initialData;if((pt==null?void 0:pt.length)>0){const gt=new Uint8Array(pt).buffer;this._queuedChunks.push(gt)}this._pdfDataRangeTransport=Y,this._isStreamingSupported=!it.disableStream,this._isRangeSupported=!it.disableRange,this._contentLength=it.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((gt,et)=>{this._onReceiveData({begin:gt,chunk:et})}),this._pdfDataRangeTransport.addProgressListener((gt,et)=>{this._onProgress({loaded:gt,total:et})}),this._pdfDataRangeTransport.addProgressiveReadListener(gt=>{this._onReceiveData({chunk:gt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(it){const Y=new Uint8Array(it.chunk).buffer;if(it.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Y):this._queuedChunks.push(Y);else{const pt=this._rangeReaders.some(function(gt){return gt._begin!==it.begin?!1:(gt._enqueue(Y),!0)});(0,D.assert)(pt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var it,Y;return(Y=(it=this._fullRequestReader)==null?void 0:it._loaded)!=null?Y:0}_onProgress(it){if(it.total===void 0){const Y=this._rangeReaders[0];Y!=null&&Y.onProgress&&Y.onProgress({loaded:it.loaded})}else{const Y=this._fullRequestReader;Y!=null&&Y.onProgress&&Y.onProgress({loaded:it.loaded,total:it.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(it){const Y=this._rangeReaders.indexOf(it);Y>=0&&this._rangeReaders.splice(Y,1)}getFullReader(){(0,D.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const it=this._queuedChunks;return this._queuedChunks=null,new vt(this,it,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(it,Y){if(Y<=this._progressiveDataLength)return null;const pt=new Ct(this,it,Y);return this._pdfDataRangeTransport.requestDataRange(it,Y),this._rangeReaders.push(pt),pt}cancelAllRequests(it){this._fullRequestReader&&this._fullRequestReader.cancel(it);for(const Y of this._rangeReaders.slice(0))Y.cancel(it);this._pdfDataRangeTransport.abort()}}E.PDFDataTransportStream=dt;class vt{constructor(it,Y,pt=!1,gt=null){this._stream=it,this._done=pt||!1,this._filename=(0,wt.isPdfFile)(gt)?gt:null,this._queuedChunks=Y||[],this._loaded=0;for(const et of this._queuedChunks)this._loaded+=et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),it._fullRequestReader=this,this.onProgress=null}_enqueue(it){this._done||(this._requests.length>0?this._requests.shift().resolve({value:it,done:!1}):this._queuedChunks.push(it),this._loaded+=it.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ct{constructor(it,Y,pt){this._stream=it,this._begin=Y,this._end=pt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(it){if(!this._done){if(this._requests.length===0)this._queuedChunk=it;else{this._requests.shift().resolve({value:it,done:!1});for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Y=this._queuedChunk;return this._queuedChunk=null,{value:Y,done:!1}}if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(nt,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaText=void 0;class at{static textContent(wt){const dt=[],vt={items:dt,styles:Object.create(null)};function Ct(bt){var pt;if(!bt)return;let it=null;const Y=bt.name;if(Y==="#text")it=bt.value;else if(at.shouldBuildText(Y))(pt=bt==null?void 0:bt.attributes)!=null&&pt.textContent?it=bt.attributes.textContent:bt.value&&(it=bt.value);else return;if(it!==null&&dt.push({str:it}),!!bt.children)for(const gt of bt.children)Ct(gt)}return Ct(wt),vt}static shouldBuildText(wt){return!(wt==="textarea"||wt==="input"||wt==="option"||wt==="select")}}E.XfaText=at},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.NodeStandardFontDataFactory=E.NodeCanvasFactory=E.NodeCMapReaderFactory=void 0;var D=at(6);const wt=function(bt){return new Promise((it,Y)=>{require$$4.readFile(bt,(gt,et)=>{if(gt||!et){Y(new Error(gt));return}it(new Uint8Array(et))})})};class dt extends D.BaseCanvasFactory{_createCanvas(it,Y){return require$$4.createCanvas(it,Y)}}E.NodeCanvasFactory=dt;class vt extends D.BaseCMapReaderFactory{_fetchData(it,Y){return wt(it).then(pt=>({cMapData:pt,compressionType:Y}))}}E.NodeCMapReaderFactory=vt;class Ct extends D.BaseStandardFontDataFactory{_fetchData(it){return wt(it)}}E.NodeStandardFontDataFactory=Ct},(nt,E,at)=>{var W,Ee;Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationLayer=void 0;var D=at(1),wt=at(5),dt=at(8),vt=at(21),Ct=at(22);const bt=1e3,it=new WeakSet;function Y(Z){return{width:Z[2]-Z[0],height:Z[3]-Z[1]}}class pt{static create(A){switch(A.data.annotationType){case D.AnnotationType.LINK:return new et(A);case D.AnnotationType.TEXT:return new B(A);case D.AnnotationType.WIDGET:switch(A.data.fieldType){case"Tx":return new G(A);case"Btn":return A.data.radioButton?new lt(A):A.data.checkBox?new st(A):new tt(A);case"Ch":return new ct(A)}return new J(A);case D.AnnotationType.POPUP:return new ut(A);case D.AnnotationType.FREETEXT:return new kt(A);case D.AnnotationType.LINE:return new V(A);case D.AnnotationType.SQUARE:return new Q(A);case D.AnnotationType.CIRCLE:return new ot(A);case D.AnnotationType.POLYLINE:return new _t(A);case D.AnnotationType.CARET:return new Ft(A);case D.AnnotationType.INK:return new St(A);case D.AnnotationType.POLYGON:return new ht(A);case D.AnnotationType.HIGHLIGHT:return new Lt(A);case D.AnnotationType.UNDERLINE:return new $t(A);case D.AnnotationType.SQUIGGLY:return new Dt(A);case D.AnnotationType.STRIKEOUT:return new jt(A);case D.AnnotationType.STAMP:return new Nt(A);case D.AnnotationType.FILEATTACHMENT:return new qt(A);default:return new gt(A)}}}class gt{constructor(A,{isRenderable:R=!1,ignoreBorder:q=!1,createQuadrilaterals:K=!1}={}){this.isRenderable=R,this.data=A.data,this.layer=A.layer,this.page=A.page,this.viewport=A.viewport,this.linkService=A.linkService,this.downloadManager=A.downloadManager,this.imageResourcesPath=A.imageResourcesPath,this.renderForms=A.renderForms,this.svgFactory=A.svgFactory,this.annotationStorage=A.annotationStorage,this.enableScripting=A.enableScripting,this.hasJSActions=A.hasJSActions,this._fieldObjects=A.fieldObjects,this._mouseState=A.mouseState,R&&(this.container=this._createContainer(q)),K&&(this.quadrilaterals=this._createQuadrilaterals(q))}_createContainer(A=!1){const R=this.data,q=this.page,K=this.viewport,X=document.createElement("section");let{width:ft,height:mt}=Y(R.rect);X.setAttribute("data-annotation-id",R.id);const Pt=D.Util.normalizeRect([R.rect[0],q.view[3]-R.rect[1]+q.view[1],R.rect[2],q.view[3]-R.rect[3]+q.view[1]]);if(R.hasOwnCanvas){const yt=K.transform.slice(),[Rt,xt]=D.Util.singularValueDecompose2dScale(yt);ft=Math.ceil(ft*Rt),mt=Math.ceil(mt*xt),Pt[0]*=Rt,Pt[1]*=xt;for(let Ot=0;Ot<4;Ot++)yt[Ot]=Math.sign(yt[Ot]);X.style.transform=`matrix(${yt.join(",")})`}else X.style.transform=`matrix(${K.transform.join(",")})`;if(X.style.transformOrigin=`${-Pt[0]}px ${-Pt[1]}px`,!A&&R.borderStyle.width>0){X.style.borderWidth=`${R.borderStyle.width}px`,R.borderStyle.style!==D.AnnotationBorderStyleType.UNDERLINE&&(ft-=2*R.borderStyle.width,mt-=2*R.borderStyle.width);const yt=R.borderStyle.horizontalCornerRadius,Rt=R.borderStyle.verticalCornerRadius;if(yt>0||Rt>0){const Ot=`${yt}px / ${Rt}px`;X.style.borderRadius=Ot}switch(R.borderStyle.style){case D.AnnotationBorderStyleType.SOLID:X.style.borderStyle="solid";break;case D.AnnotationBorderStyleType.DASHED:X.style.borderStyle="dashed";break;case D.AnnotationBorderStyleType.BEVELED:(0,D.warn)("Unimplemented border style: beveled");break;case D.AnnotationBorderStyleType.INSET:(0,D.warn)("Unimplemented border style: inset");break;case D.AnnotationBorderStyleType.UNDERLINE:X.style.borderBottomStyle="solid";break}R.borderColor||R.color||null?X.style.borderColor=D.Util.makeHexColor(R.color[0]|0,R.color[1]|0,R.color[2]|0):X.style.borderWidth=0}return X.style.left=`${Pt[0]}px`,X.style.top=`${Pt[1]}px`,R.hasOwnCanvas?X.style.width=X.style.height="auto":(X.style.width=`${ft}px`,X.style.height=`${mt}px`),X}get _commonActions(){const A=(R,q,K)=>{const X=K.detail[R];K.target.style[q]=vt.ColorConverters[`${X[0]}_HTML`](X.slice(1))};return(0,D.shadow)(this,"_commonActions",{display:R=>{const q=R.detail.display%2===1;R.target.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:q,print:R.detail.display===0||R.detail.display===3})},print:R=>{this.annotationStorage.setValue(this.data.id,{print:R.detail.print})},hidden:R=>{R.target.style.visibility=R.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:R.detail.hidden})},focus:R=>{setTimeout(()=>R.target.focus({preventScroll:!1}),0)},userName:R=>{R.target.title=R.detail.userName},readonly:R=>{R.detail.readonly?R.target.setAttribute("readonly",""):R.target.removeAttribute("readonly")},required:R=>{R.detail.required?R.target.setAttribute("required",""):R.target.removeAttribute("required")},bgColor:R=>{A("bgColor","backgroundColor",R)},fillColor:R=>{A("fillColor","backgroundColor",R)},fgColor:R=>{A("fgColor","color",R)},textColor:R=>{A("textColor","color",R)},borderColor:R=>{A("borderColor","borderColor",R)},strokeColor:R=>{A("strokeColor","borderColor",R)}})}_dispatchEventFromSandbox(A,R){const q=this._commonActions;for(const K of Object.keys(R.detail)){const X=A[K]||q[K];X&&X(R)}}_setDefaultPropertiesFromJS(A){if(!this.enableScripting)return;const R=this.annotationStorage.getRawValue(this.data.id);if(!R)return;const q=this._commonActions;for(const[K,X]of Object.entries(R)){const ft=q[K];ft&&(ft({detail:X,target:A}),delete R[K])}}_createQuadrilaterals(A=!1){if(!this.data.quadPoints)return null;const R=[],q=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],R.push(this._createContainer(A));return this.data.rect=q,R}_createPopup(A,R){let q=this.container;this.quadrilaterals&&(A=A||this.quadrilaterals,q=this.quadrilaterals[0]),A||(A=document.createElement("div"),A.style.height=q.style.height,A.style.width=q.style.width,q.appendChild(A));const X=new At({container:q,trigger:A,color:R.color,titleObj:R.titleObj,modificationDate:R.modificationDate,contentsObj:R.contentsObj,richText:R.richText,hideWrapper:!0}).render();X.style.left=q.style.width,q.appendChild(X)}_renderQuadrilaterals(A){for(const R of this.quadrilaterals)R.className=A;return this.quadrilaterals}render(){(0,D.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(A,R=null){const q=[];if(this._fieldObjects){const K=this._fieldObjects[A];if(K)for(const{page:X,id:ft,exportValues:mt}of K){if(X===-1||ft===R)continue;const Pt=typeof mt=="string"?mt:null,yt=document.getElementById(ft);if(yt&&!it.has(yt)){(0,D.warn)(`_getElementsByName - element not allowed: ${ft}`);continue}q.push({id:ft,exportValue:Pt,domElement:yt})}return q}for(const K of document.getElementsByName(A)){const{id:X,exportValue:ft}=K;X!==R&&(!it.has(K)||q.push({id:X,exportValue:ft,domElement:K}))}return q}static get platform(){const A=typeof navigator!="undefined"?navigator.platform:"";return(0,D.shadow)(this,"platform",{isWin:A.includes("Win"),isMac:A.includes("Mac")})}}class et extends gt{constructor(A,R=null){const q=!!(A.data.url||A.data.dest||A.data.action||A.data.isTooltipOnly||A.data.resetForm||A.data.actions&&(A.data.actions.Action||A.data.actions["Mouse Up"]||A.data.actions["Mouse Down"]));super(A,{isRenderable:q,ignoreBorder:!!(R!=null&&R.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:A,linkService:R}=this,q=document.createElement("a");if(A.url)R.addLinkAttributes(q,A.url,A.newWindow);else if(A.action)this._bindNamedAction(q,A.action);else if(A.dest)this._bindLink(q,A.dest);else{let K=!1;A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(K=!0,this._bindJSAction(q,A)),A.resetForm?this._bindResetFormAction(q,A.resetForm):K||this._bindLink(q,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((K,X)=>{const ft=X===0?q:q.cloneNode();return K.appendChild(ft),K}):(this.container.className="linkAnnotation",this.container.appendChild(q),this.container)}_bindLink(A,R){A.href=this.linkService.getDestinationHash(R),A.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&(A.className="internalLink")}_bindNamedAction(A,R){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(R),!1),A.className="internalLink"}_bindJSAction(A,R){A.href=this.linkService.getAnchorUrl("");const q=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(R.actions)){const X=q.get(K);!X||(A[X]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:K}}),!1})}A.onclick||(A.onclick=()=>!1),A.className="internalLink"}_bindResetFormAction(A,R){const q=A.onclick;if(q||(A.href=this.linkService.getAnchorUrl("")),A.className="internalLink",!this._fieldObjects){(0,D.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),q||(A.onclick=()=>!1);return}A.onclick=()=>{var Rt;q&&q();const{fields:K,refs:X,include:ft}=R,mt=[];if(K.length!==0||X.length!==0){const xt=new Set(X);for(const Ot of K){const Bt=this._fieldObjects[Ot]||[];for(const{id:Ht}of Bt)xt.add(Ht)}for(const Ot of Object.values(this._fieldObjects))for(const Bt of Ot)xt.has(Bt.id)===ft&&mt.push(Bt)}else for(const xt of Object.values(this._fieldObjects))mt.push(...xt);const Pt=this.annotationStorage,yt=[];for(const xt of mt){const{id:Ot}=xt;switch(yt.push(Ot),xt.type){case"text":{const Ht=xt.defaultValue||"";Pt.setValue(Ot,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=xt.defaultValue===xt.exportValues;Pt.setValue(Ot,{value:Ht});break}case"combobox":case"listbox":{const Ht=xt.defaultValue||"";Pt.setValue(Ot,{value:Ht});break}default:continue}const Bt=document.getElementById(Ot);!Bt||!it.has(Bt)||Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yt,name:"ResetForm"}})),!1}}}class B extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R})}render(){this.container.className="textAnnotation";const A=document.createElement("img");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",A.alt="[{{type}} Annotation]",A.dataset.l10nId="text_annotation_type",A.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(A,this.data),this.container.appendChild(A),this.container}}class J extends gt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(A){const{isWin:R,isMac:q}=gt.platform;return R&&A.ctrlKey||q&&A.metaKey}_setEventListener(A,R,q,K){R.includes("mouse")?A.addEventListener(R,X=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(X),shift:X.shiftKey,modifier:this._getKeyModifier(X)}})}):A.addEventListener(R,X=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(X)}})})}_setEventListeners(A,R,q){var K;for(const[X,ft]of R)(ft==="Action"||((K=this.data.actions)==null?void 0:K[ft]))&&this._setEventListener(A,X,ft,q)}_setBackgroundColor(A){const R=this.data.backgroundColor||null;A.style.backgroundColor=R===null?"transparent":D.Util.makeHexColor(R[0],R[1],R[2])}}class G extends J{constructor(A){const R=A.renderForms||!A.data.hasAppearance&&!!A.data.fieldValue;super(A,{isRenderable:R})}setPropertyOnSiblings(A,R,q,K){const X=this.annotationStorage;for(const ft of this._getElementsByName(A.name,A.id))ft.domElement&&(ft.domElement[R]=q),X.setValue(ft.id,{[K]:q})}render(){var K;const A=this.annotationStorage,R=this.data.id;this.container.className="textWidgetAnnotation";let q=null;if(this.renderForms){const X=A.getValue(R,{value:this.data.fieldValue}),ft=X.formattedValue||X.value||"",mt={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=ft):(q=document.createElement("input"),q.type="text",q.setAttribute("value",ft)),it.add(q),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=bt,mt.userValue=ft,q.setAttribute("id",R),q.addEventListener("input",yt=>{A.setValue(R,{value:yt.target.value}),this.setPropertyOnSiblings(q,"value",yt.target.value,"value")}),q.addEventListener("resetform",yt=>{var xt;const Rt=(xt=this.data.defaultFieldValue)!=null?xt:"";q.value=mt.userValue=Rt,mt.formattedValue=null});let Pt=yt=>{const{formattedValue:Rt}=mt;Rt!=null&&(yt.target.value=Rt),yt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",Rt=>{mt.userValue&&(Rt.target.value=mt.userValue),mt.valueOnFocus=Rt.target.value}),q.addEventListener("updatefromsandbox",Rt=>{const xt={value(Ot){var Bt;mt.userValue=(Bt=Ot.detail.value)!=null?Bt:"",A.setValue(R,{value:mt.userValue.toString()}),Ot.target.value=mt.userValue},formattedValue(Ot){const{formattedValue:Bt}=Ot.detail;mt.formattedValue=Bt,Bt!=null&&Ot.target!==document.activeElement&&(Ot.target.value=Bt),A.setValue(R,{formattedValue:Bt})},selRange(Ot){Ot.target.setSelectionRange(...Ot.detail.selRange)}};this._dispatchEventFromSandbox(xt,Rt)}),q.addEventListener("keydown",Rt=>{var Bt;let xt=-1;if(Rt.key==="Escape"?xt=0:Rt.key==="Enter"?xt=2:Rt.key==="Tab"&&(xt=3),xt===-1)return;const{value:Ot}=Rt.target;mt.valueOnFocus!==Ot&&(mt.userValue=Ot,(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Ot,willCommit:!0,commitKey:xt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const yt=Pt;Pt=null,q.addEventListener("blur",Rt=>{var Ot;const{value:xt}=Rt.target;mt.userValue=xt,this._mouseState.isDown&&mt.valueOnFocus!==xt&&((Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,willCommit:!0,commitKey:1,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),yt(Rt)}),(K=this.data.actions)!=null&&K.Keystroke&&q.addEventListener("beforeinput",Rt=>{var Vt;const{data:xt,target:Ot}=Rt,{value:Bt,selectionStart:Ht,selectionEnd:Wt}=Ot;let It=Ht,zt=Wt;switch(Rt.inputType){case"deleteWordBackward":{const Ut=Bt.substring(0,Ht).match(/\w*[^\w]*$/);Ut&&(It-=Ut[0].length);break}case"deleteWordForward":{const Ut=Bt.substring(Ht).match(/^[^\w]*\w*/);Ut&&(zt+=Ut[0].length);break}case"deleteContentBackward":Ht===Wt&&(It-=1);break;case"deleteContentForward":Ht===Wt&&(zt+=1);break}Rt.preventDefault(),(Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Bt,change:xt||"",willCommit:!1,selStart:It,selEnd:zt}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(Pt&&q.addEventListener("blur",Pt),this.data.maxLen!==null&&(q.maxLength=this.data.maxLen),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;q.classList.add("comb"),q.style.letterSpacing=`calc(${Rt}px - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.appendChild(q),this.container}_setTextStyle(A){const R=["left","center","right"],{fontSize:q,fontColor:K}=this.data.defaultAppearanceData,X=A.style;q&&(X.fontSize=`${q}px`),X.color=D.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(X.textAlign=R[this.data.textAlignment])}}class st extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.exportValue===R.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",A.setValue(q,{value:K})),this.container.className="buttonWidgetAnnotation checkBox";const X=document.createElement("input");return it.add(X),X.disabled=R.readOnly,X.type="checkbox",X.name=R.fieldName,K&&X.setAttribute("checked",!0),X.setAttribute("id",q),X.setAttribute("exportValue",R.exportValue),X.tabIndex=bt,X.addEventListener("change",ft=>{const{name:mt,checked:Pt}=ft.target;for(const yt of this._getElementsByName(mt,q)){const Rt=Pt&&yt.exportValue===R.exportValue;yt.domElement&&(yt.domElement.checked=Rt),A.setValue(yt.id,{value:Rt})}A.setValue(q,{value:Pt})}),X.addEventListener("resetform",ft=>{const mt=R.defaultFieldValue||"Off";ft.target.checked=mt===R.exportValue}),this.enableScripting&&this.hasJSActions&&(X.addEventListener("updatefromsandbox",ft=>{const mt={value(Pt){Pt.target.checked=Pt.detail.value!=="Off",A.setValue(q,{value:Pt.target.checked})}};this._dispatchEventFromSandbox(mt,ft)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.appendChild(X),this.container}}class lt extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.fieldValue===R.buttonValue}).value;typeof K=="string"&&(K=K!==R.buttonValue,A.setValue(q,{value:K}));const X=document.createElement("input");if(it.add(X),X.disabled=R.readOnly,X.type="radio",X.name=R.fieldName,K&&X.setAttribute("checked",!0),X.setAttribute("id",q),X.tabIndex=bt,X.addEventListener("change",ft=>{const{name:mt,checked:Pt}=ft.target;for(const yt of this._getElementsByName(mt,q))A.setValue(yt.id,{value:!1});A.setValue(q,{value:Pt})}),X.addEventListener("resetform",ft=>{const mt=R.defaultFieldValue;ft.target.checked=mt!=null&&mt===R.buttonValue}),this.enableScripting&&this.hasJSActions){const ft=R.buttonValue;X.addEventListener("updatefromsandbox",mt=>{const Pt={value:yt=>{const Rt=ft===yt.detail.value;for(const xt of this._getElementsByName(yt.target.name)){const Ot=Rt&&xt.id===q;xt.domElement&&(xt.domElement.checked=Ot),A.setValue(xt.id,{value:Ot})}}};this._dispatchEventFromSandbox(Pt,mt)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],mt=>mt.target.checked)}return this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.appendChild(X),this.container}}class tt extends et{constructor(A){super(A,{ignoreBorder:A.data.hasAppearance})}render(){const A=super.render();return A.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(A.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(A),A}}class ct extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const A=this.annotationStorage,R=this.data.id,q=A.getValue(R,{value:this.data.fieldValue});let{fontSize:K}=this.data.defaultAppearanceData;K||(K=9);const X=`calc(${K}px * var(--zoom-factor))`,ft=document.createElement("select");it.add(ft),ft.disabled=this.data.readOnly,ft.name=this.data.fieldName,ft.setAttribute("id",R),ft.tabIndex=bt,ft.style.fontSize=`${K}px`,this.data.combo||(ft.size=this.data.options.length,this.data.multiSelect&&(ft.multiple=!0)),ft.addEventListener("resetform",yt=>{const Rt=this.data.defaultFieldValue;for(const xt of ft.options)xt.selected=xt.value===Rt});for(const yt of this.data.options){const Rt=document.createElement("option");Rt.textContent=yt.displayValue,Rt.value=yt.exportValue,this.data.combo&&(Rt.style.fontSize=X),q.value.includes(yt.exportValue)&&Rt.setAttribute("selected",!0),ft.appendChild(Rt)}const mt=(yt,Rt)=>{const xt=Rt?"value":"textContent",Ot=yt.target.options;return yt.target.multiple?Array.prototype.filter.call(Ot,Bt=>Bt.selected).map(Bt=>Bt[xt]):Ot.selectedIndex===-1?null:Ot[Ot.selectedIndex][xt]},Pt=yt=>{const Rt=yt.target.options;return Array.prototype.map.call(Rt,xt=>({displayValue:xt.textContent,exportValue:xt.value}))};return this.enableScripting&&this.hasJSActions?(ft.addEventListener("updatefromsandbox",yt=>{const Rt={value(xt){const Ot=xt.detail.value,Bt=new Set(Array.isArray(Ot)?Ot:[Ot]);for(const Ht of ft.options)Ht.selected=Bt.has(Ht.value);A.setValue(R,{value:mt(xt,!0)})},multipleSelection(xt){ft.multiple=!0},remove(xt){const Ot=ft.options,Bt=xt.detail.remove;Ot[Bt].selected=!1,ft.remove(Bt),Ot.length>0&&Array.prototype.findIndex.call(Ot,Wt=>Wt.selected)===-1&&(Ot[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:Pt(xt)})},clear(xt){for(;ft.length!==0;)ft.remove(0);A.setValue(R,{value:null,items:[]})},insert(xt){const{index:Ot,displayValue:Bt,exportValue:Ht}=xt.detail.insert,Wt=document.createElement("option");Wt.textContent=Bt,Wt.value=Ht,ft.insertBefore(Wt,ft.children[Ot]),A.setValue(R,{value:mt(xt,!0),items:Pt(xt)})},items(xt){const{items:Ot}=xt.detail;for(;ft.length!==0;)ft.remove(0);for(const Bt of Ot){const{displayValue:Ht,exportValue:Wt}=Bt,It=document.createElement("option");It.textContent=Ht,It.value=Wt,ft.appendChild(It)}ft.options.length>0&&(ft.options[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:Pt(xt)})},indices(xt){const Ot=new Set(xt.detail.indices);for(const Bt of xt.target.options)Bt.selected=Ot.has(Bt.index);A.setValue(R,{value:mt(xt,!0)})},editable(xt){xt.target.disabled=!xt.detail.editable}};this._dispatchEventFromSandbox(Rt,yt)}),ft.addEventListener("input",yt=>{var Ot;const Rt=mt(yt,!0),xt=mt(yt,!1);A.setValue(R,{value:Rt}),(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,changeEx:Rt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ft,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],yt=>yt.target.checked)):ft.addEventListener("input",function(yt){A.setValue(R,{value:mt(yt,!0)})}),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.appendChild(ft),this.container}}class ut extends gt{constructor(A){var q,K,X;const R=!!(((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R})}render(){const A=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",A.includes(this.data.parentType))return this.container;const R=`[data-annotation-id="${this.data.parentId}"]`,q=this.layer.querySelectorAll(R);if(q.length===0)return this.container;const K=new At({container:this.container,trigger:Array.from(q),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),X=this.page,ft=D.Util.normalizeRect([this.data.parentRect[0],X.view[3]-this.data.parentRect[1]+X.view[1],this.data.parentRect[2],X.view[3]-this.data.parentRect[3]+X.view[1]]),mt=ft[0]+this.data.parentRect[2]-this.data.parentRect[0],Pt=ft[1];return this.container.style.transformOrigin=`${-mt}px ${-Pt}px`,this.container.style.left=`${mt}px`,this.container.style.top=`${Pt}px`,this.container.appendChild(K.render()),this.container}}class At{constructor(A){this.container=A.container,this.trigger=A.trigger,this.color=A.color,this.titleObj=A.titleObj,this.modificationDate=A.modificationDate,this.contentsObj=A.contentsObj,this.richText=A.richText,this.hideWrapper=A.hideWrapper||!1,this.pinned=!1}render(){var mt,Pt;const R=document.createElement("div");R.className="popupWrapper",this.hideElement=this.hideWrapper?R:this.container,this.hideElement.hidden=!0;const q=document.createElement("div");q.className="popup";const K=this.color;if(K){const yt=.7*(255-K[0])+K[0],Rt=.7*(255-K[1])+K[1],xt=.7*(255-K[2])+K[2];q.style.backgroundColor=D.Util.makeHexColor(yt|0,Rt|0,xt|0)}const X=document.createElement("h1");X.dir=this.titleObj.dir,X.textContent=this.titleObj.str,q.appendChild(X);const ft=wt.PDFDateString.toDateObject(this.modificationDate);if(ft){const yt=document.createElement("span");yt.className="popupDate",yt.textContent="{{date}}, {{time}}",yt.dataset.l10nId="annotation_date_string",yt.dataset.l10nArgs=JSON.stringify({date:ft.toLocaleDateString(),time:ft.toLocaleTimeString()}),q.appendChild(yt)}if(((mt=this.richText)==null?void 0:mt.str)&&(!((Pt=this.contentsObj)!=null&&Pt.str)||this.contentsObj.str===this.richText.str))Ct.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:q}),q.lastChild.className="richText popupContent";else{const yt=this._formatContents(this.contentsObj);q.appendChild(yt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const yt of this.trigger)yt.addEventListener("click",this._toggle.bind(this)),yt.addEventListener("mouseover",this._show.bind(this,!1)),yt.addEventListener("mouseout",this._hide.bind(this,!1));return q.addEventListener("click",this._hide.bind(this,!0)),R.appendChild(q),R}_formatContents({str:A,dir:R}){const q=document.createElement("p");q.className="popupContent",q.dir=R;const K=A.split(/(?:\r\n?|\n)/);for(let X=0,ft=K.length;X<ft;++X){const mt=K[X];q.appendChild(document.createTextNode(mt)),X<ft-1&&q.appendChild(document.createElement("br"))}return q}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(A=!1){A&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(A=!0){A&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class kt extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=this.svgFactory.createElement("svg:line");return X.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),X.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),X.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),X.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),X.setAttribute("stroke-width",A.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),K.appendChild(X),this.container.append(K),this._createPopup(X,A),this.container}}class Q extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=A.borderStyle.width,ft=this.svgFactory.createElement("svg:rect");return ft.setAttribute("x",X/2),ft.setAttribute("y",X/2),ft.setAttribute("width",R-X),ft.setAttribute("height",q-X),ft.setAttribute("stroke-width",X||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class ot extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=A.borderStyle.width,ft=this.svgFactory.createElement("svg:ellipse");return ft.setAttribute("cx",R/2),ft.setAttribute("cy",q/2),ft.setAttribute("rx",R/2-X/2),ft.setAttribute("ry",q/2-X/2),ft.setAttribute("stroke-width",X||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class _t extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q);let X=[];for(const mt of A.vertices){const Pt=mt.x-A.rect[0],yt=A.rect[3]-mt.y;X.push(Pt+","+yt)}X=X.join(" ");const ft=this.svgFactory.createElement(this.svgElementName);return ft.setAttribute("points",X),ft.setAttribute("stroke-width",A.borderStyle.width||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class ht extends _t{constructor(A){super(A),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ft extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class St extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q);for(const X of A.inkLists){let ft=[];for(const Pt of X){const yt=Pt.x-A.rect[0],Rt=A.rect[3]-Pt.y;ft.push(`${yt},${Rt}`)}ft=ft.join(" ");const mt=this.svgFactory.createElement(this.svgElementName);mt.setAttribute("points",ft),mt.setAttribute("stroke-width",A.borderStyle.width||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),this._createPopup(mt,A),K.appendChild(mt)}return this.container.append(K),this.container}}class Lt extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $t extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Dt extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class jt extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Nt extends gt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class qt extends gt{constructor(A){var K;super(A,{isRenderable:!0});const{filename:R,content:q}=this.data.file;this.filename=(0,wt.getFilenameFromUrl)(R),this.content=q,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:R,content:q})}render(){var R,q;this.container.className="fileAttachmentAnnotation";const A=document.createElement("div");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((R=this.data.titleObj)==null?void 0:R.str)||((q=this.data.contentsObj)==null?void 0:q.str)||this.data.richText)&&this._createPopup(A,this.data),this.container.appendChild(A),this.container}_download(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)}}class rt{static render(A){const R=[],q=[];for(const X of A.annotations){if(!X)continue;const{width:ft,height:mt}=Y(X.rect);if(!(ft<=0||mt<=0)){if(X.annotationType===D.AnnotationType.POPUP){q.push(X);continue}R.push(X)}}q.length&&R.push(...q);const K=A.div;for(const X of R){const ft=pt.create({data:X,layer:K,page:A.page,viewport:A.viewport,linkService:A.linkService,downloadManager:A.downloadManager,imageResourcesPath:A.imageResourcesPath||"",renderForms:A.renderForms!==!1,svgFactory:new wt.DOMSVGFactory,annotationStorage:A.annotationStorage||new dt.AnnotationStorage,enableScripting:A.enableScripting,hasJSActions:A.hasJSActions,fieldObjects:A.fieldObjects,mouseState:A.mouseState||{isDown:!1}});if(ft.isRenderable){const mt=ft.render();if(X.hidden&&(mt.style.visibility="hidden"),Array.isArray(mt))for(const Pt of mt)K.appendChild(Pt);else ft instanceof ut?K.prepend(mt):K.appendChild(mt)}}Ae(this,W,Ee).call(this,K,A.annotationCanvasMap)}static update(A){const{page:R,viewport:q,annotations:K,annotationCanvasMap:X,div:ft}=A,mt=q.transform,Pt=`matrix(${mt.join(",")})`;let yt,Rt;for(const xt of K){const Ot=ft.querySelectorAll(`[data-annotation-id="${xt.id}"]`);if(Ot)for(const Bt of Ot)if(xt.hasOwnCanvas){const Ht=D.Util.normalizeRect([xt.rect[0],R.view[3]-xt.rect[1]+R.view[1],xt.rect[2],R.view[3]-xt.rect[3]+R.view[1]]);if(!Rt){yt=Math.abs(mt[0]||mt[1]);const zt=mt.slice();for(let Vt=0;Vt<4;Vt++)zt[Vt]=Math.sign(zt[Vt]);Rt=`matrix(${zt.join(",")})`}const Wt=Ht[0]*yt,It=Ht[1]*yt;Bt.style.left=`${Wt}px`,Bt.style.top=`${It}px`,Bt.style.transformOrigin=`${-Wt}px ${-It}px`,Bt.style.transform=Rt}else Bt.style.transform=Pt}Ae(this,W,Ee).call(this,ft,X),ft.hidden=!1}}W=new WeakSet,Ee=function(A,R){if(!!R){for(const[q,K]of R){const X=A.querySelector(`[data-annotation-id="${q}"]`);if(!X)continue;const{firstChild:ft}=X;ft.nodeName==="CANVAS"?X.replaceChild(K,ft):X.insertBefore(K,ft)}R.clear()}},le(rt,W),E.AnnotationLayer=rt},(nt,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.ColorConverters=void 0;function at(wt){return Math.floor(Math.max(0,Math.min(1,wt))*255).toString(16).padStart(2,"0")}class D{static CMYK_G([dt,vt,Ct,bt]){return["G",1-Math.min(1,.3*dt+.59*Ct+.11*vt+bt)]}static G_CMYK([dt]){return["CMYK",0,0,0,1-dt]}static G_RGB([dt]){return["RGB",dt,dt,dt]}static G_HTML([dt]){const vt=at(dt);return`#${vt}${vt}${vt}`}static RGB_G([dt,vt,Ct]){return["G",.3*dt+.59*vt+.11*Ct]}static RGB_HTML([dt,vt,Ct]){const bt=at(dt),it=at(vt),Y=at(Ct);return`#${bt}${it}${Y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([dt,vt,Ct,bt]){return["RGB",1-Math.min(1,dt+bt),1-Math.min(1,Ct+bt),1-Math.min(1,vt+bt)]}static CMYK_HTML(dt){return this.RGB_HTML(this.CMYK_RGB(dt))}static RGB_CMYK([dt,vt,Ct]){const bt=1-dt,it=1-vt,Y=1-Ct,pt=Math.min(bt,it,Y);return["CMYK",bt,it,Y,pt]}}E.ColorConverters=D},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaLayer=void 0;var D=at(18);class wt{static setupStorage(vt,Ct,bt,it,Y){const pt=it.getValue(Ct,{value:null});switch(bt.name){case"textarea":if(pt.value!==null&&(vt.textContent=pt.value),Y==="print")break;vt.addEventListener("input",gt=>{it.setValue(Ct,{value:gt.target.value})});break;case"input":if(bt.attributes.type==="radio"||bt.attributes.type==="checkbox"){if(pt.value===bt.attributes.xfaOn?vt.setAttribute("checked",!0):pt.value===bt.attributes.xfaOff&&vt.removeAttribute("checked"),Y==="print")break;vt.addEventListener("change",gt=>{it.setValue(Ct,{value:gt.target.checked?gt.target.getAttribute("xfaOn"):gt.target.getAttribute("xfaOff")})})}else{if(pt.value!==null&&vt.setAttribute("value",pt.value),Y==="print")break;vt.addEventListener("input",gt=>{it.setValue(Ct,{value:gt.target.value})})}break;case"select":if(pt.value!==null)for(const gt of bt.children)gt.attributes.value===pt.value&&(gt.attributes.selected=!0);vt.addEventListener("input",gt=>{const et=gt.target.options,B=et.selectedIndex===-1?"":et[et.selectedIndex].value;it.setValue(Ct,{value:B})});break}}static setAttributes({html:vt,element:Ct,storage:bt=null,intent:it,linkService:Y}){const{attributes:pt}=Ct,gt=vt instanceof HTMLAnchorElement;pt.type==="radio"&&(pt.name=`${pt.name}-${it}`);for(const[et,B]of Object.entries(pt))if(!(B==null||et==="dataId"))if(et!=="style")if(et==="textContent")vt.textContent=B;else if(et==="class")B.length&&vt.setAttribute(et,B.join(" "));else{if(gt&&(et==="href"||et==="newWindow"))continue;vt.setAttribute(et,B)}else Object.assign(vt.style,B);gt&&Y.addLinkAttributes(vt,pt.href,pt.newWindow),bt&&pt.dataId&&this.setupStorage(vt,pt.dataId,Ct,bt)}static render(vt){var J;const Ct=vt.annotationStorage,bt=vt.linkService,it=vt.xfaHtml,Y=vt.intent||"display",pt=document.createElement(it.name);it.attributes&&this.setAttributes({html:pt,element:it,intent:Y,linkService:bt});const gt=[[it,-1,pt]],et=vt.div;if(et.appendChild(pt),vt.viewport){const G=`matrix(${vt.viewport.transform.join(",")})`;et.style.transform=G}Y!=="richText"&&et.setAttribute("class","xfaLayer xfaFont");const B=[];for(;gt.length>0;){const[G,st,lt]=gt[gt.length-1];if(st+1===G.children.length){gt.pop();continue}const tt=G.children[++gt[gt.length-1][1]];if(tt===null)continue;const{name:ct}=tt;if(ct==="#text"){const At=document.createTextNode(tt.value);B.push(At),lt.appendChild(At);continue}let ut;if((J=tt==null?void 0:tt.attributes)!=null&&J.xmlns?ut=document.createElementNS(tt.attributes.xmlns,ct):ut=document.createElement(ct),lt.appendChild(ut),tt.attributes&&this.setAttributes({html:ut,element:tt,storage:Ct,intent:Y,linkService:bt}),tt.children&&tt.children.length>0)gt.push([tt,-1,ut]);else if(tt.value){const At=document.createTextNode(tt.value);D.XfaText.shouldBuildText(ct)&&B.push(At),ut.appendChild(At)}}for(const G of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))G.setAttribute("readOnly",!0);return{textDivs:B}}static update(vt){const Ct=`matrix(${vt.viewport.transform.join(",")})`;vt.div.style.transform=Ct,vt.div.hidden=!1}}E.XfaLayer=wt},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.renderTextLayer=st;var D=at(1);const wt=1e5,dt=30,vt=.8,Ct=new Map,bt=/^\s+$/g;function it(lt,tt){const ct=Ct.get(lt);if(ct)return ct;tt.save(),tt.font=`${dt}px ${lt}`;const ut=tt.measureText("");let At=ut.fontBoundingBoxAscent,kt=Math.abs(ut.fontBoundingBoxDescent);if(At){tt.restore();const Q=At/(At+kt);return Ct.set(lt,Q),Q}tt.strokeStyle="red",tt.clearRect(0,0,dt,dt),tt.strokeText("g",0,0);let V=tt.getImageData(0,0,dt,dt).data;kt=0;for(let Q=V.length-1-3;Q>=0;Q-=4)if(V[Q]>0){kt=Math.ceil(Q/4/dt);break}tt.clearRect(0,0,dt,dt),tt.strokeText("A",0,dt),V=tt.getImageData(0,0,dt,dt).data,At=0;for(let Q=0,ot=V.length;Q<ot;Q+=4)if(V[Q]>0){At=dt-Math.floor(Q/4/dt);break}if(tt.restore(),At){const Q=At/(At+kt);return Ct.set(lt,Q),Q}return Ct.set(lt,vt),vt}function Y(lt,tt,ct,ut){const At=document.createElement("span"),kt=lt._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:tt.str!=="",hasEOL:tt.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:tt.str!=="",hasEOL:tt.hasEOL};lt._textDivs.push(At);const V=D.Util.transform(lt._viewport.transform,tt.transform);let Q=Math.atan2(V[1],V[0]);const ot=ct[tt.fontName];ot.vertical&&(Q+=Math.PI/2);const _t=Math.hypot(V[2],V[3]),ht=_t*it(ot.fontFamily,ut);let Ft,St;Q===0?(Ft=V[4],St=V[5]-ht):(Ft=V[4]+ht*Math.sin(Q),St=V[5]-ht*Math.cos(Q)),At.style.left=`${Ft}px`,At.style.top=`${St}px`,At.style.fontSize=`${_t}px`,At.style.fontFamily=ot.fontFamily,At.setAttribute("role","presentation"),At.textContent=tt.str,At.dir=tt.dir,lt._fontInspectorEnabled&&(At.dataset.fontName=tt.fontName),Q!==0&&(kt.angle=Q*(180/Math.PI));let Lt=!1;if(tt.str.length>1||lt._enhanceTextSelection&&bt.test(tt.str))Lt=!0;else if(tt.str!==" "&&tt.transform[0]!==tt.transform[3]){const $t=Math.abs(tt.transform[0]),Dt=Math.abs(tt.transform[3]);$t!==Dt&&Math.max($t,Dt)/Math.min($t,Dt)>1.5&&(Lt=!0)}if(Lt&&(ot.vertical?kt.canvasWidth=tt.height*lt._viewport.scale:kt.canvasWidth=tt.width*lt._viewport.scale),lt._textDivProperties.set(At,kt),lt._textContentStream&&lt._layoutText(At),lt._enhanceTextSelection&&kt.hasText){let $t=1,Dt=0;Q!==0&&($t=Math.cos(Q),Dt=Math.sin(Q));const jt=(ot.vertical?tt.height:tt.width)*lt._viewport.scale,Nt=_t;let qt,rt;Q!==0?(qt=[$t,Dt,-Dt,$t,Ft,St],rt=D.Util.getAxialAlignedBoundingBox([0,0,jt,Nt],qt)):rt=[Ft,St,Ft+jt,St+Nt],lt._bounds.push({left:rt[0],top:rt[1],right:rt[2],bottom:rt[3],div:At,size:[jt,Nt],m:qt})}}function pt(lt){if(lt._canceled)return;const tt=lt._textDivs,ct=lt._capability,ut=tt.length;if(ut>wt){lt._renderingDone=!0,ct.resolve();return}if(!lt._textContentStream)for(let At=0;At<ut;At++)lt._layoutText(tt[At]);lt._renderingDone=!0,ct.resolve()}function gt(lt,tt,ct){let ut=0;for(let At=0;At<ct;At++){const kt=lt[tt++];kt>0&&(ut=ut?Math.min(kt,ut):kt)}return ut}function et(lt){const tt=lt._bounds,ct=lt._viewport,ut=B(ct.width,ct.height,tt);for(let At=0;At<ut.length;At++){const kt=tt[At].div,V=lt._textDivProperties.get(kt);if(V.angle===0){V.paddingLeft=tt[At].left-ut[At].left,V.paddingTop=tt[At].top-ut[At].top,V.paddingRight=ut[At].right-tt[At].right,V.paddingBottom=ut[At].bottom-tt[At].bottom,lt._textDivProperties.set(kt,V);continue}const Q=ut[At],ot=tt[At],_t=ot.m,ht=_t[0],Ft=_t[1],St=[[0,0],[0,ot.size[1]],[ot.size[0],0],ot.size],Lt=new Float64Array(64);for(let Dt=0,jt=St.length;Dt<jt;Dt++){const Nt=D.Util.applyTransform(St[Dt],_t);Lt[Dt+0]=ht&&(Q.left-Nt[0])/ht,Lt[Dt+4]=Ft&&(Q.top-Nt[1])/Ft,Lt[Dt+8]=ht&&(Q.right-Nt[0])/ht,Lt[Dt+12]=Ft&&(Q.bottom-Nt[1])/Ft,Lt[Dt+16]=Ft&&(Q.left-Nt[0])/-Ft,Lt[Dt+20]=ht&&(Q.top-Nt[1])/ht,Lt[Dt+24]=Ft&&(Q.right-Nt[0])/-Ft,Lt[Dt+28]=ht&&(Q.bottom-Nt[1])/ht,Lt[Dt+32]=ht&&(Q.left-Nt[0])/-ht,Lt[Dt+36]=Ft&&(Q.top-Nt[1])/-Ft,Lt[Dt+40]=ht&&(Q.right-Nt[0])/-ht,Lt[Dt+44]=Ft&&(Q.bottom-Nt[1])/-Ft,Lt[Dt+48]=Ft&&(Q.left-Nt[0])/Ft,Lt[Dt+52]=ht&&(Q.top-Nt[1])/-ht,Lt[Dt+56]=Ft&&(Q.right-Nt[0])/Ft,Lt[Dt+60]=ht&&(Q.bottom-Nt[1])/-ht}const $t=1+Math.min(Math.abs(ht),Math.abs(Ft));V.paddingLeft=gt(Lt,32,16)/$t,V.paddingTop=gt(Lt,48,16)/$t,V.paddingRight=gt(Lt,0,16)/$t,V.paddingBottom=gt(Lt,16,16)/$t,lt._textDivProperties.set(kt,V)}}function B(lt,tt,ct){const ut=ct.map(function(kt,V){return{x1:kt.left,y1:kt.top,x2:kt.right,y2:kt.bottom,index:V,x1New:void 0,x2New:void 0}});J(lt,ut);const At=new Array(ct.length);for(const kt of ut){const V=kt.index;At[V]={left:kt.x1New,top:0,right:kt.x2New,bottom:0}}ct.map(function(kt,V){const Q=At[V],ot=ut[V];ot.x1=kt.top,ot.y1=lt-Q.right,ot.x2=kt.bottom,ot.y2=lt-Q.left,ot.index=V,ot.x1New=void 0,ot.x2New=void 0}),J(tt,ut);for(const kt of ut){const V=kt.index;At[V].top=kt.x1New,At[V].bottom=kt.x2New}return At}function J(lt,tt){tt.sort(function(At,kt){return At.x1-kt.x1||At.index-kt.index});const ut=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const At of tt){let kt=0;for(;kt<ut.length&&ut[kt].end<=At.y1;)kt++;let V=ut.length-1;for(;V>=0&&ut[V].start>=At.y2;)V--;let Q,ot,_t,ht,Ft=-1/0;for(_t=kt;_t<=V;_t++){Q=ut[_t],ot=Q.boundary;let $t;ot.x2>At.x1?$t=ot.index>At.index?ot.x1New:At.x1:ot.x2New===void 0?$t=(ot.x2+At.x1)/2:$t=ot.x2New,$t>Ft&&(Ft=$t)}for(At.x1New=Ft,_t=kt;_t<=V;_t++)Q=ut[_t],ot=Q.boundary,ot.x2New===void 0?ot.x2>At.x1?ot.index>At.index&&(ot.x2New=ot.x2):ot.x2New=Ft:ot.x2New>Ft&&(ot.x2New=Math.max(Ft,ot.x2));const St=[];let Lt=null;for(_t=kt;_t<=V;_t++){Q=ut[_t],ot=Q.boundary;const $t=ot.x2>At.x2?ot:At;Lt===$t?St[St.length-1].end=Q.end:(St.push({start:Q.start,end:Q.end,boundary:$t}),Lt=$t)}for(ut[kt].start<At.y1&&(St[0].start=At.y1,St.unshift({start:ut[kt].start,end:At.y1,boundary:ut[kt].boundary})),At.y2<ut[V].end&&(St[St.length-1].end=At.y2,St.push({start:At.y2,end:ut[V].end,boundary:ut[V].boundary})),_t=kt;_t<=V;_t++){if(Q=ut[_t],ot=Q.boundary,ot.x2New!==void 0)continue;let $t=!1;for(ht=kt-1;!$t&&ht>=0&&ut[ht].start>=ot.y1;ht--)$t=ut[ht].boundary===ot;for(ht=V+1;!$t&&ht<ut.length&&ut[ht].end<=ot.y2;ht++)$t=ut[ht].boundary===ot;for(ht=0;!$t&&ht<St.length;ht++)$t=St[ht].boundary===ot;$t||(ot.x2New=Ft)}Array.prototype.splice.apply(ut,[kt,V-kt+1].concat(St))}for(const At of ut){const kt=At.boundary;kt.x2New===void 0&&(kt.x2New=Math.max(lt,kt.x2))}}class G{constructor({textContent:tt,textContentStream:ct,container:ut,viewport:At,textDivs:kt,textContentItemsStr:V,enhanceTextSelection:Q}){var ot;this._textContent=tt,this._textContentStream=ct,this._container=ut,this._document=ut.ownerDocument,this._viewport=At,this._textDivs=kt||[],this._textContentItemsStr=V||[],this._enhanceTextSelection=!!Q,this._fontInspectorEnabled=!!((ot=globalThis.FontInspector)!=null&&ot.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,D.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new D.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(tt,ct){for(let ut=0,At=tt.length;ut<At;ut++){if(tt[ut].str===void 0){if(tt[ut].type==="beginMarkedContentProps"||tt[ut].type==="beginMarkedContent"){const kt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),tt[ut].id!==null&&this._container.setAttribute("id",`${tt[ut].id}`),kt.appendChild(this._container)}else tt[ut].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(tt[ut].str),Y(this,tt[ut],ct,this._layoutTextCtx)}}_layoutText(tt){const ct=this._textDivProperties.get(tt);let ut="";if(ct.canvasWidth!==0&&ct.hasText){const{fontSize:At,fontFamily:kt}=tt.style;(At!==this._layoutTextLastFontSize||kt!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${At} ${kt}`,this._layoutTextLastFontSize=At,this._layoutTextLastFontFamily=kt);const{width:V}=this._layoutTextCtx.measureText(tt.textContent);if(V>0){const Q=ct.canvasWidth/V;this._enhanceTextSelection&&(ct.scale=Q),ut=`scaleX(${Q})`}}if(ct.angle!==0&&(ut=`rotate(${ct.angle}deg) ${ut}`),ut.length>0&&(this._enhanceTextSelection&&(ct.originalTransform=ut),tt.style.transform=ut),ct.hasText&&this._container.appendChild(tt),ct.hasEOL){const At=document.createElement("br");At.setAttribute("role","presentation"),this._container.appendChild(At)}}_render(tt=0){const ct=(0,D.createPromiseCapability)();let ut=Object.create(null);const At=this._document.createElement("canvas");if(At.height=At.width=dt,this._layoutTextCtx=At.getContext("2d",{alpha:!1}),this._textContent){const kt=this._textContent.items,V=this._textContent.styles;this._processItems(kt,V),ct.resolve()}else if(this._textContentStream){const kt=()=>{this._reader.read().then(({value:V,done:Q})=>{if(Q){ct.resolve();return}Object.assign(ut,V.styles),this._processItems(V.items,ut),kt()},ct.reject)};this._reader=this._textContentStream.getReader(),kt()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');ct.promise.then(()=>{ut=null,tt?this._renderTimer=setTimeout(()=>{pt(this),this._renderTimer=null},tt):pt(this)},this._capability.reject)}expandTextDivs(tt=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(et(this),this._bounds=null);const ct=[],ut=[];for(let At=0,kt=this._textDivs.length;At<kt;At++){const V=this._textDivs[At],Q=this._textDivProperties.get(V);!Q.hasText||(tt?(ct.length=0,ut.length=0,Q.originalTransform&&ct.push(Q.originalTransform),Q.paddingTop>0?(ut.push(`${Q.paddingTop}px`),ct.push(`translateY(${-Q.paddingTop}px)`)):ut.push(0),Q.paddingRight>0?ut.push(`${Q.paddingRight/Q.scale}px`):ut.push(0),Q.paddingBottom>0?ut.push(`${Q.paddingBottom}px`):ut.push(0),Q.paddingLeft>0?(ut.push(`${Q.paddingLeft/Q.scale}px`),ct.push(`translateX(${-Q.paddingLeft/Q.scale}px)`)):ut.push(0),V.style.padding=ut.join(" "),ct.length&&(V.style.transform=ct.join(" "))):(V.style.padding=null,V.style.transform=Q.originalTransform))}}}function st(lt){const tt=new G({textContent:lt.textContent,textContentStream:lt.textContentStream,container:lt.container,viewport:lt.viewport,textDivs:lt.textDivs,textContentItemsStr:lt.textContentItemsStr,enhanceTextSelection:lt.enhanceTextSelection});return tt._render(lt.timeout),tt}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.SVGGraphics=void 0;var D=at(1),wt=at(5),dt=at(3);let vt=class{constructor(){(0,D.unreachable)("Not implemented: SVGGraphics")}};E.SVGGraphics=vt;{let lt=function(V){let Q=[];const ot=[];for(const _t of V){if(_t.fn==="save"){Q.push({fnId:92,fn:"group",items:[]}),ot.push(Q),Q=Q[Q.length-1].items;continue}_t.fn==="restore"?Q=ot.pop():Q.push(_t)}return Q},tt=function(V){if(Number.isInteger(V))return V.toString();const Q=V.toFixed(10);let ot=Q.length-1;if(Q[ot]!=="0")return Q;do ot--;while(Q[ot]==="0");return Q.substring(0,Q[ot]==="."?ot:ot+1)},ct=function(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${tt(V[0])} ${tt(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const Q=Math.acos(V[0])*180/Math.PI;return`rotate(${tt(Q)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${tt(V[4])} ${tt(V[5])})`;return`matrix(${tt(V[0])} ${tt(V[1])} ${tt(V[2])} ${tt(V[3])} ${tt(V[4])} ${tt(V[5])})`};var Ct=lt,bt=tt,it=ct;const Y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},pt="http://www.w3.org/XML/1998/namespace",gt="http://www.w3.org/1999/xlink",et=["butt","round","square"],B=["miter","round","bevel"],J=function(V,Q="",ot=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!ot)return URL.createObjectURL(new Blob([V],{type:Q}));const _t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ht=`data:${Q};base64,`;for(let Ft=0,St=V.length;Ft<St;Ft+=3){const Lt=V[Ft]&255,$t=V[Ft+1]&255,Dt=V[Ft+2]&255,jt=Lt>>2,Nt=(Lt&3)<<4|$t>>4,qt=Ft+1<St?($t&15)<<2|Dt>>6:64,rt=Ft+2<St?Dt&63:64;ht+=_t[jt]+_t[Nt]+_t[qt]+_t[rt]}return ht},G=function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),Q=12,ot=new Int32Array(256);for(let Dt=0;Dt<256;Dt++){let jt=Dt;for(let Nt=0;Nt<8;Nt++)jt&1?jt=3988292384^jt>>1&2147483647:jt=jt>>1&2147483647;ot[Dt]=jt}function _t(Dt,jt,Nt){let qt=-1;for(let rt=jt;rt<Nt;rt++){const W=(qt^Dt[rt])&255,U=ot[W];qt=qt>>>8^U}return qt^-1}function ht(Dt,jt,Nt,qt){let rt=qt;const W=jt.length;Nt[rt]=W>>24&255,Nt[rt+1]=W>>16&255,Nt[rt+2]=W>>8&255,Nt[rt+3]=W&255,rt+=4,Nt[rt]=Dt.charCodeAt(0)&255,Nt[rt+1]=Dt.charCodeAt(1)&255,Nt[rt+2]=Dt.charCodeAt(2)&255,Nt[rt+3]=Dt.charCodeAt(3)&255,rt+=4,Nt.set(jt,rt),rt+=jt.length;const U=_t(Nt,qt+4,rt);Nt[rt]=U>>24&255,Nt[rt+1]=U>>16&255,Nt[rt+2]=U>>8&255,Nt[rt+3]=U&255}function Ft(Dt,jt,Nt){let qt=1,rt=0;for(let W=jt;W<Nt;++W)qt=(qt+(Dt[W]&255))%65521,rt=(rt+qt)%65521;return rt<<16|qt}function St(Dt){if(!dt.isNodeJS)return Lt(Dt);try{let jt;parseInt(process.versions.node)>=8?jt=Dt:jt=Buffer.from(Dt);const Nt=require("zlib").deflateSync(jt,{level:9});return Nt instanceof Uint8Array?Nt:new Uint8Array(Nt)}catch(jt){(0,D.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+jt)}return Lt(Dt)}function Lt(Dt){let jt=Dt.length;const Nt=65535,qt=Math.ceil(jt/Nt),rt=new Uint8Array(2+jt+qt*5+4);let W=0;rt[W++]=120,rt[W++]=156;let U=0;for(;jt>Nt;)rt[W++]=0,rt[W++]=255,rt[W++]=255,rt[W++]=0,rt[W++]=0,rt.set(Dt.subarray(U,U+Nt),W),W+=Nt,U+=Nt,jt-=Nt;rt[W++]=1,rt[W++]=jt&255,rt[W++]=jt>>8&255,rt[W++]=~jt&65535&255,rt[W++]=(~jt&65535)>>8&255,rt.set(Dt.subarray(U),W),W+=Dt.length-U;const Z=Ft(Dt,0,Dt.length);return rt[W++]=Z>>24&255,rt[W++]=Z>>16&255,rt[W++]=Z>>8&255,rt[W++]=Z&255,rt}function $t(Dt,jt,Nt,qt){const rt=Dt.width,W=Dt.height;let U,Z,A;const R=Dt.data;switch(jt){case D.ImageKind.GRAYSCALE_1BPP:Z=0,U=1,A=rt+7>>3;break;case D.ImageKind.RGB_24BPP:Z=2,U=8,A=rt*3;break;case D.ImageKind.RGBA_32BPP:Z=6,U=8,A=rt*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+A)*W);let K=0,X=0;for(let xt=0;xt<W;++xt)q[K++]=0,q.set(R.subarray(X,X+A),K),X+=A,K+=A;if(jt===D.ImageKind.GRAYSCALE_1BPP&&qt){K=0;for(let xt=0;xt<W;xt++){K++;for(let Ot=0;Ot<A;Ot++)q[K++]^=255}}const ft=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,W>>24&255,W>>16&255,W>>8&255,W&255,U,Z,0,0,0]),mt=St(q),Pt=V.length+Q*3+ft.length+mt.length,yt=new Uint8Array(Pt);let Rt=0;return yt.set(V,Rt),Rt+=V.length,ht("IHDR",ft,yt,Rt),Rt+=Q+ft.length,ht("IDATA",mt,yt,Rt),Rt+=Q+mt.length,ht("IEND",new Uint8Array(0),yt,Rt),J(yt,"image/png",Nt)}return function(jt,Nt,qt){const rt=jt.kind===void 0?D.ImageKind.GRAYSCALE_1BPP:jt.kind;return $t(jt,rt,Nt,qt)}}();class st{constructor(){this.fontSizeScale=1,this.fontWeight=Y.fontWeight,this.fontSize=0,this.textMatrix=D.IDENTITY_MATRIX,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=D.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Q,ot){this.x=Q,this.y=ot}}let ut=0,At=0,kt=0;E.SVGGraphics=vt=class{constructor(V,Q,ot=!1){this.svgFactory=new wt.DOMSVGFactory,this.current=new st,this.transformMatrix=D.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=V,this.objs=Q,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ot,this._operatorIdMapping=[];for(const _t in D.OPS)this._operatorIdMapping[D.OPS[_t]]=_t}save(){this.transformStack.push(this.transformMatrix);const V=this.current;this.extraStack.push(V),this.current=V.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(V){this.save(),this.executeOpTree(V),this.restore()}loadDependencies(V){const Q=V.fnArray,ot=V.argsArray;for(let _t=0,ht=Q.length;_t<ht;_t++)if(Q[_t]===D.OPS.dependency)for(const Ft of ot[_t]){const St=Ft.startsWith("g_")?this.commonObjs:this.objs,Lt=new Promise($t=>{St.get(Ft,$t)});this.current.dependencies.push(Lt)}return Promise.all(this.current.dependencies)}transform(V,Q,ot,_t,ht,Ft){const St=[V,Q,ot,_t,ht,Ft];this.transformMatrix=D.Util.transform(this.transformMatrix,St),this.tgrp=null}getSVG(V,Q){this.viewport=Q;const ot=this._initialize(Q);return this.loadDependencies(V).then(()=>(this.transformMatrix=D.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(V)),ot))}convertOpList(V){const Q=this._operatorIdMapping,ot=V.argsArray,_t=V.fnArray,ht=[];for(let Ft=0,St=_t.length;Ft<St;Ft++){const Lt=_t[Ft];ht.push({fnId:Lt,fn:Q[Lt],args:ot[Ft]})}return lt(ht)}executeOpTree(V){for(const Q of V){const ot=Q.fn,_t=Q.fnId,ht=Q.args;switch(_t|0){case D.OPS.beginText:this.beginText();break;case D.OPS.dependency:break;case D.OPS.setLeading:this.setLeading(ht);break;case D.OPS.setLeadingMoveText:this.setLeadingMoveText(ht[0],ht[1]);break;case D.OPS.setFont:this.setFont(ht);break;case D.OPS.showText:this.showText(ht[0]);break;case D.OPS.showSpacedText:this.showText(ht[0]);break;case D.OPS.endText:this.endText();break;case D.OPS.moveText:this.moveText(ht[0],ht[1]);break;case D.OPS.setCharSpacing:this.setCharSpacing(ht[0]);break;case D.OPS.setWordSpacing:this.setWordSpacing(ht[0]);break;case D.OPS.setHScale:this.setHScale(ht[0]);break;case D.OPS.setTextMatrix:this.setTextMatrix(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5]);break;case D.OPS.setTextRise:this.setTextRise(ht[0]);break;case D.OPS.setTextRenderingMode:this.setTextRenderingMode(ht[0]);break;case D.OPS.setLineWidth:this.setLineWidth(ht[0]);break;case D.OPS.setLineJoin:this.setLineJoin(ht[0]);break;case D.OPS.setLineCap:this.setLineCap(ht[0]);break;case D.OPS.setMiterLimit:this.setMiterLimit(ht[0]);break;case D.OPS.setFillRGBColor:this.setFillRGBColor(ht[0],ht[1],ht[2]);break;case D.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ht[0],ht[1],ht[2]);break;case D.OPS.setStrokeColorN:this.setStrokeColorN(ht);break;case D.OPS.setFillColorN:this.setFillColorN(ht);break;case D.OPS.shadingFill:this.shadingFill(ht[0]);break;case D.OPS.setDash:this.setDash(ht[0],ht[1]);break;case D.OPS.setRenderingIntent:this.setRenderingIntent(ht[0]);break;case D.OPS.setFlatness:this.setFlatness(ht[0]);break;case D.OPS.setGState:this.setGState(ht[0]);break;case D.OPS.fill:this.fill();break;case D.OPS.eoFill:this.eoFill();break;case D.OPS.stroke:this.stroke();break;case D.OPS.fillStroke:this.fillStroke();break;case D.OPS.eoFillStroke:this.eoFillStroke();break;case D.OPS.clip:this.clip("nonzero");break;case D.OPS.eoClip:this.clip("evenodd");break;case D.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case D.OPS.paintImageXObject:this.paintImageXObject(ht[0]);break;case D.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ht[0]);break;case D.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ht[0]);break;case D.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ht[0],ht[1]);break;case D.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case D.OPS.closePath:this.closePath();break;case D.OPS.closeStroke:this.closeStroke();break;case D.OPS.closeFillStroke:this.closeFillStroke();break;case D.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case D.OPS.nextLine:this.nextLine();break;case D.OPS.transform:this.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5]);break;case D.OPS.constructPath:this.constructPath(ht[0],ht[1]);break;case D.OPS.endPath:this.endPath();break;case 92:this.group(Q.items);break;default:(0,D.warn)(`Unimplemented operator ${ot}`);break}}}setWordSpacing(V){this.current.wordSpacing=V}setCharSpacing(V){this.current.charSpacing=V}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(V,Q,ot,_t,ht,Ft){const St=this.current;St.textMatrix=St.lineMatrix=[V,Q,ot,_t,ht,Ft],St.textMatrixScale=Math.hypot(V,Q),St.x=St.lineX=0,St.y=St.lineY=0,St.xcoords=[],St.ycoords=[],St.tspan=this.svgFactory.createElement("svg:tspan"),St.tspan.setAttributeNS(null,"font-family",St.fontFamily),St.tspan.setAttributeNS(null,"font-size",`${tt(St.fontSize)}px`),St.tspan.setAttributeNS(null,"y",tt(-St.y)),St.txtElement=this.svgFactory.createElement("svg:text"),St.txtElement.appendChild(St.tspan)}beginText(){const V=this.current;V.x=V.lineX=0,V.y=V.lineY=0,V.textMatrix=D.IDENTITY_MATRIX,V.lineMatrix=D.IDENTITY_MATRIX,V.textMatrixScale=1,V.tspan=this.svgFactory.createElement("svg:tspan"),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtgrp=this.svgFactory.createElement("svg:g"),V.xcoords=[],V.ycoords=[]}moveText(V,Q){const ot=this.current;ot.x=ot.lineX+=V,ot.y=ot.lineY+=Q,ot.xcoords=[],ot.ycoords=[],ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.tspan.setAttributeNS(null,"font-family",ot.fontFamily),ot.tspan.setAttributeNS(null,"font-size",`${tt(ot.fontSize)}px`),ot.tspan.setAttributeNS(null,"y",tt(-ot.y))}showText(V){const Q=this.current,ot=Q.font,_t=Q.fontSize;if(_t===0)return;const ht=Q.fontSizeScale,Ft=Q.charSpacing,St=Q.wordSpacing,Lt=Q.fontDirection,$t=Q.textHScale*Lt,Dt=ot.vertical,jt=Dt?1:-1,Nt=ot.defaultVMetrics,qt=_t*Q.fontMatrix[0];let rt=0;for(const Z of V){if(Z===null){rt+=Lt*St;continue}else if(typeof Z=="number"){rt+=jt*Z*_t/1e3;continue}const A=(Z.isSpace?St:0)+Ft,R=Z.fontChar;let q,K,X=Z.width;if(Dt){let mt;const Pt=Z.vmetric||Nt;mt=Z.vmetric?Pt[1]:X*.5,mt=-mt*qt;const yt=Pt[2]*qt;X=Pt?-Pt[0]:X,q=mt/ht,K=(rt+yt)/ht}else q=rt/ht,K=0;(Z.isInFont||ot.missingFile)&&(Q.xcoords.push(Q.x+q),Dt&&Q.ycoords.push(-Q.y+K),Q.tspan.textContent+=R);let ft;Dt?ft=X*qt-A*Lt:ft=X*qt+A*Lt,rt+=ft}Q.tspan.setAttributeNS(null,"x",Q.xcoords.map(tt).join(" ")),Dt?Q.tspan.setAttributeNS(null,"y",Q.ycoords.map(tt).join(" ")):Q.tspan.setAttributeNS(null,"y",tt(-Q.y)),Dt?Q.y-=rt:Q.x+=rt*$t,Q.tspan.setAttributeNS(null,"font-family",Q.fontFamily),Q.tspan.setAttributeNS(null,"font-size",`${tt(Q.fontSize)}px`),Q.fontStyle!==Y.fontStyle&&Q.tspan.setAttributeNS(null,"font-style",Q.fontStyle),Q.fontWeight!==Y.fontWeight&&Q.tspan.setAttributeNS(null,"font-weight",Q.fontWeight);const W=Q.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;if(W===D.TextRenderingMode.FILL||W===D.TextRenderingMode.FILL_STROKE?(Q.fillColor!==Y.fillColor&&Q.tspan.setAttributeNS(null,"fill",Q.fillColor),Q.fillAlpha<1&&Q.tspan.setAttributeNS(null,"fill-opacity",Q.fillAlpha)):Q.textRenderingMode===D.TextRenderingMode.ADD_TO_PATH?Q.tspan.setAttributeNS(null,"fill","transparent"):Q.tspan.setAttributeNS(null,"fill","none"),W===D.TextRenderingMode.STROKE||W===D.TextRenderingMode.FILL_STROKE){const Z=1/(Q.textMatrixScale||1);this._setStrokeAttributes(Q.tspan,Z)}let U=Q.textMatrix;Q.textRise!==0&&(U=U.slice(),U[5]+=Q.textRise),Q.txtElement.setAttributeNS(null,"transform",`${ct(U)} scale(${tt($t)}, -1)`),Q.txtElement.setAttributeNS(pt,"xml:space","preserve"),Q.txtElement.appendChild(Q.tspan),Q.txtgrp.appendChild(Q.txtElement),this._ensureTransformGroup().appendChild(Q.txtElement)}setLeadingMoveText(V,Q){this.setLeading(-Q),this.moveText(V,Q)}addFontStyle(V){if(!V.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const Q=J(V.data,V.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${V.loadedName}"; src: url(${Q}); }
`}setFont(V){const Q=this.current,ot=this.commonObjs.get(V[0]);let _t=V[1];Q.font=ot,this.embedFonts&&!ot.missingFile&&!this.embeddedFonts[ot.loadedName]&&(this.addFontStyle(ot),this.embeddedFonts[ot.loadedName]=ot),Q.fontMatrix=ot.fontMatrix||D.FONT_IDENTITY_MATRIX;let ht="normal";ot.black?ht="900":ot.bold&&(ht="bold");const Ft=ot.italic?"italic":"normal";_t<0?(_t=-_t,Q.fontDirection=-1):Q.fontDirection=1,Q.fontSize=_t,Q.fontFamily=ot.loadedName,Q.fontWeight=ht,Q.fontStyle=Ft,Q.tspan=this.svgFactory.createElement("svg:tspan"),Q.tspan.setAttributeNS(null,"y",tt(-Q.y)),Q.xcoords=[],Q.ycoords=[]}endText(){var Q;const V=this.current;V.textRenderingMode&D.TextRenderingMode.ADD_TO_PATH_FLAG&&((Q=V.txtElement)==null?void 0:Q.hasChildNodes())&&(V.element=V.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(V){V>0&&(this.current.lineWidth=V)}setLineCap(V){this.current.lineCap=et[V]}setLineJoin(V){this.current.lineJoin=B[V]}setMiterLimit(V){this.current.miterLimit=V}setStrokeAlpha(V){this.current.strokeAlpha=V}setStrokeRGBColor(V,Q,ot){this.current.strokeColor=D.Util.makeHexColor(V,Q,ot)}setFillAlpha(V){this.current.fillAlpha=V}setFillRGBColor(V,Q,ot){this.current.fillColor=D.Util.makeHexColor(V,Q,ot),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(V){this.current.strokeColor=this._makeColorN_Pattern(V)}setFillColorN(V){this.current.fillColor=this._makeColorN_Pattern(V)}shadingFill(V){const Q=this.viewport.width,ot=this.viewport.height,_t=D.Util.inverseTransform(this.transformMatrix),ht=D.Util.applyTransform([0,0],_t),Ft=D.Util.applyTransform([0,ot],_t),St=D.Util.applyTransform([Q,0],_t),Lt=D.Util.applyTransform([Q,ot],_t),$t=Math.min(ht[0],Ft[0],St[0],Lt[0]),Dt=Math.min(ht[1],Ft[1],St[1],Lt[1]),jt=Math.max(ht[0],Ft[0],St[0],Lt[0]),Nt=Math.max(ht[1],Ft[1],St[1],Lt[1]),qt=this.svgFactory.createElement("svg:rect");qt.setAttributeNS(null,"x",$t),qt.setAttributeNS(null,"y",Dt),qt.setAttributeNS(null,"width",jt-$t),qt.setAttributeNS(null,"height",Nt-Dt),qt.setAttributeNS(null,"fill",this._makeShadingPattern(V)),this.current.fillAlpha<1&&qt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(qt)}_makeColorN_Pattern(V){return V[0]==="TilingPattern"?this._makeTilingPattern(V):this._makeShadingPattern(V)}_makeTilingPattern(V){const Q=V[1],ot=V[2],_t=V[3]||D.IDENTITY_MATRIX,[ht,Ft,St,Lt]=V[4],$t=V[5],Dt=V[6],jt=V[7],Nt=`shading${kt++}`,[qt,rt,W,U]=D.Util.normalizeRect([...D.Util.applyTransform([ht,Ft],_t),...D.Util.applyTransform([St,Lt],_t)]),[Z,A]=D.Util.singularValueDecompose2dScale(_t),R=$t*Z,q=Dt*A,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",Nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",R),K.setAttributeNS(null,"height",q),K.setAttributeNS(null,"x",`${qt}`),K.setAttributeNS(null,"y",`${rt}`);const X=this.svg,ft=this.transformMatrix,mt=this.current.fillColor,Pt=this.current.strokeColor,yt=this.svgFactory.create(W-qt,U-rt);if(this.svg=yt,this.transformMatrix=_t,jt===2){const Rt=D.Util.makeHexColor(...Q);this.current.fillColor=Rt,this.current.strokeColor=Rt}return this.executeOpTree(this.convertOpList(ot)),this.svg=X,this.transformMatrix=ft,this.current.fillColor=mt,this.current.strokeColor=Pt,K.appendChild(yt.childNodes[0]),this.defs.appendChild(K),`url(#${Nt})`}_makeShadingPattern(V){switch(typeof V=="string"&&(V=this.objs.get(V)),V[0]){case"RadialAxial":const Q=`shading${kt++}`,ot=V[3];let _t;switch(V[1]){case"axial":const ht=V[4],Ft=V[5];_t=this.svgFactory.createElement("svg:linearGradient"),_t.setAttributeNS(null,"id",Q),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"x1",ht[0]),_t.setAttributeNS(null,"y1",ht[1]),_t.setAttributeNS(null,"x2",Ft[0]),_t.setAttributeNS(null,"y2",Ft[1]);break;case"radial":const St=V[4],Lt=V[5],$t=V[6],Dt=V[7];_t=this.svgFactory.createElement("svg:radialGradient"),_t.setAttributeNS(null,"id",Q),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"cx",Lt[0]),_t.setAttributeNS(null,"cy",Lt[1]),_t.setAttributeNS(null,"r",Dt),_t.setAttributeNS(null,"fx",St[0]),_t.setAttributeNS(null,"fy",St[1]),_t.setAttributeNS(null,"fr",$t);break;default:throw new Error(`Unknown RadialAxial type: ${V[1]}`)}for(const ht of ot){const Ft=this.svgFactory.createElement("svg:stop");Ft.setAttributeNS(null,"offset",ht[0]),Ft.setAttributeNS(null,"stop-color",ht[1]),_t.appendChild(Ft)}return this.defs.appendChild(_t),`url(#${Q})`;case"Mesh":return(0,D.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${V[0]}`)}}setDash(V,Q){this.current.dashArray=V,this.current.dashPhase=Q}constructPath(V,Q){const ot=this.current;let _t=ot.x,ht=ot.y,Ft=[],St=0;for(const Lt of V)switch(Lt|0){case D.OPS.rectangle:_t=Q[St++],ht=Q[St++];const $t=Q[St++],Dt=Q[St++],jt=_t+$t,Nt=ht+Dt;Ft.push("M",tt(_t),tt(ht),"L",tt(jt),tt(ht),"L",tt(jt),tt(Nt),"L",tt(_t),tt(Nt),"Z");break;case D.OPS.moveTo:_t=Q[St++],ht=Q[St++],Ft.push("M",tt(_t),tt(ht));break;case D.OPS.lineTo:_t=Q[St++],ht=Q[St++],Ft.push("L",tt(_t),tt(ht));break;case D.OPS.curveTo:_t=Q[St+4],ht=Q[St+5],Ft.push("C",tt(Q[St]),tt(Q[St+1]),tt(Q[St+2]),tt(Q[St+3]),tt(_t),tt(ht)),St+=6;break;case D.OPS.curveTo2:Ft.push("C",tt(_t),tt(ht),tt(Q[St]),tt(Q[St+1]),tt(Q[St+2]),tt(Q[St+3])),_t=Q[St+2],ht=Q[St+3],St+=4;break;case D.OPS.curveTo3:_t=Q[St+2],ht=Q[St+3],Ft.push("C",tt(Q[St]),tt(Q[St+1]),tt(_t),tt(ht),tt(_t),tt(ht)),St+=4;break;case D.OPS.closePath:Ft.push("Z");break}Ft=Ft.join(" "),ot.path&&V.length>0&&V[0]!==D.OPS.rectangle&&V[0]!==D.OPS.moveTo?Ft=ot.path.getAttributeNS(null,"d")+Ft:(ot.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(ot.path)),ot.path.setAttributeNS(null,"d",Ft),ot.path.setAttributeNS(null,"fill","none"),ot.element=ot.path,ot.setCurrentPoint(_t,ht)}endPath(){const V=this.current;if(V.path=null,!this.pendingClip)return;if(!V.element){this.pendingClip=null;return}const Q=`clippath${ut++}`,ot=this.svgFactory.createElement("svg:clipPath");ot.setAttributeNS(null,"id",Q),ot.setAttributeNS(null,"transform",ct(this.transformMatrix));const _t=V.element.cloneNode(!0);if(this.pendingClip==="evenodd"?_t.setAttributeNS(null,"clip-rule","evenodd"):_t.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ot.appendChild(_t),this.defs.appendChild(ot),V.activeClipUrl){V.clipGroup=null;for(const ht of this.extraStack)ht.clipGroup=null;ot.setAttributeNS(null,"clip-path",V.activeClipUrl)}V.activeClipUrl=`url(#${Q})`,this.tgrp=null}clip(V){this.pendingClip=V}closePath(){const V=this.current;if(V.path){const Q=`${V.path.getAttributeNS(null,"d")}Z`;V.path.setAttributeNS(null,"d",Q)}}setLeading(V){this.current.leading=-V}setTextRise(V){this.current.textRise=V}setTextRenderingMode(V){this.current.textRenderingMode=V}setHScale(V){this.current.textHScale=V/100}setRenderingIntent(V){}setFlatness(V){}setGState(V){for(const[Q,ot]of V)switch(Q){case"LW":this.setLineWidth(ot);break;case"LC":this.setLineCap(ot);break;case"LJ":this.setLineJoin(ot);break;case"ML":this.setMiterLimit(ot);break;case"D":this.setDash(ot[0],ot[1]);break;case"RI":this.setRenderingIntent(ot);break;case"FL":this.setFlatness(ot);break;case"Font":this.setFont(ot);break;case"CA":this.setStrokeAlpha(ot);break;case"ca":this.setFillAlpha(ot);break;default:(0,D.warn)(`Unimplemented graphic state operator ${Q}`);break}}fill(){const V=this.current;V.element&&(V.element.setAttributeNS(null,"fill",V.fillColor),V.element.setAttributeNS(null,"fill-opacity",V.fillAlpha),this.endPath())}stroke(){const V=this.current;V.element&&(this._setStrokeAttributes(V.element),V.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(V,Q=1){const ot=this.current;let _t=ot.dashArray;Q!==1&&_t.length>0&&(_t=_t.map(function(ht){return Q*ht})),V.setAttributeNS(null,"stroke",ot.strokeColor),V.setAttributeNS(null,"stroke-opacity",ot.strokeAlpha),V.setAttributeNS(null,"stroke-miterlimit",tt(ot.miterLimit)),V.setAttributeNS(null,"stroke-linecap",ot.lineCap),V.setAttributeNS(null,"stroke-linejoin",ot.lineJoin),V.setAttributeNS(null,"stroke-width",tt(Q*ot.lineWidth)+"px"),V.setAttributeNS(null,"stroke-dasharray",_t.map(tt).join(" ")),V.setAttributeNS(null,"stroke-dashoffset",tt(Q*ot.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width","1px"),V.setAttributeNS(null,"height","1px"),V.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(V)}paintImageXObject(V){const Q=V.startsWith("g_")?this.commonObjs.get(V):this.objs.get(V);if(!Q){(0,D.warn)(`Dependent image with object ID ${V} is not ready yet`);return}this.paintInlineImageXObject(Q)}paintInlineImageXObject(V,Q){const ot=V.width,_t=V.height,ht=G(V,this.forceDataSchema,!!Q),Ft=this.svgFactory.createElement("svg:rect");Ft.setAttributeNS(null,"x","0"),Ft.setAttributeNS(null,"y","0"),Ft.setAttributeNS(null,"width",tt(ot)),Ft.setAttributeNS(null,"height",tt(_t)),this.current.element=Ft,this.clip("nonzero");const St=this.svgFactory.createElement("svg:image");St.setAttributeNS(gt,"xlink:href",ht),St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y",tt(-_t)),St.setAttributeNS(null,"width",tt(ot)+"px"),St.setAttributeNS(null,"height",tt(_t)+"px"),St.setAttributeNS(null,"transform",`scale(${tt(1/ot)} ${tt(-1/_t)})`),Q?Q.appendChild(St):this._ensureTransformGroup().appendChild(St)}paintImageMaskXObject(V){const Q=this.current,ot=V.width,_t=V.height,ht=Q.fillColor;Q.maskId=`mask${At++}`;const Ft=this.svgFactory.createElement("svg:mask");Ft.setAttributeNS(null,"id",Q.maskId);const St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y","0"),St.setAttributeNS(null,"width",tt(ot)),St.setAttributeNS(null,"height",tt(_t)),St.setAttributeNS(null,"fill",ht),St.setAttributeNS(null,"mask",`url(#${Q.maskId})`),this.defs.appendChild(Ft),this._ensureTransformGroup().appendChild(St),this.paintInlineImageXObject(V,Ft)}paintFormXObjectBegin(V,Q){if(Array.isArray(V)&&V.length===6&&this.transform(V[0],V[1],V[2],V[3],V[4],V[5]),Q){const ot=Q[2]-Q[0],_t=Q[3]-Q[1],ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x",Q[0]),ht.setAttributeNS(null,"y",Q[1]),ht.setAttributeNS(null,"width",tt(ot)),ht.setAttributeNS(null,"height",tt(_t)),this.current.element=ht,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(V){const Q=this.svgFactory.create(V.width,V.height),ot=this.svgFactory.createElement("svg:defs");Q.appendChild(ot),this.defs=ot;const _t=this.svgFactory.createElement("svg:g");return _t.setAttributeNS(null,"transform",ct(V.transform)),Q.appendChild(_t),this.svg=_t,Q}_ensureClipGroup(){if(!this.current.clipGroup){const V=this.svgFactory.createElement("svg:g");V.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(V),this.current.clipGroup=V}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ct(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNodeStream=void 0;var D=at(1),wt=at(26);const dt=require$$4,vt=require$$4,Ct=require$$4,bt=require$$4,it=/^file:\/\/\/[a-zA-Z]:\//;function Y(tt){const ct=bt.parse(tt);return ct.protocol==="file:"||ct.host?ct:/^[a-z]:[/\\]/i.test(tt)?bt.parse(`file:///${tt}`):(ct.host||(ct.protocol="file:"),ct)}class pt{constructor(ct){this.source=ct,this.url=Y(ct.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ct.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ct,ut;return(ut=(ct=this._fullRequestReader)==null?void 0:ct._loaded)!=null?ut:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new st(this):new J(this),this._fullRequestReader}getRangeReader(ct,ut){if(ut<=this._progressiveDataLength)return null;const At=this.isFsUrl?new lt(this,ct,ut):new G(this,ct,ut);return this._rangeRequestReaders.push(At),At}cancelAllRequests(ct){this._fullRequestReader&&this._fullRequestReader.cancel(ct);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(ct)}}E.PDFNodeStream=pt;class gt{constructor(ct){this._url=ct.url,this._done=!1,this._storedError=null,this.onProgress=null;const ut=ct.source;this._contentLength=ut.length,this._loaded=0,this._filename=null,this._disableRange=ut.disableRange||!1,this._rangeChunkSize=ut.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ut.disableStream,this._isRangeSupported=!ut.disableRange,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)(),this._headersCapability=(0,D.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ct=this._readableStream.read();return ct===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ct.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ct).buffer,done:!1})}cancel(ct){if(!this._readableStream){this._error(ct);return}this._readableStream.destroy(ct)}_error(ct){this._storedError=ct,this._readCapability.resolve()}_setReadableStream(ct){this._readableStream=ct,ct.on("readable",()=>{this._readCapability.resolve()}),ct.on("end",()=>{ct.destroy(),this._done=!0,this._readCapability.resolve()}),ct.on("error",ut=>{this._error(ut)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new D.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class et{constructor(ct){this._url=ct.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)();const ut=ct.source;this._isStreamingSupported=!ut.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ct=this._readableStream.read();return ct===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ct.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(ct).buffer,done:!1})}cancel(ct){if(!this._readableStream){this._error(ct);return}this._readableStream.destroy(ct)}_error(ct){this._storedError=ct,this._readCapability.resolve()}_setReadableStream(ct){this._readableStream=ct,ct.on("readable",()=>{this._readCapability.resolve()}),ct.on("end",()=>{ct.destroy(),this._done=!0,this._readCapability.resolve()}),ct.on("error",ut=>{this._error(ut)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function B(tt,ct){return{protocol:tt.protocol,auth:tt.auth,host:tt.hostname,port:tt.port,path:tt.path,method:"GET",headers:ct}}class J extends gt{constructor(ct){super(ct);const ut=At=>{if(At.statusCode===404){const ot=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot,this._headersCapability.reject(ot);return}this._headersCapability.resolve(),this._setReadableStream(At);const kt=ot=>this._readableStream.headers[ot.toLowerCase()],{allowRangeRequests:V,suggestedLength:Q}=(0,wt.validateRangeRequestCapabilities)({getResponseHeader:kt,isHttp:ct.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=Q||this._contentLength,this._filename=(0,wt.extractFilenameFromHeader)(kt)};this._request=null,this._url.protocol==="http:"?this._request=vt.request(B(this._url,ct.httpHeaders),ut):this._request=Ct.request(B(this._url,ct.httpHeaders),ut),this._request.on("error",At=>{this._storedError=At,this._headersCapability.reject(At)}),this._request.end()}}class G extends et{constructor(ct,ut,At){super(ct),this._httpHeaders={};for(const V in ct.httpHeaders){const Q=ct.httpHeaders[V];typeof Q!="undefined"&&(this._httpHeaders[V]=Q)}this._httpHeaders.Range=`bytes=${ut}-${At-1}`;const kt=V=>{if(V.statusCode===404){const Q=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Q;return}this._setReadableStream(V)};this._request=null,this._url.protocol==="http:"?this._request=vt.request(B(this._url,this._httpHeaders),kt):this._request=Ct.request(B(this._url,this._httpHeaders),kt),this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class st extends gt{constructor(ct){super(ct);let ut=decodeURIComponent(this._url.path);it.test(this._url.href)&&(ut=ut.replace(/^\//,"")),dt.lstat(ut,(At,kt)=>{if(At){At.code==="ENOENT"&&(At=new D.MissingPDFException(`Missing PDF "${ut}".`)),this._storedError=At,this._headersCapability.reject(At);return}this._contentLength=kt.size,this._setReadableStream(dt.createReadStream(ut)),this._headersCapability.resolve()})}}class lt extends et{constructor(ct,ut,At){super(ct);let kt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(kt=kt.replace(/^\//,"")),this._setReadableStream(dt.createReadStream(kt,{start:ut,end:At-1}))}}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.createResponseStatusError=bt,E.extractFilenameFromHeader=Ct,E.validateRangeRequestCapabilities=vt,E.validateResponseStatus=it;var D=at(1),wt=at(27),dt=at(5);function vt({getResponseHeader:Y,isHttp:pt,rangeChunkSize:gt,disableRange:et}){const B={allowRangeRequests:!1,suggestedLength:void 0},J=parseInt(Y("Content-Length"),10);return!Number.isInteger(J)||(B.suggestedLength=J,J<=2*gt)||et||!pt||Y("Accept-Ranges")!=="bytes"||(Y("Content-Encoding")||"identity")!=="identity"||(B.allowRangeRequests=!0),B}function Ct(Y){const pt=Y("Content-Disposition");if(pt){let gt=(0,wt.getFilenameFromContentDispositionHeader)(pt);if(gt.includes("%"))try{gt=decodeURIComponent(gt)}catch{}if((0,dt.isPdfFile)(gt))return gt}return null}function bt(Y,pt){return Y===404||Y===0&&pt.startsWith("file:")?new D.MissingPDFException('Missing PDF "'+pt+'".'):new D.UnexpectedResponseException(`Unexpected server response (${Y}) while retrieving PDF "${pt}".`,Y)}function it(Y){return Y===200||Y===206}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.getFilenameFromContentDispositionHeader=wt;var D=at(1);function wt(dt){let vt=!0,Ct=bt("filename\\*","i").exec(dt);if(Ct){Ct=Ct[1];let J=gt(Ct);return J=unescape(J),J=et(J),J=B(J),Y(J)}if(Ct=pt(dt),Ct){const J=B(Ct);return Y(J)}if(Ct=bt("filename","i").exec(dt),Ct){Ct=Ct[1];let J=gt(Ct);return J=B(J),Y(J)}function bt(J,G){return new RegExp("(?:^|;)\\s*"+J+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',G)}function it(J,G){if(J){if(!/^[\x00-\xFF]+$/.test(G))return G;try{const st=new TextDecoder(J,{fatal:!0}),lt=(0,D.stringToBytes)(G);G=st.decode(lt),vt=!1}catch{}}return G}function Y(J){return vt&&/[\x80-\xff]/.test(J)&&(J=it("utf-8",J),vt&&(J=it("iso-8859-1",J))),J}function pt(J){const G=[];let st;const lt=bt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(st=lt.exec(J))!==null;){let[,ct,ut,At]=st;if(ct=parseInt(ct,10),ct in G){if(ct===0)break;continue}G[ct]=[ut,At]}const tt=[];for(let ct=0;ct<G.length&&ct in G;++ct){let[ut,At]=G[ct];At=gt(At),ut&&(At=unescape(At),ct===0&&(At=et(At))),tt.push(At)}return tt.join("")}function gt(J){if(J.startsWith('"')){const G=J.slice(1).split('\\"');for(let st=0;st<G.length;++st){const lt=G[st].indexOf('"');lt!==-1&&(G[st]=G[st].slice(0,lt),G.length=st+1),G[st]=G[st].replace(/\\(.)/g,"$1")}J=G.join('"')}return J}function et(J){const G=J.indexOf("'");if(G===-1)return J;const st=J.slice(0,G),tt=J.slice(G+1).replace(/^[^']*'/,"");return it(st,tt)}function B(J){return!J.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(J)?J:J.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(G,st,lt,tt){if(lt==="q"||lt==="Q")return tt=tt.replace(/_/g," "),tt=tt.replace(/=([0-9a-fA-F]{2})/g,function(ct,ut){return String.fromCharCode(parseInt(ut,16))}),it(st,tt);try{tt=atob(tt)}catch{}return it(st,tt)})}return""}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNetworkStream=void 0;var D=at(1),wt=at(26);const dt=200,vt=206;function Ct(gt){const et=gt.response;return typeof et!="string"?et:(0,D.stringToBytes)(et).buffer}class bt{constructor(et,B={}){this.url=et,this.isHttp=/^https?:/i.test(et),this.httpHeaders=this.isHttp&&B.httpHeaders||Object.create(null),this.withCredentials=B.withCredentials||!1,this.getXhr=B.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(et,B,J){const G={begin:et,end:B};for(const st in J)G[st]=J[st];return this.request(G)}requestFull(et){return this.request(et)}request(et){const B=this.getXhr(),J=this.currXhrId++,G=this.pendingRequests[J]={xhr:B};B.open("GET",this.url),B.withCredentials=this.withCredentials;for(const st in this.httpHeaders){const lt=this.httpHeaders[st];typeof lt!="undefined"&&B.setRequestHeader(st,lt)}return this.isHttp&&"begin"in et&&"end"in et?(B.setRequestHeader("Range",`bytes=${et.begin}-${et.end-1}`),G.expectedStatus=vt):G.expectedStatus=dt,B.responseType="arraybuffer",et.onError&&(B.onerror=function(st){et.onError(B.status)}),B.onreadystatechange=this.onStateChange.bind(this,J),B.onprogress=this.onProgress.bind(this,J),G.onHeadersReceived=et.onHeadersReceived,G.onDone=et.onDone,G.onError=et.onError,G.onProgress=et.onProgress,B.send(null),J}onProgress(et,B){var G;const J=this.pendingRequests[et];!J||(G=J.onProgress)==null||G.call(J,B)}onStateChange(et,B){var ct,ut,At;const J=this.pendingRequests[et];if(!J)return;const G=J.xhr;if(G.readyState>=2&&J.onHeadersReceived&&(J.onHeadersReceived(),delete J.onHeadersReceived),G.readyState!==4||!(et in this.pendingRequests))return;if(delete this.pendingRequests[et],G.status===0&&this.isHttp){(ct=J.onError)==null||ct.call(J,G.status);return}const st=G.status||dt;if(!(st===dt&&J.expectedStatus===vt)&&st!==J.expectedStatus){(ut=J.onError)==null||ut.call(J,G.status);return}const tt=Ct(G);if(st===vt){const kt=G.getResponseHeader("Content-Range"),V=/bytes (\d+)-(\d+)\/(\d+)/.exec(kt);J.onDone({begin:parseInt(V[1],10),chunk:tt})}else tt?J.onDone({begin:0,chunk:tt}):(At=J.onError)==null||At.call(J,G.status)}getRequestXhr(et){return this.pendingRequests[et].xhr}isPendingRequest(et){return et in this.pendingRequests}abortRequest(et){const B=this.pendingRequests[et].xhr;delete this.pendingRequests[et],B.abort()}}class it{constructor(et){this._source=et,this._manager=new bt(et.url,{httpHeaders:et.httpHeaders,withCredentials:et.withCredentials}),this._rangeChunkSize=et.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(et){const B=this._rangeRequestReaders.indexOf(et);B>=0&&this._rangeRequestReaders.splice(B,1)}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Y(this._manager,this._source),this._fullRequestReader}getRangeReader(et,B){const J=new pt(this._manager,et,B);return J.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(J),J}cancelAllRequests(et){var B;(B=this._fullRequestReader)==null||B.cancel(et);for(const J of this._rangeRequestReaders.slice(0))J.cancel(et)}}E.PDFNetworkStream=it;class Y{constructor(et,B){this._manager=et;const J={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=B.url,this._fullRequestId=et.requestFull(J),this._headersReceivedCapability=(0,D.createPromiseCapability)(),this._disableRange=B.disableRange||!1,this._contentLength=B.length,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const et=this._fullRequestId,B=this._manager.getRequestXhr(et),J=lt=>B.getResponseHeader(lt),{allowRangeRequests:G,suggestedLength:st}=(0,wt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});G&&(this._isRangeSupported=!0),this._contentLength=st||this._contentLength,this._filename=(0,wt.extractFilenameFromHeader)(J),this._isRangeSupported&&this._manager.abortRequest(et),this._headersReceivedCapability.resolve()}_onDone(et){if(et&&(this._requests.length>0?this._requests.shift().resolve({value:et.chunk,done:!1}):this._cachedChunks.push(et.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(et){this._storedError=(0,wt.createResponseStatusError)(et,this._url),this._headersReceivedCapability.reject(this._storedError);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(et){var B;(B=this.onProgress)==null||B.call(this,{loaded:et.loaded,total:et.lengthComputable?et.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0,this._headersReceivedCapability.reject(et);for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class pt{constructor(et,B,J){this._manager=et;const G={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._requestId=et.requestRange(B,J,G),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var et;(et=this.onClosed)==null||et.call(this,this)}_onDone(et){const B=et.chunk;this._requests.length>0?this._requests.shift().resolve({value:B,done:!1}):this._queuedChunk=B,this._done=!0;for(const J of this._requests)J.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(et){this._storedError=(0,wt.createResponseStatusError)(et,this._url);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(et){var B;this.isStreamingSupported||(B=this.onProgress)==null||B.call(this,{loaded:et.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const B=this._queuedChunk;return this._queuedChunk=null,{value:B,done:!1}}if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(nt,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFFetchStream=void 0;var D=at(1),wt=at(26);function dt(Y,pt,gt){return{method:"GET",headers:Y,signal:gt==null?void 0:gt.signal,mode:"cors",credentials:pt?"include":"same-origin",redirect:"follow"}}function vt(Y){const pt=new Headers;for(const gt in Y){const et=Y[gt];typeof et!="undefined"&&pt.append(gt,et)}return pt}class Ct{constructor(pt){this.source=pt,this.isHttp=/^https?:/i.test(pt.url),this.httpHeaders=this.isHttp&&pt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var pt,gt;return(gt=(pt=this._fullRequestReader)==null?void 0:pt._loaded)!=null?gt:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bt(this),this._fullRequestReader}getRangeReader(pt,gt){if(gt<=this._progressiveDataLength)return null;const et=new it(this,pt,gt);return this._rangeRequestReaders.push(et),et}cancelAllRequests(pt){this._fullRequestReader&&this._fullRequestReader.cancel(pt);for(const gt of this._rangeRequestReaders.slice(0))gt.cancel(pt)}}E.PDFFetchStream=Ct;class bt{constructor(pt){this._stream=pt,this._reader=null,this._loaded=0,this._filename=null;const gt=pt.source;this._withCredentials=gt.withCredentials||!1,this._contentLength=gt.length,this._headersCapability=(0,D.createPromiseCapability)(),this._disableRange=gt.disableRange||!1,this._rangeChunkSize=gt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!gt.disableStream,this._isRangeSupported=!gt.disableRange,this._headers=vt(this._stream.httpHeaders);const et=gt.url;fetch(et,dt(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,wt.validateResponseStatus)(B.status))throw(0,wt.createResponseStatusError)(B.status,et);this._reader=B.body.getReader(),this._headersCapability.resolve();const J=lt=>B.headers.get(lt),{allowRangeRequests:G,suggestedLength:st}=(0,wt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=G,this._contentLength=st||this._contentLength,this._filename=(0,wt.extractFilenameFromHeader)(J),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new D.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:pt,done:gt}=await this._reader.read();return gt?{value:pt,done:gt}:(this._loaded+=pt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(pt).buffer,done:!1})}cancel(pt){this._reader&&this._reader.cancel(pt),this._abortController&&this._abortController.abort()}}class it{constructor(pt,gt,et){this._stream=pt,this._reader=null,this._loaded=0;const B=pt.source;this._withCredentials=B.withCredentials||!1,this._readCapability=(0,D.createPromiseCapability)(),this._isStreamingSupported=!B.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=vt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${gt}-${et-1}`);const J=B.url;fetch(J,dt(this._headers,this._withCredentials,this._abortController)).then(G=>{if(!(0,wt.validateResponseStatus)(G.status))throw(0,wt.createResponseStatusError)(G.status,J);this._readCapability.resolve(),this._reader=G.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:pt,done:gt}=await this._reader.read();return gt?{value:pt,done:gt}:(this._loaded+=pt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(pt).buffer,done:!1})}cancel(pt){this._reader&&this._reader.cancel(pt),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(nt){var E=__webpack_module_cache__[nt];if(E!==void 0)return E.exports;var at=__webpack_module_cache__[nt]={exports:{}};return __webpack_modules__[nt](at,at.exports,__w_pdfjs_require__),at.exports}var __webpack_exports__={};return(()=>{var nt=__webpack_exports__;Object.defineProperty(nt,"__esModule",{value:!0}),Object.defineProperty(nt,"AnnotationLayer",{enumerable:!0,get:function(){return wt.AnnotationLayer}}),Object.defineProperty(nt,"AnnotationMode",{enumerable:!0,get:function(){return E.AnnotationMode}}),Object.defineProperty(nt,"CMapCompressionType",{enumerable:!0,get:function(){return E.CMapCompressionType}}),Object.defineProperty(nt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return dt.GlobalWorkerOptions}}),Object.defineProperty(nt,"InvalidPDFException",{enumerable:!0,get:function(){return E.InvalidPDFException}}),Object.defineProperty(nt,"LoopbackPort",{enumerable:!0,get:function(){return at.LoopbackPort}}),Object.defineProperty(nt,"MissingPDFException",{enumerable:!0,get:function(){return E.MissingPDFException}}),Object.defineProperty(nt,"OPS",{enumerable:!0,get:function(){return E.OPS}}),Object.defineProperty(nt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return at.PDFDataRangeTransport}}),Object.defineProperty(nt,"PDFDateString",{enumerable:!0,get:function(){return D.PDFDateString}}),Object.defineProperty(nt,"PDFWorker",{enumerable:!0,get:function(){return at.PDFWorker}}),Object.defineProperty(nt,"PasswordResponses",{enumerable:!0,get:function(){return E.PasswordResponses}}),Object.defineProperty(nt,"PermissionFlag",{enumerable:!0,get:function(){return E.PermissionFlag}}),Object.defineProperty(nt,"PixelsPerInch",{enumerable:!0,get:function(){return D.PixelsPerInch}}),Object.defineProperty(nt,"RenderingCancelledException",{enumerable:!0,get:function(){return D.RenderingCancelledException}}),Object.defineProperty(nt,"SVGGraphics",{enumerable:!0,get:function(){return bt.SVGGraphics}}),Object.defineProperty(nt,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return E.UNSUPPORTED_FEATURES}}),Object.defineProperty(nt,"UnexpectedResponseException",{enumerable:!0,get:function(){return E.UnexpectedResponseException}}),Object.defineProperty(nt,"Util",{enumerable:!0,get:function(){return E.Util}}),Object.defineProperty(nt,"VerbosityLevel",{enumerable:!0,get:function(){return E.VerbosityLevel}}),Object.defineProperty(nt,"XfaLayer",{enumerable:!0,get:function(){return it.XfaLayer}}),Object.defineProperty(nt,"build",{enumerable:!0,get:function(){return at.build}}),Object.defineProperty(nt,"createPromiseCapability",{enumerable:!0,get:function(){return E.createPromiseCapability}}),Object.defineProperty(nt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return E.createValidAbsoluteUrl}}),Object.defineProperty(nt,"getDocument",{enumerable:!0,get:function(){return at.getDocument}}),Object.defineProperty(nt,"getFilenameFromUrl",{enumerable:!0,get:function(){return D.getFilenameFromUrl}}),Object.defineProperty(nt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return D.getPdfFilenameFromUrl}}),Object.defineProperty(nt,"getXfaPageViewport",{enumerable:!0,get:function(){return D.getXfaPageViewport}}),Object.defineProperty(nt,"isPdfFile",{enumerable:!0,get:function(){return D.isPdfFile}}),Object.defineProperty(nt,"loadScript",{enumerable:!0,get:function(){return D.loadScript}}),Object.defineProperty(nt,"renderTextLayer",{enumerable:!0,get:function(){return Ct.renderTextLayer}}),Object.defineProperty(nt,"shadow",{enumerable:!0,get:function(){return E.shadow}}),Object.defineProperty(nt,"version",{enumerable:!0,get:function(){return at.version}});var E=__w_pdfjs_require__(1),at=__w_pdfjs_require__(4),D=__w_pdfjs_require__(5),wt=__w_pdfjs_require__(20),dt=__w_pdfjs_require__(13),vt=__w_pdfjs_require__(3),Ct=__w_pdfjs_require__(23),bt=__w_pdfjs_require__(24),it=__w_pdfjs_require__(22);if(vt.isNodeJS){const{PDFNodeStream:Y}=__w_pdfjs_require__(25);(0,at.setPDFNetworkStreamFactory)(pt=>new Y(pt))}else{const{PDFNetworkStream:Y}=__w_pdfjs_require__(28),{PDFFetchStream:pt}=__w_pdfjs_require__(29);(0,at.setPDFNetworkStreamFactory)(gt=>(0,D.isValidFetchUrl)(gt.url)?new pt(gt):new Y(gt))}})(),__webpack_exports__})())})(pdf);var t,u,r,o$1,i=0,c=[],f=[],e$1=l$1.__b,a=l$1.__r,v=l$1.diffed,l=l$1.__c,m=l$1.unmount;function p(nt,E){l$1.__h&&l$1.__h(u,nt,i||E),i=0;var at=u.__H||(u.__H={__:[],__h:[]});return nt>=at.__.length&&at.__.push({__V:f}),at.__[nt]}function y(nt){return i=1,d(z,nt)}function d(nt,E,at){var D=p(t++,2);return D.t=nt,D.__c||(D.__=[at?at(E):z(void 0,E),function(wt){var dt=D.t(D.__[0],wt);D.__[0]!==dt&&(D.__=[dt,D.__[1]],D.__c.setState({}))}],D.__c=u),D.__}function s(nt){return i=5,F(function(){return{current:nt}},[])}function F(nt,E){var at=p(t++,7);return w(at.__H,E)?(at.__V=nt(),at.u=E,at.__h=nt,at.__V):at.__}function T(nt,E){return i=8,F(function(){return nt},E)}function b(){for(var nt;nt=c.shift();)if(nt.__P)try{nt.__H.__h.forEach(j),nt.__H.__h.forEach(k),nt.__H.__h=[]}catch(E){nt.__H.__h=[],l$1.__e(E,nt.__v)}}l$1.__b=function(nt){u=null,e$1&&e$1(nt)},l$1.__r=function(nt){a&&a(nt),t=0;var E=(u=nt.__c).__H;E&&(r===u?(E.__h=[],u.__h=[],E.__.forEach(function(at){at.__V=f,at.u=void 0})):(E.__h.forEach(j),E.__h.forEach(k),E.__h=[])),r=u},l$1.diffed=function(nt){v&&v(nt);var E=nt.__c;E&&E.__H&&(E.__H.__h.length&&(c.push(E)!==1&&o$1===l$1.requestAnimationFrame||((o$1=l$1.requestAnimationFrame)||function(at){var D,wt=function(){clearTimeout(dt),g&&cancelAnimationFrame(D),setTimeout(at)},dt=setTimeout(wt,100);g&&(D=requestAnimationFrame(wt))})(b)),E.__H.__.forEach(function(at){at.u&&(at.__H=at.u),at.__V!==f&&(at.__=at.__V),at.u=void 0,at.__V=f})),r=u=null},l$1.__c=function(nt,E){E.some(function(at){try{at.__h.forEach(j),at.__h=at.__h.filter(function(D){return!D.__||k(D)})}catch(D){E.some(function(wt){wt.__h&&(wt.__h=[])}),E=[],l$1.__e(D,at.__v)}}),l&&l(nt,E)},l$1.unmount=function(nt){m&&m(nt);var E,at=nt.__c;at&&at.__H&&(at.__H.__.forEach(function(D){try{j(D)}catch(wt){E=wt}}),E&&l$1.__e(E,at.__v))};var g=typeof requestAnimationFrame=="function";function j(nt){var E=u,at=nt.__c;typeof at=="function"&&(nt.__c=void 0,at()),u=E}function k(nt){var E=u;nt.__c=nt.__(),u=E}function w(nt,E){return!nt||nt.length!==E.length||E.some(function(at,D){return at!==nt[D]})}function z(nt,E){return typeof E=="function"?E(nt):E}var o=0;function e(nt,E,at,D,wt){var dt,vt,Ct={};for(vt in E)vt=="ref"?dt=E[vt]:Ct[vt]=E[vt];var bt={type:nt,props:Ct,key:at,ref:dt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:wt,__self:D};if(typeof nt=="function"&&(dt=nt.defaultProps))for(vt in dt)Ct[vt]===void 0&&(Ct[vt]=dt[vt]);return l$1.vnode&&l$1.vnode(bt),bt}function Progress(nt){var at;const E=((isNaN(nt.value)?0:nt.value)/nt.max*100).toFixed(0)+"%";return e("div",{class:`rounded-full h-10 relative max-w-xl overflow-hidden ${nt.pdfName?"":"cursor-pointer"}`,onClick:nt.onClick,children:[e("div",{class:"w-full h-full bg-gray-200 absolute"}),e("div",{className:"h-full bg-green-500 absolute transition-all duration-1000",style:{width:E}}),e("div",{class:`w-full top-1/2 -translate-y-1/2 absolute ${nt.pdfName?"text-white":"text-gray-500"}`,children:(at=nt.pdfName)!=null?at:"Select PDF to Start"})]})}pdf.exports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";function App(){const nt=s(new OffscreenCanvas(100,100)),E=s(null),[at,D]=y(null),[wt,dt]=y(0),[vt,Ct]=y([]),[bt,it]=y(0),[Y,pt]=y(0),gt=T(B=>{if(!B.currentTarget.files||B.currentTarget.files.length<1||!nt.current)return;const J=[],G=B.currentTarget.files[0];if(G.type&&!G.type.endsWith("pdf")){alert("File is not a PDF.");return}D(G.name.substring(0,G.name.lastIndexOf(".")));const st=new FileReader;st.addEventListener("load",async lt=>{if(!nt.current)return;const ct=await pdf.exports.getDocument(lt.target.result).promise;it(ct.numPages);for(let At=1;At<=ct.numPages;At++){const kt=await ct.getPage(At),V=nt.current.getContext("2d"),Q=kt.getViewport({scale:3});nt.current.height=Q.height,nt.current.width=Q.width;var ut={canvasContext:V,viewport:Q};await kt.render(ut).promise;const ot=await nt.current.convertToBlob({type:"image/png"});pt(_t=>_t+1),J.push(URL.createObjectURL(ot))}Ct(J)}),st.onprogress=lt=>{lt.lengthComputable&&(lt.loaded/lt.total,dt(lt.loaded/lt.total))},st.readAsArrayBuffer(G)},[nt,Ct]),et=T(()=>{D(null),Ct([]),dt(0),it(0),pt(0)},[]);return e("main",{class:"relative text-center flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-6 sm:py-12",children:e("div",{class:"relative container  bg-white px-6 pt-10 pb-7 shadow-xl ring-1 ring-gray-900/5 sm:mx-auto sm:max-w-lg sm:rounded-lg sm:px-10",children:e("div",{className:"mx-auto max-w-md",children:[e("h1",{class:"text-3xl font-bold mb-5",children:"PDF \u2192 PNGs"}),e(Progress,{pdfName:at,value:wt*25+Y/bt*75,max:100,onClick:()=>{var B;at||(B=E.current)==null||B.click()}}),e("input",{ref:E,class:"hidden",type:"file",name:"pdf-upload",id:"pdf-upload",accept:".pdf",onChange:gt}),vt.length>0&&e("div",{class:"my-5",children:[e("p",{class:"mb-2 text-gray-500",children:"Click on the pages below to download them as PNGs."}),e("div",{class:"grid grid-cols-3 gap-4",children:vt.map((B,J)=>e("a",{class:"text-center text-gray-700",href:B,download:`${at}-page-${J+1}.png`,children:[e("div",{class:"w-full h-24 bg-center bg-cover border-2 rounded-lg border-gray-700",style:{backgroundImage:`url(${B})`}}),"Page ",J+1]}))})]}),at&&Y===bt&&e("button",{className:"text-blue-400 underline",onClick:et,children:"Restart"})]})})})}var index=(()=>`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.absolute{position:absolute}.relative{position:relative}.top-1\\/2{top:50%}.mx-auto{margin-left:auto;margin-right:auto}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.mb-5{margin-bottom:1.25rem}.mb-2{margin-bottom:.5rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-24{height:6rem}.h-10{height:2.5rem}.h-full{height:100%}.min-h-screen{min-height:100vh}.w-full{width:100%}.max-w-md{max-width:28rem}.max-w-xl{max-width:36rem}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.justify-center{justify-content:center}.gap-4{gap:1rem}.overflow-hidden{overflow:hidden}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.border-2{border-width:2px}.border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity))}.bg-cover{background-size:cover}.bg-center{background-position:center}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pt-10{padding-top:2.5rem}.pb-7{padding-bottom:1.75rem}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.font-bold{font-weight:700}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-gray-900\\/5{--tw-ring-color: rgb(17 24 39 / .05)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}@media (min-width: 640px){.sm\\:mx-auto{margin-left:auto;margin-right:auto}.sm\\:max-w-lg{max-width:32rem}.sm\\:rounded-lg{border-radius:.5rem}.sm\\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\\:px-10{padding-left:2.5rem;padding-right:2.5rem}}
`)();S(e(App,{}),document.getElementById("app"));
