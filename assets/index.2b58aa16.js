var Re=Object.defineProperty;var Me=(st,E,at)=>E in st?Re(st,E,{enumerable:!0,configurable:!0,writable:!0,value:at}):st[E]=at;var we=(st,E,at)=>(Me(st,typeof E!="symbol"?E+"":E,at),at),Te=(st,E,at)=>{if(!E.has(st))throw TypeError("Cannot "+at)};var Yt=(st,E,at)=>(Te(st,E,"read from private field"),at?at.call(st):E.get(st)),le=(st,E,at)=>{if(E.has(st))throw TypeError("Cannot add the same private member more than once");E instanceof WeakSet?E.add(st):E.set(st,at)},he=(st,E,at,D)=>(Te(st,E,"write to private field"),D?D.call(st,at):E.set(st,at),at),Fe=(st,E,at,D)=>({set _(vt){he(st,E,vt,at)},get _(){return Yt(st,E,D)}}),Ae=(st,E,at)=>(Te(st,E,"access private method"),at);const p$1=function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const vt of document.querySelectorAll('link[rel="modulepreload"]'))D(vt);new MutationObserver(vt=>{for(const ut of vt)if(ut.type==="childList")for(const wt of ut.addedNodes)wt.tagName==="LINK"&&wt.rel==="modulepreload"&&D(wt)}).observe(document,{childList:!0,subtree:!0});function at(vt){const ut={};return vt.integrity&&(ut.integrity=vt.integrity),vt.referrerpolicy&&(ut.referrerPolicy=vt.referrerpolicy),vt.crossorigin==="use-credentials"?ut.credentials="include":vt.crossorigin==="anonymous"?ut.credentials="omit":ut.credentials="same-origin",ut}function D(vt){if(vt.ep)return;vt.ep=!0;const ut=at(vt);fetch(vt.href,ut)}};p$1();var n,l$1,u$1,t$1,o$2,r$1,e$2={},c$1=[],s$1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a$1(st,E){for(var at in E)st[at]=E[at];return st}function h(st){var E=st.parentNode;E&&E.removeChild(st)}function v$1(st,E,at){var D,vt,ut,wt={};for(ut in E)ut=="key"?D=E[ut]:ut=="ref"?vt=E[ut]:wt[ut]=E[ut];if(arguments.length>2&&(wt.children=arguments.length>3?n.call(arguments,2):at),typeof st=="function"&&st.defaultProps!=null)for(ut in st.defaultProps)wt[ut]===void 0&&(wt[ut]=st.defaultProps[ut]);return y$1(st,wt,D,vt,null)}function y$1(st,E,at,D,vt){var ut={type:st,props:E,key:at,ref:D,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:vt==null?++u$1:vt};return vt==null&&l$1.vnode!=null&&l$1.vnode(ut),ut}function d$1(st){return st.children}function _(st,E){this.props=st,this.context=E}function k$1(st,E){if(E==null)return st.__?k$1(st.__,st.__.__k.indexOf(st)+1):null;for(var at;E<st.__k.length;E++)if((at=st.__k[E])!=null&&at.__e!=null)return at.__e;return typeof st.type=="function"?k$1(st):null}function b$1(st){var E,at;if((st=st.__)!=null&&st.__c!=null){for(st.__e=st.__c.base=null,E=0;E<st.__k.length;E++)if((at=st.__k[E])!=null&&at.__e!=null){st.__e=st.__c.base=at.__e;break}return b$1(st)}}function m$1(st){(!st.__d&&(st.__d=!0)&&t$1.push(st)&&!g$1.__r++||r$1!==l$1.debounceRendering)&&((r$1=l$1.debounceRendering)||o$2)(g$1)}function g$1(){for(var st;g$1.__r=t$1.length;)st=t$1.sort(function(E,at){return E.__v.__b-at.__v.__b}),t$1=[],st.some(function(E){var at,D,vt,ut,wt,Ct;E.__d&&(wt=(ut=(at=E).__v).__e,(Ct=at.__P)&&(D=[],(vt=a$1({},ut)).__v=ut.__v+1,j$1(Ct,ut,vt,at.__n,Ct.ownerSVGElement!==void 0,ut.__h!=null?[wt]:null,D,wt==null?k$1(ut):wt,ut.__h),z$1(D,ut),ut.__e!=wt&&b$1(ut)))})}function w$1(st,E,at,D,vt,ut,wt,Ct,bt,it){var X,gt,pt,et,B,J,G,nt=D&&D.__k||c$1,lt=nt.length;for(at.__k=[],X=0;X<E.length;X++)if((et=at.__k[X]=(et=E[X])==null||typeof et=="boolean"?null:typeof et=="string"||typeof et=="number"||typeof et=="bigint"?y$1(null,et,null,null,et):Array.isArray(et)?y$1(d$1,{children:et},null,null,null):et.__b>0?y$1(et.type,et.props,et.key,null,et.__v):et)!=null){if(et.__=at,et.__b=at.__b+1,(pt=nt[X])===null||pt&&et.key==pt.key&&et.type===pt.type)nt[X]=void 0;else for(gt=0;gt<lt;gt++){if((pt=nt[gt])&&et.key==pt.key&&et.type===pt.type){nt[gt]=void 0;break}pt=null}j$1(st,et,pt=pt||e$2,vt,ut,wt,Ct,bt,it),B=et.__e,(gt=et.ref)&&pt.ref!=gt&&(G||(G=[]),pt.ref&&G.push(pt.ref,null,et),G.push(gt,et.__c||B,et)),B!=null?(J==null&&(J=B),typeof et.type=="function"&&et.__k===pt.__k?et.__d=bt=x(et,bt,st):bt=P(st,et,pt,nt,B,bt),typeof at.type=="function"&&(at.__d=bt)):bt&&pt.__e==bt&&bt.parentNode!=st&&(bt=k$1(pt))}for(at.__e=J,X=lt;X--;)nt[X]!=null&&(typeof at.type=="function"&&nt[X].__e!=null&&nt[X].__e==at.__d&&(at.__d=k$1(D,X+1)),N(nt[X],nt[X]));if(G)for(X=0;X<G.length;X++)M(G[X],G[++X],G[++X])}function x(st,E,at){for(var D,vt=st.__k,ut=0;vt&&ut<vt.length;ut++)(D=vt[ut])&&(D.__=st,E=typeof D.type=="function"?x(D,E,at):P(at,D,D,vt,D.__e,E));return E}function P(st,E,at,D,vt,ut){var wt,Ct,bt;if(E.__d!==void 0)wt=E.__d,E.__d=void 0;else if(at==null||vt!=ut||vt.parentNode==null)t:if(ut==null||ut.parentNode!==st)st.appendChild(vt),wt=null;else{for(Ct=ut,bt=0;(Ct=Ct.nextSibling)&&bt<D.length;bt+=2)if(Ct==vt)break t;st.insertBefore(vt,ut),wt=ut}return wt!==void 0?wt:vt.nextSibling}function C(st,E,at,D,vt){var ut;for(ut in at)ut==="children"||ut==="key"||ut in E||H(st,ut,null,at[ut],D);for(ut in E)vt&&typeof E[ut]!="function"||ut==="children"||ut==="key"||ut==="value"||ut==="checked"||at[ut]===E[ut]||H(st,ut,E[ut],at[ut],D)}function $(st,E,at){E[0]==="-"?st.setProperty(E,at):st[E]=at==null?"":typeof at!="number"||s$1.test(E)?at:at+"px"}function H(st,E,at,D,vt){var ut;t:if(E==="style")if(typeof at=="string")st.style.cssText=at;else{if(typeof D=="string"&&(st.style.cssText=D=""),D)for(E in D)at&&E in at||$(st.style,E,"");if(at)for(E in at)D&&at[E]===D[E]||$(st.style,E,at[E])}else if(E[0]==="o"&&E[1]==="n")ut=E!==(E=E.replace(/Capture$/,"")),E=E.toLowerCase()in st?E.toLowerCase().slice(2):E.slice(2),st.l||(st.l={}),st.l[E+ut]=at,at?D||st.addEventListener(E,ut?T$1:I,ut):st.removeEventListener(E,ut?T$1:I,ut);else if(E!=="dangerouslySetInnerHTML"){if(vt)E=E.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(E!=="href"&&E!=="list"&&E!=="form"&&E!=="tabIndex"&&E!=="download"&&E in st)try{st[E]=at==null?"":at;break t}catch{}typeof at=="function"||(at!=null&&(at!==!1||E[0]==="a"&&E[1]==="r")?st.setAttribute(E,at):st.removeAttribute(E))}}function I(st){this.l[st.type+!1](l$1.event?l$1.event(st):st)}function T$1(st){this.l[st.type+!0](l$1.event?l$1.event(st):st)}function j$1(st,E,at,D,vt,ut,wt,Ct,bt){var it,X,gt,pt,et,B,J,G,nt,lt,Z,ht,dt,At=E.type;if(E.constructor!==void 0)return null;at.__h!=null&&(bt=at.__h,Ct=E.__e=at.__e,E.__h=null,ut=[Ct]),(it=l$1.__b)&&it(E);try{t:if(typeof At=="function"){if(G=E.props,nt=(it=At.contextType)&&D[it.__c],lt=it?nt?nt.props.value:it.__:D,at.__c?J=(X=E.__c=at.__c).__=X.__E:("prototype"in At&&At.prototype.render?E.__c=X=new At(G,lt):(E.__c=X=new _(G,lt),X.constructor=At,X.render=O),nt&&nt.sub(X),X.props=G,X.state||(X.state={}),X.context=lt,X.__n=D,gt=X.__d=!0,X.__h=[]),X.__s==null&&(X.__s=X.state),At.getDerivedStateFromProps!=null&&(X.__s==X.state&&(X.__s=a$1({},X.__s)),a$1(X.__s,At.getDerivedStateFromProps(G,X.__s))),pt=X.props,et=X.state,gt)At.getDerivedStateFromProps==null&&X.componentWillMount!=null&&X.componentWillMount(),X.componentDidMount!=null&&X.__h.push(X.componentDidMount);else{if(At.getDerivedStateFromProps==null&&G!==pt&&X.componentWillReceiveProps!=null&&X.componentWillReceiveProps(G,lt),!X.__e&&X.shouldComponentUpdate!=null&&X.shouldComponentUpdate(G,X.__s,lt)===!1||E.__v===at.__v){X.props=G,X.state=X.__s,E.__v!==at.__v&&(X.__d=!1),X.__v=E,E.__e=at.__e,E.__k=at.__k,E.__k.forEach(function(Pt){Pt&&(Pt.__=E)}),X.__h.length&&wt.push(X);break t}X.componentWillUpdate!=null&&X.componentWillUpdate(G,X.__s,lt),X.componentDidUpdate!=null&&X.__h.push(function(){X.componentDidUpdate(pt,et,B)})}if(X.context=lt,X.props=G,X.__v=E,X.__P=st,Z=l$1.__r,ht=0,"prototype"in At&&At.prototype.render)X.state=X.__s,X.__d=!1,Z&&Z(E),it=X.render(X.props,X.state,X.context);else do X.__d=!1,Z&&Z(E),it=X.render(X.props,X.state,X.context),X.state=X.__s;while(X.__d&&++ht<25);X.state=X.__s,X.getChildContext!=null&&(D=a$1(a$1({},D),X.getChildContext())),gt||X.getSnapshotBeforeUpdate==null||(B=X.getSnapshotBeforeUpdate(pt,et)),dt=it!=null&&it.type===d$1&&it.key==null?it.props.children:it,w$1(st,Array.isArray(dt)?dt:[dt],E,at,D,vt,ut,wt,Ct,bt),X.base=E.__e,E.__h=null,X.__h.length&&wt.push(X),J&&(X.__E=X.__=null),X.__e=!1}else ut==null&&E.__v===at.__v?(E.__k=at.__k,E.__e=at.__e):E.__e=L(at.__e,E,at,D,vt,ut,wt,bt);(it=l$1.diffed)&&it(E)}catch(Pt){E.__v=null,(bt||ut!=null)&&(E.__e=Ct,E.__h=!!bt,ut[ut.indexOf(Ct)]=null),l$1.__e(Pt,E,at)}}function z$1(st,E){l$1.__c&&l$1.__c(E,st),st.some(function(at){try{st=at.__h,at.__h=[],st.some(function(D){D.call(at)})}catch(D){l$1.__e(D,at.__v)}})}function L(st,E,at,D,vt,ut,wt,Ct){var bt,it,X,gt=at.props,pt=E.props,et=E.type,B=0;if(et==="svg"&&(vt=!0),ut!=null){for(;B<ut.length;B++)if((bt=ut[B])&&"setAttribute"in bt==!!et&&(et?bt.localName===et:bt.nodeType===3)){st=bt,ut[B]=null;break}}if(st==null){if(et===null)return document.createTextNode(pt);st=vt?document.createElementNS("http://www.w3.org/2000/svg",et):document.createElement(et,pt.is&&pt),ut=null,Ct=!1}if(et===null)gt===pt||Ct&&st.data===pt||(st.data=pt);else{if(ut=ut&&n.call(st.childNodes),it=(gt=at.props||e$2).dangerouslySetInnerHTML,X=pt.dangerouslySetInnerHTML,!Ct){if(ut!=null)for(gt={},B=0;B<st.attributes.length;B++)gt[st.attributes[B].name]=st.attributes[B].value;(X||it)&&(X&&(it&&X.__html==it.__html||X.__html===st.innerHTML)||(st.innerHTML=X&&X.__html||""))}if(C(st,pt,gt,vt,Ct),X)E.__k=[];else if(B=E.props.children,w$1(st,Array.isArray(B)?B:[B],E,at,D,vt&&et!=="foreignObject",ut,wt,ut?ut[0]:at.__k&&k$1(at,0),Ct),ut!=null)for(B=ut.length;B--;)ut[B]!=null&&h(ut[B]);Ct||("value"in pt&&(B=pt.value)!==void 0&&(B!==st.value||et==="progress"&&!B||et==="option"&&B!==gt.value)&&H(st,"value",B,gt.value,!1),"checked"in pt&&(B=pt.checked)!==void 0&&B!==st.checked&&H(st,"checked",B,gt.checked,!1))}return st}function M(st,E,at){try{typeof st=="function"?st(E):st.current=E}catch(D){l$1.__e(D,at)}}function N(st,E,at){var D,vt;if(l$1.unmount&&l$1.unmount(st),(D=st.ref)&&(D.current&&D.current!==st.__e||M(D,null,E)),(D=st.__c)!=null){if(D.componentWillUnmount)try{D.componentWillUnmount()}catch(ut){l$1.__e(ut,E)}D.base=D.__P=null}if(D=st.__k)for(vt=0;vt<D.length;vt++)D[vt]&&N(D[vt],E,typeof st.type!="function");at||st.__e==null||h(st.__e),st.__e=st.__d=void 0}function O(st,E,at){return this.constructor(st,at)}function S(st,E,at){var D,vt,ut;l$1.__&&l$1.__(st,E),vt=(D=typeof at=="function")?null:at&&at.__k||E.__k,ut=[],j$1(E,st=(!D&&at||E).__k=v$1(d$1,null,[st]),vt||e$2,e$2,E.ownerSVGElement!==void 0,!D&&at?[at]:vt?null:E.firstChild?n.call(E.childNodes):null,ut,!D&&at?at:vt?vt.__e:E.firstChild,D),z$1(ut,st)}n=c$1.slice,l$1={__e:function(st,E,at,D){for(var vt,ut,wt;E=E.__;)if((vt=E.__c)&&!vt.__)try{if((ut=vt.constructor)&&ut.getDerivedStateFromError!=null&&(vt.setState(ut.getDerivedStateFromError(st)),wt=vt.__d),vt.componentDidCatch!=null&&(vt.componentDidCatch(st,D||{}),wt=vt.__d),wt)return vt.__E=vt}catch(Ct){st=Ct}throw st}},u$1=0,_.prototype.setState=function(st,E){var at;at=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=a$1({},this.state),typeof st=="function"&&(st=st(a$1({},at),this.props)),st&&a$1(at,st),st!=null&&this.__v&&(E&&this.__h.push(E),m$1(this))},_.prototype.forceUpdate=function(st){this.__v&&(this.__e=!0,st&&this.__h.push(st),m$1(this))},_.prototype.render=d$1,t$1=[],o$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g$1.__r=0;var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(st){if(st.__esModule)return st;var E=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(st).forEach(function(at){var D=Object.getOwnPropertyDescriptor(st,at);Object.defineProperty(E,at,D.get?D:{enumerable:!0,get:function(){return st[at]}})}),E}function commonjsRequire(st){throw new Error('Could not dynamically require "'+st+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(E,at){module.exports=at()})(commonjsGlobal,()=>(()=>{var __webpack_modules__=[,(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.VerbosityLevel=E.Util=E.UnknownErrorException=E.UnexpectedResponseException=E.UNSUPPORTED_FEATURES=E.TextRenderingMode=E.StreamType=E.RenderingIntentFlag=E.PermissionFlag=E.PasswordResponses=E.PasswordException=E.PageActionEventType=E.OPS=E.MissingPDFException=E.InvalidPDFException=E.ImageKind=E.IDENTITY_MATRIX=E.FormatError=E.FontType=E.FeatureTest=E.FONT_IDENTITY_MATRIX=E.DocumentActionEventType=E.CMapCompressionType=E.BaseException=E.AnnotationType=E.AnnotationStateModelType=E.AnnotationReviewState=E.AnnotationReplyType=E.AnnotationMode=E.AnnotationMarkedState=E.AnnotationFlag=E.AnnotationFieldFlag=E.AnnotationBorderStyleType=E.AnnotationActionEventType=E.AbortException=void 0,E.arrayByteLength=kt,E.arraysToBytes=yt,E.assert=jt,E.bytesToString=ft,E.createPromiseCapability=ee,E.createValidAbsoluteUrl=qt,E.escapeString=se,E.getModificationDate=fe,E.getVerbosityLevel=St,E.info=Lt,E.isArrayBuffer=ce,E.isArrayEqual=re,E.isAscii=te,E.objectFromMap=Ot,E.objectSize=xt,E.setVerbosityLevel=Ft,E.shadow=rt,E.string32=Rt,E.stringToBytes=mt,E.stringToPDFString=Ut,E.stringToUTF16BEString=Kt,E.stringToUTF8String=Zt,E.unreachable=Dt,E.utf8StringToString=ie,E.warn=$t,at(2);const D=[1,0,0,1,0,0];E.IDENTITY_MATRIX=D;const vt=[.001,0,0,.001,0,0];E.FONT_IDENTITY_MATRIX=vt;const ut={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};E.RenderingIntentFlag=ut;const wt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};E.AnnotationMode=wt;const Ct={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};E.PermissionFlag=Ct;const bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};E.TextRenderingMode=bt;const it={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};E.ImageKind=it;const X={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};E.AnnotationType=X;const gt={MARKED:"Marked",REVIEW:"Review"};E.AnnotationStateModelType=gt;const pt={MARKED:"Marked",UNMARKED:"Unmarked"};E.AnnotationMarkedState=pt;const et={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};E.AnnotationReviewState=et;const B={GROUP:"Group",REPLY:"R"};E.AnnotationReplyType=B;const J={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};E.AnnotationFlag=J;const G={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};E.AnnotationFieldFlag=G;const nt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};E.AnnotationBorderStyleType=nt;const lt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};E.AnnotationActionEventType=lt;const Z={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};E.DocumentActionEventType=Z;const ht={O:"PageOpen",C:"PageClose"};E.PageActionEventType=ht;const dt={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};E.StreamType=dt;const At={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};E.FontType=At;const Pt={ERRORS:0,WARNINGS:1,INFOS:5};E.VerbosityLevel=Pt;const V={NONE:0,BINARY:1,STREAM:2};E.CMapCompressionType=V;const tt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};E.OPS=tt;const ot={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};E.UNSUPPORTED_FEATURES=ot;const _t={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};E.PasswordResponses=_t;let ct=Pt.WARNINGS;function Ft(Mt){Number.isInteger(Mt)&&(ct=Mt)}function St(){return ct}function Lt(Mt){ct>=Pt.INFOS&&console.log(`Info: ${Mt}`)}function $t(Mt){ct>=Pt.WARNINGS&&console.log(`Warning: ${Mt}`)}function Dt(Mt){throw new Error(Mt)}function jt(Mt,Tt){Mt||Dt(Tt)}function Nt(Mt){if(!Mt)return!1;switch(Mt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qt(Mt,Tt=null,Et=null){if(!Mt)return null;try{if(Et&&typeof Mt=="string"){if(Et.addDefaultProtocol&&Mt.startsWith("www.")){const Xt=Mt.match(/\./g);Xt&&Xt.length>=2&&(Mt=`http://${Mt}`)}if(Et.tryConvertEncoding)try{Mt=Zt(Mt)}catch{}}const Gt=Tt?new URL(Mt,Tt):new URL(Mt);if(Nt(Gt))return Gt}catch{}return null}function rt(Mt,Tt,Et){return Object.defineProperty(Mt,Tt,{value:Et,enumerable:!0,configurable:!0,writable:!1}),Et}const W=function(){function Tt(Et,Gt){this.constructor===Tt&&Dt("Cannot initialize BaseException."),this.message=Et,this.name=Gt}return Tt.prototype=new Error,Tt.constructor=Tt,Tt}();E.BaseException=W;class U extends W{constructor(Tt,Et){super(Tt,"PasswordException"),this.code=Et}}E.PasswordException=U;class Q extends W{constructor(Tt,Et){super(Tt,"UnknownErrorException"),this.details=Et}}E.UnknownErrorException=Q;class A extends W{constructor(Tt){super(Tt,"InvalidPDFException")}}E.InvalidPDFException=A;class R extends W{constructor(Tt){super(Tt,"MissingPDFException")}}E.MissingPDFException=R;class q extends W{constructor(Tt,Et){super(Tt,"UnexpectedResponseException"),this.status=Et}}E.UnexpectedResponseException=q;class K extends W{constructor(Tt){super(Tt,"FormatError")}}E.FormatError=K;class Y extends W{constructor(Tt){super(Tt,"AbortException")}}E.AbortException=Y;function ft(Mt){(typeof Mt!="object"||Mt===null||Mt.length===void 0)&&Dt("Invalid argument for bytesToString");const Tt=Mt.length,Et=8192;if(Tt<Et)return String.fromCharCode.apply(null,Mt);const Gt=[];for(let Xt=0;Xt<Tt;Xt+=Et){const Qt=Math.min(Xt+Et,Tt),Jt=Mt.subarray(Xt,Qt);Gt.push(String.fromCharCode.apply(null,Jt))}return Gt.join("")}function mt(Mt){typeof Mt!="string"&&Dt("Invalid argument for stringToBytes");const Tt=Mt.length,Et=new Uint8Array(Tt);for(let Gt=0;Gt<Tt;++Gt)Et[Gt]=Mt.charCodeAt(Gt)&255;return Et}function kt(Mt){if(Mt.length!==void 0)return Mt.length;if(Mt.byteLength!==void 0)return Mt.byteLength;Dt("Invalid argument for arrayByteLength")}function yt(Mt){const Tt=Mt.length;if(Tt===1&&Mt[0]instanceof Uint8Array)return Mt[0];let Et=0;for(let Qt=0;Qt<Tt;Qt++)Et+=kt(Mt[Qt]);let Gt=0;const Xt=new Uint8Array(Et);for(let Qt=0;Qt<Tt;Qt++){let Jt=Mt[Qt];Jt instanceof Uint8Array||(typeof Jt=="string"?Jt=mt(Jt):Jt=new Uint8Array(Jt));const de=Jt.byteLength;Xt.set(Jt,Gt),Gt+=de}return Xt}function Rt(Mt){return String.fromCharCode(Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255)}function xt(Mt){return Object.keys(Mt).length}function Ot(Mt){const Tt=Object.create(null);for(const[Et,Gt]of Mt)Tt[Et]=Gt;return Tt}function Bt(){const Mt=new Uint8Array(4);return Mt[0]=1,new Uint32Array(Mt.buffer,0,1)[0]===1}function Ht(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return rt(this,"isLittleEndian",Bt())}static get isEvalSupported(){return rt(this,"isEvalSupported",Ht())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}E.FeatureTest=Wt;const It=[...Array(256).keys()].map(Mt=>Mt.toString(16).padStart(2,"0"));class zt{static makeHexColor(Tt,Et,Gt){return`#${It[Tt]}${It[Et]}${It[Gt]}`}static scaleMinMax(Tt,Et){let Gt;Tt[0]?(Tt[0]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[0],Et[1]*=Tt[0],Tt[3]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[3],Et[3]*=Tt[3]):(Gt=Et[0],Et[0]=Et[2],Et[2]=Gt,Gt=Et[1],Et[1]=Et[3],Et[3]=Gt,Tt[1]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[1],Et[3]*=Tt[1],Tt[2]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[2],Et[1]*=Tt[2]),Et[0]+=Tt[4],Et[1]+=Tt[4],Et[2]+=Tt[5],Et[3]+=Tt[5]}static transform(Tt,Et){return[Tt[0]*Et[0]+Tt[2]*Et[1],Tt[1]*Et[0]+Tt[3]*Et[1],Tt[0]*Et[2]+Tt[2]*Et[3],Tt[1]*Et[2]+Tt[3]*Et[3],Tt[0]*Et[4]+Tt[2]*Et[5]+Tt[4],Tt[1]*Et[4]+Tt[3]*Et[5]+Tt[5]]}static applyTransform(Tt,Et){const Gt=Tt[0]*Et[0]+Tt[1]*Et[2]+Et[4],Xt=Tt[0]*Et[1]+Tt[1]*Et[3]+Et[5];return[Gt,Xt]}static applyInverseTransform(Tt,Et){const Gt=Et[0]*Et[3]-Et[1]*Et[2],Xt=(Tt[0]*Et[3]-Tt[1]*Et[2]+Et[2]*Et[5]-Et[4]*Et[3])/Gt,Qt=(-Tt[0]*Et[1]+Tt[1]*Et[0]+Et[4]*Et[1]-Et[5]*Et[0])/Gt;return[Xt,Qt]}static getAxialAlignedBoundingBox(Tt,Et){const Gt=zt.applyTransform(Tt,Et),Xt=zt.applyTransform(Tt.slice(2,4),Et),Qt=zt.applyTransform([Tt[0],Tt[3]],Et),Jt=zt.applyTransform([Tt[2],Tt[1]],Et);return[Math.min(Gt[0],Xt[0],Qt[0],Jt[0]),Math.min(Gt[1],Xt[1],Qt[1],Jt[1]),Math.max(Gt[0],Xt[0],Qt[0],Jt[0]),Math.max(Gt[1],Xt[1],Qt[1],Jt[1])]}static inverseTransform(Tt){const Et=Tt[0]*Tt[3]-Tt[1]*Tt[2];return[Tt[3]/Et,-Tt[1]/Et,-Tt[2]/Et,Tt[0]/Et,(Tt[2]*Tt[5]-Tt[4]*Tt[3])/Et,(Tt[4]*Tt[1]-Tt[5]*Tt[0])/Et]}static apply3dTransform(Tt,Et){return[Tt[0]*Et[0]+Tt[1]*Et[1]+Tt[2]*Et[2],Tt[3]*Et[0]+Tt[4]*Et[1]+Tt[5]*Et[2],Tt[6]*Et[0]+Tt[7]*Et[1]+Tt[8]*Et[2]]}static singularValueDecompose2dScale(Tt){const Et=[Tt[0],Tt[2],Tt[1],Tt[3]],Gt=Tt[0]*Et[0]+Tt[1]*Et[2],Xt=Tt[0]*Et[1]+Tt[1]*Et[3],Qt=Tt[2]*Et[0]+Tt[3]*Et[2],Jt=Tt[2]*Et[1]+Tt[3]*Et[3],de=(Gt+Jt)/2,ge=Math.sqrt((Gt+Jt)**2-4*(Gt*Jt-Qt*Xt))/2,pe=de+ge||1,ae=de-ge||1;return[Math.sqrt(pe),Math.sqrt(ae)]}static normalizeRect(Tt){const Et=Tt.slice(0);return Tt[0]>Tt[2]&&(Et[0]=Tt[2],Et[2]=Tt[0]),Tt[1]>Tt[3]&&(Et[1]=Tt[3],Et[3]=Tt[1]),Et}static intersect(Tt,Et){const Gt=Math.max(Math.min(Tt[0],Tt[2]),Math.min(Et[0],Et[2])),Xt=Math.min(Math.max(Tt[0],Tt[2]),Math.max(Et[0],Et[2]));if(Gt>Xt)return null;const Qt=Math.max(Math.min(Tt[1],Tt[3]),Math.min(Et[1],Et[3])),Jt=Math.min(Math.max(Tt[1],Tt[3]),Math.max(Et[1],Et[3]));return Qt>Jt?null:[Gt,Qt,Xt,Jt]}static bezierBoundingBox(Tt,Et,Gt,Xt,Qt,Jt,de,ge){const pe=[],ae=[[],[]];let _e,ue,ye,ne,Se,ve,Ce,xe;for(let ke=0;ke<2;++ke){if(ke===0?(ue=6*Tt-12*Gt+6*Qt,_e=-3*Tt+9*Gt-9*Qt+3*de,ye=3*Gt-3*Tt):(ue=6*Et-12*Xt+6*Jt,_e=-3*Et+9*Xt-9*Jt+3*ge,ye=3*Xt-3*Et),Math.abs(_e)<1e-12){if(Math.abs(ue)<1e-12)continue;ne=-ye/ue,0<ne&&ne<1&&pe.push(ne);continue}Ce=ue*ue-4*ye*_e,xe=Math.sqrt(Ce),!(Ce<0)&&(Se=(-ue+xe)/(2*_e),0<Se&&Se<1&&pe.push(Se),ve=(-ue-xe)/(2*_e),0<ve&&ve<1&&pe.push(ve))}let me=pe.length,oe;const be=me;for(;me--;)ne=pe[me],oe=1-ne,ae[0][me]=oe*oe*oe*Tt+3*oe*oe*ne*Gt+3*oe*ne*ne*Qt+ne*ne*ne*de,ae[1][me]=oe*oe*oe*Et+3*oe*oe*ne*Xt+3*oe*ne*ne*Jt+ne*ne*ne*ge;return ae[0][be]=Tt,ae[1][be]=Et,ae[0][be+1]=de,ae[1][be+1]=ge,ae[0].length=ae[1].length=be+2,[Math.min(...ae[0]),Math.min(...ae[1]),Math.max(...ae[0]),Math.max(...ae[1])]}}E.Util=zt;const Vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ut(Mt){if(Mt[0]>="\xEF"){let Et;if(Mt[0]==="\xFE"&&Mt[1]==="\xFF"?Et="utf-16be":Mt[0]==="\xFF"&&Mt[1]==="\xFE"?Et="utf-16le":Mt[0]==="\xEF"&&Mt[1]==="\xBB"&&Mt[2]==="\xBF"&&(Et="utf-8"),Et)try{const Gt=new TextDecoder(Et,{fatal:!0}),Xt=mt(Mt);return Gt.decode(Xt)}catch(Gt){$t(`stringToPDFString: "${Gt}".`)}}const Tt=[];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Vt[Mt.charCodeAt(Et)];Tt.push(Xt?String.fromCharCode(Xt):Mt.charAt(Et))}return Tt.join("")}function se(Mt){return Mt.replace(/([()\\\n\r])/g,Tt=>Tt===`
`?"\\n":Tt==="\r"?"\\r":`\\${Tt}`)}function te(Mt){return/^[\x00-\x7F]*$/.test(Mt)}function Kt(Mt){const Tt=["\xFE\xFF"];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Mt.charCodeAt(Et);Tt.push(String.fromCharCode(Xt>>8&255),String.fromCharCode(Xt&255))}return Tt.join("")}function Zt(Mt){return decodeURIComponent(escape(Mt))}function ie(Mt){return unescape(encodeURIComponent(Mt))}function ce(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.byteLength!==void 0}function re(Mt,Tt){if(Mt.length!==Tt.length)return!1;for(let Et=0,Gt=Mt.length;Et<Gt;Et++)if(Mt[Et]!==Tt[Et])return!1;return!0}function fe(Mt=new Date){return[Mt.getUTCFullYear().toString(),(Mt.getUTCMonth()+1).toString().padStart(2,"0"),Mt.getUTCDate().toString().padStart(2,"0"),Mt.getUTCHours().toString().padStart(2,"0"),Mt.getUTCMinutes().toString().padStart(2,"0"),Mt.getUTCSeconds().toString().padStart(2,"0")].join("")}function ee(){const Mt=Object.create(null);let Tt=!1;return Object.defineProperty(Mt,"settled",{get(){return Tt}}),Mt.promise=new Promise(function(Et,Gt){Mt.resolve=function(Xt){Tt=!0,Et(Xt)},Mt.reject=function(Xt){Tt=!0,Gt(Xt)}}),Mt}},(st,E,at)=>{at(3)},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.isNodeJS=void 0;const at=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");E.isNodeJS=at},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var st,at,D,vt,ut,wt,Ct,bt,it,Pe,gt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:et,NodeCMapReaderFactory:B,NodeStandardFontDataFactory:J}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=et,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=B,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=J}let createPDFNetworkStream;function setPDFNetworkStreamFactory(et){createPDFNetworkStream=et}function getDocument(et){const B=new PDFDocumentLoadingTask;let J;if(typeof et=="string"||et instanceof URL)J={url:et};else if((0,_util.isArrayBuffer)(et))J={data:et};else if(et instanceof PDFDataRangeTransport)J={range:et};else{if(typeof et!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!et.url&&!et.data&&!et.range)throw new Error("Invalid parameter object: need either .data, .range or .url");J=et}const G=Object.create(null);let nt=null,lt=null;for(const ht in J){const dt=J[ht];switch(ht){case"url":if(typeof window!="undefined")try{G[ht]=new URL(dt,window.location).href;continue}catch(At){(0,_util.warn)(`Cannot create valid URL: "${At}".`)}else if(typeof dt=="string"||dt instanceof URL){G[ht]=dt.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":nt=dt;continue;case"worker":lt=dt;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&dt instanceof Buffer)G[ht]=new Uint8Array(dt);else{if(dt instanceof Uint8Array)break;if(typeof dt=="string")G[ht]=(0,_util.stringToBytes)(dt);else if(typeof dt=="object"&&dt!==null&&!isNaN(dt.length))G[ht]=new Uint8Array(dt);else if((0,_util.isArrayBuffer)(dt))G[ht]=new Uint8Array(dt);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}G[ht]=dt}if(G.CMapReaderFactory=G.CMapReaderFactory||DefaultCMapReaderFactory,G.StandardFontDataFactory=G.StandardFontDataFactory||DefaultStandardFontDataFactory,G.ignoreErrors=G.stopAtErrors!==!0,G.fontExtraProperties=G.fontExtraProperties===!0,G.pdfBug=G.pdfBug===!0,G.enableXfa=G.enableXfa===!0,(!Number.isInteger(G.rangeChunkSize)||G.rangeChunkSize<1)&&(G.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof G.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(G.docBaseUrl))&&(G.docBaseUrl=null),(!Number.isInteger(G.maxImageSize)||G.maxImageSize<-1)&&(G.maxImageSize=-1),typeof G.cMapUrl!="string"&&(G.cMapUrl=null),typeof G.standardFontDataUrl!="string"&&(G.standardFontDataUrl=null),typeof G.useWorkerFetch!="boolean"&&(G.useWorkerFetch=G.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&G.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof G.isEvalSupported!="boolean"&&(G.isEvalSupported=!0),typeof G.disableFontFace!="boolean"&&(G.disableFontFace=_is_node.isNodeJS),typeof G.useSystemFonts!="boolean"&&(G.useSystemFonts=!_is_node.isNodeJS&&!G.disableFontFace),(typeof G.ownerDocument!="object"||G.ownerDocument===null)&&(G.ownerDocument=globalThis.document),typeof G.disableRange!="boolean"&&(G.disableRange=!1),typeof G.disableStream!="boolean"&&(G.disableStream=!1),typeof G.disableAutoFetch!="boolean"&&(G.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(G.verbosity),!lt){const ht={verbosity:G.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};lt=ht.port?PDFWorker.fromPort(ht):new PDFWorker(ht),B._worker=lt}const Z=B.docId;return lt.promise.then(function(){if(B.destroyed)throw new Error("Loading aborted");const ht=_fetchDocument(lt,G,nt,Z),dt=new Promise(function(At){let Pt;nt?Pt=new _transport_stream.PDFDataTransportStream({length:G.length,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:G.disableRange,disableStream:G.disableStream},nt):G.data||(Pt=createPDFNetworkStream({url:G.url,length:G.length,httpHeaders:G.httpHeaders,withCredentials:G.withCredentials,rangeChunkSize:G.rangeChunkSize,disableRange:G.disableRange,disableStream:G.disableStream})),At(Pt)});return Promise.all([ht,dt]).then(function([At,Pt]){if(B.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(Z,At,lt.port),tt=new WorkerTransport(V,B,Pt,G);B._transport=tt,V.send("Ready",null)})}).catch(B._capability.reject),B}async function _fetchDocument(et,B,J,G){if(et.destroyed)throw new Error("Worker was destroyed");J&&(B.length=J.length,B.initialData=J.initialData,B.progressiveDone=J.progressiveDone,B.contentDispositionFilename=J.contentDispositionFilename);const nt=await et.messageHandler.sendWithPromise("GetDocRequest",{docId:G,apiVersion:"2.14.305",source:{data:B.data,url:B.url,password:B.password,disableAutoFetch:B.disableAutoFetch,rangeChunkSize:B.rangeChunkSize,length:B.length},maxImageSize:B.maxImageSize,disableFontFace:B.disableFontFace,docBaseUrl:B.docBaseUrl,ignoreErrors:B.ignoreErrors,isEvalSupported:B.isEvalSupported,fontExtraProperties:B.fontExtraProperties,enableXfa:B.enableXfa,useSystemFonts:B.useSystemFonts,cMapUrl:B.useWorkerFetch?B.cMapUrl:null,standardFontDataUrl:B.useWorkerFetch?B.standardFontDataUrl:null});if(et.destroyed)throw new Error("Worker was destroyed");return nt}const E=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Fe(E,st)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var B;this.destroyed=!0,await((B=this._transport)==null?void 0:B.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=E;st=new WeakMap,le(PDFDocumentLoadingTask,st,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(B,J,G=!1,nt=null){this.length=B,this.initialData=J,this.progressiveDone=G,this.contentDispositionFilename=nt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(B){this._rangeListeners.push(B)}addProgressListener(B){this._progressListeners.push(B)}addProgressiveReadListener(B){this._progressiveReadListeners.push(B)}addProgressiveDoneListener(B){this._progressiveDoneListeners.push(B)}onDataRange(B,J){for(const G of this._rangeListeners)G(B,J)}onDataProgress(B,J){this._readyCapability.promise.then(()=>{for(const G of this._progressListeners)G(B,J)})}onDataProgressiveRead(B){this._readyCapability.promise.then(()=>{for(const J of this._progressiveReadListeners)J(B)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const B of this._progressiveDoneListeners)B()})}transportReady(){this._readyCapability.resolve()}requestDataRange(B,J){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(B,J){this._pdfInfo=B,this._transport=J,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(B){return this._transport.getPage(B)}getPageIndex(B){return this._transport.getPageIndex(B)}getDestinations(){return this._transport.getDestinations()}getDestination(B){return this._transport.getDestination(B)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(B=!1){return this._transport.startCleanup(B||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(B,J,G,nt,lt=!1){this._pageIndex=B,this._pageInfo=J,this._ownerDocument=nt,this._transport=G,this._stats=lt?new _display_utils.StatTimer:null,this._pdfBug=lt,this.commonObjs=G.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:B,rotation:J=this.rotate,offsetX:G=0,offsetY:nt=0,dontFlip:lt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:B,rotation:J,offsetX:G,offsetY:nt,dontFlip:lt})}getAnnotations({intent:B="display"}={}){const J=this._transport.getRenderingIntent(B);let G=this._annotationPromises.get(J.cacheKey);return G||(G=this._transport.getAnnotations(this._pageIndex,J.renderingIntent),this._annotationPromises.set(J.cacheKey,G),G=G.then(nt=>{for(const lt of nt)lt.titleObj!==void 0&&Object.defineProperty(lt,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),lt.titleObj.str}}),lt.contentsObj!==void 0&&Object.defineProperty(lt,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),lt.contentsObj.str}});return nt})),G}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var B;return((B=this._transport._htmlForXfa)==null?void 0:B.children[this._pageIndex])||null}render({canvasContext:B,viewport:J,intent:G="display",annotationMode:nt=_util.AnnotationMode.ENABLE,transform:lt=null,imageLayer:Z=null,canvasFactory:ht=null,background:dt=null,optionalContentConfigPromise:At=null,annotationCanvasMap:Pt=null,pageColors:V=null}){var $t,Dt;(($t=arguments[0])==null?void 0:$t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&nt===_util.AnnotationMode.ENABLE&&(nt=_util.AnnotationMode.ENABLE_FORMS)),((Dt=arguments[0])==null?void 0:Dt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&nt===_util.AnnotationMode.ENABLE&&(nt=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const tt=this._transport.getRenderingIntent(G,nt);this.pendingCleanup=!1,At||(At=this._transport.getOptionalContentConfig());let ot=this._intentStates.get(tt.cacheKey);ot||(ot=Object.create(null),this._intentStates.set(tt.cacheKey,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const _t=ht||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ct=!!(tt.renderingIntent&_util.RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=(0,_util.createPromiseCapability)(),ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(tt));const Ft=jt=>{ot.renderTasks.delete(St),(this.cleanupAfterRender||ct)&&(this.pendingCleanup=!0),this._tryCleanup(),jt?(St.capability.reject(jt),this._abortOperatorList({intentState:ot,reason:jt instanceof Error?jt:new Error(jt)})):St.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},St=new InternalRenderTask({callback:Ft,params:{canvasContext:B,viewport:J,transform:lt,imageLayer:Z,background:dt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Pt,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:_t,useRequestAnimationFrame:!ct,pdfBug:this._pdfBug,pageColors:V});(ot.renderTasks||(ot.renderTasks=new Set)).add(St);const Lt=St.task;return Promise.all([ot.displayReadyCapability.promise,At]).then(([jt,Nt])=>{if(this.pendingCleanup){Ft();return}this._stats&&this._stats.time("Rendering"),St.initializeGraphics({transparency:jt,optionalContentConfig:Nt}),St.operatorListChanged()}).catch(Ft),Lt}getOperatorList({intent:B="display",annotationMode:J=_util.AnnotationMode.ENABLE}={}){function G(){lt.operatorList.lastChunk&&(lt.opListReadCapability.resolve(lt.operatorList),lt.renderTasks.delete(Z))}const nt=this._transport.getRenderingIntent(B,J,!0);let lt=this._intentStates.get(nt.cacheKey);lt||(lt=Object.create(null),this._intentStates.set(nt.cacheKey,lt));let Z;return lt.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=G,lt.opListReadCapability=(0,_util.createPromiseCapability)(),(lt.renderTasks||(lt.renderTasks=new Set)).add(Z),lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(nt)),lt.opListReadCapability.promise}streamTextContent({disableCombineTextItems:B=!1,includeMarkedContent:J=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:B!==!0,includeMarkedContent:J===!0},{highWaterMark:100,size(nt){return nt.items.length}})}getTextContent(B={}){if(this._transport._htmlForXfa)return this.getXfa().then(G=>_xfa_text.XfaText.textContent(G));const J=this.streamTextContent(B);return new Promise(function(G,nt){function lt(){Z.read().then(function({value:dt,done:At}){if(At){G(ht);return}Object.assign(ht.styles,dt.styles),ht.items.push(...dt.items),lt()},nt)}const Z=J.getReader(),ht={items:[],styles:Object.create(null)};lt()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const B=[];for(const J of this._intentStates.values())if(this._abortOperatorList({intentState:J,reason:new Error("Page was destroyed."),force:!0}),!J.opListReadCapability)for(const G of J.renderTasks)B.push(G.completed),G.cancel();this.objs.clear();for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(B)}cleanup(B=!1){return this.pendingCleanup=!0,this._tryCleanup(B)}_tryCleanup(B=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:J,operatorList:G}of this._intentStates.values())if(J.size>0||!G.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,B&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(B,J){const G=this._intentStates.get(J);!G||(this._stats&&this._stats.timeEnd("Page Request"),G.displayReadyCapability&&G.displayReadyCapability.resolve(B))}_renderPageChunk(B,J){for(let G=0,nt=B.length;G<nt;G++)J.operatorList.fnArray.push(B.fnArray[G]),J.operatorList.argsArray.push(B.argsArray[G]);J.operatorList.lastChunk=B.lastChunk;for(const G of J.renderTasks)G.operatorListChanged();B.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:B,cacheKey:J}){const nt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:B,cacheKey:J,annotationStorage:B&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),lt=this._intentStates.get(J);lt.streamReader=nt;const Z=()=>{nt.read().then(({value:ht,done:dt})=>{if(dt){lt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ht,lt),Z())},ht=>{if(lt.streamReader=null,!this._transport.destroyed){if(lt.operatorList){lt.operatorList.lastChunk=!0;for(const dt of lt.renderTasks)dt.operatorListChanged();this._tryCleanup()}if(lt.displayReadyCapability)lt.displayReadyCapability.reject(ht);else if(lt.opListReadCapability)lt.opListReadCapability.reject(ht);else throw ht}})};Z()}_abortOperatorList({intentState:B,reason:J,force:G=!1}){if(!!B.streamReader){if(!G){if(B.renderTasks.size>0)return;if(J instanceof _display_utils.RenderingCancelledException){B.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:B,reason:J,force:!0}),B.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(B.streamReader.cancel(new _util.AbortException(J.message)).catch(()=>{}),B.streamReader=null,!this._transport.destroyed){for(const[nt,lt]of this._intentStates)if(lt===B){this._intentStates.delete(nt);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(B,J){const G={data:structuredClone(B,J)};this._deferred.then(()=>{for(const nt of this._listeners)nt.call(this,G)})}addEventListener(B,J){this._listeners.push(J)}removeEventListener(B,J){const G=this._listeners.indexOf(J);this._listeners.splice(G,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const et=(at=document==null?void 0:document.currentScript)==null?void 0:at.src;et&&(PDFWorkerUtil.fallbackWorkerSrc=et.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(et,B){let J;try{if(J=new URL(et),!J.origin||J.origin==="null")return!1}catch{return!1}const G=new URL(B,J);return J.origin===G.origin},PDFWorkerUtil.createCDNWrapper=function(et){const B=`importScripts("${et}");`;return URL.createObjectURL(new Blob([B]))}}const _PDFWorker=class{constructor({name:et=null,port:B=null,verbosity:J=(0,_util.getVerbosityLevel)()}={}){if(B&&Yt(_PDFWorker,D).has(B))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=et,this.destroyed=!1,this.verbosity=J,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,B){Yt(_PDFWorker,D).set(B,this),this._initializeFromPort(B);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(et){this._port=et,this._messageHandler=new _message_handler.MessageHandler("main","worker",et),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let et=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,et)||(et=PDFWorkerUtil.createCDNWrapper(new URL(et,window.location).href));const B=new Worker(et),J=new _message_handler.MessageHandler("main","worker",B),G=()=>{B.removeEventListener("error",nt),J.destroy(),B.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},nt=()=>{this._webWorker||G()};B.addEventListener("error",nt),J.on("test",Z=>{if(B.removeEventListener("error",nt),this.destroyed){G();return}Z?(this._messageHandler=J,this._port=B,this._webWorker=B,this._readyCapability.resolve(),J.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),J.destroy(),B.terminate())}),J.on("ready",Z=>{if(B.removeEventListener("error",nt),this.destroyed){G();return}try{lt()}catch{this._setupFakeWorker()}});const lt=()=>{const Z=new Uint8Array;J.send("test",Z,[Z.buffer])};lt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(et=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const B=new LoopbackPort;this._port=B;const J=`fake${PDFWorkerUtil.fakeWorkerId++}`,G=new _message_handler.MessageHandler(J+"_worker",J,B);et.setup(G,B);const nt=new _message_handler.MessageHandler(J,J+"_worker",B);this._messageHandler=nt,this._readyCapability.resolve(),nt.send("configure",{verbosity:this.verbosity})}).catch(et=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${et.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Yt(_PDFWorker,D).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(et){if(!(et!=null&&et.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt(this,D).has(et.port)?Yt(this,D).get(et.port):new _PDFWorker(et)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var et;try{return((et=globalThis.pdfjsWorker)==null?void 0:et.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;D=new WeakMap,le(PDFWorker,D,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(B,J,G,nt){le(this,vt,null);le(this,ut,new Map);le(this,wt,new Map);le(this,Ct,null);this.messageHandler=B,this.loadingTask=J,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:J.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:nt.ownerDocument,styleElement:nt.styleElement}),this._params=nt,nt.useWorkerFetch||(this.CMapReaderFactory=new nt.CMapReaderFactory({baseUrl:nt.cMapUrl,isCompressed:nt.cMapPacked}),this.StandardFontDataFactory=new nt.StandardFontDataFactory({baseUrl:nt.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=G,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Yt(this,vt)}getRenderingIntent(B,J=_util.AnnotationMode.ENABLE,G=!1){let nt=_util.RenderingIntentFlag.DISPLAY,lt="";switch(B){case"any":nt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":nt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${B}`)}switch(J){case _util.AnnotationMode.DISABLE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:nt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,lt=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${J}`)}return G&&(nt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:nt,cacheKey:`${nt}_${lt}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const B=[];for(const G of Yt(this,ut).values())B.push(G._destroy());Yt(this,ut).clear(),Yt(this,wt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const J=this.messageHandler.sendWithPromise("Terminate",null);return B.push(J),Promise.all(B).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),he(this,Ct,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:B,loadingTask:J}=this;B.on("GetReader",(G,nt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=lt=>{this._lastProgress={loaded:lt.loaded,total:lt.total}},nt.onPull=()=>{this._fullReader.read().then(function({value:lt,done:Z}){if(Z){nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(lt),"GetReader - expected an ArrayBuffer."),nt.enqueue(new Uint8Array(lt),1,[lt])}).catch(lt=>{nt.error(lt)})},nt.onCancel=lt=>{this._fullReader.cancel(lt),nt.ready.catch(Z=>{if(!this.destroyed)throw Z})}}),B.on("ReaderHeadersReady",G=>{const nt=(0,_util.createPromiseCapability)(),lt=this._fullReader;return lt.headersReady.then(()=>{var Z;(!lt.isStreamingSupported||!lt.isRangeSupported)&&(this._lastProgress&&((Z=J.onProgress)==null||Z.call(J,this._lastProgress)),lt.onProgress=ht=>{var dt;(dt=J.onProgress)==null||dt.call(J,{loaded:ht.loaded,total:ht.total})}),nt.resolve({isStreamingSupported:lt.isStreamingSupported,isRangeSupported:lt.isRangeSupported,contentLength:lt.contentLength})},nt.reject),nt.promise}),B.on("GetRangeReader",(G,nt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const lt=this._networkStream.getRangeReader(G.begin,G.end);if(!lt){nt.close();return}nt.onPull=()=>{lt.read().then(function({value:Z,done:ht}){if(ht){nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(Z),"GetRangeReader - expected an ArrayBuffer."),nt.enqueue(new Uint8Array(Z),1,[Z])}).catch(Z=>{nt.error(Z)})},nt.onCancel=Z=>{lt.cancel(Z),nt.ready.catch(ht=>{if(!this.destroyed)throw ht})}}),B.on("GetDoc",({pdfInfo:G})=>{this._numPages=G.numPages,this._htmlForXfa=G.htmlForXfa,delete G.htmlForXfa,J._capability.resolve(new PDFDocumentProxy(G,this))}),B.on("DocException",function(G){let nt;switch(G.name){case"PasswordException":nt=new _util.PasswordException(G.message,G.code);break;case"InvalidPDFException":nt=new _util.InvalidPDFException(G.message);break;case"MissingPDFException":nt=new _util.MissingPDFException(G.message);break;case"UnexpectedResponseException":nt=new _util.UnexpectedResponseException(G.message,G.status);break;case"UnknownErrorException":nt=new _util.UnknownErrorException(G.message,G.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}J._capability.reject(nt)}),B.on("PasswordRequest",G=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),J.onPassword){const nt=lt=>{lt instanceof Error?this._passwordCapability.reject(lt):this._passwordCapability.resolve({password:lt})};try{J.onPassword(nt,G.code)}catch(lt){this._passwordCapability.reject(lt)}}else this._passwordCapability.reject(new _util.PasswordException(G.message,G.code));return this._passwordCapability.promise}),B.on("DataLoaded",G=>{var nt;(nt=J.onProgress)==null||nt.call(J,{loaded:G.length,total:G.length}),this.downloadInfoCapability.resolve(G)}),B.on("StartRenderPage",G=>{if(this.destroyed)return;Yt(this,ut).get(G.pageIndex)._startRenderPage(G.transparency,G.cacheKey)}),B.on("commonobj",([G,nt,lt])=>{var Z;if(!this.destroyed&&!this.commonObjs.has(G))switch(nt){case"Font":const ht=this._params;if("error"in lt){const Pt=lt.error;(0,_util.warn)(`Error during font loading: ${Pt}`),this.commonObjs.resolve(G,Pt);break}let dt=null;ht.pdfBug&&((Z=globalThis.FontInspector)==null?void 0:Z.enabled)&&(dt={registerFont(Pt,V){globalThis.FontInspector.fontAdded(Pt,V)}});const At=new _font_loader.FontFaceObject(lt,{isEvalSupported:ht.isEvalSupported,disableFontFace:ht.disableFontFace,ignoreErrors:ht.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:dt});this.fontLoader.bind(At).catch(Pt=>B.sendWithPromise("FontFallback",{id:G})).finally(()=>{!ht.fontExtraProperties&&At.data&&(At.data=null),this.commonObjs.resolve(G,At)});break;case"FontPath":case"Image":this.commonObjs.resolve(G,lt);break;default:throw new Error(`Got unknown common object type ${nt}`)}}),B.on("obj",([G,nt,lt,Z])=>{var dt;if(this.destroyed)return;const ht=Yt(this,ut).get(nt);if(!ht.objs.has(G))switch(lt){case"Image":ht.objs.resolve(G,Z);const At=8e6;if(Z){let Pt;if(Z.bitmap){const{bitmap:V,width:tt,height:ot}=Z;Pt=tt*ot*4,ht._bitmaps.add(V)}else Pt=((dt=Z.data)==null?void 0:dt.length)||0;Pt>At&&(ht.cleanupAfterRender=!0)}break;case"Pattern":ht.objs.resolve(G,Z);break;default:throw new Error(`Got unknown object type ${lt}`)}}),B.on("DocProgress",G=>{var nt;this.destroyed||(nt=J.onProgress)==null||nt.call(J,{loaded:G.loaded,total:G.total})}),B.on("DocStats",G=>{this.destroyed||he(this,vt,Object.freeze({streamTypes:Object.freeze(G.streamTypes),fontTypes:Object.freeze(G.fontTypes)}))}),B.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),B.on("FetchBuiltInCMap",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(G):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),B.on("FetchStandardFontData",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(G):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:B}){var J,G;this.destroyed||(G=(J=this.loadingTask).onUnsupportedFeature)==null||G.call(J,B)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(B){if(!Number.isInteger(B)||B<=0||B>this._numPages)return Promise.reject(new Error("Invalid page request."));const J=B-1,G=Yt(this,wt).get(J);if(G)return G;const nt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:J}).then(lt=>{if(this.destroyed)throw new Error("Transport destroyed");const Z=new PDFPageProxy(J,lt,this,this._params.ownerDocument,this._params.pdfBug);return Yt(this,ut).set(J,Z),Z});return Yt(this,wt).set(J,nt),nt}getPageIndex(B){return typeof B!="object"||B===null||!Number.isInteger(B.num)||B.num<0||!Number.isInteger(B.gen)||B.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:B.num,gen:B.gen})}getAnnotations(B,J){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:B,intent:J})}saveDocument(){var B,J;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(J=(B=this._fullReader)==null?void 0:B.filename)!=null?J:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(B){return typeof B!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:B})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(B){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:B})}getStructTree(B){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:B})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(B=>new _optional_content_config.OptionalContentConfig(B))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Yt(this,Ct)||he(this,Ct,this.messageHandler.sendWithPromise("GetMetadata",null).then(B=>{var J,G,nt,lt;return{info:B[0],metadata:B[1]?new _metadata.Metadata(B[1]):null,contentDispositionFilename:(G=(J=this._fullReader)==null?void 0:J.filename)!=null?G:null,contentLength:(lt=(nt=this._fullReader)==null?void 0:nt.contentLength)!=null?lt:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(B=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const J of Yt(this,ut).values())if(!J.cleanup())throw new Error(`startCleanup: Page ${J.pageNumber} is currently rendering.`);this.commonObjs.clear(),B||this.fontLoader.clear(),he(this,Ct,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const B=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:B.disableAutoFetch,enableXfa:B.enableXfa})}}vt=new WeakMap,ut=new WeakMap,wt=new WeakMap,Ct=new WeakMap;class PDFObjects{constructor(){le(this,it);le(this,bt,Object.create(null))}get(B,J=null){if(J){const nt=Ae(this,it,Pe).call(this,B);return nt.capability.promise.then(()=>J(nt.data)),null}const G=Yt(this,bt)[B];if(!(G!=null&&G.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${B}.`);return G.data}has(B){const J=Yt(this,bt)[B];return(J==null?void 0:J.capability.settled)||!1}resolve(B,J=null){const G=Ae(this,it,Pe).call(this,B);G.data=J,G.capability.resolve()}clear(){he(this,bt,Object.create(null))}}bt=new WeakMap,it=new WeakSet,Pe=function(B){const J=Yt(this,bt)[B];return J||(Yt(this,bt)[B]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(B){this._internalRenderTask=B,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const pt=class{constructor({callback:B,params:J,objs:G,commonObjs:nt,annotationCanvasMap:lt,operatorList:Z,pageIndex:ht,canvasFactory:dt,useRequestAnimationFrame:At=!1,pdfBug:Pt=!1,pageColors:V=null}){this.callback=B,this.params=J,this.objs=G,this.commonObjs=nt,this.annotationCanvasMap=lt,this.operatorListIdx=null,this.operatorList=Z,this._pageIndex=ht,this.canvasFactory=dt,this._pdfBug=Pt,this.pageColors=V,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=At===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=J.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:B=!1,optionalContentConfig:J}){var dt;if(this.cancelled)return;if(this._canvas){if(Yt(pt,gt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Yt(pt,gt).add(this._canvas)}this._pdfBug&&((dt=globalThis.StepperManager)==null?void 0:dt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:G,viewport:nt,transform:lt,imageLayer:Z,background:ht}=this.params;this.gfx=new _canvas.CanvasGraphics(G,this.commonObjs,this.objs,this.canvasFactory,Z,J,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:lt,viewport:nt,transparency:B,background:ht}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(B=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Yt(pt,gt).delete(this._canvas),this.callback(B||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Yt(pt,gt).delete(this._canvas),this.callback())))}};let InternalRenderTask=pt;gt=new WeakMap,le(InternalRenderTask,gt,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.StatTimer=E.RenderingCancelledException=E.PixelsPerInch=E.PageViewport=E.PDFDateString=E.DOMStandardFontDataFactory=E.DOMSVGFactory=E.DOMCanvasFactory=E.DOMCMapReaderFactory=void 0,E.deprecated=dt,E.getFilenameFromUrl=G,E.getPdfFilenameFromUrl=nt,E.getXfaPageViewport=V,E.isDataScheme=B,E.isPdfFile=J,E.isValidFetchUrl=Z,E.loadScript=ht;var D=at(6),vt=at(1);const ut="http://www.w3.org/2000/svg",tt=class{};let wt=tt;we(wt,"CSS",96),we(wt,"PDF",72),we(wt,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF),E.PixelsPerInch=wt;class Ct extends D.BaseCanvasFactory{constructor({ownerDocument:_t=globalThis.document}={}){super(),this._document=_t}_createCanvas(_t,ct){const Ft=this._document.createElement("canvas");return Ft.width=_t,Ft.height=ct,Ft}}E.DOMCanvasFactory=Ct;async function bt(ot,_t=!1){if(Z(ot,document.baseURI)){const ct=await fetch(ot);if(!ct.ok)throw new Error(ct.statusText);return _t?new Uint8Array(await ct.arrayBuffer()):(0,vt.stringToBytes)(await ct.text())}return new Promise((ct,Ft)=>{const St=new XMLHttpRequest;St.open("GET",ot,!0),_t&&(St.responseType="arraybuffer"),St.onreadystatechange=()=>{if(St.readyState===XMLHttpRequest.DONE){if(St.status===200||St.status===0){let Lt;if(_t&&St.response?Lt=new Uint8Array(St.response):!_t&&St.responseText&&(Lt=(0,vt.stringToBytes)(St.responseText)),Lt){ct(Lt);return}}Ft(new Error(St.statusText))}},St.send(null)})}class it extends D.BaseCMapReaderFactory{_fetchData(_t,ct){return bt(_t,this.isCompressed).then(Ft=>({cMapData:Ft,compressionType:ct}))}}E.DOMCMapReaderFactory=it;class X extends D.BaseStandardFontDataFactory{_fetchData(_t){return bt(_t,!0)}}E.DOMStandardFontDataFactory=X;class gt extends D.BaseSVGFactory{_createSVG(_t){return document.createElementNS(ut,_t)}}E.DOMSVGFactory=gt;class pt{constructor({viewBox:_t,scale:ct,rotation:Ft,offsetX:St=0,offsetY:Lt=0,dontFlip:$t=!1}){this.viewBox=_t,this.scale=ct,this.rotation=Ft,this.offsetX=St,this.offsetY=Lt;const Dt=(_t[2]+_t[0])/2,jt=(_t[3]+_t[1])/2;let Nt,qt,rt,W;switch(Ft%=360,Ft<0&&(Ft+=360),Ft){case 180:Nt=-1,qt=0,rt=0,W=1;break;case 90:Nt=0,qt=1,rt=1,W=0;break;case 270:Nt=0,qt=-1,rt=-1,W=0;break;case 0:Nt=1,qt=0,rt=0,W=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}$t&&(rt=-rt,W=-W);let U,Q,A,R;Nt===0?(U=Math.abs(jt-_t[1])*ct+St,Q=Math.abs(Dt-_t[0])*ct+Lt,A=Math.abs(_t[3]-_t[1])*ct,R=Math.abs(_t[2]-_t[0])*ct):(U=Math.abs(Dt-_t[0])*ct+St,Q=Math.abs(jt-_t[1])*ct+Lt,A=Math.abs(_t[2]-_t[0])*ct,R=Math.abs(_t[3]-_t[1])*ct),this.transform=[Nt*ct,qt*ct,rt*ct,W*ct,U-Nt*ct*Dt-rt*ct*jt,Q-qt*ct*Dt-W*ct*jt],this.width=A,this.height=R}clone({scale:_t=this.scale,rotation:ct=this.rotation,offsetX:Ft=this.offsetX,offsetY:St=this.offsetY,dontFlip:Lt=!1}={}){return new pt({viewBox:this.viewBox.slice(),scale:_t,rotation:ct,offsetX:Ft,offsetY:St,dontFlip:Lt})}convertToViewportPoint(_t,ct){return vt.Util.applyTransform([_t,ct],this.transform)}convertToViewportRectangle(_t){const ct=vt.Util.applyTransform([_t[0],_t[1]],this.transform),Ft=vt.Util.applyTransform([_t[2],_t[3]],this.transform);return[ct[0],ct[1],Ft[0],Ft[1]]}convertToPdfPoint(_t,ct){return vt.Util.applyInverseTransform([_t,ct],this.transform)}}E.PageViewport=pt;class et extends vt.BaseException{constructor(_t,ct){super(_t,"RenderingCancelledException"),this.type=ct}}E.RenderingCancelledException=et;function B(ot){const _t=ot.length;let ct=0;for(;ct<_t&&ot[ct].trim()==="";)ct++;return ot.substring(ct,ct+5).toLowerCase()==="data:"}function J(ot){return typeof ot=="string"&&/\.pdf$/i.test(ot)}function G(ot){const _t=ot.indexOf("#"),ct=ot.indexOf("?"),Ft=Math.min(_t>0?_t:ot.length,ct>0?ct:ot.length);return ot.substring(ot.lastIndexOf("/",Ft)+1,Ft)}function nt(ot,_t="document.pdf"){if(typeof ot!="string")return _t;if(B(ot))return(0,vt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),_t;const ct=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,St=ct.exec(ot);let Lt=Ft.exec(St[1])||Ft.exec(St[2])||Ft.exec(St[3]);if(Lt&&(Lt=Lt[0],Lt.includes("%")))try{Lt=Ft.exec(decodeURIComponent(Lt))[0]}catch{}return Lt||_t}class lt{constructor(){this.started=Object.create(null),this.times=[]}time(_t){_t in this.started&&(0,vt.warn)(`Timer is already running for ${_t}`),this.started[_t]=Date.now()}timeEnd(_t){_t in this.started||(0,vt.warn)(`Timer has not been started for ${_t}`),this.times.push({name:_t,start:this.started[_t],end:Date.now()}),delete this.started[_t]}toString(){const _t=[];let ct=0;for(const Ft of this.times){const St=Ft.name;St.length>ct&&(ct=St.length)}for(const Ft of this.times){const St=Ft.end-Ft.start;_t.push(`${Ft.name.padEnd(ct)} ${St}ms
`)}return _t.join("")}}E.StatTimer=lt;function Z(ot,_t){try{const{protocol:ct}=_t?new URL(ot,_t):new URL(ot);return ct==="http:"||ct==="https:"}catch{return!1}}function ht(ot,_t=!1){return new Promise((ct,Ft)=>{const St=document.createElement("script");St.src=ot,St.onload=function(Lt){_t&&St.remove(),ct(Lt)},St.onerror=function(){Ft(new Error(`Cannot load script at: ${St.src}`))},(document.head||document.documentElement).appendChild(St)})}function dt(ot){console.log("Deprecated API usage: "+ot)}let At;class Pt{static toDateObject(_t){if(!_t||typeof _t!="string")return null;At||(At=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ct=At.exec(_t);if(!ct)return null;const Ft=parseInt(ct[1],10);let St=parseInt(ct[2],10);St=St>=1&&St<=12?St-1:0;let Lt=parseInt(ct[3],10);Lt=Lt>=1&&Lt<=31?Lt:1;let $t=parseInt(ct[4],10);$t=$t>=0&&$t<=23?$t:0;let Dt=parseInt(ct[5],10);Dt=Dt>=0&&Dt<=59?Dt:0;let jt=parseInt(ct[6],10);jt=jt>=0&&jt<=59?jt:0;const Nt=ct[7]||"Z";let qt=parseInt(ct[8],10);qt=qt>=0&&qt<=23?qt:0;let rt=parseInt(ct[9],10)||0;return rt=rt>=0&&rt<=59?rt:0,Nt==="-"?($t+=qt,Dt+=rt):Nt==="+"&&($t-=qt,Dt-=rt),new Date(Date.UTC(Ft,St,Lt,$t,Dt,jt))}}E.PDFDateString=Pt;function V(ot,{scale:_t=1,rotation:ct=0}){const{width:Ft,height:St}=ot.attributes.style,Lt=[0,0,parseInt(Ft),parseInt(St)];return new pt({viewBox:Lt,scale:_t,rotation:ct})}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.BaseStandardFontDataFactory=E.BaseSVGFactory=E.BaseCanvasFactory=E.BaseCMapReaderFactory=void 0;var D=at(1);class vt{constructor(){this.constructor===vt&&(0,D.unreachable)("Cannot initialize BaseCanvasFactory.")}create(it,X){if(it<=0||X<=0)throw new Error("Invalid canvas size");const gt=this._createCanvas(it,X);return{canvas:gt,context:gt.getContext("2d")}}reset(it,X,gt){if(!it.canvas)throw new Error("Canvas is not specified");if(X<=0||gt<=0)throw new Error("Invalid canvas size");it.canvas.width=X,it.canvas.height=gt}destroy(it){if(!it.canvas)throw new Error("Canvas is not specified");it.canvas.width=0,it.canvas.height=0,it.canvas=null,it.context=null}_createCanvas(it,X){(0,D.unreachable)("Abstract method `_createCanvas` called.")}}E.BaseCanvasFactory=vt;class ut{constructor({baseUrl:it=null,isCompressed:X=!1}){this.constructor===ut&&(0,D.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=it,this.isCompressed=X}async fetch({name:it}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!it)throw new Error("CMap name must be specified.");const X=this.baseUrl+it+(this.isCompressed?".bcmap":""),gt=this.isCompressed?D.CMapCompressionType.BINARY:D.CMapCompressionType.NONE;return this._fetchData(X,gt).catch(pt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${X}`)})}_fetchData(it,X){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseCMapReaderFactory=ut;class wt{constructor({baseUrl:it=null}){this.constructor===wt&&(0,D.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=it}async fetch({filename:it}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!it)throw new Error("Font filename must be specified.");const X=`${this.baseUrl}${it}`;return this._fetchData(X).catch(gt=>{throw new Error(`Unable to load font data at: ${X}`)})}_fetchData(it){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseStandardFontDataFactory=wt;class Ct{constructor(){this.constructor===Ct&&(0,D.unreachable)("Cannot initialize BaseSVGFactory.")}create(it,X){if(it<=0||X<=0)throw new Error("Invalid SVG dimensions");const gt=this._createSVG("svg:svg");return gt.setAttribute("version","1.1"),gt.setAttribute("width",`${it}px`),gt.setAttribute("height",`${X}px`),gt.setAttribute("preserveAspectRatio","none"),gt.setAttribute("viewBox",`0 0 ${it} ${X}`),gt}createElement(it){if(typeof it!="string")throw new Error("Invalid SVG element type");return this._createSVG(it)}_createSVG(it){(0,D.unreachable)("Abstract method `_createSVG` called.")}}E.BaseSVGFactory=Ct},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.FontLoader=E.FontFaceObject=void 0;var D=at(1);class vt{constructor({docId:bt,onUnsupportedFeature:it,ownerDocument:X=globalThis.document,styleElement:gt=null}){this.constructor===vt&&(0,D.unreachable)("Cannot initialize BaseFontLoader."),this.docId=bt,this._onUnsupportedFeature=it,this._document=X,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(bt){this.nativeFontFaces.push(bt),this._document.fonts.add(bt)}insertRule(bt){let it=this.styleElement;it||(it=this.styleElement=this._document.createElement("style"),it.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(it));const X=it.sheet;X.insertRule(bt,X.cssRules.length)}clear(){for(const bt of this.nativeFontFaces)this._document.fonts.delete(bt);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(bt){if(bt.attached||bt.missingFile)return;if(bt.attached=!0,this.isFontLoadingAPISupported){const X=bt.createNativeFontFace();if(X){this.addNativeFontFace(X);try{await X.loaded}catch(gt){throw this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,D.warn)(`Failed to load font '${X.family}': '${gt}'.`),bt.disableFontFace=!0,gt}}return}const it=bt.createFontFaceRule();if(it){if(this.insertRule(it),this.isSyncFontLoadingSupported)return;await new Promise(X=>{const gt=this._queueLoadingCallback(X);this._prepareFontLoadEvent([it],[bt],gt)})}}_queueLoadingCallback(bt){(0,D.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var it;const bt=!!((it=this._document)!=null&&it.fonts);return(0,D.shadow)(this,"isFontLoadingAPISupported",bt)}get isSyncFontLoadingSupported(){(0,D.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,D.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(bt,it,X){(0,D.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ut;E.FontLoader=ut,E.FontLoader=ut=class extends vt{constructor(bt){super(bt),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let bt=!1;if(typeof navigator=="undefined")bt=!0;else{const it=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(it==null?void 0:it[1])>=14&&(bt=!0)}return(0,D.shadow)(this,"isSyncFontLoadingSupported",bt)}_queueLoadingCallback(bt){function it(){for((0,D.assert)(!gt.done,"completeRequest() cannot be called twice."),gt.done=!0;X.requests.length>0&&X.requests[0].done;){const pt=X.requests.shift();setTimeout(pt.callback,0)}}const X=this.loadingContext,gt={id:`pdfjs-font-loading-${X.nextRequestId++}`,done:!1,complete:it,callback:bt};return X.requests.push(gt),gt}get _loadTestFont(){const bt=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,D.shadow)(this,"_loadTestFont",bt())}_prepareFontLoadEvent(bt,it,X){function gt(Ft,St){return Ft.charCodeAt(St)<<24|Ft.charCodeAt(St+1)<<16|Ft.charCodeAt(St+2)<<8|Ft.charCodeAt(St+3)&255}function pt(Ft,St,Lt,$t){const Dt=Ft.substring(0,St),jt=Ft.substring(St+Lt);return Dt+$t+jt}let et,B;const J=this._document.createElement("canvas");J.width=1,J.height=1;const G=J.getContext("2d");let nt=0;function lt(Ft,St){if(nt++,nt>30){(0,D.warn)("Load test font never loaded."),St();return}if(G.font="30px "+Ft,G.fillText(".",0,20),G.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(lt.bind(null,Ft,St))}const Z=`lt${Date.now()}${this.loadTestFontId++}`;let ht=this._loadTestFont;ht=pt(ht,976,Z.length,Z);const At=16,Pt=1482184792;let V=gt(ht,At);for(et=0,B=Z.length-3;et<B;et+=4)V=V-Pt+gt(Z,et)|0;et<Z.length&&(V=V-Pt+gt(Z+"XXX",et)|0),ht=pt(ht,At,4,(0,D.string32)(V));const tt=`url(data:font/opentype;base64,${btoa(ht)});`,ot=`@font-face {font-family:"${Z}";src:${tt}}`;this.insertRule(ot);const _t=[];for(const Ft of it)_t.push(Ft.loadedName);_t.push(Z);const ct=this._document.createElement("div");ct.style.visibility="hidden",ct.style.width=ct.style.height="10px",ct.style.position="absolute",ct.style.top=ct.style.left="0px";for(const Ft of _t){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Ft,ct.appendChild(St)}this._document.body.appendChild(ct),lt(Z,()=>{ct.remove(),X.complete()})}};class wt{constructor(bt,{isEvalSupported:it=!0,disableFontFace:X=!1,ignoreErrors:gt=!1,onUnsupportedFeature:pt,fontRegistry:et=null}){this.compiledGlyphs=Object.create(null);for(const B in bt)this[B]=bt[B];this.isEvalSupported=it!==!1,this.disableFontFace=X===!0,this.ignoreErrors=gt===!0,this._onUnsupportedFeature=pt,this.fontRegistry=et}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let bt;if(!this.cssFontInfo)bt=new FontFace(this.loadedName,this.data,{});else{const it={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(it.style=`oblique ${this.cssFontInfo.italicAngle}deg`),bt=new FontFace(this.cssFontInfo.fontFamily,this.data,it)}return this.fontRegistry&&this.fontRegistry.registerFont(this),bt}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const bt=(0,D.bytesToString)(this.data),it=`url(data:${this.mimetype};base64,${btoa(bt)});`;let X;if(!this.cssFontInfo)X=`@font-face {font-family:"${this.loadedName}";src:${it}}`;else{let gt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(gt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),X=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${gt}src:${it}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,it),X}getPathGenerator(bt,it){if(this.compiledGlyphs[it]!==void 0)return this.compiledGlyphs[it];let X;try{X=bt.get(this.loadedName+"_path_"+it)}catch(gt){if(!this.ignoreErrors)throw gt;return this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,D.warn)(`getPathGenerator - ignoring character: "${gt}".`),this.compiledGlyphs[it]=function(pt,et){}}if(this.isEvalSupported&&D.FeatureTest.isEvalSupported){const gt=[];for(const pt of X){const et=pt.args!==void 0?pt.args.join(","):"";gt.push("c.",pt.cmd,"(",et,`);
`)}return this.compiledGlyphs[it]=new Function("c","size",gt.join(""))}return this.compiledGlyphs[it]=function(gt,pt){for(const et of X)et.cmd==="scale"&&(et.args=[pt,-pt]),gt[et.cmd].apply(gt,et.args)}}}E.FontFaceObject=wt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationStorage=void 0;var D=at(9),vt=at(1);class ut{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(Ct,bt){const it=this._storage.get(Ct);return it===void 0?bt:Object.assign(bt,it)}getRawValue(Ct){return this._storage.get(Ct)}setValue(Ct,bt){const it=this._storage.get(Ct);let X=!1;if(it!==void 0)for(const[gt,pt]of Object.entries(bt))it[gt]!==pt&&(X=!0,it[gt]=pt);else X=!0,this._storage.set(Ct,bt);X&&this._setModified()}getAll(){return this._storage.size>0?(0,vt.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const Ct=new D.MurmurHash3_64;for(const[bt,it]of this._storage)Ct.update(`${bt}:${JSON.stringify(it)}`);return Ct.hexdigest()}}E.AnnotationStorage=ut},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MurmurHash3_64=void 0;var D=at(1);const vt=3285377520,ut=4294901760,wt=65535;class Ct{constructor(it){this.h1=it?it&4294967295:vt,this.h2=it?it&4294967295:vt}update(it){let X,gt;if(typeof it=="string"){X=new Uint8Array(it.length*2),gt=0;for(let Pt=0,V=it.length;Pt<V;Pt++){const tt=it.charCodeAt(Pt);tt<=255?X[gt++]=tt:(X[gt++]=tt>>>8,X[gt++]=tt&255)}}else if((0,D.isArrayBuffer)(it))X=it.slice(),gt=X.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const pt=gt>>2,et=gt-pt*4,B=new Uint32Array(X.buffer,0,pt);let J=0,G=0,nt=this.h1,lt=this.h2;const Z=3432918353,ht=461845907,dt=Z&wt,At=ht&wt;for(let Pt=0;Pt<pt;Pt++)Pt&1?(J=B[Pt],J=J*Z&ut|J*dt&wt,J=J<<15|J>>>17,J=J*ht&ut|J*At&wt,nt^=J,nt=nt<<13|nt>>>19,nt=nt*5+3864292196):(G=B[Pt],G=G*Z&ut|G*dt&wt,G=G<<15|G>>>17,G=G*ht&ut|G*At&wt,lt^=G,lt=lt<<13|lt>>>19,lt=lt*5+3864292196);switch(J=0,et){case 3:J^=X[pt*4+2]<<16;case 2:J^=X[pt*4+1]<<8;case 1:J^=X[pt*4],J=J*Z&ut|J*dt&wt,J=J<<15|J>>>17,J=J*ht&ut|J*At&wt,pt&1?nt^=J:lt^=J}this.h1=nt,this.h2=lt}hexdigest(){let it=this.h1,X=this.h2;it^=X>>>1,it=it*3981806797&ut|it*36045&wt,X=X*4283543511&ut|((X<<16|it>>>16)*2950163797&ut)>>>16,it^=X>>>1,it=it*444984403&ut|it*60499&wt,X=X*3301882366&ut|((X<<16|it>>>16)*3120437893&ut)>>>16,it^=X>>>1;const gt=(it>>>0).toString(16),pt=(X>>>0).toString(16);return gt.padStart(8,"0")+pt.padStart(8,"0")}}E.MurmurHash3_64=Ct},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.CanvasGraphics=void 0;var D=at(1),vt=at(11),ut=at(12),wt=at(3),Ct=at(5);const bt=16,it=100,X=4096,gt=15,pt=10,et=1e3,B=16,J=1.000001;function G(rt,W){if(rt._removeMirroring)throw new Error("Context is already forwarding operations.");rt.__originalSave=rt.save,rt.__originalRestore=rt.restore,rt.__originalRotate=rt.rotate,rt.__originalScale=rt.scale,rt.__originalTranslate=rt.translate,rt.__originalTransform=rt.transform,rt.__originalSetTransform=rt.setTransform,rt.__originalResetTransform=rt.resetTransform,rt.__originalClip=rt.clip,rt.__originalMoveTo=rt.moveTo,rt.__originalLineTo=rt.lineTo,rt.__originalBezierCurveTo=rt.bezierCurveTo,rt.__originalRect=rt.rect,rt.__originalClosePath=rt.closePath,rt.__originalBeginPath=rt.beginPath,rt._removeMirroring=()=>{rt.save=rt.__originalSave,rt.restore=rt.__originalRestore,rt.rotate=rt.__originalRotate,rt.scale=rt.__originalScale,rt.translate=rt.__originalTranslate,rt.transform=rt.__originalTransform,rt.setTransform=rt.__originalSetTransform,rt.resetTransform=rt.__originalResetTransform,rt.clip=rt.__originalClip,rt.moveTo=rt.__originalMoveTo,rt.lineTo=rt.__originalLineTo,rt.bezierCurveTo=rt.__originalBezierCurveTo,rt.rect=rt.__originalRect,rt.closePath=rt.__originalClosePath,rt.beginPath=rt.__originalBeginPath,delete rt._removeMirroring},rt.save=function(){W.save(),this.__originalSave()},rt.restore=function(){W.restore(),this.__originalRestore()},rt.translate=function(Q,A){W.translate(Q,A),this.__originalTranslate(Q,A)},rt.scale=function(Q,A){W.scale(Q,A),this.__originalScale(Q,A)},rt.transform=function(Q,A,R,q,K,Y){W.transform(Q,A,R,q,K,Y),this.__originalTransform(Q,A,R,q,K,Y)},rt.setTransform=function(Q,A,R,q,K,Y){W.setTransform(Q,A,R,q,K,Y),this.__originalSetTransform(Q,A,R,q,K,Y)},rt.resetTransform=function(){W.resetTransform(),this.__originalResetTransform()},rt.rotate=function(Q){W.rotate(Q),this.__originalRotate(Q)},rt.clip=function(Q){W.clip(Q),this.__originalClip(Q)},rt.moveTo=function(U,Q){W.moveTo(U,Q),this.__originalMoveTo(U,Q)},rt.lineTo=function(U,Q){W.lineTo(U,Q),this.__originalLineTo(U,Q)},rt.bezierCurveTo=function(U,Q,A,R,q,K){W.bezierCurveTo(U,Q,A,R,q,K),this.__originalBezierCurveTo(U,Q,A,R,q,K)},rt.rect=function(U,Q,A,R){W.rect(U,Q,A,R),this.__originalRect(U,Q,A,R)},rt.closePath=function(){W.closePath(),this.__originalClosePath()},rt.beginPath=function(){W.beginPath(),this.__originalBeginPath()}}function nt(rt){if(rt._transformStack&&(rt._transformStack=[]),!rt.mozCurrentTransform){rt._originalSave=rt.save,rt._originalRestore=rt.restore,rt._originalRotate=rt.rotate,rt._originalScale=rt.scale,rt._originalTranslate=rt.translate,rt._originalTransform=rt.transform,rt._originalSetTransform=rt.setTransform,rt._originalResetTransform=rt.resetTransform,rt._transformMatrix=rt._transformMatrix||[1,0,0,1,0,0],rt._transformStack=[];try{const W=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(rt),"lineWidth");rt._setLineWidth=W.set,rt._getLineWidth=W.get,Object.defineProperty(rt,"lineWidth",{set:function(Q){this._setLineWidth(Q*J)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(rt,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(rt,"mozCurrentTransformInverse",{get:function(){const[U,Q,A,R,q,K]=this._transformMatrix,Y=U*R-Q*A,ft=Q*A-U*R;return[R/Y,Q/ft,A/ft,U/Y,(R*q-A*K)/ft,(Q*q-U*K)/Y]}}),rt.save=function(){const U=this._transformMatrix;this._transformStack.push(U),this._transformMatrix=U.slice(0,6),this._originalSave()},rt.restore=function(){this._transformStack.length===0&&(0,D.warn)("Tried to restore a ctx when the stack was already empty.");const U=this._transformStack.pop();U&&(this._transformMatrix=U,this._originalRestore())},rt.translate=function(U,Q){const A=this._transformMatrix;A[4]=A[0]*U+A[2]*Q+A[4],A[5]=A[1]*U+A[3]*Q+A[5],this._originalTranslate(U,Q)},rt.scale=function(U,Q){const A=this._transformMatrix;A[0]*=U,A[1]*=U,A[2]*=Q,A[3]*=Q,this._originalScale(U,Q)},rt.transform=function(U,Q,A,R,q,K){const Y=this._transformMatrix;this._transformMatrix=[Y[0]*U+Y[2]*Q,Y[1]*U+Y[3]*Q,Y[0]*A+Y[2]*R,Y[1]*A+Y[3]*R,Y[0]*q+Y[2]*K+Y[4],Y[1]*q+Y[3]*K+Y[5]],rt._originalTransform(U,Q,A,R,q,K)},rt.setTransform=function(U,Q,A,R,q,K){this._transformMatrix=[U,Q,A,R,q,K],rt._originalSetTransform(U,Q,A,R,q,K)},rt.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],rt._originalResetTransform()},rt.rotate=function(U){const Q=Math.cos(U),A=Math.sin(U),R=this._transformMatrix;this._transformMatrix=[R[0]*Q+R[2]*A,R[1]*Q+R[3]*A,R[0]*-A+R[2]*Q,R[1]*-A+R[3]*Q,R[4],R[5]],this._originalRotate(U)}}}class lt{constructor(W){this.canvasFactory=W,this.cache=Object.create(null)}getCanvas(W,U,Q,A){let R;return this.cache[W]!==void 0?(R=this.cache[W],this.canvasFactory.reset(R,U,Q),R.context.setTransform(1,0,0,1,0,0)):(R=this.canvasFactory.create(U,Q),this.cache[W]=R),A&&nt(R.context),R}delete(W){delete this.cache[W]}clear(){for(const W in this.cache){const U=this.cache[W];this.canvasFactory.destroy(U),delete this.cache[W]}}}function Z(rt,W,U,Q,A,R,q,K,Y,ft){const[mt,kt,yt,Rt,xt,Ot]=rt.mozCurrentTransform;if(kt===0&&yt===0){const Wt=q*mt+xt,It=Math.round(Wt),zt=K*Rt+Ot,Vt=Math.round(zt),Ut=(q+Y)*mt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(K+ft)*Rt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(Math.sign(mt),0,0,Math.sign(Rt),It,Vt),rt.drawImage(W,U,Q,A,R,0,0,se,Kt),rt.setTransform(mt,kt,yt,Rt,xt,Ot),[se,Kt]}if(mt===0&&Rt===0){const Wt=K*yt+xt,It=Math.round(Wt),zt=q*kt+Ot,Vt=Math.round(zt),Ut=(K+ft)*yt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(q+Y)*kt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(0,Math.sign(kt),Math.sign(yt),0,It,Vt),rt.drawImage(W,U,Q,A,R,0,0,Kt,se),rt.setTransform(mt,kt,yt,Rt,xt,Ot),[Kt,se]}rt.drawImage(W,U,Q,A,R,q,K,Y,ft);const Bt=Math.hypot(mt,kt),Ht=Math.hypot(yt,Rt);return[Bt*Y,Ht*ft]}function ht(rt){const{width:W,height:U}=rt;if(W>et||U>et)return null;const Q=1e3,A=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),R=W+1;let q=new Uint8Array(R*(U+1)),K,Y,ft;const mt=W+7&-8;let kt=new Uint8Array(mt*U),yt=0;for(const It of rt.data){let zt=128;for(;zt>0;)kt[yt++]=It&zt?0:255,zt>>=1}let Rt=0;for(yt=0,kt[yt]!==0&&(q[0]=1,++Rt),Y=1;Y<W;Y++)kt[yt]!==kt[yt+1]&&(q[Y]=kt[yt]?2:1,++Rt),yt++;for(kt[yt]!==0&&(q[Y]=2,++Rt),K=1;K<U;K++){yt=K*mt,ft=K*R,kt[yt-mt]!==kt[yt]&&(q[ft]=kt[yt]?1:8,++Rt);let It=(kt[yt]?4:0)+(kt[yt-mt]?8:0);for(Y=1;Y<W;Y++)It=(It>>2)+(kt[yt+1]?4:0)+(kt[yt-mt+1]?8:0),A[It]&&(q[ft+Y]=A[It],++Rt),yt++;if(kt[yt-mt]!==kt[yt]&&(q[ft+Y]=kt[yt]?2:4,++Rt),Rt>Q)return null}for(yt=mt*(U-1),ft=K*R,kt[yt]!==0&&(q[ft]=8,++Rt),Y=1;Y<W;Y++)kt[yt]!==kt[yt+1]&&(q[ft+Y]=kt[yt]?4:8,++Rt),yt++;if(kt[yt]!==0&&(q[ft+Y]=4,++Rt),Rt>Q)return null;const xt=new Int32Array([0,R,-1,0,-R,0,0,0,1]);let Ot,Bt,Ht;for(wt.isNodeJS?Bt=[]:Ot=new Path2D,K=0;Rt&&K<=U;K++){let It=K*R;const zt=It+W;for(;It<zt&&!q[It];)It++;if(It===zt)continue;Ot?Ot.moveTo(It%R,K):Ht=[It%R,K];const Vt=It;let Ut=q[It];do{const se=xt[Ut];do It+=se;while(!q[It]);const te=q[It];te!==5&&te!==10?(Ut=te,q[It]=0):(Ut=te&51*Ut>>4,q[It]&=Ut>>2|Ut<<2),Ot?Ot.lineTo(It%R,It/R|0):Ht.push(It%R,It/R|0),q[It]||--Rt}while(Vt!==It);Ot||Bt.push(Ht),--K}return kt=null,q=null,function(It){if(It.save(),It.scale(1/W,-1/U),It.translate(0,-U),Ot)It.fill(Ot);else{It.beginPath();for(const zt of Bt){It.moveTo(zt[0],zt[1]);for(let Vt=2,Ut=zt.length;Vt<Ut;Vt+=2)It.lineTo(zt[Vt],zt[Vt+1])}It.fill()}It.beginPath(),It.restore()}}class dt{constructor(W,U){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=D.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=D.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,W,U])}clone(){const W=Object.create(this);return W.clipBox=this.clipBox.slice(),W}setCurrentPoint(W,U){this.x=W,this.y=U}updatePathMinMax(W,U,Q){[U,Q]=D.Util.applyTransform([U,Q],W),this.minX=Math.min(this.minX,U),this.minY=Math.min(this.minY,Q),this.maxX=Math.max(this.maxX,U),this.maxY=Math.max(this.maxY,Q)}updateRectMinMax(W,U){const Q=D.Util.applyTransform(U,W),A=D.Util.applyTransform(U.slice(2),W);this.minX=Math.min(this.minX,Q[0],A[0]),this.minY=Math.min(this.minY,Q[1],A[1]),this.maxX=Math.max(this.maxX,Q[0],A[0]),this.maxY=Math.max(this.maxY,Q[1],A[1])}updateScalingPathMinMax(W,U){D.Util.scaleMinMax(W,U),this.minX=Math.min(this.minX,U[0]),this.maxX=Math.max(this.maxX,U[1]),this.minY=Math.min(this.minY,U[2]),this.maxY=Math.max(this.maxY,U[3])}updateCurvePathMinMax(W,U,Q,A,R,q,K,Y,ft,mt){const kt=D.Util.bezierBoundingBox(U,Q,A,R,q,K,Y,ft);if(mt){mt[0]=Math.min(mt[0],kt[0],kt[2]),mt[1]=Math.max(mt[1],kt[0],kt[2]),mt[2]=Math.min(mt[2],kt[1],kt[3]),mt[3]=Math.max(mt[3],kt[1],kt[3]);return}this.updateRectMinMax(W,kt)}getPathBoundingBox(W=vt.PathType.FILL,U=null){const Q=[this.minX,this.minY,this.maxX,this.maxY];if(W===vt.PathType.STROKE){U||(0,D.unreachable)("Stroke bounding box must include transform.");const A=D.Util.singularValueDecompose2dScale(U),R=A[0]*this.lineWidth/2,q=A[1]*this.lineWidth/2;Q[0]-=R,Q[1]-=q,Q[2]+=R,Q[3]+=q}return Q}updateClipFromPath(){const W=D.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(W||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(W){this.clipBox=W,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(W=vt.PathType.FILL,U=null){return D.Util.intersect(this.clipBox,this.getPathBoundingBox(W,U))}}function At(rt,W,U=null){if(typeof ImageData!="undefined"&&W instanceof ImageData){rt.putImageData(W,0,0);return}const Q=W.height,A=W.width,R=Q%B,q=(Q-R)/B,K=R===0?q:q+1,Y=rt.createImageData(A,B);let ft=0,mt;const kt=W.data,yt=Y.data;let Rt,xt,Ot,Bt,Ht,Wt,It,zt;if(U)switch(U.length){case 1:Ht=U[0],Wt=U[0],It=U[0],zt=U[0];break;case 4:Ht=U[0],Wt=U[1],It=U[2],zt=U[3];break}if(W.kind===D.ImageKind.GRAYSCALE_1BPP){const Vt=kt.byteLength,Ut=new Uint32Array(yt.buffer,0,yt.byteLength>>2),se=Ut.length,te=A+7>>3;let Kt=4294967295,Zt=D.FeatureTest.isLittleEndian?4278190080:255;for(zt&&zt[0]===255&&zt[255]===0&&([Kt,Zt]=[Zt,Kt]),Rt=0;Rt<K;Rt++){for(Ot=Rt<q?B:R,mt=0,xt=0;xt<Ot;xt++){const ie=Vt-ft;let ce=0;const re=ie>te?A:ie*8-7,fe=re&-8;let ee=0,Mt=0;for(;ce<fe;ce+=8)Mt=kt[ft++],Ut[mt++]=Mt&128?Kt:Zt,Ut[mt++]=Mt&64?Kt:Zt,Ut[mt++]=Mt&32?Kt:Zt,Ut[mt++]=Mt&16?Kt:Zt,Ut[mt++]=Mt&8?Kt:Zt,Ut[mt++]=Mt&4?Kt:Zt,Ut[mt++]=Mt&2?Kt:Zt,Ut[mt++]=Mt&1?Kt:Zt;for(;ce<re;ce++)ee===0&&(Mt=kt[ft++],ee=128),Ut[mt++]=Mt&ee?Kt:Zt,ee>>=1}for(;mt<se;)Ut[mt++]=0;rt.putImageData(Y,0,Rt*B)}}else if(W.kind===D.ImageKind.RGBA_32BPP){const Vt=!!(Ht||Wt||It);for(xt=0,Bt=A*B*4,Rt=0;Rt<q;Rt++){if(yt.set(kt.subarray(ft,ft+Bt)),ft+=Bt,Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(Y,0,xt),xt+=B}if(Rt<K){if(Bt=A*R*4,yt.set(kt.subarray(ft,ft+Bt)),Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(Y,0,xt)}}else if(W.kind===D.ImageKind.RGB_24BPP){const Vt=!!(Ht||Wt||It);for(Ot=B,Bt=A*Ot,Rt=0;Rt<K;Rt++){for(Rt>=q&&(Ot=R,Bt=A*Ot),mt=0,xt=Bt;xt--;)yt[mt++]=kt[ft++],yt[mt++]=kt[ft++],yt[mt++]=kt[ft++],yt[mt++]=255;if(Vt)for(let Ut=0;Ut<mt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(Y,0,Rt*B)}}else throw new Error(`bad image kind: ${W.kind}`)}function Pt(rt,W){if(W.bitmap){rt.drawImage(W.bitmap,0,0);return}const U=W.height,Q=W.width,A=U%B,R=(U-A)/B,q=A===0?R:R+1,K=rt.createImageData(Q,B);let Y=0;const ft=W.data,mt=K.data;for(let kt=0;kt<q;kt++){const yt=kt<R?B:A;({srcPos:Y}=(0,ut.applyMaskImageData)({src:ft,srcPos:Y,dest:mt,width:Q,height:yt})),rt.putImageData(K,0,kt*B)}}function V(rt,W){const U=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let Q=0,A=U.length;Q<A;Q++){const R=U[Q];rt[R]!==void 0&&(W[R]=rt[R])}rt.setLineDash!==void 0&&(W.setLineDash(rt.getLineDash()),W.lineDashOffset=rt.lineDashOffset)}function tt(rt,W){rt.strokeStyle=rt.fillStyle=W||"#000000",rt.fillRule="nonzero",rt.globalAlpha=1,rt.lineWidth=1,rt.lineCap="butt",rt.lineJoin="miter",rt.miterLimit=10,rt.globalCompositeOperation="source-over",rt.font="10px sans-serif",rt.setLineDash!==void 0&&(rt.setLineDash([]),rt.lineDashOffset=0)}function ot(rt,W,U,Q){const A=rt.length;for(let R=3;R<A;R+=4){const q=rt[R];if(q===0)rt[R-3]=W,rt[R-2]=U,rt[R-1]=Q;else if(q<255){const K=255-q;rt[R-3]=rt[R-3]*q+W*K>>8,rt[R-2]=rt[R-2]*q+U*K>>8,rt[R-1]=rt[R-1]*q+Q*K>>8}}}function _t(rt,W,U){const Q=rt.length,A=1/255;for(let R=3;R<Q;R+=4){const q=U?U[rt[R]]:rt[R];W[R]=W[R]*q*A|0}}function ct(rt,W,U){const Q=rt.length;for(let A=3;A<Q;A+=4){const R=rt[A-3]*77+rt[A-2]*152+rt[A-1]*28;W[A]=U?W[A]*U[R>>8]>>8:W[A]*R>>16}}function Ft(rt,W,U,Q,A,R,q,K,Y,ft,mt){const kt=!!R,yt=kt?R[0]:0,Rt=kt?R[1]:0,xt=kt?R[2]:0;let Ot;A==="Luminosity"?Ot=ct:Ot=_t;const Ht=Math.min(Q,Math.ceil(1048576/U));for(let Wt=0;Wt<Q;Wt+=Ht){const It=Math.min(Ht,Q-Wt),zt=rt.getImageData(K-ft,Wt+(Y-mt),U,It),Vt=W.getImageData(K,Wt+Y,U,It);kt&&ot(zt.data,yt,Rt,xt),Ot(zt.data,Vt.data,q),W.putImageData(Vt,K,Wt+Y)}}function St(rt,W,U,Q){const A=Q[0],R=Q[1],q=Q[2]-A,K=Q[3]-R;q===0||K===0||(Ft(W.context,U,q,K,W.subtype,W.backdrop,W.transferMap,A,R,W.offsetX,W.offsetY),rt.save(),rt.globalAlpha=1,rt.globalCompositeOperation="source-over",rt.setTransform(1,0,0,1,0,0),rt.drawImage(U.canvas,0,0),rt.restore())}function Lt(rt,W){const U=D.Util.singularValueDecompose2dScale(rt);U[0]=Math.fround(U[0]),U[1]=Math.fround(U[1]);const Q=Math.fround((globalThis.devicePixelRatio||1)*Ct.PixelsPerInch.PDF_TO_CSS_UNITS);return W!==void 0?W:U[0]<=Q||U[1]<=Q}const $t=["butt","round","square"],Dt=["miter","round","bevel"],jt={},Nt={};class qt{constructor(W,U,Q,A,R,q,K,Y){this.ctx=W,this.current=new dt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=U,this.objs=Q,this.canvasFactory=A,this.imageLayer=R,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=q,this.cachedCanvases=new lt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(Y==null?void 0:Y.background)||null,this.foregroundColor=(Y==null?void 0:Y.foreground)||null,W&&nt(W),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(W,U=null){return typeof W=="string"?W.startsWith("g_")?this.commonObjs.get(W):this.objs.get(W):U}beginDrawing({transform:W,viewport:U,transparency:Q=!1,background:A=null}){const R=this.ctx.canvas.width,q=this.ctx.canvas.height,K=A||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Y=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const ft=this.backgroundColor=this.ctx.fillStyle;let mt=!0,kt=K;if(this.ctx.fillStyle=K,kt=this.ctx.fillStyle,mt=typeof kt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(kt),Y==="#000000"&&ft==="#ffffff"||Y===ft||!mt)this.foregroundColor=this.backgroundColor=null;else{const yt=parseInt(kt.slice(1),16),Rt=(yt&&16711680)>>16,xt=(yt&&65280)>>8,Ot=yt&&255,Bt=Wt=>(Wt/=255,Wt<=.03928?Wt/12.92:((Wt+.055)/1.055)**2.4),Ht=Math.round(.2126*Bt(Rt)+.7152*Bt(xt)+.0722*Bt(Ot));this.selectColor=(Wt,It,zt)=>{const Vt=.2126*Bt(Wt)+.7152*Bt(It)+.0722*Bt(zt);return Math.round(Vt)===Ht?ft:Y}}}if(this.ctx.fillStyle=this.backgroundColor||K,this.ctx.fillRect(0,0,R,q),this.ctx.restore(),Q){const Y=this.cachedCanvases.getCanvas("transparent",R,q,!0);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),tt(this.ctx,this.foregroundColor),W&&(this.ctx.transform.apply(this.ctx,W),this.outputScaleX=W[0],this.outputScaleY=W[0]),this.ctx.transform.apply(this.ctx,U.transform),this.viewportScale=U.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(W,U,Q,A){const R=W.argsArray,q=W.fnArray;let K=U||0;const Y=R.length;if(Y===K)return K;const ft=Y-K>pt&&typeof Q=="function",mt=ft?Date.now()+gt:0;let kt=0;const yt=this.commonObjs,Rt=this.objs;let xt;for(;;){if(A!==void 0&&K===A.nextBreakPoint)return A.breakIt(K,Q),K;if(xt=q[K],xt!==D.OPS.dependency)this[xt].apply(this,R[K]);else for(const Ot of R[K]){const Bt=Ot.startsWith("g_")?yt:Rt;if(!Bt.has(Ot))return Bt.get(Ot,Q),K}if(K++,K===Y)return K;if(ft&&++kt>pt){if(Date.now()>mt)return Q(),K;kt=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const W of this._cachedBitmapsMap.values()){for(const U of W.values())typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement&&(U.width=U.height=0);W.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(W,U){const Q=W.width,A=W.height;let R=Math.max(Math.hypot(U[0],U[1]),1),q=Math.max(Math.hypot(U[2],U[3]),1),K=Q,Y=A,ft="prescale1",mt,kt;for(;R>2&&K>1||q>2&&Y>1;){let yt=K,Rt=Y;R>2&&K>1&&(yt=Math.ceil(K/2),R/=K/yt),q>2&&Y>1&&(Rt=Math.ceil(Y/2),q/=Y/Rt),mt=this.cachedCanvases.getCanvas(ft,yt,Rt,!1),kt=mt.context,kt.clearRect(0,0,yt,Rt),kt.drawImage(W,0,0,K,Y,0,0,yt,Rt),W=mt.canvas,K=yt,Y=Rt,ft=ft==="prescale1"?"prescale2":"prescale1"}return{img:W,paintWidth:K,paintHeight:Y}}_createMaskCanvas(W){const U=this.ctx,{width:Q,height:A}=W,R=this.current.fillColor,q=this.current.patternFill,K=U.mozCurrentTransform;let Y,ft,mt,kt;if((W.bitmap||W.data)&&W.count>1){const se=W.bitmap||W.data.buffer,te=K.slice(0,4);ft=JSON.stringify(q?te:[te,R]),Y=this._cachedBitmapsMap.get(se),Y||(Y=new Map,this._cachedBitmapsMap.set(se,Y));const Kt=Y.get(ft);if(Kt&&!q){const Zt=Math.round(Math.min(K[0],K[2])+K[4]),ie=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Kt,offsetX:Zt,offsetY:ie}}mt=Kt}mt||(kt=this.cachedCanvases.getCanvas("maskCanvas",Q,A,!1),Pt(kt.context,W));let yt=D.Util.transform(K,[1/Q,0,0,-1/A,0,0]);yt=D.Util.transform(yt,[1,0,0,1,0,-A]);const Rt=D.Util.applyTransform([0,0],yt),xt=D.Util.applyTransform([Q,A],yt),Ot=D.Util.normalizeRect([Rt[0],Rt[1],xt[0],xt[1]]),Bt=Math.round(Ot[2]-Ot[0])||1,Ht=Math.round(Ot[3]-Ot[1])||1,Wt=this.cachedCanvases.getCanvas("fillCanvas",Bt,Ht,!0),It=Wt.context,zt=Math.min(Rt[0],xt[0]),Vt=Math.min(Rt[1],xt[1]);It.translate(-zt,-Vt),It.transform.apply(It,yt),mt||(mt=this._scaleImage(kt.canvas,It.mozCurrentTransformInverse),mt=mt.img,Y&&q&&Y.set(ft,mt)),It.imageSmoothingEnabled=Lt(It.mozCurrentTransform,W.interpolate),Z(It,mt,0,0,mt.width,mt.height,0,0,Q,A),It.globalCompositeOperation="source-in";const Ut=D.Util.transform(It.mozCurrentTransformInverse,[1,0,0,1,-zt,-Vt]);return It.fillStyle=q?R.getPattern(U,this,Ut,vt.PathType.FILL):R,It.fillRect(0,0,Q,A),Y&&!q&&(this.cachedCanvases.delete("fillCanvas"),Y.set(ft,Wt.canvas)),{canvas:Wt.canvas,offsetX:Math.round(zt),offsetY:Math.round(Vt)}}setLineWidth(W){W!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=W,this.ctx.lineWidth=W}setLineCap(W){this.ctx.lineCap=$t[W]}setLineJoin(W){this.ctx.lineJoin=Dt[W]}setMiterLimit(W){this.ctx.miterLimit=W}setDash(W,U){const Q=this.ctx;Q.setLineDash!==void 0&&(Q.setLineDash(W),Q.lineDashOffset=U)}setRenderingIntent(W){}setFlatness(W){}setGState(W){for(let U=0,Q=W.length;U<Q;U++){const A=W[U],R=A[0],q=A[1];switch(R){case"LW":this.setLineWidth(q);break;case"LC":this.setLineCap(q);break;case"LJ":this.setLineJoin(q);break;case"ML":this.setMiterLimit(q);break;case"D":this.setDash(q[0],q[1]);break;case"RI":this.setRenderingIntent(q);break;case"FL":this.setFlatness(q);break;case"Font":this.setFont(q[0],q[1]);break;case"CA":this.current.strokeAlpha=A[1];break;case"ca":this.current.fillAlpha=A[1],this.ctx.globalAlpha=A[1];break;case"BM":this.ctx.globalCompositeOperation=q;break;case"SMask":this.current.activeSMask=q?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=q}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const W=this.inSMaskMode;this.current.activeSMask&&!W?this.beginSMaskMode():!this.current.activeSMask&&W&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const W=this.ctx.canvas.width,U=this.ctx.canvas.height,Q="smaskGroupAt"+this.groupLevel,A=this.cachedCanvases.getCanvas(Q,W,U,!0);this.suspendedCtx=this.ctx,this.ctx=A.context;const R=this.ctx;R.setTransform.apply(R,this.suspendedCtx.mozCurrentTransform),V(this.suspendedCtx,R),G(R,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(W){if(!this.current.activeSMask)return;W?(W[0]=Math.floor(W[0]),W[1]=Math.floor(W[1]),W[2]=Math.ceil(W[2]),W[3]=Math.ceil(W[3])):W=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const U=this.current.activeSMask,Q=this.suspendedCtx;St(Q,U,this.ctx,W),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const W=this.current;this.stateStack.push(W),this.current=W.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(W,U,Q,A,R,q){this.ctx.transform(W,U,Q,A,R,q),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(W,U,Q){const A=this.ctx,R=this.current;let q=R.x,K=R.y,Y,ft;const mt=A.mozCurrentTransform,kt=mt[0]===0&&mt[3]===0||mt[1]===0&&mt[2]===0,yt=kt?Q.slice(0):null;for(let Rt=0,xt=0,Ot=W.length;Rt<Ot;Rt++)switch(W[Rt]|0){case D.OPS.rectangle:q=U[xt++],K=U[xt++];const Bt=U[xt++],Ht=U[xt++],Wt=q+Bt,It=K+Ht;A.moveTo(q,K),Bt===0||Ht===0?A.lineTo(Wt,It):(A.lineTo(Wt,K),A.lineTo(Wt,It),A.lineTo(q,It)),kt||R.updateRectMinMax(mt,[q,K,Wt,It]),A.closePath();break;case D.OPS.moveTo:q=U[xt++],K=U[xt++],A.moveTo(q,K),kt||R.updatePathMinMax(mt,q,K);break;case D.OPS.lineTo:q=U[xt++],K=U[xt++],A.lineTo(q,K),kt||R.updatePathMinMax(mt,q,K);break;case D.OPS.curveTo:Y=q,ft=K,q=U[xt+4],K=U[xt+5],A.bezierCurveTo(U[xt],U[xt+1],U[xt+2],U[xt+3],q,K),R.updateCurvePathMinMax(mt,Y,ft,U[xt],U[xt+1],U[xt+2],U[xt+3],q,K,yt),xt+=6;break;case D.OPS.curveTo2:Y=q,ft=K,A.bezierCurveTo(q,K,U[xt],U[xt+1],U[xt+2],U[xt+3]),R.updateCurvePathMinMax(mt,Y,ft,q,K,U[xt],U[xt+1],U[xt+2],U[xt+3],yt),q=U[xt+2],K=U[xt+3],xt+=4;break;case D.OPS.curveTo3:Y=q,ft=K,q=U[xt+2],K=U[xt+3],A.bezierCurveTo(U[xt],U[xt+1],q,K,q,K),R.updateCurvePathMinMax(mt,Y,ft,U[xt],U[xt+1],q,K,q,K,yt),xt+=4;break;case D.OPS.closePath:A.closePath();break}kt&&R.updateScalingPathMinMax(mt,yt),R.setCurrentPoint(q,K)}closePath(){this.ctx.closePath()}stroke(W){W=typeof W!="undefined"?W:!0;const U=this.ctx,Q=this.current.strokeColor;U.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Q=="object"&&(Q==null?void 0:Q.getPattern)?(U.save(),U.strokeStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.STROKE),this.rescaleAndStroke(!1),U.restore()):this.rescaleAndStroke(!0)),W&&this.consumePath(this.current.getClippedPathBoundingBox()),U.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(W){W=typeof W!="undefined"?W:!0;const U=this.ctx,Q=this.current.fillColor,A=this.current.patternFill;let R=!1;A&&(U.save(),U.fillStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.FILL),R=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(U.fill("evenodd"),this.pendingEOFill=!1):U.fill()),R&&U.restore(),W&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jt}eoClip(){this.pendingClip=Nt}beginText(){this.current.textMatrix=D.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const W=this.pendingTextPaths,U=this.ctx;if(W===void 0){U.beginPath();return}U.save(),U.beginPath();for(let Q=0;Q<W.length;Q++){const A=W[Q];U.setTransform.apply(U,A.transform),U.translate(A.x,A.y),A.addToPath(U,A.fontSize)}U.restore(),U.clip(),U.beginPath(),delete this.pendingTextPaths}setCharSpacing(W){this.current.charSpacing=W}setWordSpacing(W){this.current.wordSpacing=W}setHScale(W){this.current.textHScale=W/100}setLeading(W){this.current.leading=-W}setFont(W,U){const Q=this.commonObjs.get(W),A=this.current;if(!Q)throw new Error(`Can't find font for ${W}`);if(A.fontMatrix=Q.fontMatrix||D.FONT_IDENTITY_MATRIX,(A.fontMatrix[0]===0||A.fontMatrix[3]===0)&&(0,D.warn)("Invalid font matrix for font "+W),U<0?(U=-U,A.fontDirection=-1):A.fontDirection=1,this.current.font=Q,this.current.fontSize=U,Q.isType3Font)return;const R=Q.loadedName||"sans-serif";let q="normal";Q.black?q="900":Q.bold&&(q="bold");const K=Q.italic?"italic":"normal",Y=`"${R}", ${Q.fallbackName}`;let ft=U;U<bt?ft=bt:U>it&&(ft=it),this.current.fontSizeScale=U/ft,this.ctx.font=`${K} ${q} ${ft}px ${Y}`}setTextRenderingMode(W){this.current.textRenderingMode=W}setTextRise(W){this.current.textRise=W}moveText(W,U){this.current.x=this.current.lineX+=W,this.current.y=this.current.lineY+=U}setLeadingMoveText(W,U){this.setLeading(-U),this.moveText(W,U)}setTextMatrix(W,U,Q,A,R,q){this.current.textMatrix=[W,U,Q,A,R,q],this.current.textMatrixScale=Math.hypot(W,U),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(W,U,Q,A){const R=this.ctx,q=this.current,K=q.font,Y=q.textRenderingMode,ft=q.fontSize/q.fontSizeScale,mt=Y&D.TextRenderingMode.FILL_STROKE_MASK,kt=!!(Y&D.TextRenderingMode.ADD_TO_PATH_FLAG),yt=q.patternFill&&!K.missingFile;let Rt;(K.disableFontFace||kt||yt)&&(Rt=K.getPathGenerator(this.commonObjs,W)),K.disableFontFace||yt?(R.save(),R.translate(U,Q),R.beginPath(),Rt(R,ft),A&&R.setTransform.apply(R,A),(mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fill(),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.stroke(),R.restore()):((mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fillText(W,U,Q),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.strokeText(W,U,Q)),kt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:R.mozCurrentTransform,x:U,y:Q,fontSize:ft,addToPath:Rt})}get isFontSubpixelAAEnabled(){const{context:W}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);W.scale(1.5,1),W.fillText("I",0,10);const U=W.getImageData(0,0,10,10).data;let Q=!1;for(let A=3;A<U.length;A+=4)if(U[A]>0&&U[A]<255){Q=!0;break}return(0,D.shadow)(this,"isFontSubpixelAAEnabled",Q)}showText(W){const U=this.current,Q=U.font;if(Q.isType3Font)return this.showType3Text(W);const A=U.fontSize;if(A===0)return;const R=this.ctx,q=U.fontSizeScale,K=U.charSpacing,Y=U.wordSpacing,ft=U.fontDirection,mt=U.textHScale*ft,kt=W.length,yt=Q.vertical,Rt=yt?1:-1,xt=Q.defaultVMetrics,Ot=A*U.fontMatrix[0],Bt=U.textRenderingMode===D.TextRenderingMode.FILL&&!Q.disableFontFace&&!U.patternFill;R.save(),R.transform.apply(R,U.textMatrix),R.translate(U.x,U.y+U.textRise),ft>0?R.scale(mt,-1):R.scale(mt,1);let Ht;if(U.patternFill){R.save();const Ut=U.fillColor.getPattern(R,this,R.mozCurrentTransformInverse,vt.PathType.FILL);Ht=R.mozCurrentTransform,R.restore(),R.fillStyle=Ut}let Wt=U.lineWidth;const It=U.textMatrixScale;if(It===0||Wt===0){const Ut=U.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;(Ut===D.TextRenderingMode.STROKE||Ut===D.TextRenderingMode.FILL_STROKE)&&(Wt=this.getSinglePixelWidth())}else Wt/=It;q!==1&&(R.scale(q,q),Wt/=q),R.lineWidth=Wt;let zt=0,Vt;for(Vt=0;Vt<kt;++Vt){const Ut=W[Vt];if(typeof Ut=="number"){zt+=Rt*Ut*A/1e3;continue}let se=!1;const te=(Ut.isSpace?Y:0)+K,Kt=Ut.fontChar,Zt=Ut.accent;let ie,ce,re=Ut.width;if(yt){const ee=Ut.vmetric||xt,Mt=-(Ut.vmetric?ee[1]:re*.5)*Ot,Tt=ee[2]*Ot;re=ee?-ee[0]:re,ie=Mt/q,ce=(zt+Tt)/q}else ie=zt/q,ce=0;if(Q.remeasure&&re>0){const ee=R.measureText(Kt).width*1e3/A*q;if(re<ee&&this.isFontSubpixelAAEnabled){const Mt=re/ee;se=!0,R.save(),R.scale(Mt,1),ie/=Mt}else re!==ee&&(ie+=(re-ee)/2e3*A/q)}if(this.contentVisible&&(Ut.isInFont||Q.missingFile)){if(Bt&&!Zt)R.fillText(Kt,ie,ce);else if(this.paintChar(Kt,ie,ce,Ht),Zt){const ee=ie+A*Zt.offset.x/q,Mt=ce-A*Zt.offset.y/q;this.paintChar(Zt.fontChar,ee,Mt,Ht)}}let fe;yt?fe=re*Ot-te*ft:fe=re*Ot+te*ft,zt+=fe,se&&R.restore()}yt?U.y-=zt:U.x+=zt*mt,R.restore(),this.compose()}showType3Text(W){const U=this.ctx,Q=this.current,A=Q.font,R=Q.fontSize,q=Q.fontDirection,K=A.vertical?1:-1,Y=Q.charSpacing,ft=Q.wordSpacing,mt=Q.textHScale*q,kt=Q.fontMatrix||D.FONT_IDENTITY_MATRIX,yt=W.length,Rt=Q.textRenderingMode===D.TextRenderingMode.INVISIBLE;let xt,Ot,Bt,Ht;if(!(Rt||R===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,U.save(),U.transform.apply(U,Q.textMatrix),U.translate(Q.x,Q.y),U.scale(mt,q),xt=0;xt<yt;++xt){if(Ot=W[xt],typeof Ot=="number"){Ht=K*Ot*R/1e3,this.ctx.translate(Ht,0),Q.x+=Ht*mt;continue}const Wt=(Ot.isSpace?ft:0)+Y,It=A.charProcOperatorList[Ot.operatorListId];if(!It){(0,D.warn)(`Type3 character "${Ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ot,this.save(),U.scale(R,R),U.transform.apply(U,kt),this.executeOperatorList(It),this.restore()),Bt=D.Util.applyTransform([Ot.width,0],kt)[0]*R+Wt,U.translate(Bt,0),Q.x+=Bt*mt}U.restore(),this.processingType3=null}}setCharWidth(W,U){}setCharWidthAndBounds(W,U,Q,A,R,q){this.ctx.rect(Q,A,R-Q,q-A),this.ctx.clip(),this.endPath()}getColorN_Pattern(W){let U;if(W[0]==="TilingPattern"){const Q=W[1],A=this.baseTransform||this.ctx.mozCurrentTransform.slice(),R={createCanvasGraphics:q=>new qt(q,this.commonObjs,this.objs,this.canvasFactory)};U=new vt.TilingPattern(W,Q,this.ctx,R,A)}else U=this._getPattern(W[1],W[2]);return U}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(W,U,Q){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,W,U,Q))||D.Util.makeHexColor(W,U,Q);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(W,U,Q){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,W,U,Q))||D.Util.makeHexColor(W,U,Q);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(W,U=null){let Q;return this.cachedPatterns.has(W)?Q=this.cachedPatterns.get(W):(Q=(0,vt.getShadingPattern)(this.objs.get(W)),this.cachedPatterns.set(W,Q)),U&&(Q.matrix=U),Q}shadingFill(W){if(!this.contentVisible)return;const U=this.ctx;this.save();const Q=this._getPattern(W);U.fillStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.SHADING);const A=U.mozCurrentTransformInverse;if(A){const R=U.canvas,q=R.width,K=R.height,Y=D.Util.applyTransform([0,0],A),ft=D.Util.applyTransform([0,K],A),mt=D.Util.applyTransform([q,0],A),kt=D.Util.applyTransform([q,K],A),yt=Math.min(Y[0],ft[0],mt[0],kt[0]),Rt=Math.min(Y[1],ft[1],mt[1],kt[1]),xt=Math.max(Y[0],ft[0],mt[0],kt[0]),Ot=Math.max(Y[1],ft[1],mt[1],kt[1]);this.ctx.fillRect(yt,Rt,xt-yt,Ot-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,D.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,D.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(W,U){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(W)&&W.length===6&&this.transform.apply(this,W),this.baseTransform=this.ctx.mozCurrentTransform,U)){const Q=U[2]-U[0],A=U[3]-U[1];this.ctx.rect(U[0],U[1],Q,A),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,U),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(W){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const U=this.ctx;W.isolated||(0,D.info)("TODO: Support non-isolated groups."),W.knockout&&(0,D.warn)("Knockout groups not supported.");const Q=U.mozCurrentTransform;if(W.matrix&&U.transform.apply(U,W.matrix),!W.bbox)throw new Error("Bounding box is required.");let A=D.Util.getAxialAlignedBoundingBox(W.bbox,U.mozCurrentTransform);const R=[0,0,U.canvas.width,U.canvas.height];A=D.Util.intersect(A,R)||[0,0,0,0];const q=Math.floor(A[0]),K=Math.floor(A[1]);let Y=Math.max(Math.ceil(A[2])-q,1),ft=Math.max(Math.ceil(A[3])-K,1),mt=1,kt=1;Y>X&&(mt=Y/X,Y=X),ft>X&&(kt=ft/X,ft=X),this.current.startNewPathAndClipBox([0,0,Y,ft]);let yt="groupAt"+this.groupLevel;W.smask&&(yt+="_smask_"+this.smaskCounter++%2);const Rt=this.cachedCanvases.getCanvas(yt,Y,ft,!0),xt=Rt.context;xt.scale(1/mt,1/kt),xt.translate(-q,-K),xt.transform.apply(xt,Q),W.smask?this.smaskStack.push({canvas:Rt.canvas,context:xt,offsetX:q,offsetY:K,scaleX:mt,scaleY:kt,subtype:W.smask.subtype,backdrop:W.smask.backdrop,transferMap:W.smask.transferMap||null,startTransformInverse:null}):(U.setTransform(1,0,0,1,0,0),U.translate(q,K),U.scale(mt,kt),U.save()),V(U,xt),this.ctx=xt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(U),this.groupLevel++}endGroup(W){if(!this.contentVisible)return;this.groupLevel--;const U=this.ctx,Q=this.groupStack.pop();if(this.ctx=Q,this.ctx.imageSmoothingEnabled=!1,W.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,A);const R=D.Util.getAxialAlignedBoundingBox([0,0,U.canvas.width,U.canvas.height],A);this.ctx.drawImage(U.canvas,0,0),this.ctx.restore(),this.compose(R)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(W,U,Q,A,R){if(this.save(),Array.isArray(U)&&U.length===4){const q=U[2]-U[0],K=U[3]-U[1];if(R&&this.annotationCanvasMap){Q=Q.slice(),Q[4]-=U[0],Q[5]-=U[1],U=U.slice(),U[0]=U[1]=0,U[2]=q,U[3]=K;const[Y,ft]=D.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:mt}=this,kt=Math.ceil(q*this.outputScaleX*mt),yt=Math.ceil(K*this.outputScaleY*mt);this.annotationCanvas=this.canvasFactory.create(kt,yt);const{canvas:Rt,context:xt}=this.annotationCanvas,Ot=`var(--zoom-factor) * ${Ct.PixelsPerInch.PDF_TO_CSS_UNITS}`;Rt.style.width=`calc(${q}px * ${Ot})`,Rt.style.height=`calc(${K}px * ${Ot})`,this.annotationCanvasMap.set(W,Rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=xt,this.ctx.setTransform(Y,0,0,-ft,0,K*ft),nt(this.ctx),tt(this.ctx,this.foregroundColor)}else tt(this.ctx,this.foregroundColor),this.ctx.rect(U[0],U[1],q,K),this.ctx.clip(),this.endPath()}this.current=new dt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,Q),this.transform.apply(this,A)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(W){if(!this.contentVisible)return;const U=W.count;W=this.getObject(W.data,W),W.count=U;const Q=this.ctx,A=this.processingType3;if(A&&(A.compiled===void 0&&(A.compiled=ht(W)),A.compiled)){A.compiled(Q);return}const R=this._createMaskCanvas(W),q=R.canvas;Q.save(),Q.setTransform(1,0,0,1,0,0),Q.drawImage(q,R.offsetX,R.offsetY),Q.restore(),this.compose()}paintImageMaskXObjectRepeat(W,U,Q=0,A=0,R,q){if(!this.contentVisible)return;W=this.getObject(W.data,W);const K=this.ctx;K.save();const Y=K.mozCurrentTransform;K.transform(U,Q,A,R,0,0);const ft=this._createMaskCanvas(W);K.setTransform(1,0,0,1,0,0);for(let mt=0,kt=q.length;mt<kt;mt+=2){const yt=D.Util.transform(Y,[U,Q,A,R,q[mt],q[mt+1]]),[Rt,xt]=D.Util.applyTransform([0,0],yt);K.drawImage(ft.canvas,Rt,xt)}K.restore(),this.compose()}paintImageMaskXObjectGroup(W){if(!this.contentVisible)return;const U=this.ctx,Q=this.current.fillColor,A=this.current.patternFill;for(let R=0,q=W.length;R<q;R++){const K=W[R],Y=K.width,ft=K.height,mt=this.cachedCanvases.getCanvas("maskCanvas",Y,ft,!1),kt=mt.context;kt.save(),Pt(kt,K),kt.globalCompositeOperation="source-in",kt.fillStyle=A?Q.getPattern(kt,this,U.mozCurrentTransformInverse,vt.PathType.FILL):Q,kt.fillRect(0,0,Y,ft),kt.restore(),U.save(),U.transform.apply(U,K.transform),U.scale(1,-1),Z(U,mt.canvas,0,0,Y,ft,0,-1,1,1),U.restore()}this.compose()}paintImageXObject(W){if(!this.contentVisible)return;const U=this.getObject(W);if(!U){(0,D.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(U)}paintImageXObjectRepeat(W,U,Q,A){if(!this.contentVisible)return;const R=this.getObject(W);if(!R){(0,D.warn)("Dependent image isn't ready yet");return}const q=R.width,K=R.height,Y=[];for(let ft=0,mt=A.length;ft<mt;ft+=2)Y.push({transform:[U,0,0,Q,A[ft],A[ft+1]],x:0,y:0,w:q,h:K});this.paintInlineImageXObjectGroup(R,Y)}paintInlineImageXObject(W){if(!this.contentVisible)return;const U=W.width,Q=W.height,A=this.ctx;this.save(),A.scale(1/U,-1/Q);let R;if(typeof HTMLElement=="function"&&W instanceof HTMLElement||!W.data)R=W;else{const ft=this.cachedCanvases.getCanvas("inlineImage",U,Q,!1),mt=ft.context;At(mt,W,this.current.transferMaps),R=ft.canvas}const q=this._scaleImage(R,A.mozCurrentTransformInverse);A.imageSmoothingEnabled=Lt(A.mozCurrentTransform,W.interpolate);const[K,Y]=Z(A,q.img,0,0,q.paintWidth,q.paintHeight,0,-Q,U,Q);if(this.imageLayer){const ft=this.getCanvasPosition(0,-Q);this.imageLayer.appendImage({imgData:W,left:ft[0],top:ft[1],width:K,height:Y})}this.compose(),this.restore()}paintInlineImageXObjectGroup(W,U){if(!this.contentVisible)return;const Q=this.ctx,A=W.width,R=W.height,q=this.cachedCanvases.getCanvas("inlineImage",A,R,!1),K=q.context;At(K,W,this.current.transferMaps);for(let Y=0,ft=U.length;Y<ft;Y++){const mt=U[Y];if(Q.save(),Q.transform.apply(Q,mt.transform),Q.scale(1,-1),Z(Q,q.canvas,mt.x,mt.y,mt.w,mt.h,0,-1,1,1),this.imageLayer){const kt=this.getCanvasPosition(mt.x,mt.y);this.imageLayer.appendImage({imgData:W,left:kt[0],top:kt[1],width:A,height:R})}Q.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(W){}markPointProps(W,U){}beginMarkedContent(W){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(W,U){W==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(U)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(W){const U=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(W);const Q=this.ctx;this.pendingClip&&(U||(this.pendingClip===Nt?Q.clip("evenodd"):Q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Q.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const W=this.ctx.mozCurrentTransform;if(W[1]===0&&W[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(W[0]),Math.abs(W[3]));else{const U=Math.abs(W[0]*W[3]-W[2]*W[1]),Q=Math.hypot(W[0],W[2]),A=Math.hypot(W[1],W[3]);this._cachedGetSinglePixelWidth=Math.max(Q,A)/U}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:W}=this.current,U=this.ctx.mozCurrentTransform;let Q,A;if(U[1]===0&&U[2]===0){const R=Math.abs(U[0]),q=Math.abs(U[3]);if(W===0)Q=1/R,A=1/q;else{const K=R*W,Y=q*W;Q=K<1?1/K:1,A=Y<1?1/Y:1}}else{const R=Math.abs(U[0]*U[3]-U[2]*U[1]),q=Math.hypot(U[0],U[1]),K=Math.hypot(U[2],U[3]);if(W===0)Q=K/R,A=q/R;else{const Y=W*R;Q=K>Y?K/Y:1,A=q>Y?q/Y:1}}this._cachedScaleForStroking=[Q,A]}return this._cachedScaleForStroking}rescaleAndStroke(W){const{ctx:U}=this,{lineWidth:Q}=this.current,[A,R]=this.getScaleForStroking();if(U.lineWidth=Q||1,A===1&&R===1){U.stroke();return}let q,K,Y;W&&(q=U.mozCurrentTransform.slice(),K=U.getLineDash().slice(),Y=U.lineDashOffset),U.scale(A,R);const ft=Math.max(A,R);U.setLineDash(U.getLineDash().map(mt=>mt/ft)),U.lineDashOffset/=ft,U.stroke(),W&&(U.setTransform(...q),U.setLineDash(K),U.lineDashOffset=Y)}getCanvasPosition(W,U){const Q=this.ctx.mozCurrentTransform;return[Q[0]*W+Q[2]*U+Q[4],Q[1]*W+Q[3]*U+Q[5]]}isContentVisible(){for(let W=this.markedContentStack.length-1;W>=0;W--)if(!this.markedContentStack[W].visible)return!1;return!0}}E.CanvasGraphics=qt;for(const rt in D.OPS)qt.prototype[rt]!==void 0&&(qt.prototype[D.OPS[rt]]=qt.prototype[rt])},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.TilingPattern=E.PathType=void 0,E.getShadingPattern=et;var D=at(1),vt=at(3);const ut={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};E.PathType=ut;function wt(G,nt){if(!nt||vt.isNodeJS)return;const lt=nt[2]-nt[0],Z=nt[3]-nt[1],ht=new Path2D;ht.rect(nt[0],nt[1],lt,Z),G.clip(ht)}class Ct{constructor(){this.constructor===Ct&&(0,D.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,D.unreachable)("Abstract method `getPattern` called.")}}class bt extends Ct{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let lt;this._type==="axial"?lt=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(lt=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Z of this._colorStops)lt.addColorStop(Z[0],Z[1]);return lt}getPattern(nt,lt,Z,ht){let dt;if(ht===ut.STROKE||ht===ut.FILL){const At=lt.current.getClippedPathBoundingBox(ht,nt.mozCurrentTransform)||[0,0,0,0],Pt=Math.ceil(At[2]-At[0])||1,V=Math.ceil(At[3]-At[1])||1,tt=lt.cachedCanvases.getCanvas("pattern",Pt,V,!0),ot=tt.context;ot.clearRect(0,0,ot.canvas.width,ot.canvas.height),ot.beginPath(),ot.rect(0,0,ot.canvas.width,ot.canvas.height),ot.translate(-At[0],-At[1]),Z=D.Util.transform(Z,[1,0,0,1,At[0],At[1]]),ot.transform.apply(ot,lt.baseTransform),this.matrix&&ot.transform.apply(ot,this.matrix),wt(ot,this._bbox),ot.fillStyle=this._createGradient(ot),ot.fill(),dt=nt.createPattern(tt.canvas,"no-repeat");const _t=new DOMMatrix(Z);try{dt.setTransform(_t)}catch(ct){(0,D.warn)(`RadialAxialShadingPattern.getPattern: "${ct==null?void 0:ct.message}".`)}}else wt(nt,this._bbox),dt=this._createGradient(nt);return dt}}function it(G,nt,lt,Z,ht,dt,At,Pt){const V=nt.coords,tt=nt.colors,ot=G.data,_t=G.width*4;let ct;V[lt+1]>V[Z+1]&&(ct=lt,lt=Z,Z=ct,ct=dt,dt=At,At=ct),V[Z+1]>V[ht+1]&&(ct=Z,Z=ht,ht=ct,ct=At,At=Pt,Pt=ct),V[lt+1]>V[Z+1]&&(ct=lt,lt=Z,Z=ct,ct=dt,dt=At,At=ct);const Ft=(V[lt]+nt.offsetX)*nt.scaleX,St=(V[lt+1]+nt.offsetY)*nt.scaleY,Lt=(V[Z]+nt.offsetX)*nt.scaleX,$t=(V[Z+1]+nt.offsetY)*nt.scaleY,Dt=(V[ht]+nt.offsetX)*nt.scaleX,jt=(V[ht+1]+nt.offsetY)*nt.scaleY;if(St>=jt)return;const Nt=tt[dt],qt=tt[dt+1],rt=tt[dt+2],W=tt[At],U=tt[At+1],Q=tt[At+2],A=tt[Pt],R=tt[Pt+1],q=tt[Pt+2],K=Math.round(St),Y=Math.round(jt);let ft,mt,kt,yt,Rt,xt,Ot,Bt;for(let Ht=K;Ht<=Y;Ht++){if(Ht<$t){let Ut;Ht<St?Ut=0:Ut=(St-Ht)/(St-$t),ft=Ft-(Ft-Lt)*Ut,mt=Nt-(Nt-W)*Ut,kt=qt-(qt-U)*Ut,yt=rt-(rt-Q)*Ut}else{let Ut;Ht>jt?Ut=1:$t===jt?Ut=0:Ut=($t-Ht)/($t-jt),ft=Lt-(Lt-Dt)*Ut,mt=W-(W-A)*Ut,kt=U-(U-R)*Ut,yt=Q-(Q-q)*Ut}let Wt;Ht<St?Wt=0:Ht>jt?Wt=1:Wt=(St-Ht)/(St-jt),Rt=Ft-(Ft-Dt)*Wt,xt=Nt-(Nt-A)*Wt,Ot=qt-(qt-R)*Wt,Bt=rt-(rt-q)*Wt;const It=Math.round(Math.min(ft,Rt)),zt=Math.round(Math.max(ft,Rt));let Vt=_t*Ht+It*4;for(let Ut=It;Ut<=zt;Ut++)Wt=(ft-Ut)/(ft-Rt),Wt<0?Wt=0:Wt>1&&(Wt=1),ot[Vt++]=mt-(mt-xt)*Wt|0,ot[Vt++]=kt-(kt-Ot)*Wt|0,ot[Vt++]=yt-(yt-Bt)*Wt|0,ot[Vt++]=255}}function X(G,nt,lt){const Z=nt.coords,ht=nt.colors;let dt,At;switch(nt.type){case"lattice":const Pt=nt.verticesPerRow,V=Math.floor(Z.length/Pt)-1,tt=Pt-1;for(dt=0;dt<V;dt++){let ot=dt*Pt;for(let _t=0;_t<tt;_t++,ot++)it(G,lt,Z[ot],Z[ot+1],Z[ot+Pt],ht[ot],ht[ot+1],ht[ot+Pt]),it(G,lt,Z[ot+Pt+1],Z[ot+1],Z[ot+Pt],ht[ot+Pt+1],ht[ot+1],ht[ot+Pt])}break;case"triangles":for(dt=0,At=Z.length;dt<At;dt+=3)it(G,lt,Z[dt],Z[dt+1],Z[dt+2],ht[dt],ht[dt+1],ht[dt+2]);break;default:throw new Error("illegal figure")}}class gt extends Ct{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,lt,Z){const Pt=Math.floor(this._bounds[0]),V=Math.floor(this._bounds[1]),tt=Math.ceil(this._bounds[2])-Pt,ot=Math.ceil(this._bounds[3])-V,_t=Math.min(Math.ceil(Math.abs(tt*nt[0]*1.1)),3e3),ct=Math.min(Math.ceil(Math.abs(ot*nt[1]*1.1)),3e3),Ft=tt/_t,St=ot/ct,Lt={coords:this._coords,colors:this._colors,offsetX:-Pt,offsetY:-V,scaleX:1/Ft,scaleY:1/St},$t=_t+2*2,Dt=ct+2*2,jt=Z.getCanvas("mesh",$t,Dt,!1),Nt=jt.context,qt=Nt.createImageData(_t,ct);if(lt){const W=qt.data;for(let U=0,Q=W.length;U<Q;U+=4)W[U]=lt[0],W[U+1]=lt[1],W[U+2]=lt[2],W[U+3]=255}for(const W of this._figures)X(qt,W,Lt);return Nt.putImageData(qt,2,2),{canvas:jt.canvas,offsetX:Pt-2*Ft,offsetY:V-2*St,scaleX:Ft,scaleY:St}}getPattern(nt,lt,Z,ht){wt(nt,this._bbox);let dt;if(ht===ut.SHADING)dt=D.Util.singularValueDecompose2dScale(nt.mozCurrentTransform);else if(dt=D.Util.singularValueDecompose2dScale(lt.baseTransform),this.matrix){const Pt=D.Util.singularValueDecompose2dScale(this.matrix);dt=[dt[0]*Pt[0],dt[1]*Pt[1]]}const At=this._createMeshCanvas(dt,ht===ut.SHADING?null:this._background,lt.cachedCanvases);return ht!==ut.SHADING&&(nt.setTransform.apply(nt,lt.baseTransform),this.matrix&&nt.transform.apply(nt,this.matrix)),nt.translate(At.offsetX,At.offsetY),nt.scale(At.scaleX,At.scaleY),nt.createPattern(At.canvas,"no-repeat")}}class pt extends Ct{getPattern(){return"hotpink"}}function et(G){switch(G[0]){case"RadialAxial":return new bt(G);case"Mesh":return new gt(G);case"Dummy":return new pt}throw new Error(`Unknown IR type: ${G[0]}`)}const B={COLORED:1,UNCOLORED:2};class J{static get MAX_PATTERN_SIZE(){return(0,D.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(nt,lt,Z,ht,dt){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=lt,this.ctx=Z,this.canvasGraphicsFactory=ht,this.baseTransform=dt}createPatternCanvas(nt){const lt=this.operatorList,Z=this.bbox,ht=this.xstep,dt=this.ystep,At=this.paintType,Pt=this.tilingType,V=this.color,tt=this.canvasGraphicsFactory;(0,D.info)("TilingType: "+Pt);const ot=Z[0],_t=Z[1],ct=Z[2],Ft=Z[3],St=D.Util.singularValueDecompose2dScale(this.matrix),Lt=D.Util.singularValueDecompose2dScale(this.baseTransform),$t=[St[0]*Lt[0],St[1]*Lt[1]],Dt=this.getSizeAndScale(ht,this.ctx.canvas.width,$t[0]),jt=this.getSizeAndScale(dt,this.ctx.canvas.height,$t[1]),Nt=nt.cachedCanvases.getCanvas("pattern",Dt.size,jt.size,!0),qt=Nt.context,rt=tt.createCanvasGraphics(qt);rt.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(rt,At,V);let W=ot,U=_t,Q=ct,A=Ft;return ot<0&&(W=0,Q+=Math.abs(ot)),_t<0&&(U=0,A+=Math.abs(_t)),qt.translate(-(Dt.scale*W),-(jt.scale*U)),rt.transform(Dt.scale,0,0,jt.scale,0,0),qt.save(),this.clipBbox(rt,W,U,Q,A),rt.baseTransform=rt.ctx.mozCurrentTransform.slice(),rt.executeOperatorList(lt),rt.endDrawing(),{canvas:Nt.canvas,scaleX:Dt.scale,scaleY:jt.scale,offsetX:W,offsetY:U}}getSizeAndScale(nt,lt,Z){nt=Math.abs(nt);const ht=Math.max(J.MAX_PATTERN_SIZE,lt);let dt=Math.ceil(nt*Z);return dt>=ht?dt=ht:Z=dt/nt,{scale:Z,size:dt}}clipBbox(nt,lt,Z,ht,dt){const At=ht-lt,Pt=dt-Z;nt.ctx.rect(lt,Z,At,Pt),nt.current.updateRectMinMax(nt.ctx.mozCurrentTransform,[lt,Z,ht,dt]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,lt,Z){const ht=nt.ctx,dt=nt.current;switch(lt){case B.COLORED:const At=this.ctx;ht.fillStyle=At.fillStyle,ht.strokeStyle=At.strokeStyle,dt.fillColor=At.fillStyle,dt.strokeColor=At.strokeStyle;break;case B.UNCOLORED:const Pt=D.Util.makeHexColor(Z[0],Z[1],Z[2]);ht.fillStyle=Pt,ht.strokeStyle=Pt,dt.fillColor=Pt,dt.strokeColor=Pt;break;default:throw new D.FormatError(`Unsupported paint type: ${lt}`)}}getPattern(nt,lt,Z,ht){let dt=Z;ht!==ut.SHADING&&(dt=D.Util.transform(dt,lt.baseTransform),this.matrix&&(dt=D.Util.transform(dt,this.matrix)));const At=this.createPatternCanvas(lt);let Pt=new DOMMatrix(dt);Pt=Pt.translate(At.offsetX,At.offsetY),Pt=Pt.scale(1/At.scaleX,1/At.scaleY);const V=nt.createPattern(At.canvas,"repeat");try{V.setTransform(Pt)}catch(tt){(0,D.warn)(`TilingPattern.getPattern: "${tt==null?void 0:tt.message}".`)}return V}}E.TilingPattern=J},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.applyMaskImageData=vt;var D=at(1);function vt({src:ut,srcPos:wt=0,dest:Ct,destPos:bt=0,width:it,height:X,inverseDecode:gt=!1}){const pt=D.FeatureTest.isLittleEndian?4278190080:255,[et,B]=gt?[0,pt]:[pt,0],J=it>>3,G=it&7,nt=ut.length;Ct=new Uint32Array(Ct.buffer);for(let lt=0;lt<X;lt++){for(const ht=wt+J;wt<ht;wt++){const dt=wt<nt?ut[wt]:255;Ct[bt++]=dt&128?B:et,Ct[bt++]=dt&64?B:et,Ct[bt++]=dt&32?B:et,Ct[bt++]=dt&16?B:et,Ct[bt++]=dt&8?B:et,Ct[bt++]=dt&4?B:et,Ct[bt++]=dt&2?B:et,Ct[bt++]=dt&1?B:et}if(G===0)continue;const Z=wt<nt?ut[wt++]:255;for(let ht=0;ht<G;ht++)Ct[bt++]=Z&1<<7-ht?B:et}return{srcPos:wt,destPos:bt}}},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.GlobalWorkerOptions=void 0;const at=Object.create(null);E.GlobalWorkerOptions=at,at.workerPort=at.workerPort===void 0?null:at.workerPort,at.workerSrc=at.workerSrc===void 0?"":at.workerSrc},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MessageHandler=void 0;var D=at(1);const vt={UNKNOWN:0,DATA:1,ERROR:2},ut={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wt(bt){switch(bt instanceof Error||typeof bt=="object"&&bt!==null||(0,D.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),bt.name){case"AbortException":return new D.AbortException(bt.message);case"MissingPDFException":return new D.MissingPDFException(bt.message);case"PasswordException":return new D.PasswordException(bt.message,bt.code);case"UnexpectedResponseException":return new D.UnexpectedResponseException(bt.message,bt.status);case"UnknownErrorException":return new D.UnknownErrorException(bt.message,bt.details);default:return new D.UnknownErrorException(bt.message,bt.toString())}}class Ct{constructor(it,X,gt){this.sourceName=it,this.targetName=X,this.comObj=gt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=pt=>{const et=pt.data;if(et.targetName!==this.sourceName)return;if(et.stream){this._processStreamMessage(et);return}if(et.callback){const J=et.callbackId,G=this.callbackCapabilities[J];if(!G)throw new Error(`Cannot resolve callback ${J}`);if(delete this.callbackCapabilities[J],et.callback===vt.DATA)G.resolve(et.data);else if(et.callback===vt.ERROR)G.reject(wt(et.reason));else throw new Error("Unexpected callback case");return}const B=this.actionHandler[et.action];if(!B)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const J=this.sourceName,G=et.sourceName;new Promise(function(nt){nt(B(et.data))}).then(function(nt){gt.postMessage({sourceName:J,targetName:G,callback:vt.DATA,callbackId:et.callbackId,data:nt})},function(nt){gt.postMessage({sourceName:J,targetName:G,callback:vt.ERROR,callbackId:et.callbackId,reason:wt(nt)})});return}if(et.streamId){this._createStreamSink(et);return}B(et.data)},gt.addEventListener("message",this._onComObjOnMessage)}on(it,X){const gt=this.actionHandler;if(gt[it])throw new Error(`There is already an actionName called "${it}"`);gt[it]=X}send(it,X,gt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,data:X},gt)}sendWithPromise(it,X,gt){const pt=this.callbackId++,et=(0,D.createPromiseCapability)();this.callbackCapabilities[pt]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,callbackId:pt,data:X},gt)}catch(B){et.reject(B)}return et.promise}sendWithStream(it,X,gt,pt){const et=this.streamId++,B=this.sourceName,J=this.targetName,G=this.comObj;return new ReadableStream({start:nt=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et]={controller:nt,startCall:lt,pullCall:null,cancelCall:null,isClosed:!1},G.postMessage({sourceName:B,targetName:J,action:it,streamId:et,data:X,desiredSize:nt.desiredSize},pt),lt.promise},pull:nt=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].pullCall=lt,G.postMessage({sourceName:B,targetName:J,stream:ut.PULL,streamId:et,desiredSize:nt.desiredSize}),lt.promise},cancel:nt=>{(0,D.assert)(nt instanceof Error,"cancel must have a valid reason");const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].cancelCall=lt,this.streamControllers[et].isClosed=!0,G.postMessage({sourceName:B,targetName:J,stream:ut.CANCEL,streamId:et,reason:wt(nt)}),lt.promise}},gt)}_createStreamSink(it){const X=it.streamId,gt=this.sourceName,pt=it.sourceName,et=this.comObj,B=this,J=this.actionHandler[it.action],G={enqueue(nt,lt=1,Z){if(this.isCancelled)return;const ht=this.desiredSize;this.desiredSize-=lt,ht>0&&this.desiredSize<=0&&(this.sinkCapability=(0,D.createPromiseCapability)(),this.ready=this.sinkCapability.promise),et.postMessage({sourceName:gt,targetName:pt,stream:ut.ENQUEUE,streamId:X,chunk:nt},Z)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:gt,targetName:pt,stream:ut.CLOSE,streamId:X}),delete B.streamSinks[X])},error(nt){(0,D.assert)(nt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:gt,targetName:pt,stream:ut.ERROR,streamId:X,reason:wt(nt)}))},sinkCapability:(0,D.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:it.desiredSize,ready:null};G.sinkCapability.resolve(),G.ready=G.sinkCapability.promise,this.streamSinks[X]=G,new Promise(function(nt){nt(J(it.data,G))}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ut.START_COMPLETE,streamId:X,success:!0})},function(nt){et.postMessage({sourceName:gt,targetName:pt,stream:ut.START_COMPLETE,streamId:X,reason:wt(nt)})})}_processStreamMessage(it){const X=it.streamId,gt=this.sourceName,pt=it.sourceName,et=this.comObj,B=this.streamControllers[X],J=this.streamSinks[X];switch(it.stream){case ut.START_COMPLETE:it.success?B.startCall.resolve():B.startCall.reject(wt(it.reason));break;case ut.PULL_COMPLETE:it.success?B.pullCall.resolve():B.pullCall.reject(wt(it.reason));break;case ut.PULL:if(!J){et.postMessage({sourceName:gt,targetName:pt,stream:ut.PULL_COMPLETE,streamId:X,success:!0});break}J.desiredSize<=0&&it.desiredSize>0&&J.sinkCapability.resolve(),J.desiredSize=it.desiredSize,new Promise(function(G){G(J.onPull&&J.onPull())}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ut.PULL_COMPLETE,streamId:X,success:!0})},function(G){et.postMessage({sourceName:gt,targetName:pt,stream:ut.PULL_COMPLETE,streamId:X,reason:wt(G)})});break;case ut.ENQUEUE:if((0,D.assert)(B,"enqueue should have stream controller"),B.isClosed)break;B.controller.enqueue(it.chunk);break;case ut.CLOSE:if((0,D.assert)(B,"close should have stream controller"),B.isClosed)break;B.isClosed=!0,B.controller.close(),this._deleteStreamController(B,X);break;case ut.ERROR:(0,D.assert)(B,"error should have stream controller"),B.controller.error(wt(it.reason)),this._deleteStreamController(B,X);break;case ut.CANCEL_COMPLETE:it.success?B.cancelCall.resolve():B.cancelCall.reject(wt(it.reason)),this._deleteStreamController(B,X);break;case ut.CANCEL:if(!J)break;new Promise(function(G){G(J.onCancel&&J.onCancel(wt(it.reason)))}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ut.CANCEL_COMPLETE,streamId:X,success:!0})},function(G){et.postMessage({sourceName:gt,targetName:pt,stream:ut.CANCEL_COMPLETE,streamId:X,reason:wt(G)})}),J.sinkCapability.reject(wt(it.reason)),J.isCancelled=!0,delete this.streamSinks[X];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(it,X){await Promise.allSettled([it.startCall&&it.startCall.promise,it.pullCall&&it.pullCall.promise,it.cancelCall&&it.cancelCall.promise]),delete this.streamControllers[X]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}E.MessageHandler=Ct},(st,E,at)=>{var ut,wt;Object.defineProperty(E,"__esModule",{value:!0}),E.Metadata=void 0;var D=at(1);class vt{constructor({parsedData:bt,rawData:it}){le(this,ut,void 0);le(this,wt,void 0);he(this,ut,bt),he(this,wt,it)}getRaw(){return Yt(this,wt)}get(bt){var it;return(it=Yt(this,ut).get(bt))!=null?it:null}getAll(){return(0,D.objectFromMap)(Yt(this,ut))}has(bt){return Yt(this,ut).has(bt)}}ut=new WeakMap,wt=new WeakMap,E.Metadata=vt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.OptionalContentConfig=void 0;var D=at(1);class vt{constructor(Ct,bt){this.visible=!0,this.name=Ct,this.intent=bt}}class ut{constructor(Ct){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,Ct!==null){this.name=Ct.name,this.creator=Ct.creator,this._order=Ct.order;for(const bt of Ct.groups)this._groups.set(bt.id,new vt(bt.name,bt.intent));if(Ct.baseState==="OFF")for(const bt of this._groups)bt.visible=!1;for(const bt of Ct.on)this._groups.get(bt).visible=!0;for(const bt of Ct.off)this._groups.get(bt).visible=!1}}_evaluateVisibilityExpression(Ct){const bt=Ct.length;if(bt<2)return!0;const it=Ct[0];for(let X=1;X<bt;X++){const gt=Ct[X];let pt;if(Array.isArray(gt))pt=this._evaluateVisibilityExpression(gt);else if(this._groups.has(gt))pt=this._groups.get(gt).visible;else return(0,D.warn)(`Optional content group not found: ${gt}`),!0;switch(it){case"And":if(!pt)return!1;break;case"Or":if(pt)return!0;break;case"Not":return!pt;default:return!0}}return it==="And"}isVisible(Ct){if(this._groups.size===0)return!0;if(!Ct)return(0,D.warn)("Optional content group not defined."),!0;if(Ct.type==="OCG")return this._groups.has(Ct.id)?this._groups.get(Ct.id).visible:((0,D.warn)(`Optional content group not found: ${Ct.id}`),!0);if(Ct.type==="OCMD"){if(Ct.expression)return this._evaluateVisibilityExpression(Ct.expression);if(!Ct.policy||Ct.policy==="AnyOn"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!0}return!1}else if(Ct.policy==="AllOn"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!1}return!0}else if(Ct.policy==="AnyOff"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!0}return!1}else if(Ct.policy==="AllOff"){for(const bt of Ct.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!1}return!0}return(0,D.warn)(`Unknown optional content policy ${Ct.policy}.`),!0}return(0,D.warn)(`Unknown group type ${Ct.type}.`),!0}setVisibility(Ct,bt=!0){if(!this._groups.has(Ct)){(0,D.warn)(`Optional content group not found: ${Ct}`);return}this._groups.get(Ct).visible=!!bt}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,D.objectFromMap)(this._groups):null}getGroup(Ct){return this._groups.get(Ct)||null}}E.OptionalContentConfig=ut},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFDataTransportStream=void 0;var D=at(1),vt=at(5);class ut{constructor(it,X){(0,D.assert)(X,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=it.progressiveDone||!1,this._contentDispositionFilename=it.contentDispositionFilename||null;const gt=it.initialData;if((gt==null?void 0:gt.length)>0){const pt=new Uint8Array(gt).buffer;this._queuedChunks.push(pt)}this._pdfDataRangeTransport=X,this._isStreamingSupported=!it.disableStream,this._isRangeSupported=!it.disableRange,this._contentLength=it.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((pt,et)=>{this._onReceiveData({begin:pt,chunk:et})}),this._pdfDataRangeTransport.addProgressListener((pt,et)=>{this._onProgress({loaded:pt,total:et})}),this._pdfDataRangeTransport.addProgressiveReadListener(pt=>{this._onReceiveData({chunk:pt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(it){const X=new Uint8Array(it.chunk).buffer;if(it.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(X):this._queuedChunks.push(X);else{const gt=this._rangeReaders.some(function(pt){return pt._begin!==it.begin?!1:(pt._enqueue(X),!0)});(0,D.assert)(gt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var it,X;return(X=(it=this._fullRequestReader)==null?void 0:it._loaded)!=null?X:0}_onProgress(it){if(it.total===void 0){const X=this._rangeReaders[0];X!=null&&X.onProgress&&X.onProgress({loaded:it.loaded})}else{const X=this._fullRequestReader;X!=null&&X.onProgress&&X.onProgress({loaded:it.loaded,total:it.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(it){const X=this._rangeReaders.indexOf(it);X>=0&&this._rangeReaders.splice(X,1)}getFullReader(){(0,D.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const it=this._queuedChunks;return this._queuedChunks=null,new wt(this,it,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(it,X){if(X<=this._progressiveDataLength)return null;const gt=new Ct(this,it,X);return this._pdfDataRangeTransport.requestDataRange(it,X),this._rangeReaders.push(gt),gt}cancelAllRequests(it){this._fullRequestReader&&this._fullRequestReader.cancel(it);for(const X of this._rangeReaders.slice(0))X.cancel(it);this._pdfDataRangeTransport.abort()}}E.PDFDataTransportStream=ut;class wt{constructor(it,X,gt=!1,pt=null){this._stream=it,this._done=gt||!1,this._filename=(0,vt.isPdfFile)(pt)?pt:null,this._queuedChunks=X||[],this._loaded=0;for(const et of this._queuedChunks)this._loaded+=et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),it._fullRequestReader=this,this.onProgress=null}_enqueue(it){this._done||(this._requests.length>0?this._requests.shift().resolve({value:it,done:!1}):this._queuedChunks.push(it),this._loaded+=it.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ct{constructor(it,X,gt){this._stream=it,this._begin=X,this._end=gt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(it){if(!this._done){if(this._requests.length===0)this._queuedChunk=it;else{this._requests.shift().resolve({value:it,done:!1});for(const gt of this._requests)gt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const X=this._queuedChunk;return this._queuedChunk=null,{value:X,done:!1}}if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaText=void 0;class at{static textContent(vt){const ut=[],wt={items:ut,styles:Object.create(null)};function Ct(bt){var gt;if(!bt)return;let it=null;const X=bt.name;if(X==="#text")it=bt.value;else if(at.shouldBuildText(X))(gt=bt==null?void 0:bt.attributes)!=null&&gt.textContent?it=bt.attributes.textContent:bt.value&&(it=bt.value);else return;if(it!==null&&ut.push({str:it}),!!bt.children)for(const pt of bt.children)Ct(pt)}return Ct(vt),wt}static shouldBuildText(vt){return!(vt==="textarea"||vt==="input"||vt==="option"||vt==="select")}}E.XfaText=at},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.NodeStandardFontDataFactory=E.NodeCanvasFactory=E.NodeCMapReaderFactory=void 0;var D=at(6);const vt=function(bt){return new Promise((it,X)=>{require$$4.readFile(bt,(pt,et)=>{if(pt||!et){X(new Error(pt));return}it(new Uint8Array(et))})})};class ut extends D.BaseCanvasFactory{_createCanvas(it,X){return require$$4.createCanvas(it,X)}}E.NodeCanvasFactory=ut;class wt extends D.BaseCMapReaderFactory{_fetchData(it,X){return vt(it).then(gt=>({cMapData:gt,compressionType:X}))}}E.NodeCMapReaderFactory=wt;class Ct extends D.BaseStandardFontDataFactory{_fetchData(it){return vt(it)}}E.NodeStandardFontDataFactory=Ct},(st,E,at)=>{var W,Ee;Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationLayer=void 0;var D=at(1),vt=at(5),ut=at(8),wt=at(21),Ct=at(22);const bt=1e3,it=new WeakSet;function X(Q){return{width:Q[2]-Q[0],height:Q[3]-Q[1]}}class gt{static create(A){switch(A.data.annotationType){case D.AnnotationType.LINK:return new et(A);case D.AnnotationType.TEXT:return new B(A);case D.AnnotationType.WIDGET:switch(A.data.fieldType){case"Tx":return new G(A);case"Btn":return A.data.radioButton?new lt(A):A.data.checkBox?new nt(A):new Z(A);case"Ch":return new ht(A)}return new J(A);case D.AnnotationType.POPUP:return new dt(A);case D.AnnotationType.FREETEXT:return new Pt(A);case D.AnnotationType.LINE:return new V(A);case D.AnnotationType.SQUARE:return new tt(A);case D.AnnotationType.CIRCLE:return new ot(A);case D.AnnotationType.POLYLINE:return new _t(A);case D.AnnotationType.CARET:return new Ft(A);case D.AnnotationType.INK:return new St(A);case D.AnnotationType.POLYGON:return new ct(A);case D.AnnotationType.HIGHLIGHT:return new Lt(A);case D.AnnotationType.UNDERLINE:return new $t(A);case D.AnnotationType.SQUIGGLY:return new Dt(A);case D.AnnotationType.STRIKEOUT:return new jt(A);case D.AnnotationType.STAMP:return new Nt(A);case D.AnnotationType.FILEATTACHMENT:return new qt(A);default:return new pt(A)}}}class pt{constructor(A,{isRenderable:R=!1,ignoreBorder:q=!1,createQuadrilaterals:K=!1}={}){this.isRenderable=R,this.data=A.data,this.layer=A.layer,this.page=A.page,this.viewport=A.viewport,this.linkService=A.linkService,this.downloadManager=A.downloadManager,this.imageResourcesPath=A.imageResourcesPath,this.renderForms=A.renderForms,this.svgFactory=A.svgFactory,this.annotationStorage=A.annotationStorage,this.enableScripting=A.enableScripting,this.hasJSActions=A.hasJSActions,this._fieldObjects=A.fieldObjects,this._mouseState=A.mouseState,R&&(this.container=this._createContainer(q)),K&&(this.quadrilaterals=this._createQuadrilaterals(q))}_createContainer(A=!1){const R=this.data,q=this.page,K=this.viewport,Y=document.createElement("section");let{width:ft,height:mt}=X(R.rect);Y.setAttribute("data-annotation-id",R.id);const kt=D.Util.normalizeRect([R.rect[0],q.view[3]-R.rect[1]+q.view[1],R.rect[2],q.view[3]-R.rect[3]+q.view[1]]);if(R.hasOwnCanvas){const yt=K.transform.slice(),[Rt,xt]=D.Util.singularValueDecompose2dScale(yt);ft=Math.ceil(ft*Rt),mt=Math.ceil(mt*xt),kt[0]*=Rt,kt[1]*=xt;for(let Ot=0;Ot<4;Ot++)yt[Ot]=Math.sign(yt[Ot]);Y.style.transform=`matrix(${yt.join(",")})`}else Y.style.transform=`matrix(${K.transform.join(",")})`;if(Y.style.transformOrigin=`${-kt[0]}px ${-kt[1]}px`,!A&&R.borderStyle.width>0){Y.style.borderWidth=`${R.borderStyle.width}px`,R.borderStyle.style!==D.AnnotationBorderStyleType.UNDERLINE&&(ft-=2*R.borderStyle.width,mt-=2*R.borderStyle.width);const yt=R.borderStyle.horizontalCornerRadius,Rt=R.borderStyle.verticalCornerRadius;if(yt>0||Rt>0){const Ot=`${yt}px / ${Rt}px`;Y.style.borderRadius=Ot}switch(R.borderStyle.style){case D.AnnotationBorderStyleType.SOLID:Y.style.borderStyle="solid";break;case D.AnnotationBorderStyleType.DASHED:Y.style.borderStyle="dashed";break;case D.AnnotationBorderStyleType.BEVELED:(0,D.warn)("Unimplemented border style: beveled");break;case D.AnnotationBorderStyleType.INSET:(0,D.warn)("Unimplemented border style: inset");break;case D.AnnotationBorderStyleType.UNDERLINE:Y.style.borderBottomStyle="solid";break}R.borderColor||R.color||null?Y.style.borderColor=D.Util.makeHexColor(R.color[0]|0,R.color[1]|0,R.color[2]|0):Y.style.borderWidth=0}return Y.style.left=`${kt[0]}px`,Y.style.top=`${kt[1]}px`,R.hasOwnCanvas?Y.style.width=Y.style.height="auto":(Y.style.width=`${ft}px`,Y.style.height=`${mt}px`),Y}get _commonActions(){const A=(R,q,K)=>{const Y=K.detail[R];K.target.style[q]=wt.ColorConverters[`${Y[0]}_HTML`](Y.slice(1))};return(0,D.shadow)(this,"_commonActions",{display:R=>{const q=R.detail.display%2===1;R.target.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:q,print:R.detail.display===0||R.detail.display===3})},print:R=>{this.annotationStorage.setValue(this.data.id,{print:R.detail.print})},hidden:R=>{R.target.style.visibility=R.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:R.detail.hidden})},focus:R=>{setTimeout(()=>R.target.focus({preventScroll:!1}),0)},userName:R=>{R.target.title=R.detail.userName},readonly:R=>{R.detail.readonly?R.target.setAttribute("readonly",""):R.target.removeAttribute("readonly")},required:R=>{R.detail.required?R.target.setAttribute("required",""):R.target.removeAttribute("required")},bgColor:R=>{A("bgColor","backgroundColor",R)},fillColor:R=>{A("fillColor","backgroundColor",R)},fgColor:R=>{A("fgColor","color",R)},textColor:R=>{A("textColor","color",R)},borderColor:R=>{A("borderColor","borderColor",R)},strokeColor:R=>{A("strokeColor","borderColor",R)}})}_dispatchEventFromSandbox(A,R){const q=this._commonActions;for(const K of Object.keys(R.detail)){const Y=A[K]||q[K];Y&&Y(R)}}_setDefaultPropertiesFromJS(A){if(!this.enableScripting)return;const R=this.annotationStorage.getRawValue(this.data.id);if(!R)return;const q=this._commonActions;for(const[K,Y]of Object.entries(R)){const ft=q[K];ft&&(ft({detail:Y,target:A}),delete R[K])}}_createQuadrilaterals(A=!1){if(!this.data.quadPoints)return null;const R=[],q=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],R.push(this._createContainer(A));return this.data.rect=q,R}_createPopup(A,R){let q=this.container;this.quadrilaterals&&(A=A||this.quadrilaterals,q=this.quadrilaterals[0]),A||(A=document.createElement("div"),A.style.height=q.style.height,A.style.width=q.style.width,q.appendChild(A));const Y=new At({container:q,trigger:A,color:R.color,titleObj:R.titleObj,modificationDate:R.modificationDate,contentsObj:R.contentsObj,richText:R.richText,hideWrapper:!0}).render();Y.style.left=q.style.width,q.appendChild(Y)}_renderQuadrilaterals(A){for(const R of this.quadrilaterals)R.className=A;return this.quadrilaterals}render(){(0,D.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(A,R=null){const q=[];if(this._fieldObjects){const K=this._fieldObjects[A];if(K)for(const{page:Y,id:ft,exportValues:mt}of K){if(Y===-1||ft===R)continue;const kt=typeof mt=="string"?mt:null,yt=document.getElementById(ft);if(yt&&!it.has(yt)){(0,D.warn)(`_getElementsByName - element not allowed: ${ft}`);continue}q.push({id:ft,exportValue:kt,domElement:yt})}return q}for(const K of document.getElementsByName(A)){const{id:Y,exportValue:ft}=K;Y!==R&&(!it.has(K)||q.push({id:Y,exportValue:ft,domElement:K}))}return q}static get platform(){const A=typeof navigator!="undefined"?navigator.platform:"";return(0,D.shadow)(this,"platform",{isWin:A.includes("Win"),isMac:A.includes("Mac")})}}class et extends pt{constructor(A,R=null){const q=!!(A.data.url||A.data.dest||A.data.action||A.data.isTooltipOnly||A.data.resetForm||A.data.actions&&(A.data.actions.Action||A.data.actions["Mouse Up"]||A.data.actions["Mouse Down"]));super(A,{isRenderable:q,ignoreBorder:!!(R!=null&&R.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:A,linkService:R}=this,q=document.createElement("a");if(A.url)R.addLinkAttributes(q,A.url,A.newWindow);else if(A.action)this._bindNamedAction(q,A.action);else if(A.dest)this._bindLink(q,A.dest);else{let K=!1;A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(K=!0,this._bindJSAction(q,A)),A.resetForm?this._bindResetFormAction(q,A.resetForm):K||this._bindLink(q,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((K,Y)=>{const ft=Y===0?q:q.cloneNode();return K.appendChild(ft),K}):(this.container.className="linkAnnotation",this.container.appendChild(q),this.container)}_bindLink(A,R){A.href=this.linkService.getDestinationHash(R),A.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&(A.className="internalLink")}_bindNamedAction(A,R){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(R),!1),A.className="internalLink"}_bindJSAction(A,R){A.href=this.linkService.getAnchorUrl("");const q=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(R.actions)){const Y=q.get(K);!Y||(A[Y]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:K}}),!1})}A.onclick||(A.onclick=()=>!1),A.className="internalLink"}_bindResetFormAction(A,R){const q=A.onclick;if(q||(A.href=this.linkService.getAnchorUrl("")),A.className="internalLink",!this._fieldObjects){(0,D.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),q||(A.onclick=()=>!1);return}A.onclick=()=>{var Rt;q&&q();const{fields:K,refs:Y,include:ft}=R,mt=[];if(K.length!==0||Y.length!==0){const xt=new Set(Y);for(const Ot of K){const Bt=this._fieldObjects[Ot]||[];for(const{id:Ht}of Bt)xt.add(Ht)}for(const Ot of Object.values(this._fieldObjects))for(const Bt of Ot)xt.has(Bt.id)===ft&&mt.push(Bt)}else for(const xt of Object.values(this._fieldObjects))mt.push(...xt);const kt=this.annotationStorage,yt=[];for(const xt of mt){const{id:Ot}=xt;switch(yt.push(Ot),xt.type){case"text":{const Ht=xt.defaultValue||"";kt.setValue(Ot,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=xt.defaultValue===xt.exportValues;kt.setValue(Ot,{value:Ht});break}case"combobox":case"listbox":{const Ht=xt.defaultValue||"";kt.setValue(Ot,{value:Ht});break}default:continue}const Bt=document.getElementById(Ot);!Bt||!it.has(Bt)||Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yt,name:"ResetForm"}})),!1}}}class B extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R})}render(){this.container.className="textAnnotation";const A=document.createElement("img");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",A.alt="[{{type}} Annotation]",A.dataset.l10nId="text_annotation_type",A.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(A,this.data),this.container.appendChild(A),this.container}}class J extends pt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(A){const{isWin:R,isMac:q}=pt.platform;return R&&A.ctrlKey||q&&A.metaKey}_setEventListener(A,R,q,K){R.includes("mouse")?A.addEventListener(R,Y=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(Y),shift:Y.shiftKey,modifier:this._getKeyModifier(Y)}})}):A.addEventListener(R,Y=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(Y)}})})}_setEventListeners(A,R,q){var K;for(const[Y,ft]of R)(ft==="Action"||((K=this.data.actions)==null?void 0:K[ft]))&&this._setEventListener(A,Y,ft,q)}_setBackgroundColor(A){const R=this.data.backgroundColor||null;A.style.backgroundColor=R===null?"transparent":D.Util.makeHexColor(R[0],R[1],R[2])}}class G extends J{constructor(A){const R=A.renderForms||!A.data.hasAppearance&&!!A.data.fieldValue;super(A,{isRenderable:R})}setPropertyOnSiblings(A,R,q,K){const Y=this.annotationStorage;for(const ft of this._getElementsByName(A.name,A.id))ft.domElement&&(ft.domElement[R]=q),Y.setValue(ft.id,{[K]:q})}render(){var K;const A=this.annotationStorage,R=this.data.id;this.container.className="textWidgetAnnotation";let q=null;if(this.renderForms){const Y=A.getValue(R,{value:this.data.fieldValue}),ft=Y.formattedValue||Y.value||"",mt={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=ft):(q=document.createElement("input"),q.type="text",q.setAttribute("value",ft)),it.add(q),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=bt,mt.userValue=ft,q.setAttribute("id",R),q.addEventListener("input",yt=>{A.setValue(R,{value:yt.target.value}),this.setPropertyOnSiblings(q,"value",yt.target.value,"value")}),q.addEventListener("resetform",yt=>{var xt;const Rt=(xt=this.data.defaultFieldValue)!=null?xt:"";q.value=mt.userValue=Rt,mt.formattedValue=null});let kt=yt=>{const{formattedValue:Rt}=mt;Rt!=null&&(yt.target.value=Rt),yt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",Rt=>{mt.userValue&&(Rt.target.value=mt.userValue),mt.valueOnFocus=Rt.target.value}),q.addEventListener("updatefromsandbox",Rt=>{const xt={value(Ot){var Bt;mt.userValue=(Bt=Ot.detail.value)!=null?Bt:"",A.setValue(R,{value:mt.userValue.toString()}),Ot.target.value=mt.userValue},formattedValue(Ot){const{formattedValue:Bt}=Ot.detail;mt.formattedValue=Bt,Bt!=null&&Ot.target!==document.activeElement&&(Ot.target.value=Bt),A.setValue(R,{formattedValue:Bt})},selRange(Ot){Ot.target.setSelectionRange(...Ot.detail.selRange)}};this._dispatchEventFromSandbox(xt,Rt)}),q.addEventListener("keydown",Rt=>{var Bt;let xt=-1;if(Rt.key==="Escape"?xt=0:Rt.key==="Enter"?xt=2:Rt.key==="Tab"&&(xt=3),xt===-1)return;const{value:Ot}=Rt.target;mt.valueOnFocus!==Ot&&(mt.userValue=Ot,(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Ot,willCommit:!0,commitKey:xt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const yt=kt;kt=null,q.addEventListener("blur",Rt=>{var Ot;const{value:xt}=Rt.target;mt.userValue=xt,this._mouseState.isDown&&mt.valueOnFocus!==xt&&((Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,willCommit:!0,commitKey:1,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),yt(Rt)}),(K=this.data.actions)!=null&&K.Keystroke&&q.addEventListener("beforeinput",Rt=>{var Vt;const{data:xt,target:Ot}=Rt,{value:Bt,selectionStart:Ht,selectionEnd:Wt}=Ot;let It=Ht,zt=Wt;switch(Rt.inputType){case"deleteWordBackward":{const Ut=Bt.substring(0,Ht).match(/\w*[^\w]*$/);Ut&&(It-=Ut[0].length);break}case"deleteWordForward":{const Ut=Bt.substring(Ht).match(/^[^\w]*\w*/);Ut&&(zt+=Ut[0].length);break}case"deleteContentBackward":Ht===Wt&&(It-=1);break;case"deleteContentForward":Ht===Wt&&(zt+=1);break}Rt.preventDefault(),(Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Bt,change:xt||"",willCommit:!1,selStart:It,selEnd:zt}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(kt&&q.addEventListener("blur",kt),this.data.maxLen!==null&&(q.maxLength=this.data.maxLen),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;q.classList.add("comb"),q.style.letterSpacing=`calc(${Rt}px - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.appendChild(q),this.container}_setTextStyle(A){const R=["left","center","right"],{fontSize:q,fontColor:K}=this.data.defaultAppearanceData,Y=A.style;q&&(Y.fontSize=`${q}px`),Y.color=D.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(Y.textAlign=R[this.data.textAlignment])}}class nt extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.exportValue===R.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",A.setValue(q,{value:K})),this.container.className="buttonWidgetAnnotation checkBox";const Y=document.createElement("input");return it.add(Y),Y.disabled=R.readOnly,Y.type="checkbox",Y.name=R.fieldName,K&&Y.setAttribute("checked",!0),Y.setAttribute("id",q),Y.setAttribute("exportValue",R.exportValue),Y.tabIndex=bt,Y.addEventListener("change",ft=>{const{name:mt,checked:kt}=ft.target;for(const yt of this._getElementsByName(mt,q)){const Rt=kt&&yt.exportValue===R.exportValue;yt.domElement&&(yt.domElement.checked=Rt),A.setValue(yt.id,{value:Rt})}A.setValue(q,{value:kt})}),Y.addEventListener("resetform",ft=>{const mt=R.defaultFieldValue||"Off";ft.target.checked=mt===R.exportValue}),this.enableScripting&&this.hasJSActions&&(Y.addEventListener("updatefromsandbox",ft=>{const mt={value(kt){kt.target.checked=kt.detail.value!=="Off",A.setValue(q,{value:kt.target.checked})}};this._dispatchEventFromSandbox(mt,ft)}),this._setEventListeners(Y,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)),this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.appendChild(Y),this.container}}class lt extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.fieldValue===R.buttonValue}).value;typeof K=="string"&&(K=K!==R.buttonValue,A.setValue(q,{value:K}));const Y=document.createElement("input");if(it.add(Y),Y.disabled=R.readOnly,Y.type="radio",Y.name=R.fieldName,K&&Y.setAttribute("checked",!0),Y.setAttribute("id",q),Y.tabIndex=bt,Y.addEventListener("change",ft=>{const{name:mt,checked:kt}=ft.target;for(const yt of this._getElementsByName(mt,q))A.setValue(yt.id,{value:!1});A.setValue(q,{value:kt})}),Y.addEventListener("resetform",ft=>{const mt=R.defaultFieldValue;ft.target.checked=mt!=null&&mt===R.buttonValue}),this.enableScripting&&this.hasJSActions){const ft=R.buttonValue;Y.addEventListener("updatefromsandbox",mt=>{const kt={value:yt=>{const Rt=ft===yt.detail.value;for(const xt of this._getElementsByName(yt.target.name)){const Ot=Rt&&xt.id===q;xt.domElement&&(xt.domElement.checked=Ot),A.setValue(xt.id,{value:Ot})}}};this._dispatchEventFromSandbox(kt,mt)}),this._setEventListeners(Y,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],mt=>mt.target.checked)}return this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.appendChild(Y),this.container}}class Z extends et{constructor(A){super(A,{ignoreBorder:A.data.hasAppearance})}render(){const A=super.render();return A.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(A.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(A),A}}class ht extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const A=this.annotationStorage,R=this.data.id,q=A.getValue(R,{value:this.data.fieldValue});let{fontSize:K}=this.data.defaultAppearanceData;K||(K=9);const Y=`calc(${K}px * var(--zoom-factor))`,ft=document.createElement("select");it.add(ft),ft.disabled=this.data.readOnly,ft.name=this.data.fieldName,ft.setAttribute("id",R),ft.tabIndex=bt,ft.style.fontSize=`${K}px`,this.data.combo||(ft.size=this.data.options.length,this.data.multiSelect&&(ft.multiple=!0)),ft.addEventListener("resetform",yt=>{const Rt=this.data.defaultFieldValue;for(const xt of ft.options)xt.selected=xt.value===Rt});for(const yt of this.data.options){const Rt=document.createElement("option");Rt.textContent=yt.displayValue,Rt.value=yt.exportValue,this.data.combo&&(Rt.style.fontSize=Y),q.value.includes(yt.exportValue)&&Rt.setAttribute("selected",!0),ft.appendChild(Rt)}const mt=(yt,Rt)=>{const xt=Rt?"value":"textContent",Ot=yt.target.options;return yt.target.multiple?Array.prototype.filter.call(Ot,Bt=>Bt.selected).map(Bt=>Bt[xt]):Ot.selectedIndex===-1?null:Ot[Ot.selectedIndex][xt]},kt=yt=>{const Rt=yt.target.options;return Array.prototype.map.call(Rt,xt=>({displayValue:xt.textContent,exportValue:xt.value}))};return this.enableScripting&&this.hasJSActions?(ft.addEventListener("updatefromsandbox",yt=>{const Rt={value(xt){const Ot=xt.detail.value,Bt=new Set(Array.isArray(Ot)?Ot:[Ot]);for(const Ht of ft.options)Ht.selected=Bt.has(Ht.value);A.setValue(R,{value:mt(xt,!0)})},multipleSelection(xt){ft.multiple=!0},remove(xt){const Ot=ft.options,Bt=xt.detail.remove;Ot[Bt].selected=!1,ft.remove(Bt),Ot.length>0&&Array.prototype.findIndex.call(Ot,Wt=>Wt.selected)===-1&&(Ot[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},clear(xt){for(;ft.length!==0;)ft.remove(0);A.setValue(R,{value:null,items:[]})},insert(xt){const{index:Ot,displayValue:Bt,exportValue:Ht}=xt.detail.insert,Wt=document.createElement("option");Wt.textContent=Bt,Wt.value=Ht,ft.insertBefore(Wt,ft.children[Ot]),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},items(xt){const{items:Ot}=xt.detail;for(;ft.length!==0;)ft.remove(0);for(const Bt of Ot){const{displayValue:Ht,exportValue:Wt}=Bt,It=document.createElement("option");It.textContent=Ht,It.value=Wt,ft.appendChild(It)}ft.options.length>0&&(ft.options[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},indices(xt){const Ot=new Set(xt.detail.indices);for(const Bt of xt.target.options)Bt.selected=Ot.has(Bt.index);A.setValue(R,{value:mt(xt,!0)})},editable(xt){xt.target.disabled=!xt.detail.editable}};this._dispatchEventFromSandbox(Rt,yt)}),ft.addEventListener("input",yt=>{var Ot;const Rt=mt(yt,!0),xt=mt(yt,!1);A.setValue(R,{value:Rt}),(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,changeEx:Rt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ft,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],yt=>yt.target.checked)):ft.addEventListener("input",function(yt){A.setValue(R,{value:mt(yt,!0)})}),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.appendChild(ft),this.container}}class dt extends pt{constructor(A){var q,K,Y;const R=!!(((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R})}render(){const A=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",A.includes(this.data.parentType))return this.container;const R=`[data-annotation-id="${this.data.parentId}"]`,q=this.layer.querySelectorAll(R);if(q.length===0)return this.container;const K=new At({container:this.container,trigger:Array.from(q),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),Y=this.page,ft=D.Util.normalizeRect([this.data.parentRect[0],Y.view[3]-this.data.parentRect[1]+Y.view[1],this.data.parentRect[2],Y.view[3]-this.data.parentRect[3]+Y.view[1]]),mt=ft[0]+this.data.parentRect[2]-this.data.parentRect[0],kt=ft[1];return this.container.style.transformOrigin=`${-mt}px ${-kt}px`,this.container.style.left=`${mt}px`,this.container.style.top=`${kt}px`,this.container.appendChild(K.render()),this.container}}class At{constructor(A){this.container=A.container,this.trigger=A.trigger,this.color=A.color,this.titleObj=A.titleObj,this.modificationDate=A.modificationDate,this.contentsObj=A.contentsObj,this.richText=A.richText,this.hideWrapper=A.hideWrapper||!1,this.pinned=!1}render(){var mt,kt;const R=document.createElement("div");R.className="popupWrapper",this.hideElement=this.hideWrapper?R:this.container,this.hideElement.hidden=!0;const q=document.createElement("div");q.className="popup";const K=this.color;if(K){const yt=.7*(255-K[0])+K[0],Rt=.7*(255-K[1])+K[1],xt=.7*(255-K[2])+K[2];q.style.backgroundColor=D.Util.makeHexColor(yt|0,Rt|0,xt|0)}const Y=document.createElement("h1");Y.dir=this.titleObj.dir,Y.textContent=this.titleObj.str,q.appendChild(Y);const ft=vt.PDFDateString.toDateObject(this.modificationDate);if(ft){const yt=document.createElement("span");yt.className="popupDate",yt.textContent="{{date}}, {{time}}",yt.dataset.l10nId="annotation_date_string",yt.dataset.l10nArgs=JSON.stringify({date:ft.toLocaleDateString(),time:ft.toLocaleTimeString()}),q.appendChild(yt)}if(((mt=this.richText)==null?void 0:mt.str)&&(!((kt=this.contentsObj)!=null&&kt.str)||this.contentsObj.str===this.richText.str))Ct.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:q}),q.lastChild.className="richText popupContent";else{const yt=this._formatContents(this.contentsObj);q.appendChild(yt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const yt of this.trigger)yt.addEventListener("click",this._toggle.bind(this)),yt.addEventListener("mouseover",this._show.bind(this,!1)),yt.addEventListener("mouseout",this._hide.bind(this,!1));return q.addEventListener("click",this._hide.bind(this,!0)),R.appendChild(q),R}_formatContents({str:A,dir:R}){const q=document.createElement("p");q.className="popupContent",q.dir=R;const K=A.split(/(?:\r\n?|\n)/);for(let Y=0,ft=K.length;Y<ft;++Y){const mt=K[Y];q.appendChild(document.createTextNode(mt)),Y<ft-1&&q.appendChild(document.createElement("br"))}return q}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(A=!1){A&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(A=!0){A&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class Pt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const A=this.data,{width:R,height:q}=X(A.rect),K=this.svgFactory.create(R,q),Y=this.svgFactory.createElement("svg:line");return Y.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),Y.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),Y.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),Y.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),Y.setAttribute("stroke-width",A.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),K.appendChild(Y),this.container.append(K),this._createPopup(Y,A),this.container}}class tt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const A=this.data,{width:R,height:q}=X(A.rect),K=this.svgFactory.create(R,q),Y=A.borderStyle.width,ft=this.svgFactory.createElement("svg:rect");return ft.setAttribute("x",Y/2),ft.setAttribute("y",Y/2),ft.setAttribute("width",R-Y),ft.setAttribute("height",q-Y),ft.setAttribute("stroke-width",Y||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class ot extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const A=this.data,{width:R,height:q}=X(A.rect),K=this.svgFactory.create(R,q),Y=A.borderStyle.width,ft=this.svgFactory.createElement("svg:ellipse");return ft.setAttribute("cx",R/2),ft.setAttribute("cy",q/2),ft.setAttribute("rx",R/2-Y/2),ft.setAttribute("ry",q/2-Y/2),ft.setAttribute("stroke-width",Y||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class _t extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=X(A.rect),K=this.svgFactory.create(R,q);let Y=[];for(const mt of A.vertices){const kt=mt.x-A.rect[0],yt=A.rect[3]-mt.y;Y.push(kt+","+yt)}Y=Y.join(" ");const ft=this.svgFactory.createElement(this.svgElementName);return ft.setAttribute("points",Y),ft.setAttribute("stroke-width",A.borderStyle.width||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),K.appendChild(ft),this.container.append(K),this._createPopup(ft,A),this.container}}class ct extends _t{constructor(A){super(A),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ft extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class St extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=X(A.rect),K=this.svgFactory.create(R,q);for(const Y of A.inkLists){let ft=[];for(const kt of Y){const yt=kt.x-A.rect[0],Rt=A.rect[3]-kt.y;ft.push(`${yt},${Rt}`)}ft=ft.join(" ");const mt=this.svgFactory.createElement(this.svgElementName);mt.setAttribute("points",ft),mt.setAttribute("stroke-width",A.borderStyle.width||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),this._createPopup(mt,A),K.appendChild(mt)}return this.container.append(K),this.container}}class Lt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $t extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Dt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class jt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Nt extends pt{constructor(A){var q,K,Y;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((Y=A.data.richText)==null?void 0:Y.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class qt extends pt{constructor(A){var K;super(A,{isRenderable:!0});const{filename:R,content:q}=this.data.file;this.filename=(0,vt.getFilenameFromUrl)(R),this.content=q,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:R,content:q})}render(){var R,q;this.container.className="fileAttachmentAnnotation";const A=document.createElement("div");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((R=this.data.titleObj)==null?void 0:R.str)||((q=this.data.contentsObj)==null?void 0:q.str)||this.data.richText)&&this._createPopup(A,this.data),this.container.appendChild(A),this.container}_download(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)}}class rt{static render(A){const R=[],q=[];for(const Y of A.annotations){if(!Y)continue;const{width:ft,height:mt}=X(Y.rect);if(!(ft<=0||mt<=0)){if(Y.annotationType===D.AnnotationType.POPUP){q.push(Y);continue}R.push(Y)}}q.length&&R.push(...q);const K=A.div;for(const Y of R){const ft=gt.create({data:Y,layer:K,page:A.page,viewport:A.viewport,linkService:A.linkService,downloadManager:A.downloadManager,imageResourcesPath:A.imageResourcesPath||"",renderForms:A.renderForms!==!1,svgFactory:new vt.DOMSVGFactory,annotationStorage:A.annotationStorage||new ut.AnnotationStorage,enableScripting:A.enableScripting,hasJSActions:A.hasJSActions,fieldObjects:A.fieldObjects,mouseState:A.mouseState||{isDown:!1}});if(ft.isRenderable){const mt=ft.render();if(Y.hidden&&(mt.style.visibility="hidden"),Array.isArray(mt))for(const kt of mt)K.appendChild(kt);else ft instanceof dt?K.prepend(mt):K.appendChild(mt)}}Ae(this,W,Ee).call(this,K,A.annotationCanvasMap)}static update(A){const{page:R,viewport:q,annotations:K,annotationCanvasMap:Y,div:ft}=A,mt=q.transform,kt=`matrix(${mt.join(",")})`;let yt,Rt;for(const xt of K){const Ot=ft.querySelectorAll(`[data-annotation-id="${xt.id}"]`);if(Ot)for(const Bt of Ot)if(xt.hasOwnCanvas){const Ht=D.Util.normalizeRect([xt.rect[0],R.view[3]-xt.rect[1]+R.view[1],xt.rect[2],R.view[3]-xt.rect[3]+R.view[1]]);if(!Rt){yt=Math.abs(mt[0]||mt[1]);const zt=mt.slice();for(let Vt=0;Vt<4;Vt++)zt[Vt]=Math.sign(zt[Vt]);Rt=`matrix(${zt.join(",")})`}const Wt=Ht[0]*yt,It=Ht[1]*yt;Bt.style.left=`${Wt}px`,Bt.style.top=`${It}px`,Bt.style.transformOrigin=`${-Wt}px ${-It}px`,Bt.style.transform=Rt}else Bt.style.transform=kt}Ae(this,W,Ee).call(this,ft,Y),ft.hidden=!1}}W=new WeakSet,Ee=function(A,R){if(!!R){for(const[q,K]of R){const Y=A.querySelector(`[data-annotation-id="${q}"]`);if(!Y)continue;const{firstChild:ft}=Y;ft.nodeName==="CANVAS"?Y.replaceChild(K,ft):Y.insertBefore(K,ft)}R.clear()}},le(rt,W),E.AnnotationLayer=rt},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.ColorConverters=void 0;function at(vt){return Math.floor(Math.max(0,Math.min(1,vt))*255).toString(16).padStart(2,"0")}class D{static CMYK_G([ut,wt,Ct,bt]){return["G",1-Math.min(1,.3*ut+.59*Ct+.11*wt+bt)]}static G_CMYK([ut]){return["CMYK",0,0,0,1-ut]}static G_RGB([ut]){return["RGB",ut,ut,ut]}static G_HTML([ut]){const wt=at(ut);return`#${wt}${wt}${wt}`}static RGB_G([ut,wt,Ct]){return["G",.3*ut+.59*wt+.11*Ct]}static RGB_HTML([ut,wt,Ct]){const bt=at(ut),it=at(wt),X=at(Ct);return`#${bt}${it}${X}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ut,wt,Ct,bt]){return["RGB",1-Math.min(1,ut+bt),1-Math.min(1,Ct+bt),1-Math.min(1,wt+bt)]}static CMYK_HTML(ut){return this.RGB_HTML(this.CMYK_RGB(ut))}static RGB_CMYK([ut,wt,Ct]){const bt=1-ut,it=1-wt,X=1-Ct,gt=Math.min(bt,it,X);return["CMYK",bt,it,X,gt]}}E.ColorConverters=D},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaLayer=void 0;var D=at(18);class vt{static setupStorage(wt,Ct,bt,it,X){const gt=it.getValue(Ct,{value:null});switch(bt.name){case"textarea":if(gt.value!==null&&(wt.textContent=gt.value),X==="print")break;wt.addEventListener("input",pt=>{it.setValue(Ct,{value:pt.target.value})});break;case"input":if(bt.attributes.type==="radio"||bt.attributes.type==="checkbox"){if(gt.value===bt.attributes.xfaOn?wt.setAttribute("checked",!0):gt.value===bt.attributes.xfaOff&&wt.removeAttribute("checked"),X==="print")break;wt.addEventListener("change",pt=>{it.setValue(Ct,{value:pt.target.checked?pt.target.getAttribute("xfaOn"):pt.target.getAttribute("xfaOff")})})}else{if(gt.value!==null&&wt.setAttribute("value",gt.value),X==="print")break;wt.addEventListener("input",pt=>{it.setValue(Ct,{value:pt.target.value})})}break;case"select":if(gt.value!==null)for(const pt of bt.children)pt.attributes.value===gt.value&&(pt.attributes.selected=!0);wt.addEventListener("input",pt=>{const et=pt.target.options,B=et.selectedIndex===-1?"":et[et.selectedIndex].value;it.setValue(Ct,{value:B})});break}}static setAttributes({html:wt,element:Ct,storage:bt=null,intent:it,linkService:X}){const{attributes:gt}=Ct,pt=wt instanceof HTMLAnchorElement;gt.type==="radio"&&(gt.name=`${gt.name}-${it}`);for(const[et,B]of Object.entries(gt))if(!(B==null||et==="dataId"))if(et!=="style")if(et==="textContent")wt.textContent=B;else if(et==="class")B.length&&wt.setAttribute(et,B.join(" "));else{if(pt&&(et==="href"||et==="newWindow"))continue;wt.setAttribute(et,B)}else Object.assign(wt.style,B);pt&&X.addLinkAttributes(wt,gt.href,gt.newWindow),bt&&gt.dataId&&this.setupStorage(wt,gt.dataId,Ct,bt)}static render(wt){var J;const Ct=wt.annotationStorage,bt=wt.linkService,it=wt.xfaHtml,X=wt.intent||"display",gt=document.createElement(it.name);it.attributes&&this.setAttributes({html:gt,element:it,intent:X,linkService:bt});const pt=[[it,-1,gt]],et=wt.div;if(et.appendChild(gt),wt.viewport){const G=`matrix(${wt.viewport.transform.join(",")})`;et.style.transform=G}X!=="richText"&&et.setAttribute("class","xfaLayer xfaFont");const B=[];for(;pt.length>0;){const[G,nt,lt]=pt[pt.length-1];if(nt+1===G.children.length){pt.pop();continue}const Z=G.children[++pt[pt.length-1][1]];if(Z===null)continue;const{name:ht}=Z;if(ht==="#text"){const At=document.createTextNode(Z.value);B.push(At),lt.appendChild(At);continue}let dt;if((J=Z==null?void 0:Z.attributes)!=null&&J.xmlns?dt=document.createElementNS(Z.attributes.xmlns,ht):dt=document.createElement(ht),lt.appendChild(dt),Z.attributes&&this.setAttributes({html:dt,element:Z,storage:Ct,intent:X,linkService:bt}),Z.children&&Z.children.length>0)pt.push([Z,-1,dt]);else if(Z.value){const At=document.createTextNode(Z.value);D.XfaText.shouldBuildText(ht)&&B.push(At),dt.appendChild(At)}}for(const G of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))G.setAttribute("readOnly",!0);return{textDivs:B}}static update(wt){const Ct=`matrix(${wt.viewport.transform.join(",")})`;wt.div.style.transform=Ct,wt.div.hidden=!1}}E.XfaLayer=vt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.renderTextLayer=nt;var D=at(1);const vt=1e5,ut=30,wt=.8,Ct=new Map,bt=/^\s+$/g;function it(lt,Z){const ht=Ct.get(lt);if(ht)return ht;Z.save(),Z.font=`${ut}px ${lt}`;const dt=Z.measureText("");let At=dt.fontBoundingBoxAscent,Pt=Math.abs(dt.fontBoundingBoxDescent);if(At){Z.restore();const tt=At/(At+Pt);return Ct.set(lt,tt),tt}Z.strokeStyle="red",Z.clearRect(0,0,ut,ut),Z.strokeText("g",0,0);let V=Z.getImageData(0,0,ut,ut).data;Pt=0;for(let tt=V.length-1-3;tt>=0;tt-=4)if(V[tt]>0){Pt=Math.ceil(tt/4/ut);break}Z.clearRect(0,0,ut,ut),Z.strokeText("A",0,ut),V=Z.getImageData(0,0,ut,ut).data,At=0;for(let tt=0,ot=V.length;tt<ot;tt+=4)if(V[tt]>0){At=ut-Math.floor(tt/4/ut);break}if(Z.restore(),At){const tt=At/(At+Pt);return Ct.set(lt,tt),tt}return Ct.set(lt,wt),wt}function X(lt,Z,ht,dt){const At=document.createElement("span"),Pt=lt._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:Z.str!=="",hasEOL:Z.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:Z.str!=="",hasEOL:Z.hasEOL};lt._textDivs.push(At);const V=D.Util.transform(lt._viewport.transform,Z.transform);let tt=Math.atan2(V[1],V[0]);const ot=ht[Z.fontName];ot.vertical&&(tt+=Math.PI/2);const _t=Math.hypot(V[2],V[3]),ct=_t*it(ot.fontFamily,dt);let Ft,St;tt===0?(Ft=V[4],St=V[5]-ct):(Ft=V[4]+ct*Math.sin(tt),St=V[5]-ct*Math.cos(tt)),At.style.left=`${Ft}px`,At.style.top=`${St}px`,At.style.fontSize=`${_t}px`,At.style.fontFamily=ot.fontFamily,At.setAttribute("role","presentation"),At.textContent=Z.str,At.dir=Z.dir,lt._fontInspectorEnabled&&(At.dataset.fontName=Z.fontName),tt!==0&&(Pt.angle=tt*(180/Math.PI));let Lt=!1;if(Z.str.length>1||lt._enhanceTextSelection&&bt.test(Z.str))Lt=!0;else if(Z.str!==" "&&Z.transform[0]!==Z.transform[3]){const $t=Math.abs(Z.transform[0]),Dt=Math.abs(Z.transform[3]);$t!==Dt&&Math.max($t,Dt)/Math.min($t,Dt)>1.5&&(Lt=!0)}if(Lt&&(ot.vertical?Pt.canvasWidth=Z.height*lt._viewport.scale:Pt.canvasWidth=Z.width*lt._viewport.scale),lt._textDivProperties.set(At,Pt),lt._textContentStream&&lt._layoutText(At),lt._enhanceTextSelection&&Pt.hasText){let $t=1,Dt=0;tt!==0&&($t=Math.cos(tt),Dt=Math.sin(tt));const jt=(ot.vertical?Z.height:Z.width)*lt._viewport.scale,Nt=_t;let qt,rt;tt!==0?(qt=[$t,Dt,-Dt,$t,Ft,St],rt=D.Util.getAxialAlignedBoundingBox([0,0,jt,Nt],qt)):rt=[Ft,St,Ft+jt,St+Nt],lt._bounds.push({left:rt[0],top:rt[1],right:rt[2],bottom:rt[3],div:At,size:[jt,Nt],m:qt})}}function gt(lt){if(lt._canceled)return;const Z=lt._textDivs,ht=lt._capability,dt=Z.length;if(dt>vt){lt._renderingDone=!0,ht.resolve();return}if(!lt._textContentStream)for(let At=0;At<dt;At++)lt._layoutText(Z[At]);lt._renderingDone=!0,ht.resolve()}function pt(lt,Z,ht){let dt=0;for(let At=0;At<ht;At++){const Pt=lt[Z++];Pt>0&&(dt=dt?Math.min(Pt,dt):Pt)}return dt}function et(lt){const Z=lt._bounds,ht=lt._viewport,dt=B(ht.width,ht.height,Z);for(let At=0;At<dt.length;At++){const Pt=Z[At].div,V=lt._textDivProperties.get(Pt);if(V.angle===0){V.paddingLeft=Z[At].left-dt[At].left,V.paddingTop=Z[At].top-dt[At].top,V.paddingRight=dt[At].right-Z[At].right,V.paddingBottom=dt[At].bottom-Z[At].bottom,lt._textDivProperties.set(Pt,V);continue}const tt=dt[At],ot=Z[At],_t=ot.m,ct=_t[0],Ft=_t[1],St=[[0,0],[0,ot.size[1]],[ot.size[0],0],ot.size],Lt=new Float64Array(64);for(let Dt=0,jt=St.length;Dt<jt;Dt++){const Nt=D.Util.applyTransform(St[Dt],_t);Lt[Dt+0]=ct&&(tt.left-Nt[0])/ct,Lt[Dt+4]=Ft&&(tt.top-Nt[1])/Ft,Lt[Dt+8]=ct&&(tt.right-Nt[0])/ct,Lt[Dt+12]=Ft&&(tt.bottom-Nt[1])/Ft,Lt[Dt+16]=Ft&&(tt.left-Nt[0])/-Ft,Lt[Dt+20]=ct&&(tt.top-Nt[1])/ct,Lt[Dt+24]=Ft&&(tt.right-Nt[0])/-Ft,Lt[Dt+28]=ct&&(tt.bottom-Nt[1])/ct,Lt[Dt+32]=ct&&(tt.left-Nt[0])/-ct,Lt[Dt+36]=Ft&&(tt.top-Nt[1])/-Ft,Lt[Dt+40]=ct&&(tt.right-Nt[0])/-ct,Lt[Dt+44]=Ft&&(tt.bottom-Nt[1])/-Ft,Lt[Dt+48]=Ft&&(tt.left-Nt[0])/Ft,Lt[Dt+52]=ct&&(tt.top-Nt[1])/-ct,Lt[Dt+56]=Ft&&(tt.right-Nt[0])/Ft,Lt[Dt+60]=ct&&(tt.bottom-Nt[1])/-ct}const $t=1+Math.min(Math.abs(ct),Math.abs(Ft));V.paddingLeft=pt(Lt,32,16)/$t,V.paddingTop=pt(Lt,48,16)/$t,V.paddingRight=pt(Lt,0,16)/$t,V.paddingBottom=pt(Lt,16,16)/$t,lt._textDivProperties.set(Pt,V)}}function B(lt,Z,ht){const dt=ht.map(function(Pt,V){return{x1:Pt.left,y1:Pt.top,x2:Pt.right,y2:Pt.bottom,index:V,x1New:void 0,x2New:void 0}});J(lt,dt);const At=new Array(ht.length);for(const Pt of dt){const V=Pt.index;At[V]={left:Pt.x1New,top:0,right:Pt.x2New,bottom:0}}ht.map(function(Pt,V){const tt=At[V],ot=dt[V];ot.x1=Pt.top,ot.y1=lt-tt.right,ot.x2=Pt.bottom,ot.y2=lt-tt.left,ot.index=V,ot.x1New=void 0,ot.x2New=void 0}),J(Z,dt);for(const Pt of dt){const V=Pt.index;At[V].top=Pt.x1New,At[V].bottom=Pt.x2New}return At}function J(lt,Z){Z.sort(function(At,Pt){return At.x1-Pt.x1||At.index-Pt.index});const dt=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const At of Z){let Pt=0;for(;Pt<dt.length&&dt[Pt].end<=At.y1;)Pt++;let V=dt.length-1;for(;V>=0&&dt[V].start>=At.y2;)V--;let tt,ot,_t,ct,Ft=-1/0;for(_t=Pt;_t<=V;_t++){tt=dt[_t],ot=tt.boundary;let $t;ot.x2>At.x1?$t=ot.index>At.index?ot.x1New:At.x1:ot.x2New===void 0?$t=(ot.x2+At.x1)/2:$t=ot.x2New,$t>Ft&&(Ft=$t)}for(At.x1New=Ft,_t=Pt;_t<=V;_t++)tt=dt[_t],ot=tt.boundary,ot.x2New===void 0?ot.x2>At.x1?ot.index>At.index&&(ot.x2New=ot.x2):ot.x2New=Ft:ot.x2New>Ft&&(ot.x2New=Math.max(Ft,ot.x2));const St=[];let Lt=null;for(_t=Pt;_t<=V;_t++){tt=dt[_t],ot=tt.boundary;const $t=ot.x2>At.x2?ot:At;Lt===$t?St[St.length-1].end=tt.end:(St.push({start:tt.start,end:tt.end,boundary:$t}),Lt=$t)}for(dt[Pt].start<At.y1&&(St[0].start=At.y1,St.unshift({start:dt[Pt].start,end:At.y1,boundary:dt[Pt].boundary})),At.y2<dt[V].end&&(St[St.length-1].end=At.y2,St.push({start:At.y2,end:dt[V].end,boundary:dt[V].boundary})),_t=Pt;_t<=V;_t++){if(tt=dt[_t],ot=tt.boundary,ot.x2New!==void 0)continue;let $t=!1;for(ct=Pt-1;!$t&&ct>=0&&dt[ct].start>=ot.y1;ct--)$t=dt[ct].boundary===ot;for(ct=V+1;!$t&&ct<dt.length&&dt[ct].end<=ot.y2;ct++)$t=dt[ct].boundary===ot;for(ct=0;!$t&&ct<St.length;ct++)$t=St[ct].boundary===ot;$t||(ot.x2New=Ft)}Array.prototype.splice.apply(dt,[Pt,V-Pt+1].concat(St))}for(const At of dt){const Pt=At.boundary;Pt.x2New===void 0&&(Pt.x2New=Math.max(lt,Pt.x2))}}class G{constructor({textContent:Z,textContentStream:ht,container:dt,viewport:At,textDivs:Pt,textContentItemsStr:V,enhanceTextSelection:tt}){var ot;this._textContent=Z,this._textContentStream=ht,this._container=dt,this._document=dt.ownerDocument,this._viewport=At,this._textDivs=Pt||[],this._textContentItemsStr=V||[],this._enhanceTextSelection=!!tt,this._fontInspectorEnabled=!!((ot=globalThis.FontInspector)!=null&&ot.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,D.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new D.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(Z,ht){for(let dt=0,At=Z.length;dt<At;dt++){if(Z[dt].str===void 0){if(Z[dt].type==="beginMarkedContentProps"||Z[dt].type==="beginMarkedContent"){const Pt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Z[dt].id!==null&&this._container.setAttribute("id",`${Z[dt].id}`),Pt.appendChild(this._container)}else Z[dt].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Z[dt].str),X(this,Z[dt],ht,this._layoutTextCtx)}}_layoutText(Z){const ht=this._textDivProperties.get(Z);let dt="";if(ht.canvasWidth!==0&&ht.hasText){const{fontSize:At,fontFamily:Pt}=Z.style;(At!==this._layoutTextLastFontSize||Pt!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${At} ${Pt}`,this._layoutTextLastFontSize=At,this._layoutTextLastFontFamily=Pt);const{width:V}=this._layoutTextCtx.measureText(Z.textContent);if(V>0){const tt=ht.canvasWidth/V;this._enhanceTextSelection&&(ht.scale=tt),dt=`scaleX(${tt})`}}if(ht.angle!==0&&(dt=`rotate(${ht.angle}deg) ${dt}`),dt.length>0&&(this._enhanceTextSelection&&(ht.originalTransform=dt),Z.style.transform=dt),ht.hasText&&this._container.appendChild(Z),ht.hasEOL){const At=document.createElement("br");At.setAttribute("role","presentation"),this._container.appendChild(At)}}_render(Z=0){const ht=(0,D.createPromiseCapability)();let dt=Object.create(null);const At=this._document.createElement("canvas");if(At.height=At.width=ut,this._layoutTextCtx=At.getContext("2d",{alpha:!1}),this._textContent){const Pt=this._textContent.items,V=this._textContent.styles;this._processItems(Pt,V),ht.resolve()}else if(this._textContentStream){const Pt=()=>{this._reader.read().then(({value:V,done:tt})=>{if(tt){ht.resolve();return}Object.assign(dt,V.styles),this._processItems(V.items,dt),Pt()},ht.reject)};this._reader=this._textContentStream.getReader(),Pt()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');ht.promise.then(()=>{dt=null,Z?this._renderTimer=setTimeout(()=>{gt(this),this._renderTimer=null},Z):gt(this)},this._capability.reject)}expandTextDivs(Z=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(et(this),this._bounds=null);const ht=[],dt=[];for(let At=0,Pt=this._textDivs.length;At<Pt;At++){const V=this._textDivs[At],tt=this._textDivProperties.get(V);!tt.hasText||(Z?(ht.length=0,dt.length=0,tt.originalTransform&&ht.push(tt.originalTransform),tt.paddingTop>0?(dt.push(`${tt.paddingTop}px`),ht.push(`translateY(${-tt.paddingTop}px)`)):dt.push(0),tt.paddingRight>0?dt.push(`${tt.paddingRight/tt.scale}px`):dt.push(0),tt.paddingBottom>0?dt.push(`${tt.paddingBottom}px`):dt.push(0),tt.paddingLeft>0?(dt.push(`${tt.paddingLeft/tt.scale}px`),ht.push(`translateX(${-tt.paddingLeft/tt.scale}px)`)):dt.push(0),V.style.padding=dt.join(" "),ht.length&&(V.style.transform=ht.join(" "))):(V.style.padding=null,V.style.transform=tt.originalTransform))}}}function nt(lt){const Z=new G({textContent:lt.textContent,textContentStream:lt.textContentStream,container:lt.container,viewport:lt.viewport,textDivs:lt.textDivs,textContentItemsStr:lt.textContentItemsStr,enhanceTextSelection:lt.enhanceTextSelection});return Z._render(lt.timeout),Z}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.SVGGraphics=void 0;var D=at(1),vt=at(5),ut=at(3);let wt=class{constructor(){(0,D.unreachable)("Not implemented: SVGGraphics")}};E.SVGGraphics=wt;{let lt=function(V){let tt=[];const ot=[];for(const _t of V){if(_t.fn==="save"){tt.push({fnId:92,fn:"group",items:[]}),ot.push(tt),tt=tt[tt.length-1].items;continue}_t.fn==="restore"?tt=ot.pop():tt.push(_t)}return tt},Z=function(V){if(Number.isInteger(V))return V.toString();const tt=V.toFixed(10);let ot=tt.length-1;if(tt[ot]!=="0")return tt;do ot--;while(tt[ot]==="0");return tt.substring(0,tt[ot]==="."?ot:ot+1)},ht=function(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${Z(V[0])} ${Z(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const tt=Math.acos(V[0])*180/Math.PI;return`rotate(${Z(tt)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${Z(V[4])} ${Z(V[5])})`;return`matrix(${Z(V[0])} ${Z(V[1])} ${Z(V[2])} ${Z(V[3])} ${Z(V[4])} ${Z(V[5])})`};var Ct=lt,bt=Z,it=ht;const X={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},gt="http://www.w3.org/XML/1998/namespace",pt="http://www.w3.org/1999/xlink",et=["butt","round","square"],B=["miter","round","bevel"],J=function(V,tt="",ot=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!ot)return URL.createObjectURL(new Blob([V],{type:tt}));const _t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ct=`data:${tt};base64,`;for(let Ft=0,St=V.length;Ft<St;Ft+=3){const Lt=V[Ft]&255,$t=V[Ft+1]&255,Dt=V[Ft+2]&255,jt=Lt>>2,Nt=(Lt&3)<<4|$t>>4,qt=Ft+1<St?($t&15)<<2|Dt>>6:64,rt=Ft+2<St?Dt&63:64;ct+=_t[jt]+_t[Nt]+_t[qt]+_t[rt]}return ct},G=function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),tt=12,ot=new Int32Array(256);for(let Dt=0;Dt<256;Dt++){let jt=Dt;for(let Nt=0;Nt<8;Nt++)jt&1?jt=3988292384^jt>>1&2147483647:jt=jt>>1&2147483647;ot[Dt]=jt}function _t(Dt,jt,Nt){let qt=-1;for(let rt=jt;rt<Nt;rt++){const W=(qt^Dt[rt])&255,U=ot[W];qt=qt>>>8^U}return qt^-1}function ct(Dt,jt,Nt,qt){let rt=qt;const W=jt.length;Nt[rt]=W>>24&255,Nt[rt+1]=W>>16&255,Nt[rt+2]=W>>8&255,Nt[rt+3]=W&255,rt+=4,Nt[rt]=Dt.charCodeAt(0)&255,Nt[rt+1]=Dt.charCodeAt(1)&255,Nt[rt+2]=Dt.charCodeAt(2)&255,Nt[rt+3]=Dt.charCodeAt(3)&255,rt+=4,Nt.set(jt,rt),rt+=jt.length;const U=_t(Nt,qt+4,rt);Nt[rt]=U>>24&255,Nt[rt+1]=U>>16&255,Nt[rt+2]=U>>8&255,Nt[rt+3]=U&255}function Ft(Dt,jt,Nt){let qt=1,rt=0;for(let W=jt;W<Nt;++W)qt=(qt+(Dt[W]&255))%65521,rt=(rt+qt)%65521;return rt<<16|qt}function St(Dt){if(!ut.isNodeJS)return Lt(Dt);try{let jt;parseInt(process.versions.node)>=8?jt=Dt:jt=Buffer.from(Dt);const Nt=require("zlib").deflateSync(jt,{level:9});return Nt instanceof Uint8Array?Nt:new Uint8Array(Nt)}catch(jt){(0,D.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+jt)}return Lt(Dt)}function Lt(Dt){let jt=Dt.length;const Nt=65535,qt=Math.ceil(jt/Nt),rt=new Uint8Array(2+jt+qt*5+4);let W=0;rt[W++]=120,rt[W++]=156;let U=0;for(;jt>Nt;)rt[W++]=0,rt[W++]=255,rt[W++]=255,rt[W++]=0,rt[W++]=0,rt.set(Dt.subarray(U,U+Nt),W),W+=Nt,U+=Nt,jt-=Nt;rt[W++]=1,rt[W++]=jt&255,rt[W++]=jt>>8&255,rt[W++]=~jt&65535&255,rt[W++]=(~jt&65535)>>8&255,rt.set(Dt.subarray(U),W),W+=Dt.length-U;const Q=Ft(Dt,0,Dt.length);return rt[W++]=Q>>24&255,rt[W++]=Q>>16&255,rt[W++]=Q>>8&255,rt[W++]=Q&255,rt}function $t(Dt,jt,Nt,qt){const rt=Dt.width,W=Dt.height;let U,Q,A;const R=Dt.data;switch(jt){case D.ImageKind.GRAYSCALE_1BPP:Q=0,U=1,A=rt+7>>3;break;case D.ImageKind.RGB_24BPP:Q=2,U=8,A=rt*3;break;case D.ImageKind.RGBA_32BPP:Q=6,U=8,A=rt*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+A)*W);let K=0,Y=0;for(let xt=0;xt<W;++xt)q[K++]=0,q.set(R.subarray(Y,Y+A),K),Y+=A,K+=A;if(jt===D.ImageKind.GRAYSCALE_1BPP&&qt){K=0;for(let xt=0;xt<W;xt++){K++;for(let Ot=0;Ot<A;Ot++)q[K++]^=255}}const ft=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,W>>24&255,W>>16&255,W>>8&255,W&255,U,Q,0,0,0]),mt=St(q),kt=V.length+tt*3+ft.length+mt.length,yt=new Uint8Array(kt);let Rt=0;return yt.set(V,Rt),Rt+=V.length,ct("IHDR",ft,yt,Rt),Rt+=tt+ft.length,ct("IDATA",mt,yt,Rt),Rt+=tt+mt.length,ct("IEND",new Uint8Array(0),yt,Rt),J(yt,"image/png",Nt)}return function(jt,Nt,qt){const rt=jt.kind===void 0?D.ImageKind.GRAYSCALE_1BPP:jt.kind;return $t(jt,rt,Nt,qt)}}();class nt{constructor(){this.fontSizeScale=1,this.fontWeight=X.fontWeight,this.fontSize=0,this.textMatrix=D.IDENTITY_MATRIX,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=D.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=X.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(tt,ot){this.x=tt,this.y=ot}}let dt=0,At=0,Pt=0;E.SVGGraphics=wt=class{constructor(V,tt,ot=!1){this.svgFactory=new vt.DOMSVGFactory,this.current=new nt,this.transformMatrix=D.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=V,this.objs=tt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ot,this._operatorIdMapping=[];for(const _t in D.OPS)this._operatorIdMapping[D.OPS[_t]]=_t}save(){this.transformStack.push(this.transformMatrix);const V=this.current;this.extraStack.push(V),this.current=V.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(V){this.save(),this.executeOpTree(V),this.restore()}loadDependencies(V){const tt=V.fnArray,ot=V.argsArray;for(let _t=0,ct=tt.length;_t<ct;_t++)if(tt[_t]===D.OPS.dependency)for(const Ft of ot[_t]){const St=Ft.startsWith("g_")?this.commonObjs:this.objs,Lt=new Promise($t=>{St.get(Ft,$t)});this.current.dependencies.push(Lt)}return Promise.all(this.current.dependencies)}transform(V,tt,ot,_t,ct,Ft){const St=[V,tt,ot,_t,ct,Ft];this.transformMatrix=D.Util.transform(this.transformMatrix,St),this.tgrp=null}getSVG(V,tt){this.viewport=tt;const ot=this._initialize(tt);return this.loadDependencies(V).then(()=>(this.transformMatrix=D.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(V)),ot))}convertOpList(V){const tt=this._operatorIdMapping,ot=V.argsArray,_t=V.fnArray,ct=[];for(let Ft=0,St=_t.length;Ft<St;Ft++){const Lt=_t[Ft];ct.push({fnId:Lt,fn:tt[Lt],args:ot[Ft]})}return lt(ct)}executeOpTree(V){for(const tt of V){const ot=tt.fn,_t=tt.fnId,ct=tt.args;switch(_t|0){case D.OPS.beginText:this.beginText();break;case D.OPS.dependency:break;case D.OPS.setLeading:this.setLeading(ct);break;case D.OPS.setLeadingMoveText:this.setLeadingMoveText(ct[0],ct[1]);break;case D.OPS.setFont:this.setFont(ct);break;case D.OPS.showText:this.showText(ct[0]);break;case D.OPS.showSpacedText:this.showText(ct[0]);break;case D.OPS.endText:this.endText();break;case D.OPS.moveText:this.moveText(ct[0],ct[1]);break;case D.OPS.setCharSpacing:this.setCharSpacing(ct[0]);break;case D.OPS.setWordSpacing:this.setWordSpacing(ct[0]);break;case D.OPS.setHScale:this.setHScale(ct[0]);break;case D.OPS.setTextMatrix:this.setTextMatrix(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);break;case D.OPS.setTextRise:this.setTextRise(ct[0]);break;case D.OPS.setTextRenderingMode:this.setTextRenderingMode(ct[0]);break;case D.OPS.setLineWidth:this.setLineWidth(ct[0]);break;case D.OPS.setLineJoin:this.setLineJoin(ct[0]);break;case D.OPS.setLineCap:this.setLineCap(ct[0]);break;case D.OPS.setMiterLimit:this.setMiterLimit(ct[0]);break;case D.OPS.setFillRGBColor:this.setFillRGBColor(ct[0],ct[1],ct[2]);break;case D.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ct[0],ct[1],ct[2]);break;case D.OPS.setStrokeColorN:this.setStrokeColorN(ct);break;case D.OPS.setFillColorN:this.setFillColorN(ct);break;case D.OPS.shadingFill:this.shadingFill(ct[0]);break;case D.OPS.setDash:this.setDash(ct[0],ct[1]);break;case D.OPS.setRenderingIntent:this.setRenderingIntent(ct[0]);break;case D.OPS.setFlatness:this.setFlatness(ct[0]);break;case D.OPS.setGState:this.setGState(ct[0]);break;case D.OPS.fill:this.fill();break;case D.OPS.eoFill:this.eoFill();break;case D.OPS.stroke:this.stroke();break;case D.OPS.fillStroke:this.fillStroke();break;case D.OPS.eoFillStroke:this.eoFillStroke();break;case D.OPS.clip:this.clip("nonzero");break;case D.OPS.eoClip:this.clip("evenodd");break;case D.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case D.OPS.paintImageXObject:this.paintImageXObject(ct[0]);break;case D.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ct[0]);break;case D.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ct[0]);break;case D.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ct[0],ct[1]);break;case D.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case D.OPS.closePath:this.closePath();break;case D.OPS.closeStroke:this.closeStroke();break;case D.OPS.closeFillStroke:this.closeFillStroke();break;case D.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case D.OPS.nextLine:this.nextLine();break;case D.OPS.transform:this.transform(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);break;case D.OPS.constructPath:this.constructPath(ct[0],ct[1]);break;case D.OPS.endPath:this.endPath();break;case 92:this.group(tt.items);break;default:(0,D.warn)(`Unimplemented operator ${ot}`);break}}}setWordSpacing(V){this.current.wordSpacing=V}setCharSpacing(V){this.current.charSpacing=V}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(V,tt,ot,_t,ct,Ft){const St=this.current;St.textMatrix=St.lineMatrix=[V,tt,ot,_t,ct,Ft],St.textMatrixScale=Math.hypot(V,tt),St.x=St.lineX=0,St.y=St.lineY=0,St.xcoords=[],St.ycoords=[],St.tspan=this.svgFactory.createElement("svg:tspan"),St.tspan.setAttributeNS(null,"font-family",St.fontFamily),St.tspan.setAttributeNS(null,"font-size",`${Z(St.fontSize)}px`),St.tspan.setAttributeNS(null,"y",Z(-St.y)),St.txtElement=this.svgFactory.createElement("svg:text"),St.txtElement.appendChild(St.tspan)}beginText(){const V=this.current;V.x=V.lineX=0,V.y=V.lineY=0,V.textMatrix=D.IDENTITY_MATRIX,V.lineMatrix=D.IDENTITY_MATRIX,V.textMatrixScale=1,V.tspan=this.svgFactory.createElement("svg:tspan"),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtgrp=this.svgFactory.createElement("svg:g"),V.xcoords=[],V.ycoords=[]}moveText(V,tt){const ot=this.current;ot.x=ot.lineX+=V,ot.y=ot.lineY+=tt,ot.xcoords=[],ot.ycoords=[],ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.tspan.setAttributeNS(null,"font-family",ot.fontFamily),ot.tspan.setAttributeNS(null,"font-size",`${Z(ot.fontSize)}px`),ot.tspan.setAttributeNS(null,"y",Z(-ot.y))}showText(V){const tt=this.current,ot=tt.font,_t=tt.fontSize;if(_t===0)return;const ct=tt.fontSizeScale,Ft=tt.charSpacing,St=tt.wordSpacing,Lt=tt.fontDirection,$t=tt.textHScale*Lt,Dt=ot.vertical,jt=Dt?1:-1,Nt=ot.defaultVMetrics,qt=_t*tt.fontMatrix[0];let rt=0;for(const Q of V){if(Q===null){rt+=Lt*St;continue}else if(typeof Q=="number"){rt+=jt*Q*_t/1e3;continue}const A=(Q.isSpace?St:0)+Ft,R=Q.fontChar;let q,K,Y=Q.width;if(Dt){let mt;const kt=Q.vmetric||Nt;mt=Q.vmetric?kt[1]:Y*.5,mt=-mt*qt;const yt=kt[2]*qt;Y=kt?-kt[0]:Y,q=mt/ct,K=(rt+yt)/ct}else q=rt/ct,K=0;(Q.isInFont||ot.missingFile)&&(tt.xcoords.push(tt.x+q),Dt&&tt.ycoords.push(-tt.y+K),tt.tspan.textContent+=R);let ft;Dt?ft=Y*qt-A*Lt:ft=Y*qt+A*Lt,rt+=ft}tt.tspan.setAttributeNS(null,"x",tt.xcoords.map(Z).join(" ")),Dt?tt.tspan.setAttributeNS(null,"y",tt.ycoords.map(Z).join(" ")):tt.tspan.setAttributeNS(null,"y",Z(-tt.y)),Dt?tt.y-=rt:tt.x+=rt*$t,tt.tspan.setAttributeNS(null,"font-family",tt.fontFamily),tt.tspan.setAttributeNS(null,"font-size",`${Z(tt.fontSize)}px`),tt.fontStyle!==X.fontStyle&&tt.tspan.setAttributeNS(null,"font-style",tt.fontStyle),tt.fontWeight!==X.fontWeight&&tt.tspan.setAttributeNS(null,"font-weight",tt.fontWeight);const W=tt.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;if(W===D.TextRenderingMode.FILL||W===D.TextRenderingMode.FILL_STROKE?(tt.fillColor!==X.fillColor&&tt.tspan.setAttributeNS(null,"fill",tt.fillColor),tt.fillAlpha<1&&tt.tspan.setAttributeNS(null,"fill-opacity",tt.fillAlpha)):tt.textRenderingMode===D.TextRenderingMode.ADD_TO_PATH?tt.tspan.setAttributeNS(null,"fill","transparent"):tt.tspan.setAttributeNS(null,"fill","none"),W===D.TextRenderingMode.STROKE||W===D.TextRenderingMode.FILL_STROKE){const Q=1/(tt.textMatrixScale||1);this._setStrokeAttributes(tt.tspan,Q)}let U=tt.textMatrix;tt.textRise!==0&&(U=U.slice(),U[5]+=tt.textRise),tt.txtElement.setAttributeNS(null,"transform",`${ht(U)} scale(${Z($t)}, -1)`),tt.txtElement.setAttributeNS(gt,"xml:space","preserve"),tt.txtElement.appendChild(tt.tspan),tt.txtgrp.appendChild(tt.txtElement),this._ensureTransformGroup().appendChild(tt.txtElement)}setLeadingMoveText(V,tt){this.setLeading(-tt),this.moveText(V,tt)}addFontStyle(V){if(!V.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const tt=J(V.data,V.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${V.loadedName}"; src: url(${tt}); }
`}setFont(V){const tt=this.current,ot=this.commonObjs.get(V[0]);let _t=V[1];tt.font=ot,this.embedFonts&&!ot.missingFile&&!this.embeddedFonts[ot.loadedName]&&(this.addFontStyle(ot),this.embeddedFonts[ot.loadedName]=ot),tt.fontMatrix=ot.fontMatrix||D.FONT_IDENTITY_MATRIX;let ct="normal";ot.black?ct="900":ot.bold&&(ct="bold");const Ft=ot.italic?"italic":"normal";_t<0?(_t=-_t,tt.fontDirection=-1):tt.fontDirection=1,tt.fontSize=_t,tt.fontFamily=ot.loadedName,tt.fontWeight=ct,tt.fontStyle=Ft,tt.tspan=this.svgFactory.createElement("svg:tspan"),tt.tspan.setAttributeNS(null,"y",Z(-tt.y)),tt.xcoords=[],tt.ycoords=[]}endText(){var tt;const V=this.current;V.textRenderingMode&D.TextRenderingMode.ADD_TO_PATH_FLAG&&((tt=V.txtElement)==null?void 0:tt.hasChildNodes())&&(V.element=V.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(V){V>0&&(this.current.lineWidth=V)}setLineCap(V){this.current.lineCap=et[V]}setLineJoin(V){this.current.lineJoin=B[V]}setMiterLimit(V){this.current.miterLimit=V}setStrokeAlpha(V){this.current.strokeAlpha=V}setStrokeRGBColor(V,tt,ot){this.current.strokeColor=D.Util.makeHexColor(V,tt,ot)}setFillAlpha(V){this.current.fillAlpha=V}setFillRGBColor(V,tt,ot){this.current.fillColor=D.Util.makeHexColor(V,tt,ot),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(V){this.current.strokeColor=this._makeColorN_Pattern(V)}setFillColorN(V){this.current.fillColor=this._makeColorN_Pattern(V)}shadingFill(V){const tt=this.viewport.width,ot=this.viewport.height,_t=D.Util.inverseTransform(this.transformMatrix),ct=D.Util.applyTransform([0,0],_t),Ft=D.Util.applyTransform([0,ot],_t),St=D.Util.applyTransform([tt,0],_t),Lt=D.Util.applyTransform([tt,ot],_t),$t=Math.min(ct[0],Ft[0],St[0],Lt[0]),Dt=Math.min(ct[1],Ft[1],St[1],Lt[1]),jt=Math.max(ct[0],Ft[0],St[0],Lt[0]),Nt=Math.max(ct[1],Ft[1],St[1],Lt[1]),qt=this.svgFactory.createElement("svg:rect");qt.setAttributeNS(null,"x",$t),qt.setAttributeNS(null,"y",Dt),qt.setAttributeNS(null,"width",jt-$t),qt.setAttributeNS(null,"height",Nt-Dt),qt.setAttributeNS(null,"fill",this._makeShadingPattern(V)),this.current.fillAlpha<1&&qt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(qt)}_makeColorN_Pattern(V){return V[0]==="TilingPattern"?this._makeTilingPattern(V):this._makeShadingPattern(V)}_makeTilingPattern(V){const tt=V[1],ot=V[2],_t=V[3]||D.IDENTITY_MATRIX,[ct,Ft,St,Lt]=V[4],$t=V[5],Dt=V[6],jt=V[7],Nt=`shading${Pt++}`,[qt,rt,W,U]=D.Util.normalizeRect([...D.Util.applyTransform([ct,Ft],_t),...D.Util.applyTransform([St,Lt],_t)]),[Q,A]=D.Util.singularValueDecompose2dScale(_t),R=$t*Q,q=Dt*A,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",Nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",R),K.setAttributeNS(null,"height",q),K.setAttributeNS(null,"x",`${qt}`),K.setAttributeNS(null,"y",`${rt}`);const Y=this.svg,ft=this.transformMatrix,mt=this.current.fillColor,kt=this.current.strokeColor,yt=this.svgFactory.create(W-qt,U-rt);if(this.svg=yt,this.transformMatrix=_t,jt===2){const Rt=D.Util.makeHexColor(...tt);this.current.fillColor=Rt,this.current.strokeColor=Rt}return this.executeOpTree(this.convertOpList(ot)),this.svg=Y,this.transformMatrix=ft,this.current.fillColor=mt,this.current.strokeColor=kt,K.appendChild(yt.childNodes[0]),this.defs.appendChild(K),`url(#${Nt})`}_makeShadingPattern(V){switch(typeof V=="string"&&(V=this.objs.get(V)),V[0]){case"RadialAxial":const tt=`shading${Pt++}`,ot=V[3];let _t;switch(V[1]){case"axial":const ct=V[4],Ft=V[5];_t=this.svgFactory.createElement("svg:linearGradient"),_t.setAttributeNS(null,"id",tt),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"x1",ct[0]),_t.setAttributeNS(null,"y1",ct[1]),_t.setAttributeNS(null,"x2",Ft[0]),_t.setAttributeNS(null,"y2",Ft[1]);break;case"radial":const St=V[4],Lt=V[5],$t=V[6],Dt=V[7];_t=this.svgFactory.createElement("svg:radialGradient"),_t.setAttributeNS(null,"id",tt),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"cx",Lt[0]),_t.setAttributeNS(null,"cy",Lt[1]),_t.setAttributeNS(null,"r",Dt),_t.setAttributeNS(null,"fx",St[0]),_t.setAttributeNS(null,"fy",St[1]),_t.setAttributeNS(null,"fr",$t);break;default:throw new Error(`Unknown RadialAxial type: ${V[1]}`)}for(const ct of ot){const Ft=this.svgFactory.createElement("svg:stop");Ft.setAttributeNS(null,"offset",ct[0]),Ft.setAttributeNS(null,"stop-color",ct[1]),_t.appendChild(Ft)}return this.defs.appendChild(_t),`url(#${tt})`;case"Mesh":return(0,D.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${V[0]}`)}}setDash(V,tt){this.current.dashArray=V,this.current.dashPhase=tt}constructPath(V,tt){const ot=this.current;let _t=ot.x,ct=ot.y,Ft=[],St=0;for(const Lt of V)switch(Lt|0){case D.OPS.rectangle:_t=tt[St++],ct=tt[St++];const $t=tt[St++],Dt=tt[St++],jt=_t+$t,Nt=ct+Dt;Ft.push("M",Z(_t),Z(ct),"L",Z(jt),Z(ct),"L",Z(jt),Z(Nt),"L",Z(_t),Z(Nt),"Z");break;case D.OPS.moveTo:_t=tt[St++],ct=tt[St++],Ft.push("M",Z(_t),Z(ct));break;case D.OPS.lineTo:_t=tt[St++],ct=tt[St++],Ft.push("L",Z(_t),Z(ct));break;case D.OPS.curveTo:_t=tt[St+4],ct=tt[St+5],Ft.push("C",Z(tt[St]),Z(tt[St+1]),Z(tt[St+2]),Z(tt[St+3]),Z(_t),Z(ct)),St+=6;break;case D.OPS.curveTo2:Ft.push("C",Z(_t),Z(ct),Z(tt[St]),Z(tt[St+1]),Z(tt[St+2]),Z(tt[St+3])),_t=tt[St+2],ct=tt[St+3],St+=4;break;case D.OPS.curveTo3:_t=tt[St+2],ct=tt[St+3],Ft.push("C",Z(tt[St]),Z(tt[St+1]),Z(_t),Z(ct),Z(_t),Z(ct)),St+=4;break;case D.OPS.closePath:Ft.push("Z");break}Ft=Ft.join(" "),ot.path&&V.length>0&&V[0]!==D.OPS.rectangle&&V[0]!==D.OPS.moveTo?Ft=ot.path.getAttributeNS(null,"d")+Ft:(ot.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(ot.path)),ot.path.setAttributeNS(null,"d",Ft),ot.path.setAttributeNS(null,"fill","none"),ot.element=ot.path,ot.setCurrentPoint(_t,ct)}endPath(){const V=this.current;if(V.path=null,!this.pendingClip)return;if(!V.element){this.pendingClip=null;return}const tt=`clippath${dt++}`,ot=this.svgFactory.createElement("svg:clipPath");ot.setAttributeNS(null,"id",tt),ot.setAttributeNS(null,"transform",ht(this.transformMatrix));const _t=V.element.cloneNode(!0);if(this.pendingClip==="evenodd"?_t.setAttributeNS(null,"clip-rule","evenodd"):_t.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ot.appendChild(_t),this.defs.appendChild(ot),V.activeClipUrl){V.clipGroup=null;for(const ct of this.extraStack)ct.clipGroup=null;ot.setAttributeNS(null,"clip-path",V.activeClipUrl)}V.activeClipUrl=`url(#${tt})`,this.tgrp=null}clip(V){this.pendingClip=V}closePath(){const V=this.current;if(V.path){const tt=`${V.path.getAttributeNS(null,"d")}Z`;V.path.setAttributeNS(null,"d",tt)}}setLeading(V){this.current.leading=-V}setTextRise(V){this.current.textRise=V}setTextRenderingMode(V){this.current.textRenderingMode=V}setHScale(V){this.current.textHScale=V/100}setRenderingIntent(V){}setFlatness(V){}setGState(V){for(const[tt,ot]of V)switch(tt){case"LW":this.setLineWidth(ot);break;case"LC":this.setLineCap(ot);break;case"LJ":this.setLineJoin(ot);break;case"ML":this.setMiterLimit(ot);break;case"D":this.setDash(ot[0],ot[1]);break;case"RI":this.setRenderingIntent(ot);break;case"FL":this.setFlatness(ot);break;case"Font":this.setFont(ot);break;case"CA":this.setStrokeAlpha(ot);break;case"ca":this.setFillAlpha(ot);break;default:(0,D.warn)(`Unimplemented graphic state operator ${tt}`);break}}fill(){const V=this.current;V.element&&(V.element.setAttributeNS(null,"fill",V.fillColor),V.element.setAttributeNS(null,"fill-opacity",V.fillAlpha),this.endPath())}stroke(){const V=this.current;V.element&&(this._setStrokeAttributes(V.element),V.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(V,tt=1){const ot=this.current;let _t=ot.dashArray;tt!==1&&_t.length>0&&(_t=_t.map(function(ct){return tt*ct})),V.setAttributeNS(null,"stroke",ot.strokeColor),V.setAttributeNS(null,"stroke-opacity",ot.strokeAlpha),V.setAttributeNS(null,"stroke-miterlimit",Z(ot.miterLimit)),V.setAttributeNS(null,"stroke-linecap",ot.lineCap),V.setAttributeNS(null,"stroke-linejoin",ot.lineJoin),V.setAttributeNS(null,"stroke-width",Z(tt*ot.lineWidth)+"px"),V.setAttributeNS(null,"stroke-dasharray",_t.map(Z).join(" ")),V.setAttributeNS(null,"stroke-dashoffset",Z(tt*ot.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width","1px"),V.setAttributeNS(null,"height","1px"),V.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(V)}paintImageXObject(V){const tt=V.startsWith("g_")?this.commonObjs.get(V):this.objs.get(V);if(!tt){(0,D.warn)(`Dependent image with object ID ${V} is not ready yet`);return}this.paintInlineImageXObject(tt)}paintInlineImageXObject(V,tt){const ot=V.width,_t=V.height,ct=G(V,this.forceDataSchema,!!tt),Ft=this.svgFactory.createElement("svg:rect");Ft.setAttributeNS(null,"x","0"),Ft.setAttributeNS(null,"y","0"),Ft.setAttributeNS(null,"width",Z(ot)),Ft.setAttributeNS(null,"height",Z(_t)),this.current.element=Ft,this.clip("nonzero");const St=this.svgFactory.createElement("svg:image");St.setAttributeNS(pt,"xlink:href",ct),St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y",Z(-_t)),St.setAttributeNS(null,"width",Z(ot)+"px"),St.setAttributeNS(null,"height",Z(_t)+"px"),St.setAttributeNS(null,"transform",`scale(${Z(1/ot)} ${Z(-1/_t)})`),tt?tt.appendChild(St):this._ensureTransformGroup().appendChild(St)}paintImageMaskXObject(V){const tt=this.current,ot=V.width,_t=V.height,ct=tt.fillColor;tt.maskId=`mask${At++}`;const Ft=this.svgFactory.createElement("svg:mask");Ft.setAttributeNS(null,"id",tt.maskId);const St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y","0"),St.setAttributeNS(null,"width",Z(ot)),St.setAttributeNS(null,"height",Z(_t)),St.setAttributeNS(null,"fill",ct),St.setAttributeNS(null,"mask",`url(#${tt.maskId})`),this.defs.appendChild(Ft),this._ensureTransformGroup().appendChild(St),this.paintInlineImageXObject(V,Ft)}paintFormXObjectBegin(V,tt){if(Array.isArray(V)&&V.length===6&&this.transform(V[0],V[1],V[2],V[3],V[4],V[5]),tt){const ot=tt[2]-tt[0],_t=tt[3]-tt[1],ct=this.svgFactory.createElement("svg:rect");ct.setAttributeNS(null,"x",tt[0]),ct.setAttributeNS(null,"y",tt[1]),ct.setAttributeNS(null,"width",Z(ot)),ct.setAttributeNS(null,"height",Z(_t)),this.current.element=ct,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(V){const tt=this.svgFactory.create(V.width,V.height),ot=this.svgFactory.createElement("svg:defs");tt.appendChild(ot),this.defs=ot;const _t=this.svgFactory.createElement("svg:g");return _t.setAttributeNS(null,"transform",ht(V.transform)),tt.appendChild(_t),this.svg=_t,tt}_ensureClipGroup(){if(!this.current.clipGroup){const V=this.svgFactory.createElement("svg:g");V.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(V),this.current.clipGroup=V}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ht(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNodeStream=void 0;var D=at(1),vt=at(26);const ut=require$$4,wt=require$$4,Ct=require$$4,bt=require$$4,it=/^file:\/\/\/[a-zA-Z]:\//;function X(Z){const ht=bt.parse(Z);return ht.protocol==="file:"||ht.host?ht:/^[a-z]:[/\\]/i.test(Z)?bt.parse(`file:///${Z}`):(ht.host||(ht.protocol="file:"),ht)}class gt{constructor(ht){this.source=ht,this.url=X(ht.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ht.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ht,dt;return(dt=(ht=this._fullRequestReader)==null?void 0:ht._loaded)!=null?dt:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new nt(this):new J(this),this._fullRequestReader}getRangeReader(ht,dt){if(dt<=this._progressiveDataLength)return null;const At=this.isFsUrl?new lt(this,ht,dt):new G(this,ht,dt);return this._rangeRequestReaders.push(At),At}cancelAllRequests(ht){this._fullRequestReader&&this._fullRequestReader.cancel(ht);for(const dt of this._rangeRequestReaders.slice(0))dt.cancel(ht)}}E.PDFNodeStream=gt;class pt{constructor(ht){this._url=ht.url,this._done=!1,this._storedError=null,this.onProgress=null;const dt=ht.source;this._contentLength=dt.length,this._loaded=0,this._filename=null,this._disableRange=dt.disableRange||!1,this._rangeChunkSize=dt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!dt.disableStream,this._isRangeSupported=!dt.disableRange,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)(),this._headersCapability=(0,D.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ht=this._readableStream.read();return ht===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ht.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ht).buffer,done:!1})}cancel(ht){if(!this._readableStream){this._error(ht);return}this._readableStream.destroy(ht)}_error(ht){this._storedError=ht,this._readCapability.resolve()}_setReadableStream(ht){this._readableStream=ht,ht.on("readable",()=>{this._readCapability.resolve()}),ht.on("end",()=>{ht.destroy(),this._done=!0,this._readCapability.resolve()}),ht.on("error",dt=>{this._error(dt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new D.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class et{constructor(ht){this._url=ht.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)();const dt=ht.source;this._isStreamingSupported=!dt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ht=this._readableStream.read();return ht===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ht.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(ht).buffer,done:!1})}cancel(ht){if(!this._readableStream){this._error(ht);return}this._readableStream.destroy(ht)}_error(ht){this._storedError=ht,this._readCapability.resolve()}_setReadableStream(ht){this._readableStream=ht,ht.on("readable",()=>{this._readCapability.resolve()}),ht.on("end",()=>{ht.destroy(),this._done=!0,this._readCapability.resolve()}),ht.on("error",dt=>{this._error(dt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function B(Z,ht){return{protocol:Z.protocol,auth:Z.auth,host:Z.hostname,port:Z.port,path:Z.path,method:"GET",headers:ht}}class J extends pt{constructor(ht){super(ht);const dt=At=>{if(At.statusCode===404){const ot=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot,this._headersCapability.reject(ot);return}this._headersCapability.resolve(),this._setReadableStream(At);const Pt=ot=>this._readableStream.headers[ot.toLowerCase()],{allowRangeRequests:V,suggestedLength:tt}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:Pt,isHttp:ht.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=tt||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(Pt)};this._request=null,this._url.protocol==="http:"?this._request=wt.request(B(this._url,ht.httpHeaders),dt):this._request=Ct.request(B(this._url,ht.httpHeaders),dt),this._request.on("error",At=>{this._storedError=At,this._headersCapability.reject(At)}),this._request.end()}}class G extends et{constructor(ht,dt,At){super(ht),this._httpHeaders={};for(const V in ht.httpHeaders){const tt=ht.httpHeaders[V];typeof tt!="undefined"&&(this._httpHeaders[V]=tt)}this._httpHeaders.Range=`bytes=${dt}-${At-1}`;const Pt=V=>{if(V.statusCode===404){const tt=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=tt;return}this._setReadableStream(V)};this._request=null,this._url.protocol==="http:"?this._request=wt.request(B(this._url,this._httpHeaders),Pt):this._request=Ct.request(B(this._url,this._httpHeaders),Pt),this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class nt extends pt{constructor(ht){super(ht);let dt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(dt=dt.replace(/^\//,"")),ut.lstat(dt,(At,Pt)=>{if(At){At.code==="ENOENT"&&(At=new D.MissingPDFException(`Missing PDF "${dt}".`)),this._storedError=At,this._headersCapability.reject(At);return}this._contentLength=Pt.size,this._setReadableStream(ut.createReadStream(dt)),this._headersCapability.resolve()})}}class lt extends et{constructor(ht,dt,At){super(ht);let Pt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(Pt=Pt.replace(/^\//,"")),this._setReadableStream(ut.createReadStream(Pt,{start:dt,end:At-1}))}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.createResponseStatusError=bt,E.extractFilenameFromHeader=Ct,E.validateRangeRequestCapabilities=wt,E.validateResponseStatus=it;var D=at(1),vt=at(27),ut=at(5);function wt({getResponseHeader:X,isHttp:gt,rangeChunkSize:pt,disableRange:et}){const B={allowRangeRequests:!1,suggestedLength:void 0},J=parseInt(X("Content-Length"),10);return!Number.isInteger(J)||(B.suggestedLength=J,J<=2*pt)||et||!gt||X("Accept-Ranges")!=="bytes"||(X("Content-Encoding")||"identity")!=="identity"||(B.allowRangeRequests=!0),B}function Ct(X){const gt=X("Content-Disposition");if(gt){let pt=(0,vt.getFilenameFromContentDispositionHeader)(gt);if(pt.includes("%"))try{pt=decodeURIComponent(pt)}catch{}if((0,ut.isPdfFile)(pt))return pt}return null}function bt(X,gt){return X===404||X===0&&gt.startsWith("file:")?new D.MissingPDFException('Missing PDF "'+gt+'".'):new D.UnexpectedResponseException(`Unexpected server response (${X}) while retrieving PDF "${gt}".`,X)}function it(X){return X===200||X===206}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.getFilenameFromContentDispositionHeader=vt;var D=at(1);function vt(ut){let wt=!0,Ct=bt("filename\\*","i").exec(ut);if(Ct){Ct=Ct[1];let J=pt(Ct);return J=unescape(J),J=et(J),J=B(J),X(J)}if(Ct=gt(ut),Ct){const J=B(Ct);return X(J)}if(Ct=bt("filename","i").exec(ut),Ct){Ct=Ct[1];let J=pt(Ct);return J=B(J),X(J)}function bt(J,G){return new RegExp("(?:^|;)\\s*"+J+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',G)}function it(J,G){if(J){if(!/^[\x00-\xFF]+$/.test(G))return G;try{const nt=new TextDecoder(J,{fatal:!0}),lt=(0,D.stringToBytes)(G);G=nt.decode(lt),wt=!1}catch{}}return G}function X(J){return wt&&/[\x80-\xff]/.test(J)&&(J=it("utf-8",J),wt&&(J=it("iso-8859-1",J))),J}function gt(J){const G=[];let nt;const lt=bt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(nt=lt.exec(J))!==null;){let[,ht,dt,At]=nt;if(ht=parseInt(ht,10),ht in G){if(ht===0)break;continue}G[ht]=[dt,At]}const Z=[];for(let ht=0;ht<G.length&&ht in G;++ht){let[dt,At]=G[ht];At=pt(At),dt&&(At=unescape(At),ht===0&&(At=et(At))),Z.push(At)}return Z.join("")}function pt(J){if(J.startsWith('"')){const G=J.slice(1).split('\\"');for(let nt=0;nt<G.length;++nt){const lt=G[nt].indexOf('"');lt!==-1&&(G[nt]=G[nt].slice(0,lt),G.length=nt+1),G[nt]=G[nt].replace(/\\(.)/g,"$1")}J=G.join('"')}return J}function et(J){const G=J.indexOf("'");if(G===-1)return J;const nt=J.slice(0,G),Z=J.slice(G+1).replace(/^[^']*'/,"");return it(nt,Z)}function B(J){return!J.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(J)?J:J.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(G,nt,lt,Z){if(lt==="q"||lt==="Q")return Z=Z.replace(/_/g," "),Z=Z.replace(/=([0-9a-fA-F]{2})/g,function(ht,dt){return String.fromCharCode(parseInt(dt,16))}),it(nt,Z);try{Z=atob(Z)}catch{}return it(nt,Z)})}return""}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNetworkStream=void 0;var D=at(1),vt=at(26);const ut=200,wt=206;function Ct(pt){const et=pt.response;return typeof et!="string"?et:(0,D.stringToBytes)(et).buffer}class bt{constructor(et,B={}){this.url=et,this.isHttp=/^https?:/i.test(et),this.httpHeaders=this.isHttp&&B.httpHeaders||Object.create(null),this.withCredentials=B.withCredentials||!1,this.getXhr=B.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(et,B,J){const G={begin:et,end:B};for(const nt in J)G[nt]=J[nt];return this.request(G)}requestFull(et){return this.request(et)}request(et){const B=this.getXhr(),J=this.currXhrId++,G=this.pendingRequests[J]={xhr:B};B.open("GET",this.url),B.withCredentials=this.withCredentials;for(const nt in this.httpHeaders){const lt=this.httpHeaders[nt];typeof lt!="undefined"&&B.setRequestHeader(nt,lt)}return this.isHttp&&"begin"in et&&"end"in et?(B.setRequestHeader("Range",`bytes=${et.begin}-${et.end-1}`),G.expectedStatus=wt):G.expectedStatus=ut,B.responseType="arraybuffer",et.onError&&(B.onerror=function(nt){et.onError(B.status)}),B.onreadystatechange=this.onStateChange.bind(this,J),B.onprogress=this.onProgress.bind(this,J),G.onHeadersReceived=et.onHeadersReceived,G.onDone=et.onDone,G.onError=et.onError,G.onProgress=et.onProgress,B.send(null),J}onProgress(et,B){var G;const J=this.pendingRequests[et];!J||(G=J.onProgress)==null||G.call(J,B)}onStateChange(et,B){var ht,dt,At;const J=this.pendingRequests[et];if(!J)return;const G=J.xhr;if(G.readyState>=2&&J.onHeadersReceived&&(J.onHeadersReceived(),delete J.onHeadersReceived),G.readyState!==4||!(et in this.pendingRequests))return;if(delete this.pendingRequests[et],G.status===0&&this.isHttp){(ht=J.onError)==null||ht.call(J,G.status);return}const nt=G.status||ut;if(!(nt===ut&&J.expectedStatus===wt)&&nt!==J.expectedStatus){(dt=J.onError)==null||dt.call(J,G.status);return}const Z=Ct(G);if(nt===wt){const Pt=G.getResponseHeader("Content-Range"),V=/bytes (\d+)-(\d+)\/(\d+)/.exec(Pt);J.onDone({begin:parseInt(V[1],10),chunk:Z})}else Z?J.onDone({begin:0,chunk:Z}):(At=J.onError)==null||At.call(J,G.status)}getRequestXhr(et){return this.pendingRequests[et].xhr}isPendingRequest(et){return et in this.pendingRequests}abortRequest(et){const B=this.pendingRequests[et].xhr;delete this.pendingRequests[et],B.abort()}}class it{constructor(et){this._source=et,this._manager=new bt(et.url,{httpHeaders:et.httpHeaders,withCredentials:et.withCredentials}),this._rangeChunkSize=et.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(et){const B=this._rangeRequestReaders.indexOf(et);B>=0&&this._rangeRequestReaders.splice(B,1)}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new X(this._manager,this._source),this._fullRequestReader}getRangeReader(et,B){const J=new gt(this._manager,et,B);return J.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(J),J}cancelAllRequests(et){var B;(B=this._fullRequestReader)==null||B.cancel(et);for(const J of this._rangeRequestReaders.slice(0))J.cancel(et)}}E.PDFNetworkStream=it;class X{constructor(et,B){this._manager=et;const J={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=B.url,this._fullRequestId=et.requestFull(J),this._headersReceivedCapability=(0,D.createPromiseCapability)(),this._disableRange=B.disableRange||!1,this._contentLength=B.length,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const et=this._fullRequestId,B=this._manager.getRequestXhr(et),J=lt=>B.getResponseHeader(lt),{allowRangeRequests:G,suggestedLength:nt}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});G&&(this._isRangeSupported=!0),this._contentLength=nt||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(J),this._isRangeSupported&&this._manager.abortRequest(et),this._headersReceivedCapability.resolve()}_onDone(et){if(et&&(this._requests.length>0?this._requests.shift().resolve({value:et.chunk,done:!1}):this._cachedChunks.push(et.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(et){this._storedError=(0,vt.createResponseStatusError)(et,this._url),this._headersReceivedCapability.reject(this._storedError);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(et){var B;(B=this.onProgress)==null||B.call(this,{loaded:et.loaded,total:et.lengthComputable?et.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0,this._headersReceivedCapability.reject(et);for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gt{constructor(et,B,J){this._manager=et;const G={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._requestId=et.requestRange(B,J,G),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var et;(et=this.onClosed)==null||et.call(this,this)}_onDone(et){const B=et.chunk;this._requests.length>0?this._requests.shift().resolve({value:B,done:!1}):this._queuedChunk=B,this._done=!0;for(const J of this._requests)J.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(et){this._storedError=(0,vt.createResponseStatusError)(et,this._url);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(et){var B;this.isStreamingSupported||(B=this.onProgress)==null||B.call(this,{loaded:et.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const B=this._queuedChunk;return this._queuedChunk=null,{value:B,done:!1}}if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFFetchStream=void 0;var D=at(1),vt=at(26);function ut(X,gt,pt){return{method:"GET",headers:X,signal:pt==null?void 0:pt.signal,mode:"cors",credentials:gt?"include":"same-origin",redirect:"follow"}}function wt(X){const gt=new Headers;for(const pt in X){const et=X[pt];typeof et!="undefined"&&gt.append(pt,et)}return gt}class Ct{constructor(gt){this.source=gt,this.isHttp=/^https?:/i.test(gt.url),this.httpHeaders=this.isHttp&&gt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var gt,pt;return(pt=(gt=this._fullRequestReader)==null?void 0:gt._loaded)!=null?pt:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bt(this),this._fullRequestReader}getRangeReader(gt,pt){if(pt<=this._progressiveDataLength)return null;const et=new it(this,gt,pt);return this._rangeRequestReaders.push(et),et}cancelAllRequests(gt){this._fullRequestReader&&this._fullRequestReader.cancel(gt);for(const pt of this._rangeRequestReaders.slice(0))pt.cancel(gt)}}E.PDFFetchStream=Ct;class bt{constructor(gt){this._stream=gt,this._reader=null,this._loaded=0,this._filename=null;const pt=gt.source;this._withCredentials=pt.withCredentials||!1,this._contentLength=pt.length,this._headersCapability=(0,D.createPromiseCapability)(),this._disableRange=pt.disableRange||!1,this._rangeChunkSize=pt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!pt.disableStream,this._isRangeSupported=!pt.disableRange,this._headers=wt(this._stream.httpHeaders);const et=pt.url;fetch(et,ut(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,vt.validateResponseStatus)(B.status))throw(0,vt.createResponseStatusError)(B.status,et);this._reader=B.body.getReader(),this._headersCapability.resolve();const J=lt=>B.headers.get(lt),{allowRangeRequests:G,suggestedLength:nt}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=G,this._contentLength=nt||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(J),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new D.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:gt,done:pt}=await this._reader.read();return pt?{value:gt,done:pt}:(this._loaded+=gt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(gt).buffer,done:!1})}cancel(gt){this._reader&&this._reader.cancel(gt),this._abortController&&this._abortController.abort()}}class it{constructor(gt,pt,et){this._stream=gt,this._reader=null,this._loaded=0;const B=gt.source;this._withCredentials=B.withCredentials||!1,this._readCapability=(0,D.createPromiseCapability)(),this._isStreamingSupported=!B.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=wt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${pt}-${et-1}`);const J=B.url;fetch(J,ut(this._headers,this._withCredentials,this._abortController)).then(G=>{if(!(0,vt.validateResponseStatus)(G.status))throw(0,vt.createResponseStatusError)(G.status,J);this._readCapability.resolve(),this._reader=G.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:gt,done:pt}=await this._reader.read();return pt?{value:gt,done:pt}:(this._loaded+=gt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(gt).buffer,done:!1})}cancel(gt){this._reader&&this._reader.cancel(gt),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(st){var E=__webpack_module_cache__[st];if(E!==void 0)return E.exports;var at=__webpack_module_cache__[st]={exports:{}};return __webpack_modules__[st](at,at.exports,__w_pdfjs_require__),at.exports}var __webpack_exports__={};return(()=>{var st=__webpack_exports__;Object.defineProperty(st,"__esModule",{value:!0}),Object.defineProperty(st,"AnnotationLayer",{enumerable:!0,get:function(){return vt.AnnotationLayer}}),Object.defineProperty(st,"AnnotationMode",{enumerable:!0,get:function(){return E.AnnotationMode}}),Object.defineProperty(st,"CMapCompressionType",{enumerable:!0,get:function(){return E.CMapCompressionType}}),Object.defineProperty(st,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ut.GlobalWorkerOptions}}),Object.defineProperty(st,"InvalidPDFException",{enumerable:!0,get:function(){return E.InvalidPDFException}}),Object.defineProperty(st,"LoopbackPort",{enumerable:!0,get:function(){return at.LoopbackPort}}),Object.defineProperty(st,"MissingPDFException",{enumerable:!0,get:function(){return E.MissingPDFException}}),Object.defineProperty(st,"OPS",{enumerable:!0,get:function(){return E.OPS}}),Object.defineProperty(st,"PDFDataRangeTransport",{enumerable:!0,get:function(){return at.PDFDataRangeTransport}}),Object.defineProperty(st,"PDFDateString",{enumerable:!0,get:function(){return D.PDFDateString}}),Object.defineProperty(st,"PDFWorker",{enumerable:!0,get:function(){return at.PDFWorker}}),Object.defineProperty(st,"PasswordResponses",{enumerable:!0,get:function(){return E.PasswordResponses}}),Object.defineProperty(st,"PermissionFlag",{enumerable:!0,get:function(){return E.PermissionFlag}}),Object.defineProperty(st,"PixelsPerInch",{enumerable:!0,get:function(){return D.PixelsPerInch}}),Object.defineProperty(st,"RenderingCancelledException",{enumerable:!0,get:function(){return D.RenderingCancelledException}}),Object.defineProperty(st,"SVGGraphics",{enumerable:!0,get:function(){return bt.SVGGraphics}}),Object.defineProperty(st,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return E.UNSUPPORTED_FEATURES}}),Object.defineProperty(st,"UnexpectedResponseException",{enumerable:!0,get:function(){return E.UnexpectedResponseException}}),Object.defineProperty(st,"Util",{enumerable:!0,get:function(){return E.Util}}),Object.defineProperty(st,"VerbosityLevel",{enumerable:!0,get:function(){return E.VerbosityLevel}}),Object.defineProperty(st,"XfaLayer",{enumerable:!0,get:function(){return it.XfaLayer}}),Object.defineProperty(st,"build",{enumerable:!0,get:function(){return at.build}}),Object.defineProperty(st,"createPromiseCapability",{enumerable:!0,get:function(){return E.createPromiseCapability}}),Object.defineProperty(st,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return E.createValidAbsoluteUrl}}),Object.defineProperty(st,"getDocument",{enumerable:!0,get:function(){return at.getDocument}}),Object.defineProperty(st,"getFilenameFromUrl",{enumerable:!0,get:function(){return D.getFilenameFromUrl}}),Object.defineProperty(st,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return D.getPdfFilenameFromUrl}}),Object.defineProperty(st,"getXfaPageViewport",{enumerable:!0,get:function(){return D.getXfaPageViewport}}),Object.defineProperty(st,"isPdfFile",{enumerable:!0,get:function(){return D.isPdfFile}}),Object.defineProperty(st,"loadScript",{enumerable:!0,get:function(){return D.loadScript}}),Object.defineProperty(st,"renderTextLayer",{enumerable:!0,get:function(){return Ct.renderTextLayer}}),Object.defineProperty(st,"shadow",{enumerable:!0,get:function(){return E.shadow}}),Object.defineProperty(st,"version",{enumerable:!0,get:function(){return at.version}});var E=__w_pdfjs_require__(1),at=__w_pdfjs_require__(4),D=__w_pdfjs_require__(5),vt=__w_pdfjs_require__(20),ut=__w_pdfjs_require__(13),wt=__w_pdfjs_require__(3),Ct=__w_pdfjs_require__(23),bt=__w_pdfjs_require__(24),it=__w_pdfjs_require__(22);if(wt.isNodeJS){const{PDFNodeStream:X}=__w_pdfjs_require__(25);(0,at.setPDFNetworkStreamFactory)(gt=>new X(gt))}else{const{PDFNetworkStream:X}=__w_pdfjs_require__(28),{PDFFetchStream:gt}=__w_pdfjs_require__(29);(0,at.setPDFNetworkStreamFactory)(pt=>(0,D.isValidFetchUrl)(pt.url)?new gt(pt):new X(pt))}})(),__webpack_exports__})())})(pdf);var t,u,r,o$1,i=0,c=[],f=[],e$1=l$1.__b,a=l$1.__r,v=l$1.diffed,l=l$1.__c,m=l$1.unmount;function p(st,E){l$1.__h&&l$1.__h(u,st,i||E),i=0;var at=u.__H||(u.__H={__:[],__h:[]});return st>=at.__.length&&at.__.push({__V:f}),at.__[st]}function y(st){return i=1,d(z,st)}function d(st,E,at){var D=p(t++,2);return D.t=st,D.__c||(D.__=[at?at(E):z(void 0,E),function(vt){var ut=D.t(D.__[0],vt);D.__[0]!==ut&&(D.__=[ut,D.__[1]],D.__c.setState({}))}],D.__c=u),D.__}function s(st){return i=5,F(function(){return{current:st}},[])}function F(st,E){var at=p(t++,7);return w(at.__H,E)?(at.__V=st(),at.u=E,at.__h=st,at.__V):at.__}function T(st,E){return i=8,F(function(){return st},E)}function b(){for(var st;st=c.shift();)if(st.__P)try{st.__H.__h.forEach(j),st.__H.__h.forEach(k),st.__H.__h=[]}catch(E){st.__H.__h=[],l$1.__e(E,st.__v)}}l$1.__b=function(st){u=null,e$1&&e$1(st)},l$1.__r=function(st){a&&a(st),t=0;var E=(u=st.__c).__H;E&&(r===u?(E.__h=[],u.__h=[],E.__.forEach(function(at){at.__V=f,at.u=void 0})):(E.__h.forEach(j),E.__h.forEach(k),E.__h=[])),r=u},l$1.diffed=function(st){v&&v(st);var E=st.__c;E&&E.__H&&(E.__H.__h.length&&(c.push(E)!==1&&o$1===l$1.requestAnimationFrame||((o$1=l$1.requestAnimationFrame)||function(at){var D,vt=function(){clearTimeout(ut),g&&cancelAnimationFrame(D),setTimeout(at)},ut=setTimeout(vt,100);g&&(D=requestAnimationFrame(vt))})(b)),E.__H.__.forEach(function(at){at.u&&(at.__H=at.u),at.__V!==f&&(at.__=at.__V),at.u=void 0,at.__V=f})),r=u=null},l$1.__c=function(st,E){E.some(function(at){try{at.__h.forEach(j),at.__h=at.__h.filter(function(D){return!D.__||k(D)})}catch(D){E.some(function(vt){vt.__h&&(vt.__h=[])}),E=[],l$1.__e(D,at.__v)}}),l&&l(st,E)},l$1.unmount=function(st){m&&m(st);var E,at=st.__c;at&&at.__H&&(at.__H.__.forEach(function(D){try{j(D)}catch(vt){E=vt}}),E&&l$1.__e(E,at.__v))};var g=typeof requestAnimationFrame=="function";function j(st){var E=u,at=st.__c;typeof at=="function"&&(st.__c=void 0,at()),u=E}function k(st){var E=u;st.__c=st.__(),u=E}function w(st,E){return!st||st.length!==E.length||E.some(function(at,D){return at!==st[D]})}function z(st,E){return typeof E=="function"?E(st):E}var o=0;function e(st,E,at,D,vt){var ut,wt,Ct={};for(wt in E)wt=="ref"?ut=E[wt]:Ct[wt]=E[wt];var bt={type:st,props:Ct,key:at,ref:ut,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:vt,__self:D};if(typeof st=="function"&&(ut=st.defaultProps))for(wt in ut)Ct[wt]===void 0&&(Ct[wt]=ut[wt]);return l$1.vnode&&l$1.vnode(bt),bt}pdf.exports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";function App(){const st=s(new OffscreenCanvas(100,100)),E=s(null),[at,D]=y(null),[vt,ut]=y(0),[wt,Ct]=y([]),bt=T(X=>{if(!X.currentTarget.files||X.currentTarget.files.length<1||!st.current)return;const gt=[],pt=X.currentTarget.files[0];if(pt.type&&pt.type!=="image/pdf"){console.log("File is not a PDF.",pt.type,pt);return}D(pt.name.substring(0,pt.name.lastIndexOf(".")));const et=new FileReader;et.addEventListener("load",async B=>{if(!st.current)return;const G=await pdf.exports.getDocument(B.target.result).promise;for(let lt=1;lt<=G.numPages;lt++){const Z=await G.getPage(lt),ht=st.current.getContext("2d"),dt=Z.getViewport({scale:3});st.current.height=dt.height,st.current.width=dt.width;var nt={canvasContext:ht,viewport:dt};await Z.render(nt).promise;const At=await st.current.convertToBlob({type:"image/png"});gt.push(URL.createObjectURL(At))}Ct(gt)}),et.onprogress=B=>{if(B.lengthComputable){const J=B.loaded/B.total;console.log(J),ut(B.loaded/B.total)}},et.readAsArrayBuffer(pt)},[st,Ct]),it=T(()=>{D(null),Ct([]),ut(0)},[]);return e("main",{class:"relative text-center flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-6 sm:py-12",children:e("div",{class:"relative container  bg-white px-6 pt-10 pb-7 shadow-xl ring-1 ring-gray-900/5 sm:mx-auto sm:max-w-lg sm:rounded-lg sm:px-10",children:e("div",{className:"mx-auto max-w-md",children:[e("h1",{class:"text-3xl font-bold mb-5",children:"PDF \u2192 PNG"}),e("div",{class:`rounded-full h-10 relative max-w-xl overflow-hidden ${at?"":"cursor-pointer"}`,onClick:()=>{var X;at||(X=E.current)==null||X.click()},children:[e("div",{class:"w-full h-full bg-gray-200 absolute"}),e("div",{className:"h-full bg-green-500 absolute transition-all duration-1000",style:{width:(vt*100).toFixed(0)+"%"}}),e("div",{class:`w-full top-1/2 -translate-y-1/2 absolute ${at?"text-white":"text-gray-500"}`,children:at!=null?at:"Select PDF to Start"})]}),e("input",{ref:E,class:"hidden",type:"file",name:"pdf-upload",id:"pdf-upload",accept:".pdf",onChange:bt}),wt.length>0&&e("div",{class:"my-5",children:[e("p",{class:"mb-2 text-gray-500",children:"Click on the pages below to download them as PNGs."}),e("div",{class:"grid grid-cols-3 gap-4",children:wt.map((X,gt)=>e("a",{class:"text-center text-gray-700",href:X,download:`${at}-page-${gt+1}.png`,children:[e("div",{class:"w-full h-24 bg-center bg-cover border-2 rounded-lg border-gray-700",style:{backgroundImage:`url(${X})`}}),"Page ",gt+1]}))})]}),at&&vt===1&&e("button",{className:"text-blue-400 underline",onClick:it,children:"Restart"})]})})})}var index=(()=>`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.absolute{position:absolute}.relative{position:relative}.top-1\\/2{top:50%}.mx-auto{margin-left:auto;margin-right:auto}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.mb-5{margin-bottom:1.25rem}.mb-2{margin-bottom:.5rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-full{height:100%}.h-24{height:6rem}.min-h-screen{min-height:100vh}.w-full{width:100%}.max-w-md{max-width:28rem}.max-w-xl{max-width:36rem}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.justify-center{justify-content:center}.gap-4{gap:1rem}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.border-2{border-width:2px}.border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity))}.bg-cover{background-size:cover}.bg-center{background-position:center}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pt-10{padding-top:2.5rem}.pb-7{padding-bottom:1.75rem}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.font-bold{font-weight:700}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity))}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-gray-900\\/5{--tw-ring-color: rgb(17 24 39 / .05)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}@media (min-width: 640px){.sm\\:mx-auto{margin-left:auto;margin-right:auto}.sm\\:max-w-lg{max-width:32rem}.sm\\:rounded-lg{border-radius:.5rem}.sm\\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\\:px-10{padding-left:2.5rem;padding-right:2.5rem}}
`)();S(e(App,{}),document.getElementById("app"));
