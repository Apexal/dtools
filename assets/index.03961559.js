var Re=Object.defineProperty;var Me=(st,E,at)=>E in st?Re(st,E,{enumerable:!0,configurable:!0,writable:!0,value:at}):st[E]=at;var Ce=(st,E,at)=>(Me(st,typeof E!="symbol"?E+"":E,at),at),Te=(st,E,at)=>{if(!E.has(st))throw TypeError("Cannot "+at)};var Yt=(st,E,at)=>(Te(st,E,"read from private field"),at?at.call(st):E.get(st)),le=(st,E,at)=>{if(E.has(st))throw TypeError("Cannot add the same private member more than once");E instanceof WeakSet?E.add(st):E.set(st,at)},he=(st,E,at,D)=>(Te(st,E,"write to private field"),D?D.call(st,at):E.set(st,at),at),Fe=(st,E,at,D)=>({set _(vt){he(st,E,vt,at)},get _(){return Yt(st,E,D)}}),Ae=(st,E,at)=>(Te(st,E,"access private method"),at);const p$1=function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const vt of document.querySelectorAll('link[rel="modulepreload"]'))D(vt);new MutationObserver(vt=>{for(const ct of vt)if(ct.type==="childList")for(const Ct of ct.addedNodes)Ct.tagName==="LINK"&&Ct.rel==="modulepreload"&&D(Ct)}).observe(document,{childList:!0,subtree:!0});function at(vt){const ct={};return vt.integrity&&(ct.integrity=vt.integrity),vt.referrerpolicy&&(ct.referrerPolicy=vt.referrerpolicy),vt.crossorigin==="use-credentials"?ct.credentials="include":vt.crossorigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function D(vt){if(vt.ep)return;vt.ep=!0;const ct=at(vt);fetch(vt.href,ct)}};p$1();var n,l$1,u$1,t$1,o$2,r$1,e$2={},c$1=[],s$1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a$1(st,E){for(var at in E)st[at]=E[at];return st}function h(st){var E=st.parentNode;E&&E.removeChild(st)}function v$1(st,E,at){var D,vt,ct,Ct={};for(ct in E)ct=="key"?D=E[ct]:ct=="ref"?vt=E[ct]:Ct[ct]=E[ct];if(arguments.length>2&&(Ct.children=arguments.length>3?n.call(arguments,2):at),typeof st=="function"&&st.defaultProps!=null)for(ct in st.defaultProps)Ct[ct]===void 0&&(Ct[ct]=st.defaultProps[ct]);return y$1(st,Ct,D,vt,null)}function y$1(st,E,at,D,vt){var ct={type:st,props:E,key:at,ref:D,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:vt==null?++u$1:vt};return vt==null&&l$1.vnode!=null&&l$1.vnode(ct),ct}function d$1(st){return st.children}function _(st,E){this.props=st,this.context=E}function k$1(st,E){if(E==null)return st.__?k$1(st.__,st.__.__k.indexOf(st)+1):null;for(var at;E<st.__k.length;E++)if((at=st.__k[E])!=null&&at.__e!=null)return at.__e;return typeof st.type=="function"?k$1(st):null}function b$1(st){var E,at;if((st=st.__)!=null&&st.__c!=null){for(st.__e=st.__c.base=null,E=0;E<st.__k.length;E++)if((at=st.__k[E])!=null&&at.__e!=null){st.__e=st.__c.base=at.__e;break}return b$1(st)}}function m$1(st){(!st.__d&&(st.__d=!0)&&t$1.push(st)&&!g$1.__r++||r$1!==l$1.debounceRendering)&&((r$1=l$1.debounceRendering)||o$2)(g$1)}function g$1(){for(var st;g$1.__r=t$1.length;)st=t$1.sort(function(E,at){return E.__v.__b-at.__v.__b}),t$1=[],st.some(function(E){var at,D,vt,ct,Ct,wt;E.__d&&(Ct=(ct=(at=E).__v).__e,(wt=at.__P)&&(D=[],(vt=a$1({},ct)).__v=ct.__v+1,j$1(wt,ct,vt,at.__n,wt.ownerSVGElement!==void 0,ct.__h!=null?[Ct]:null,D,Ct==null?k$1(ct):Ct,ct.__h),z$1(D,ct),ct.__e!=Ct&&b$1(ct)))})}function w$1(st,E,at,D,vt,ct,Ct,wt,bt,it){var Y,gt,pt,et,W,J,G,nt=D&&D.__k||c$1,lt=nt.length;for(at.__k=[],Y=0;Y<E.length;Y++)if((et=at.__k[Y]=(et=E[Y])==null||typeof et=="boolean"?null:typeof et=="string"||typeof et=="number"||typeof et=="bigint"?y$1(null,et,null,null,et):Array.isArray(et)?y$1(d$1,{children:et},null,null,null):et.__b>0?y$1(et.type,et.props,et.key,null,et.__v):et)!=null){if(et.__=at,et.__b=at.__b+1,(pt=nt[Y])===null||pt&&et.key==pt.key&&et.type===pt.type)nt[Y]=void 0;else for(gt=0;gt<lt;gt++){if((pt=nt[gt])&&et.key==pt.key&&et.type===pt.type){nt[gt]=void 0;break}pt=null}j$1(st,et,pt=pt||e$2,vt,ct,Ct,wt,bt,it),W=et.__e,(gt=et.ref)&&pt.ref!=gt&&(G||(G=[]),pt.ref&&G.push(pt.ref,null,et),G.push(gt,et.__c||W,et)),W!=null?(J==null&&(J=W),typeof et.type=="function"&&et.__k===pt.__k?et.__d=bt=x(et,bt,st):bt=P(st,et,pt,nt,W,bt),typeof at.type=="function"&&(at.__d=bt)):bt&&pt.__e==bt&&bt.parentNode!=st&&(bt=k$1(pt))}for(at.__e=J,Y=lt;Y--;)nt[Y]!=null&&(typeof at.type=="function"&&nt[Y].__e!=null&&nt[Y].__e==at.__d&&(at.__d=k$1(D,Y+1)),N(nt[Y],nt[Y]));if(G)for(Y=0;Y<G.length;Y++)M(G[Y],G[++Y],G[++Y])}function x(st,E,at){for(var D,vt=st.__k,ct=0;vt&&ct<vt.length;ct++)(D=vt[ct])&&(D.__=st,E=typeof D.type=="function"?x(D,E,at):P(at,D,D,vt,D.__e,E));return E}function P(st,E,at,D,vt,ct){var Ct,wt,bt;if(E.__d!==void 0)Ct=E.__d,E.__d=void 0;else if(at==null||vt!=ct||vt.parentNode==null)t:if(ct==null||ct.parentNode!==st)st.appendChild(vt),Ct=null;else{for(wt=ct,bt=0;(wt=wt.nextSibling)&&bt<D.length;bt+=2)if(wt==vt)break t;st.insertBefore(vt,ct),Ct=ct}return Ct!==void 0?Ct:vt.nextSibling}function C(st,E,at,D,vt){var ct;for(ct in at)ct==="children"||ct==="key"||ct in E||H(st,ct,null,at[ct],D);for(ct in E)vt&&typeof E[ct]!="function"||ct==="children"||ct==="key"||ct==="value"||ct==="checked"||at[ct]===E[ct]||H(st,ct,E[ct],at[ct],D)}function $(st,E,at){E[0]==="-"?st.setProperty(E,at):st[E]=at==null?"":typeof at!="number"||s$1.test(E)?at:at+"px"}function H(st,E,at,D,vt){var ct;t:if(E==="style")if(typeof at=="string")st.style.cssText=at;else{if(typeof D=="string"&&(st.style.cssText=D=""),D)for(E in D)at&&E in at||$(st.style,E,"");if(at)for(E in at)D&&at[E]===D[E]||$(st.style,E,at[E])}else if(E[0]==="o"&&E[1]==="n")ct=E!==(E=E.replace(/Capture$/,"")),E=E.toLowerCase()in st?E.toLowerCase().slice(2):E.slice(2),st.l||(st.l={}),st.l[E+ct]=at,at?D||st.addEventListener(E,ct?T$1:I,ct):st.removeEventListener(E,ct?T$1:I,ct);else if(E!=="dangerouslySetInnerHTML"){if(vt)E=E.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(E!=="href"&&E!=="list"&&E!=="form"&&E!=="tabIndex"&&E!=="download"&&E in st)try{st[E]=at==null?"":at;break t}catch{}typeof at=="function"||(at!=null&&(at!==!1||E[0]==="a"&&E[1]==="r")?st.setAttribute(E,at):st.removeAttribute(E))}}function I(st){this.l[st.type+!1](l$1.event?l$1.event(st):st)}function T$1(st){this.l[st.type+!0](l$1.event?l$1.event(st):st)}function j$1(st,E,at,D,vt,ct,Ct,wt,bt){var it,Y,gt,pt,et,W,J,G,nt,lt,tt,ut,ft,At=E.type;if(E.constructor!==void 0)return null;at.__h!=null&&(bt=at.__h,wt=E.__e=at.__e,E.__h=null,ct=[wt]),(it=l$1.__b)&&it(E);try{t:if(typeof At=="function"){if(G=E.props,nt=(it=At.contextType)&&D[it.__c],lt=it?nt?nt.props.value:it.__:D,at.__c?J=(Y=E.__c=at.__c).__=Y.__E:("prototype"in At&&At.prototype.render?E.__c=Y=new At(G,lt):(E.__c=Y=new _(G,lt),Y.constructor=At,Y.render=O),nt&&nt.sub(Y),Y.props=G,Y.state||(Y.state={}),Y.context=lt,Y.__n=D,gt=Y.__d=!0,Y.__h=[]),Y.__s==null&&(Y.__s=Y.state),At.getDerivedStateFromProps!=null&&(Y.__s==Y.state&&(Y.__s=a$1({},Y.__s)),a$1(Y.__s,At.getDerivedStateFromProps(G,Y.__s))),pt=Y.props,et=Y.state,gt)At.getDerivedStateFromProps==null&&Y.componentWillMount!=null&&Y.componentWillMount(),Y.componentDidMount!=null&&Y.__h.push(Y.componentDidMount);else{if(At.getDerivedStateFromProps==null&&G!==pt&&Y.componentWillReceiveProps!=null&&Y.componentWillReceiveProps(G,lt),!Y.__e&&Y.shouldComponentUpdate!=null&&Y.shouldComponentUpdate(G,Y.__s,lt)===!1||E.__v===at.__v){Y.props=G,Y.state=Y.__s,E.__v!==at.__v&&(Y.__d=!1),Y.__v=E,E.__e=at.__e,E.__k=at.__k,E.__k.forEach(function(Pt){Pt&&(Pt.__=E)}),Y.__h.length&&Ct.push(Y);break t}Y.componentWillUpdate!=null&&Y.componentWillUpdate(G,Y.__s,lt),Y.componentDidUpdate!=null&&Y.__h.push(function(){Y.componentDidUpdate(pt,et,W)})}if(Y.context=lt,Y.props=G,Y.__v=E,Y.__P=st,tt=l$1.__r,ut=0,"prototype"in At&&At.prototype.render)Y.state=Y.__s,Y.__d=!1,tt&&tt(E),it=Y.render(Y.props,Y.state,Y.context);else do Y.__d=!1,tt&&tt(E),it=Y.render(Y.props,Y.state,Y.context),Y.state=Y.__s;while(Y.__d&&++ut<25);Y.state=Y.__s,Y.getChildContext!=null&&(D=a$1(a$1({},D),Y.getChildContext())),gt||Y.getSnapshotBeforeUpdate==null||(W=Y.getSnapshotBeforeUpdate(pt,et)),ft=it!=null&&it.type===d$1&&it.key==null?it.props.children:it,w$1(st,Array.isArray(ft)?ft:[ft],E,at,D,vt,ct,Ct,wt,bt),Y.base=E.__e,E.__h=null,Y.__h.length&&Ct.push(Y),J&&(Y.__E=Y.__=null),Y.__e=!1}else ct==null&&E.__v===at.__v?(E.__k=at.__k,E.__e=at.__e):E.__e=L(at.__e,E,at,D,vt,ct,Ct,bt);(it=l$1.diffed)&&it(E)}catch(Pt){E.__v=null,(bt||ct!=null)&&(E.__e=wt,E.__h=!!bt,ct[ct.indexOf(wt)]=null),l$1.__e(Pt,E,at)}}function z$1(st,E){l$1.__c&&l$1.__c(E,st),st.some(function(at){try{st=at.__h,at.__h=[],st.some(function(D){D.call(at)})}catch(D){l$1.__e(D,at.__v)}})}function L(st,E,at,D,vt,ct,Ct,wt){var bt,it,Y,gt=at.props,pt=E.props,et=E.type,W=0;if(et==="svg"&&(vt=!0),ct!=null){for(;W<ct.length;W++)if((bt=ct[W])&&"setAttribute"in bt==!!et&&(et?bt.localName===et:bt.nodeType===3)){st=bt,ct[W]=null;break}}if(st==null){if(et===null)return document.createTextNode(pt);st=vt?document.createElementNS("http://www.w3.org/2000/svg",et):document.createElement(et,pt.is&&pt),ct=null,wt=!1}if(et===null)gt===pt||wt&&st.data===pt||(st.data=pt);else{if(ct=ct&&n.call(st.childNodes),it=(gt=at.props||e$2).dangerouslySetInnerHTML,Y=pt.dangerouslySetInnerHTML,!wt){if(ct!=null)for(gt={},W=0;W<st.attributes.length;W++)gt[st.attributes[W].name]=st.attributes[W].value;(Y||it)&&(Y&&(it&&Y.__html==it.__html||Y.__html===st.innerHTML)||(st.innerHTML=Y&&Y.__html||""))}if(C(st,pt,gt,vt,wt),Y)E.__k=[];else if(W=E.props.children,w$1(st,Array.isArray(W)?W:[W],E,at,D,vt&&et!=="foreignObject",ct,Ct,ct?ct[0]:at.__k&&k$1(at,0),wt),ct!=null)for(W=ct.length;W--;)ct[W]!=null&&h(ct[W]);wt||("value"in pt&&(W=pt.value)!==void 0&&(W!==st.value||et==="progress"&&!W||et==="option"&&W!==gt.value)&&H(st,"value",W,gt.value,!1),"checked"in pt&&(W=pt.checked)!==void 0&&W!==st.checked&&H(st,"checked",W,gt.checked,!1))}return st}function M(st,E,at){try{typeof st=="function"?st(E):st.current=E}catch(D){l$1.__e(D,at)}}function N(st,E,at){var D,vt;if(l$1.unmount&&l$1.unmount(st),(D=st.ref)&&(D.current&&D.current!==st.__e||M(D,null,E)),(D=st.__c)!=null){if(D.componentWillUnmount)try{D.componentWillUnmount()}catch(ct){l$1.__e(ct,E)}D.base=D.__P=null}if(D=st.__k)for(vt=0;vt<D.length;vt++)D[vt]&&N(D[vt],E,typeof st.type!="function");at||st.__e==null||h(st.__e),st.__e=st.__d=void 0}function O(st,E,at){return this.constructor(st,at)}function S(st,E,at){var D,vt,ct;l$1.__&&l$1.__(st,E),vt=(D=typeof at=="function")?null:at&&at.__k||E.__k,ct=[],j$1(E,st=(!D&&at||E).__k=v$1(d$1,null,[st]),vt||e$2,e$2,E.ownerSVGElement!==void 0,!D&&at?[at]:vt?null:E.firstChild?n.call(E.childNodes):null,ct,!D&&at?at:vt?vt.__e:E.firstChild,D),z$1(ct,st)}n=c$1.slice,l$1={__e:function(st,E,at,D){for(var vt,ct,Ct;E=E.__;)if((vt=E.__c)&&!vt.__)try{if((ct=vt.constructor)&&ct.getDerivedStateFromError!=null&&(vt.setState(ct.getDerivedStateFromError(st)),Ct=vt.__d),vt.componentDidCatch!=null&&(vt.componentDidCatch(st,D||{}),Ct=vt.__d),Ct)return vt.__E=vt}catch(wt){st=wt}throw st}},u$1=0,_.prototype.setState=function(st,E){var at;at=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=a$1({},this.state),typeof st=="function"&&(st=st(a$1({},at),this.props)),st&&a$1(at,st),st!=null&&this.__v&&(E&&this.__h.push(E),m$1(this))},_.prototype.forceUpdate=function(st){this.__v&&(this.__e=!0,st&&this.__h.push(st),m$1(this))},_.prototype.render=d$1,t$1=[],o$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g$1.__r=0;var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(st){if(st.__esModule)return st;var E=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(st).forEach(function(at){var D=Object.getOwnPropertyDescriptor(st,at);Object.defineProperty(E,at,D.get?D:{enumerable:!0,get:function(){return st[at]}})}),E}function commonjsRequire(st){throw new Error('Could not dynamically require "'+st+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(E,at){module.exports=at()})(commonjsGlobal,()=>(()=>{var __webpack_modules__=[,(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.VerbosityLevel=E.Util=E.UnknownErrorException=E.UnexpectedResponseException=E.UNSUPPORTED_FEATURES=E.TextRenderingMode=E.StreamType=E.RenderingIntentFlag=E.PermissionFlag=E.PasswordResponses=E.PasswordException=E.PageActionEventType=E.OPS=E.MissingPDFException=E.InvalidPDFException=E.ImageKind=E.IDENTITY_MATRIX=E.FormatError=E.FontType=E.FeatureTest=E.FONT_IDENTITY_MATRIX=E.DocumentActionEventType=E.CMapCompressionType=E.BaseException=E.AnnotationType=E.AnnotationStateModelType=E.AnnotationReviewState=E.AnnotationReplyType=E.AnnotationMode=E.AnnotationMarkedState=E.AnnotationFlag=E.AnnotationFieldFlag=E.AnnotationBorderStyleType=E.AnnotationActionEventType=E.AbortException=void 0,E.arrayByteLength=kt,E.arraysToBytes=yt,E.assert=jt,E.bytesToString=dt,E.createPromiseCapability=ee,E.createValidAbsoluteUrl=qt,E.escapeString=se,E.getModificationDate=fe,E.getVerbosityLevel=St,E.info=Lt,E.isArrayBuffer=ce,E.isArrayEqual=re,E.isAscii=te,E.objectFromMap=Ot,E.objectSize=xt,E.setVerbosityLevel=Ft,E.shadow=rt,E.string32=Rt,E.stringToBytes=mt,E.stringToPDFString=Ut,E.stringToUTF16BEString=Kt,E.stringToUTF8String=Zt,E.unreachable=Dt,E.utf8StringToString=ie,E.warn=$t,at(2);const D=[1,0,0,1,0,0];E.IDENTITY_MATRIX=D;const vt=[.001,0,0,.001,0,0];E.FONT_IDENTITY_MATRIX=vt;const ct={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};E.RenderingIntentFlag=ct;const Ct={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};E.AnnotationMode=Ct;const wt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};E.PermissionFlag=wt;const bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};E.TextRenderingMode=bt;const it={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};E.ImageKind=it;const Y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};E.AnnotationType=Y;const gt={MARKED:"Marked",REVIEW:"Review"};E.AnnotationStateModelType=gt;const pt={MARKED:"Marked",UNMARKED:"Unmarked"};E.AnnotationMarkedState=pt;const et={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};E.AnnotationReviewState=et;const W={GROUP:"Group",REPLY:"R"};E.AnnotationReplyType=W;const J={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};E.AnnotationFlag=J;const G={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};E.AnnotationFieldFlag=G;const nt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};E.AnnotationBorderStyleType=nt;const lt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};E.AnnotationActionEventType=lt;const tt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};E.DocumentActionEventType=tt;const ut={O:"PageOpen",C:"PageClose"};E.PageActionEventType=ut;const ft={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};E.StreamType=ft;const At={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};E.FontType=At;const Pt={ERRORS:0,WARNINGS:1,INFOS:5};E.VerbosityLevel=Pt;const V={NONE:0,BINARY:1,STREAM:2};E.CMapCompressionType=V;const Z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};E.OPS=Z;const ot={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};E.UNSUPPORTED_FEATURES=ot;const _t={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};E.PasswordResponses=_t;let ht=Pt.WARNINGS;function Ft(Mt){Number.isInteger(Mt)&&(ht=Mt)}function St(){return ht}function Lt(Mt){ht>=Pt.INFOS&&console.log(`Info: ${Mt}`)}function $t(Mt){ht>=Pt.WARNINGS&&console.log(`Warning: ${Mt}`)}function Dt(Mt){throw new Error(Mt)}function jt(Mt,Tt){Mt||Dt(Tt)}function Nt(Mt){if(!Mt)return!1;switch(Mt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qt(Mt,Tt=null,Et=null){if(!Mt)return null;try{if(Et&&typeof Mt=="string"){if(Et.addDefaultProtocol&&Mt.startsWith("www.")){const Xt=Mt.match(/\./g);Xt&&Xt.length>=2&&(Mt=`http://${Mt}`)}if(Et.tryConvertEncoding)try{Mt=Zt(Mt)}catch{}}const Gt=Tt?new URL(Mt,Tt):new URL(Mt);if(Nt(Gt))return Gt}catch{}return null}function rt(Mt,Tt,Et){return Object.defineProperty(Mt,Tt,{value:Et,enumerable:!0,configurable:!0,writable:!1}),Et}const B=function(){function Tt(Et,Gt){this.constructor===Tt&&Dt("Cannot initialize BaseException."),this.message=Et,this.name=Gt}return Tt.prototype=new Error,Tt.constructor=Tt,Tt}();E.BaseException=B;class U extends B{constructor(Tt,Et){super(Tt,"PasswordException"),this.code=Et}}E.PasswordException=U;class Q extends B{constructor(Tt,Et){super(Tt,"UnknownErrorException"),this.details=Et}}E.UnknownErrorException=Q;class A extends B{constructor(Tt){super(Tt,"InvalidPDFException")}}E.InvalidPDFException=A;class R extends B{constructor(Tt){super(Tt,"MissingPDFException")}}E.MissingPDFException=R;class q extends B{constructor(Tt,Et){super(Tt,"UnexpectedResponseException"),this.status=Et}}E.UnexpectedResponseException=q;class K extends B{constructor(Tt){super(Tt,"FormatError")}}E.FormatError=K;class X extends B{constructor(Tt){super(Tt,"AbortException")}}E.AbortException=X;function dt(Mt){(typeof Mt!="object"||Mt===null||Mt.length===void 0)&&Dt("Invalid argument for bytesToString");const Tt=Mt.length,Et=8192;if(Tt<Et)return String.fromCharCode.apply(null,Mt);const Gt=[];for(let Xt=0;Xt<Tt;Xt+=Et){const Qt=Math.min(Xt+Et,Tt),Jt=Mt.subarray(Xt,Qt);Gt.push(String.fromCharCode.apply(null,Jt))}return Gt.join("")}function mt(Mt){typeof Mt!="string"&&Dt("Invalid argument for stringToBytes");const Tt=Mt.length,Et=new Uint8Array(Tt);for(let Gt=0;Gt<Tt;++Gt)Et[Gt]=Mt.charCodeAt(Gt)&255;return Et}function kt(Mt){if(Mt.length!==void 0)return Mt.length;if(Mt.byteLength!==void 0)return Mt.byteLength;Dt("Invalid argument for arrayByteLength")}function yt(Mt){const Tt=Mt.length;if(Tt===1&&Mt[0]instanceof Uint8Array)return Mt[0];let Et=0;for(let Qt=0;Qt<Tt;Qt++)Et+=kt(Mt[Qt]);let Gt=0;const Xt=new Uint8Array(Et);for(let Qt=0;Qt<Tt;Qt++){let Jt=Mt[Qt];Jt instanceof Uint8Array||(typeof Jt=="string"?Jt=mt(Jt):Jt=new Uint8Array(Jt));const ue=Jt.byteLength;Xt.set(Jt,Gt),Gt+=ue}return Xt}function Rt(Mt){return String.fromCharCode(Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255)}function xt(Mt){return Object.keys(Mt).length}function Ot(Mt){const Tt=Object.create(null);for(const[Et,Gt]of Mt)Tt[Et]=Gt;return Tt}function Bt(){const Mt=new Uint8Array(4);return Mt[0]=1,new Uint32Array(Mt.buffer,0,1)[0]===1}function Ht(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return rt(this,"isLittleEndian",Bt())}static get isEvalSupported(){return rt(this,"isEvalSupported",Ht())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}E.FeatureTest=Wt;const It=[...Array(256).keys()].map(Mt=>Mt.toString(16).padStart(2,"0"));class zt{static makeHexColor(Tt,Et,Gt){return`#${It[Tt]}${It[Et]}${It[Gt]}`}static scaleMinMax(Tt,Et){let Gt;Tt[0]?(Tt[0]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[0],Et[1]*=Tt[0],Tt[3]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[3],Et[3]*=Tt[3]):(Gt=Et[0],Et[0]=Et[2],Et[2]=Gt,Gt=Et[1],Et[1]=Et[3],Et[3]=Gt,Tt[1]<0&&(Gt=Et[2],Et[2]=Et[3],Et[3]=Gt),Et[2]*=Tt[1],Et[3]*=Tt[1],Tt[2]<0&&(Gt=Et[0],Et[0]=Et[1],Et[1]=Gt),Et[0]*=Tt[2],Et[1]*=Tt[2]),Et[0]+=Tt[4],Et[1]+=Tt[4],Et[2]+=Tt[5],Et[3]+=Tt[5]}static transform(Tt,Et){return[Tt[0]*Et[0]+Tt[2]*Et[1],Tt[1]*Et[0]+Tt[3]*Et[1],Tt[0]*Et[2]+Tt[2]*Et[3],Tt[1]*Et[2]+Tt[3]*Et[3],Tt[0]*Et[4]+Tt[2]*Et[5]+Tt[4],Tt[1]*Et[4]+Tt[3]*Et[5]+Tt[5]]}static applyTransform(Tt,Et){const Gt=Tt[0]*Et[0]+Tt[1]*Et[2]+Et[4],Xt=Tt[0]*Et[1]+Tt[1]*Et[3]+Et[5];return[Gt,Xt]}static applyInverseTransform(Tt,Et){const Gt=Et[0]*Et[3]-Et[1]*Et[2],Xt=(Tt[0]*Et[3]-Tt[1]*Et[2]+Et[2]*Et[5]-Et[4]*Et[3])/Gt,Qt=(-Tt[0]*Et[1]+Tt[1]*Et[0]+Et[4]*Et[1]-Et[5]*Et[0])/Gt;return[Xt,Qt]}static getAxialAlignedBoundingBox(Tt,Et){const Gt=zt.applyTransform(Tt,Et),Xt=zt.applyTransform(Tt.slice(2,4),Et),Qt=zt.applyTransform([Tt[0],Tt[3]],Et),Jt=zt.applyTransform([Tt[2],Tt[1]],Et);return[Math.min(Gt[0],Xt[0],Qt[0],Jt[0]),Math.min(Gt[1],Xt[1],Qt[1],Jt[1]),Math.max(Gt[0],Xt[0],Qt[0],Jt[0]),Math.max(Gt[1],Xt[1],Qt[1],Jt[1])]}static inverseTransform(Tt){const Et=Tt[0]*Tt[3]-Tt[1]*Tt[2];return[Tt[3]/Et,-Tt[1]/Et,-Tt[2]/Et,Tt[0]/Et,(Tt[2]*Tt[5]-Tt[4]*Tt[3])/Et,(Tt[4]*Tt[1]-Tt[5]*Tt[0])/Et]}static apply3dTransform(Tt,Et){return[Tt[0]*Et[0]+Tt[1]*Et[1]+Tt[2]*Et[2],Tt[3]*Et[0]+Tt[4]*Et[1]+Tt[5]*Et[2],Tt[6]*Et[0]+Tt[7]*Et[1]+Tt[8]*Et[2]]}static singularValueDecompose2dScale(Tt){const Et=[Tt[0],Tt[2],Tt[1],Tt[3]],Gt=Tt[0]*Et[0]+Tt[1]*Et[2],Xt=Tt[0]*Et[1]+Tt[1]*Et[3],Qt=Tt[2]*Et[0]+Tt[3]*Et[2],Jt=Tt[2]*Et[1]+Tt[3]*Et[3],ue=(Gt+Jt)/2,ge=Math.sqrt((Gt+Jt)**2-4*(Gt*Jt-Qt*Xt))/2,pe=ue+ge||1,ae=ue-ge||1;return[Math.sqrt(pe),Math.sqrt(ae)]}static normalizeRect(Tt){const Et=Tt.slice(0);return Tt[0]>Tt[2]&&(Et[0]=Tt[2],Et[2]=Tt[0]),Tt[1]>Tt[3]&&(Et[1]=Tt[3],Et[3]=Tt[1]),Et}static intersect(Tt,Et){const Gt=Math.max(Math.min(Tt[0],Tt[2]),Math.min(Et[0],Et[2])),Xt=Math.min(Math.max(Tt[0],Tt[2]),Math.max(Et[0],Et[2]));if(Gt>Xt)return null;const Qt=Math.max(Math.min(Tt[1],Tt[3]),Math.min(Et[1],Et[3])),Jt=Math.min(Math.max(Tt[1],Tt[3]),Math.max(Et[1],Et[3]));return Qt>Jt?null:[Gt,Qt,Xt,Jt]}static bezierBoundingBox(Tt,Et,Gt,Xt,Qt,Jt,ue,ge){const pe=[],ae=[[],[]];let _e,de,ye,ne,Se,ve,we,xe;for(let ke=0;ke<2;++ke){if(ke===0?(de=6*Tt-12*Gt+6*Qt,_e=-3*Tt+9*Gt-9*Qt+3*ue,ye=3*Gt-3*Tt):(de=6*Et-12*Xt+6*Jt,_e=-3*Et+9*Xt-9*Jt+3*ge,ye=3*Xt-3*Et),Math.abs(_e)<1e-12){if(Math.abs(de)<1e-12)continue;ne=-ye/de,0<ne&&ne<1&&pe.push(ne);continue}we=de*de-4*ye*_e,xe=Math.sqrt(we),!(we<0)&&(Se=(-de+xe)/(2*_e),0<Se&&Se<1&&pe.push(Se),ve=(-de-xe)/(2*_e),0<ve&&ve<1&&pe.push(ve))}let me=pe.length,oe;const be=me;for(;me--;)ne=pe[me],oe=1-ne,ae[0][me]=oe*oe*oe*Tt+3*oe*oe*ne*Gt+3*oe*ne*ne*Qt+ne*ne*ne*ue,ae[1][me]=oe*oe*oe*Et+3*oe*oe*ne*Xt+3*oe*ne*ne*Jt+ne*ne*ne*ge;return ae[0][be]=Tt,ae[1][be]=Et,ae[0][be+1]=ue,ae[1][be+1]=ge,ae[0].length=ae[1].length=be+2,[Math.min(...ae[0]),Math.min(...ae[1]),Math.max(...ae[0]),Math.max(...ae[1])]}}E.Util=zt;const Vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ut(Mt){if(Mt[0]>="\xEF"){let Et;if(Mt[0]==="\xFE"&&Mt[1]==="\xFF"?Et="utf-16be":Mt[0]==="\xFF"&&Mt[1]==="\xFE"?Et="utf-16le":Mt[0]==="\xEF"&&Mt[1]==="\xBB"&&Mt[2]==="\xBF"&&(Et="utf-8"),Et)try{const Gt=new TextDecoder(Et,{fatal:!0}),Xt=mt(Mt);return Gt.decode(Xt)}catch(Gt){$t(`stringToPDFString: "${Gt}".`)}}const Tt=[];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Vt[Mt.charCodeAt(Et)];Tt.push(Xt?String.fromCharCode(Xt):Mt.charAt(Et))}return Tt.join("")}function se(Mt){return Mt.replace(/([()\\\n\r])/g,Tt=>Tt===`
`?"\\n":Tt==="\r"?"\\r":`\\${Tt}`)}function te(Mt){return/^[\x00-\x7F]*$/.test(Mt)}function Kt(Mt){const Tt=["\xFE\xFF"];for(let Et=0,Gt=Mt.length;Et<Gt;Et++){const Xt=Mt.charCodeAt(Et);Tt.push(String.fromCharCode(Xt>>8&255),String.fromCharCode(Xt&255))}return Tt.join("")}function Zt(Mt){return decodeURIComponent(escape(Mt))}function ie(Mt){return unescape(encodeURIComponent(Mt))}function ce(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.byteLength!==void 0}function re(Mt,Tt){if(Mt.length!==Tt.length)return!1;for(let Et=0,Gt=Mt.length;Et<Gt;Et++)if(Mt[Et]!==Tt[Et])return!1;return!0}function fe(Mt=new Date){return[Mt.getUTCFullYear().toString(),(Mt.getUTCMonth()+1).toString().padStart(2,"0"),Mt.getUTCDate().toString().padStart(2,"0"),Mt.getUTCHours().toString().padStart(2,"0"),Mt.getUTCMinutes().toString().padStart(2,"0"),Mt.getUTCSeconds().toString().padStart(2,"0")].join("")}function ee(){const Mt=Object.create(null);let Tt=!1;return Object.defineProperty(Mt,"settled",{get(){return Tt}}),Mt.promise=new Promise(function(Et,Gt){Mt.resolve=function(Xt){Tt=!0,Et(Xt)},Mt.reject=function(Xt){Tt=!0,Gt(Xt)}}),Mt}},(st,E,at)=>{at(3)},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.isNodeJS=void 0;const at=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");E.isNodeJS=at},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var st,at,D,vt,ct,Ct,wt,bt,it,Pe,gt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:et,NodeCMapReaderFactory:W,NodeStandardFontDataFactory:J}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=et,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=W,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=J}let createPDFNetworkStream;function setPDFNetworkStreamFactory(et){createPDFNetworkStream=et}function getDocument(et){const W=new PDFDocumentLoadingTask;let J;if(typeof et=="string"||et instanceof URL)J={url:et};else if((0,_util.isArrayBuffer)(et))J={data:et};else if(et instanceof PDFDataRangeTransport)J={range:et};else{if(typeof et!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!et.url&&!et.data&&!et.range)throw new Error("Invalid parameter object: need either .data, .range or .url");J=et}const G=Object.create(null);let nt=null,lt=null;for(const ut in J){const ft=J[ut];switch(ut){case"url":if(typeof window!="undefined")try{G[ut]=new URL(ft,window.location).href;continue}catch(At){(0,_util.warn)(`Cannot create valid URL: "${At}".`)}else if(typeof ft=="string"||ft instanceof URL){G[ut]=ft.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":nt=ft;continue;case"worker":lt=ft;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&ft instanceof Buffer)G[ut]=new Uint8Array(ft);else{if(ft instanceof Uint8Array)break;if(typeof ft=="string")G[ut]=(0,_util.stringToBytes)(ft);else if(typeof ft=="object"&&ft!==null&&!isNaN(ft.length))G[ut]=new Uint8Array(ft);else if((0,_util.isArrayBuffer)(ft))G[ut]=new Uint8Array(ft);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}G[ut]=ft}if(G.CMapReaderFactory=G.CMapReaderFactory||DefaultCMapReaderFactory,G.StandardFontDataFactory=G.StandardFontDataFactory||DefaultStandardFontDataFactory,G.ignoreErrors=G.stopAtErrors!==!0,G.fontExtraProperties=G.fontExtraProperties===!0,G.pdfBug=G.pdfBug===!0,G.enableXfa=G.enableXfa===!0,(!Number.isInteger(G.rangeChunkSize)||G.rangeChunkSize<1)&&(G.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof G.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(G.docBaseUrl))&&(G.docBaseUrl=null),(!Number.isInteger(G.maxImageSize)||G.maxImageSize<-1)&&(G.maxImageSize=-1),typeof G.cMapUrl!="string"&&(G.cMapUrl=null),typeof G.standardFontDataUrl!="string"&&(G.standardFontDataUrl=null),typeof G.useWorkerFetch!="boolean"&&(G.useWorkerFetch=G.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&G.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof G.isEvalSupported!="boolean"&&(G.isEvalSupported=!0),typeof G.disableFontFace!="boolean"&&(G.disableFontFace=_is_node.isNodeJS),typeof G.useSystemFonts!="boolean"&&(G.useSystemFonts=!_is_node.isNodeJS&&!G.disableFontFace),(typeof G.ownerDocument!="object"||G.ownerDocument===null)&&(G.ownerDocument=globalThis.document),typeof G.disableRange!="boolean"&&(G.disableRange=!1),typeof G.disableStream!="boolean"&&(G.disableStream=!1),typeof G.disableAutoFetch!="boolean"&&(G.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(G.verbosity),!lt){const ut={verbosity:G.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};lt=ut.port?PDFWorker.fromPort(ut):new PDFWorker(ut),W._worker=lt}const tt=W.docId;return lt.promise.then(function(){if(W.destroyed)throw new Error("Loading aborted");const ut=_fetchDocument(lt,G,nt,tt),ft=new Promise(function(At){let Pt;nt?Pt=new _transport_stream.PDFDataTransportStream({length:G.length,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:G.disableRange,disableStream:G.disableStream},nt):G.data||(Pt=createPDFNetworkStream({url:G.url,length:G.length,httpHeaders:G.httpHeaders,withCredentials:G.withCredentials,rangeChunkSize:G.rangeChunkSize,disableRange:G.disableRange,disableStream:G.disableStream})),At(Pt)});return Promise.all([ut,ft]).then(function([At,Pt]){if(W.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(tt,At,lt.port),Z=new WorkerTransport(V,W,Pt,G);W._transport=Z,V.send("Ready",null)})}).catch(W._capability.reject),W}async function _fetchDocument(et,W,J,G){if(et.destroyed)throw new Error("Worker was destroyed");J&&(W.length=J.length,W.initialData=J.initialData,W.progressiveDone=J.progressiveDone,W.contentDispositionFilename=J.contentDispositionFilename);const nt=await et.messageHandler.sendWithPromise("GetDocRequest",{docId:G,apiVersion:"2.14.305",source:{data:W.data,url:W.url,password:W.password,disableAutoFetch:W.disableAutoFetch,rangeChunkSize:W.rangeChunkSize,length:W.length},maxImageSize:W.maxImageSize,disableFontFace:W.disableFontFace,docBaseUrl:W.docBaseUrl,ignoreErrors:W.ignoreErrors,isEvalSupported:W.isEvalSupported,fontExtraProperties:W.fontExtraProperties,enableXfa:W.enableXfa,useSystemFonts:W.useSystemFonts,cMapUrl:W.useWorkerFetch?W.cMapUrl:null,standardFontDataUrl:W.useWorkerFetch?W.standardFontDataUrl:null});if(et.destroyed)throw new Error("Worker was destroyed");return nt}const E=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Fe(E,st)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var W;this.destroyed=!0,await((W=this._transport)==null?void 0:W.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=E;st=new WeakMap,le(PDFDocumentLoadingTask,st,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(W,J,G=!1,nt=null){this.length=W,this.initialData=J,this.progressiveDone=G,this.contentDispositionFilename=nt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(W){this._rangeListeners.push(W)}addProgressListener(W){this._progressListeners.push(W)}addProgressiveReadListener(W){this._progressiveReadListeners.push(W)}addProgressiveDoneListener(W){this._progressiveDoneListeners.push(W)}onDataRange(W,J){for(const G of this._rangeListeners)G(W,J)}onDataProgress(W,J){this._readyCapability.promise.then(()=>{for(const G of this._progressListeners)G(W,J)})}onDataProgressiveRead(W){this._readyCapability.promise.then(()=>{for(const J of this._progressiveReadListeners)J(W)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const W of this._progressiveDoneListeners)W()})}transportReady(){this._readyCapability.resolve()}requestDataRange(W,J){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(W,J){this._pdfInfo=W,this._transport=J,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(W){return this._transport.getPage(W)}getPageIndex(W){return this._transport.getPageIndex(W)}getDestinations(){return this._transport.getDestinations()}getDestination(W){return this._transport.getDestination(W)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(W=!1){return this._transport.startCleanup(W||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(W,J,G,nt,lt=!1){this._pageIndex=W,this._pageInfo=J,this._ownerDocument=nt,this._transport=G,this._stats=lt?new _display_utils.StatTimer:null,this._pdfBug=lt,this.commonObjs=G.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:W,rotation:J=this.rotate,offsetX:G=0,offsetY:nt=0,dontFlip:lt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:W,rotation:J,offsetX:G,offsetY:nt,dontFlip:lt})}getAnnotations({intent:W="display"}={}){const J=this._transport.getRenderingIntent(W);let G=this._annotationPromises.get(J.cacheKey);return G||(G=this._transport.getAnnotations(this._pageIndex,J.renderingIntent),this._annotationPromises.set(J.cacheKey,G),G=G.then(nt=>{for(const lt of nt)lt.titleObj!==void 0&&Object.defineProperty(lt,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),lt.titleObj.str}}),lt.contentsObj!==void 0&&Object.defineProperty(lt,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),lt.contentsObj.str}});return nt})),G}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var W;return((W=this._transport._htmlForXfa)==null?void 0:W.children[this._pageIndex])||null}render({canvasContext:W,viewport:J,intent:G="display",annotationMode:nt=_util.AnnotationMode.ENABLE,transform:lt=null,imageLayer:tt=null,canvasFactory:ut=null,background:ft=null,optionalContentConfigPromise:At=null,annotationCanvasMap:Pt=null,pageColors:V=null}){var $t,Dt;(($t=arguments[0])==null?void 0:$t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&nt===_util.AnnotationMode.ENABLE&&(nt=_util.AnnotationMode.ENABLE_FORMS)),((Dt=arguments[0])==null?void 0:Dt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&nt===_util.AnnotationMode.ENABLE&&(nt=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const Z=this._transport.getRenderingIntent(G,nt);this.pendingCleanup=!1,At||(At=this._transport.getOptionalContentConfig());let ot=this._intentStates.get(Z.cacheKey);ot||(ot=Object.create(null),this._intentStates.set(Z.cacheKey,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const _t=ut||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ht=!!(Z.renderingIntent&_util.RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=(0,_util.createPromiseCapability)(),ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(Z));const Ft=jt=>{ot.renderTasks.delete(St),(this.cleanupAfterRender||ht)&&(this.pendingCleanup=!0),this._tryCleanup(),jt?(St.capability.reject(jt),this._abortOperatorList({intentState:ot,reason:jt instanceof Error?jt:new Error(jt)})):St.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},St=new InternalRenderTask({callback:Ft,params:{canvasContext:W,viewport:J,transform:lt,imageLayer:tt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Pt,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:_t,useRequestAnimationFrame:!ht,pdfBug:this._pdfBug,pageColors:V});(ot.renderTasks||(ot.renderTasks=new Set)).add(St);const Lt=St.task;return Promise.all([ot.displayReadyCapability.promise,At]).then(([jt,Nt])=>{if(this.pendingCleanup){Ft();return}this._stats&&this._stats.time("Rendering"),St.initializeGraphics({transparency:jt,optionalContentConfig:Nt}),St.operatorListChanged()}).catch(Ft),Lt}getOperatorList({intent:W="display",annotationMode:J=_util.AnnotationMode.ENABLE}={}){function G(){lt.operatorList.lastChunk&&(lt.opListReadCapability.resolve(lt.operatorList),lt.renderTasks.delete(tt))}const nt=this._transport.getRenderingIntent(W,J,!0);let lt=this._intentStates.get(nt.cacheKey);lt||(lt=Object.create(null),this._intentStates.set(nt.cacheKey,lt));let tt;return lt.opListReadCapability||(tt=Object.create(null),tt.operatorListChanged=G,lt.opListReadCapability=(0,_util.createPromiseCapability)(),(lt.renderTasks||(lt.renderTasks=new Set)).add(tt),lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(nt)),lt.opListReadCapability.promise}streamTextContent({disableCombineTextItems:W=!1,includeMarkedContent:J=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:W!==!0,includeMarkedContent:J===!0},{highWaterMark:100,size(nt){return nt.items.length}})}getTextContent(W={}){if(this._transport._htmlForXfa)return this.getXfa().then(G=>_xfa_text.XfaText.textContent(G));const J=this.streamTextContent(W);return new Promise(function(G,nt){function lt(){tt.read().then(function({value:ft,done:At}){if(At){G(ut);return}Object.assign(ut.styles,ft.styles),ut.items.push(...ft.items),lt()},nt)}const tt=J.getReader(),ut={items:[],styles:Object.create(null)};lt()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const W=[];for(const J of this._intentStates.values())if(this._abortOperatorList({intentState:J,reason:new Error("Page was destroyed."),force:!0}),!J.opListReadCapability)for(const G of J.renderTasks)W.push(G.completed),G.cancel();this.objs.clear();for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(W)}cleanup(W=!1){return this.pendingCleanup=!0,this._tryCleanup(W)}_tryCleanup(W=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:J,operatorList:G}of this._intentStates.values())if(J.size>0||!G.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,W&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const J of this._bitmaps)J.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(W,J){const G=this._intentStates.get(J);!G||(this._stats&&this._stats.timeEnd("Page Request"),G.displayReadyCapability&&G.displayReadyCapability.resolve(W))}_renderPageChunk(W,J){for(let G=0,nt=W.length;G<nt;G++)J.operatorList.fnArray.push(W.fnArray[G]),J.operatorList.argsArray.push(W.argsArray[G]);J.operatorList.lastChunk=W.lastChunk;for(const G of J.renderTasks)G.operatorListChanged();W.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:W,cacheKey:J}){const nt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:W,cacheKey:J,annotationStorage:W&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),lt=this._intentStates.get(J);lt.streamReader=nt;const tt=()=>{nt.read().then(({value:ut,done:ft})=>{if(ft){lt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ut,lt),tt())},ut=>{if(lt.streamReader=null,!this._transport.destroyed){if(lt.operatorList){lt.operatorList.lastChunk=!0;for(const ft of lt.renderTasks)ft.operatorListChanged();this._tryCleanup()}if(lt.displayReadyCapability)lt.displayReadyCapability.reject(ut);else if(lt.opListReadCapability)lt.opListReadCapability.reject(ut);else throw ut}})};tt()}_abortOperatorList({intentState:W,reason:J,force:G=!1}){if(!!W.streamReader){if(!G){if(W.renderTasks.size>0)return;if(J instanceof _display_utils.RenderingCancelledException){W.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:W,reason:J,force:!0}),W.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(W.streamReader.cancel(new _util.AbortException(J.message)).catch(()=>{}),W.streamReader=null,!this._transport.destroyed){for(const[nt,lt]of this._intentStates)if(lt===W){this._intentStates.delete(nt);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(W,J){const G={data:structuredClone(W,J)};this._deferred.then(()=>{for(const nt of this._listeners)nt.call(this,G)})}addEventListener(W,J){this._listeners.push(J)}removeEventListener(W,J){const G=this._listeners.indexOf(J);this._listeners.splice(G,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const et=(at=document==null?void 0:document.currentScript)==null?void 0:at.src;et&&(PDFWorkerUtil.fallbackWorkerSrc=et.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(et,W){let J;try{if(J=new URL(et),!J.origin||J.origin==="null")return!1}catch{return!1}const G=new URL(W,J);return J.origin===G.origin},PDFWorkerUtil.createCDNWrapper=function(et){const W=`importScripts("${et}");`;return URL.createObjectURL(new Blob([W]))}}const _PDFWorker=class{constructor({name:et=null,port:W=null,verbosity:J=(0,_util.getVerbosityLevel)()}={}){if(W&&Yt(_PDFWorker,D).has(W))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=et,this.destroyed=!1,this.verbosity=J,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,W){Yt(_PDFWorker,D).set(W,this),this._initializeFromPort(W);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(et){this._port=et,this._messageHandler=new _message_handler.MessageHandler("main","worker",et),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let et=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,et)||(et=PDFWorkerUtil.createCDNWrapper(new URL(et,window.location).href));const W=new Worker(et),J=new _message_handler.MessageHandler("main","worker",W),G=()=>{W.removeEventListener("error",nt),J.destroy(),W.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},nt=()=>{this._webWorker||G()};W.addEventListener("error",nt),J.on("test",tt=>{if(W.removeEventListener("error",nt),this.destroyed){G();return}tt?(this._messageHandler=J,this._port=W,this._webWorker=W,this._readyCapability.resolve(),J.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),J.destroy(),W.terminate())}),J.on("ready",tt=>{if(W.removeEventListener("error",nt),this.destroyed){G();return}try{lt()}catch{this._setupFakeWorker()}});const lt=()=>{const tt=new Uint8Array;J.send("test",tt,[tt.buffer])};lt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(et=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const W=new LoopbackPort;this._port=W;const J=`fake${PDFWorkerUtil.fakeWorkerId++}`,G=new _message_handler.MessageHandler(J+"_worker",J,W);et.setup(G,W);const nt=new _message_handler.MessageHandler(J,J+"_worker",W);this._messageHandler=nt,this._readyCapability.resolve(),nt.send("configure",{verbosity:this.verbosity})}).catch(et=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${et.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Yt(_PDFWorker,D).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(et){if(!(et!=null&&et.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt(this,D).has(et.port)?Yt(this,D).get(et.port):new _PDFWorker(et)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var et;try{return((et=globalThis.pdfjsWorker)==null?void 0:et.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;D=new WeakMap,le(PDFWorker,D,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(W,J,G,nt){le(this,vt,null);le(this,ct,new Map);le(this,Ct,new Map);le(this,wt,null);this.messageHandler=W,this.loadingTask=J,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:J.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:nt.ownerDocument,styleElement:nt.styleElement}),this._params=nt,nt.useWorkerFetch||(this.CMapReaderFactory=new nt.CMapReaderFactory({baseUrl:nt.cMapUrl,isCompressed:nt.cMapPacked}),this.StandardFontDataFactory=new nt.StandardFontDataFactory({baseUrl:nt.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=G,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Yt(this,vt)}getRenderingIntent(W,J=_util.AnnotationMode.ENABLE,G=!1){let nt=_util.RenderingIntentFlag.DISPLAY,lt="";switch(W){case"any":nt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":nt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${W}`)}switch(J){case _util.AnnotationMode.DISABLE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:nt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,lt=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${J}`)}return G&&(nt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:nt,cacheKey:`${nt}_${lt}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const W=[];for(const G of Yt(this,ct).values())W.push(G._destroy());Yt(this,ct).clear(),Yt(this,Ct).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const J=this.messageHandler.sendWithPromise("Terminate",null);return W.push(J),Promise.all(W).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),he(this,wt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:W,loadingTask:J}=this;W.on("GetReader",(G,nt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=lt=>{this._lastProgress={loaded:lt.loaded,total:lt.total}},nt.onPull=()=>{this._fullReader.read().then(function({value:lt,done:tt}){if(tt){nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(lt),"GetReader - expected an ArrayBuffer."),nt.enqueue(new Uint8Array(lt),1,[lt])}).catch(lt=>{nt.error(lt)})},nt.onCancel=lt=>{this._fullReader.cancel(lt),nt.ready.catch(tt=>{if(!this.destroyed)throw tt})}}),W.on("ReaderHeadersReady",G=>{const nt=(0,_util.createPromiseCapability)(),lt=this._fullReader;return lt.headersReady.then(()=>{var tt;(!lt.isStreamingSupported||!lt.isRangeSupported)&&(this._lastProgress&&((tt=J.onProgress)==null||tt.call(J,this._lastProgress)),lt.onProgress=ut=>{var ft;(ft=J.onProgress)==null||ft.call(J,{loaded:ut.loaded,total:ut.total})}),nt.resolve({isStreamingSupported:lt.isStreamingSupported,isRangeSupported:lt.isRangeSupported,contentLength:lt.contentLength})},nt.reject),nt.promise}),W.on("GetRangeReader",(G,nt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const lt=this._networkStream.getRangeReader(G.begin,G.end);if(!lt){nt.close();return}nt.onPull=()=>{lt.read().then(function({value:tt,done:ut}){if(ut){nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(tt),"GetRangeReader - expected an ArrayBuffer."),nt.enqueue(new Uint8Array(tt),1,[tt])}).catch(tt=>{nt.error(tt)})},nt.onCancel=tt=>{lt.cancel(tt),nt.ready.catch(ut=>{if(!this.destroyed)throw ut})}}),W.on("GetDoc",({pdfInfo:G})=>{this._numPages=G.numPages,this._htmlForXfa=G.htmlForXfa,delete G.htmlForXfa,J._capability.resolve(new PDFDocumentProxy(G,this))}),W.on("DocException",function(G){let nt;switch(G.name){case"PasswordException":nt=new _util.PasswordException(G.message,G.code);break;case"InvalidPDFException":nt=new _util.InvalidPDFException(G.message);break;case"MissingPDFException":nt=new _util.MissingPDFException(G.message);break;case"UnexpectedResponseException":nt=new _util.UnexpectedResponseException(G.message,G.status);break;case"UnknownErrorException":nt=new _util.UnknownErrorException(G.message,G.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}J._capability.reject(nt)}),W.on("PasswordRequest",G=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),J.onPassword){const nt=lt=>{lt instanceof Error?this._passwordCapability.reject(lt):this._passwordCapability.resolve({password:lt})};try{J.onPassword(nt,G.code)}catch(lt){this._passwordCapability.reject(lt)}}else this._passwordCapability.reject(new _util.PasswordException(G.message,G.code));return this._passwordCapability.promise}),W.on("DataLoaded",G=>{var nt;(nt=J.onProgress)==null||nt.call(J,{loaded:G.length,total:G.length}),this.downloadInfoCapability.resolve(G)}),W.on("StartRenderPage",G=>{if(this.destroyed)return;Yt(this,ct).get(G.pageIndex)._startRenderPage(G.transparency,G.cacheKey)}),W.on("commonobj",([G,nt,lt])=>{var tt;if(!this.destroyed&&!this.commonObjs.has(G))switch(nt){case"Font":const ut=this._params;if("error"in lt){const Pt=lt.error;(0,_util.warn)(`Error during font loading: ${Pt}`),this.commonObjs.resolve(G,Pt);break}let ft=null;ut.pdfBug&&((tt=globalThis.FontInspector)==null?void 0:tt.enabled)&&(ft={registerFont(Pt,V){globalThis.FontInspector.fontAdded(Pt,V)}});const At=new _font_loader.FontFaceObject(lt,{isEvalSupported:ut.isEvalSupported,disableFontFace:ut.disableFontFace,ignoreErrors:ut.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:ft});this.fontLoader.bind(At).catch(Pt=>W.sendWithPromise("FontFallback",{id:G})).finally(()=>{!ut.fontExtraProperties&&At.data&&(At.data=null),this.commonObjs.resolve(G,At)});break;case"FontPath":case"Image":this.commonObjs.resolve(G,lt);break;default:throw new Error(`Got unknown common object type ${nt}`)}}),W.on("obj",([G,nt,lt,tt])=>{var ft;if(this.destroyed)return;const ut=Yt(this,ct).get(nt);if(!ut.objs.has(G))switch(lt){case"Image":ut.objs.resolve(G,tt);const At=8e6;if(tt){let Pt;if(tt.bitmap){const{bitmap:V,width:Z,height:ot}=tt;Pt=Z*ot*4,ut._bitmaps.add(V)}else Pt=((ft=tt.data)==null?void 0:ft.length)||0;Pt>At&&(ut.cleanupAfterRender=!0)}break;case"Pattern":ut.objs.resolve(G,tt);break;default:throw new Error(`Got unknown object type ${lt}`)}}),W.on("DocProgress",G=>{var nt;this.destroyed||(nt=J.onProgress)==null||nt.call(J,{loaded:G.loaded,total:G.total})}),W.on("DocStats",G=>{this.destroyed||he(this,vt,Object.freeze({streamTypes:Object.freeze(G.streamTypes),fontTypes:Object.freeze(G.fontTypes)}))}),W.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),W.on("FetchBuiltInCMap",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(G):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),W.on("FetchStandardFontData",G=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(G):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:W}){var J,G;this.destroyed||(G=(J=this.loadingTask).onUnsupportedFeature)==null||G.call(J,W)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(W){if(!Number.isInteger(W)||W<=0||W>this._numPages)return Promise.reject(new Error("Invalid page request."));const J=W-1,G=Yt(this,Ct).get(J);if(G)return G;const nt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:J}).then(lt=>{if(this.destroyed)throw new Error("Transport destroyed");const tt=new PDFPageProxy(J,lt,this,this._params.ownerDocument,this._params.pdfBug);return Yt(this,ct).set(J,tt),tt});return Yt(this,Ct).set(J,nt),nt}getPageIndex(W){return typeof W!="object"||W===null||!Number.isInteger(W.num)||W.num<0||!Number.isInteger(W.gen)||W.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:W.num,gen:W.gen})}getAnnotations(W,J){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:W,intent:J})}saveDocument(){var W,J;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(J=(W=this._fullReader)==null?void 0:W.filename)!=null?J:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(W){return typeof W!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:W})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(W){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:W})}getStructTree(W){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:W})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(W=>new _optional_content_config.OptionalContentConfig(W))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Yt(this,wt)||he(this,wt,this.messageHandler.sendWithPromise("GetMetadata",null).then(W=>{var J,G,nt,lt;return{info:W[0],metadata:W[1]?new _metadata.Metadata(W[1]):null,contentDispositionFilename:(G=(J=this._fullReader)==null?void 0:J.filename)!=null?G:null,contentLength:(lt=(nt=this._fullReader)==null?void 0:nt.contentLength)!=null?lt:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(W=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const J of Yt(this,ct).values())if(!J.cleanup())throw new Error(`startCleanup: Page ${J.pageNumber} is currently rendering.`);this.commonObjs.clear(),W||this.fontLoader.clear(),he(this,wt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const W=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:W.disableAutoFetch,enableXfa:W.enableXfa})}}vt=new WeakMap,ct=new WeakMap,Ct=new WeakMap,wt=new WeakMap;class PDFObjects{constructor(){le(this,it);le(this,bt,Object.create(null))}get(W,J=null){if(J){const nt=Ae(this,it,Pe).call(this,W);return nt.capability.promise.then(()=>J(nt.data)),null}const G=Yt(this,bt)[W];if(!(G!=null&&G.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${W}.`);return G.data}has(W){const J=Yt(this,bt)[W];return(J==null?void 0:J.capability.settled)||!1}resolve(W,J=null){const G=Ae(this,it,Pe).call(this,W);G.data=J,G.capability.resolve()}clear(){he(this,bt,Object.create(null))}}bt=new WeakMap,it=new WeakSet,Pe=function(W){const J=Yt(this,bt)[W];return J||(Yt(this,bt)[W]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(W){this._internalRenderTask=W,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const pt=class{constructor({callback:W,params:J,objs:G,commonObjs:nt,annotationCanvasMap:lt,operatorList:tt,pageIndex:ut,canvasFactory:ft,useRequestAnimationFrame:At=!1,pdfBug:Pt=!1,pageColors:V=null}){this.callback=W,this.params=J,this.objs=G,this.commonObjs=nt,this.annotationCanvasMap=lt,this.operatorListIdx=null,this.operatorList=tt,this._pageIndex=ut,this.canvasFactory=ft,this._pdfBug=Pt,this.pageColors=V,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=At===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=J.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:W=!1,optionalContentConfig:J}){var ft;if(this.cancelled)return;if(this._canvas){if(Yt(pt,gt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Yt(pt,gt).add(this._canvas)}this._pdfBug&&((ft=globalThis.StepperManager)==null?void 0:ft.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:G,viewport:nt,transform:lt,imageLayer:tt,background:ut}=this.params;this.gfx=new _canvas.CanvasGraphics(G,this.commonObjs,this.objs,this.canvasFactory,tt,J,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:lt,viewport:nt,transparency:W,background:ut}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(W=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Yt(pt,gt).delete(this._canvas),this.callback(W||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Yt(pt,gt).delete(this._canvas),this.callback())))}};let InternalRenderTask=pt;gt=new WeakMap,le(InternalRenderTask,gt,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.StatTimer=E.RenderingCancelledException=E.PixelsPerInch=E.PageViewport=E.PDFDateString=E.DOMStandardFontDataFactory=E.DOMSVGFactory=E.DOMCanvasFactory=E.DOMCMapReaderFactory=void 0,E.deprecated=ft,E.getFilenameFromUrl=G,E.getPdfFilenameFromUrl=nt,E.getXfaPageViewport=V,E.isDataScheme=W,E.isPdfFile=J,E.isValidFetchUrl=tt,E.loadScript=ut;var D=at(6),vt=at(1);const ct="http://www.w3.org/2000/svg",Z=class{};let Ct=Z;Ce(Ct,"CSS",96),Ce(Ct,"PDF",72),Ce(Ct,"PDF_TO_CSS_UNITS",Z.CSS/Z.PDF),E.PixelsPerInch=Ct;class wt extends D.BaseCanvasFactory{constructor({ownerDocument:_t=globalThis.document}={}){super(),this._document=_t}_createCanvas(_t,ht){const Ft=this._document.createElement("canvas");return Ft.width=_t,Ft.height=ht,Ft}}E.DOMCanvasFactory=wt;async function bt(ot,_t=!1){if(tt(ot,document.baseURI)){const ht=await fetch(ot);if(!ht.ok)throw new Error(ht.statusText);return _t?new Uint8Array(await ht.arrayBuffer()):(0,vt.stringToBytes)(await ht.text())}return new Promise((ht,Ft)=>{const St=new XMLHttpRequest;St.open("GET",ot,!0),_t&&(St.responseType="arraybuffer"),St.onreadystatechange=()=>{if(St.readyState===XMLHttpRequest.DONE){if(St.status===200||St.status===0){let Lt;if(_t&&St.response?Lt=new Uint8Array(St.response):!_t&&St.responseText&&(Lt=(0,vt.stringToBytes)(St.responseText)),Lt){ht(Lt);return}}Ft(new Error(St.statusText))}},St.send(null)})}class it extends D.BaseCMapReaderFactory{_fetchData(_t,ht){return bt(_t,this.isCompressed).then(Ft=>({cMapData:Ft,compressionType:ht}))}}E.DOMCMapReaderFactory=it;class Y extends D.BaseStandardFontDataFactory{_fetchData(_t){return bt(_t,!0)}}E.DOMStandardFontDataFactory=Y;class gt extends D.BaseSVGFactory{_createSVG(_t){return document.createElementNS(ct,_t)}}E.DOMSVGFactory=gt;class pt{constructor({viewBox:_t,scale:ht,rotation:Ft,offsetX:St=0,offsetY:Lt=0,dontFlip:$t=!1}){this.viewBox=_t,this.scale=ht,this.rotation=Ft,this.offsetX=St,this.offsetY=Lt;const Dt=(_t[2]+_t[0])/2,jt=(_t[3]+_t[1])/2;let Nt,qt,rt,B;switch(Ft%=360,Ft<0&&(Ft+=360),Ft){case 180:Nt=-1,qt=0,rt=0,B=1;break;case 90:Nt=0,qt=1,rt=1,B=0;break;case 270:Nt=0,qt=-1,rt=-1,B=0;break;case 0:Nt=1,qt=0,rt=0,B=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}$t&&(rt=-rt,B=-B);let U,Q,A,R;Nt===0?(U=Math.abs(jt-_t[1])*ht+St,Q=Math.abs(Dt-_t[0])*ht+Lt,A=Math.abs(_t[3]-_t[1])*ht,R=Math.abs(_t[2]-_t[0])*ht):(U=Math.abs(Dt-_t[0])*ht+St,Q=Math.abs(jt-_t[1])*ht+Lt,A=Math.abs(_t[2]-_t[0])*ht,R=Math.abs(_t[3]-_t[1])*ht),this.transform=[Nt*ht,qt*ht,rt*ht,B*ht,U-Nt*ht*Dt-rt*ht*jt,Q-qt*ht*Dt-B*ht*jt],this.width=A,this.height=R}clone({scale:_t=this.scale,rotation:ht=this.rotation,offsetX:Ft=this.offsetX,offsetY:St=this.offsetY,dontFlip:Lt=!1}={}){return new pt({viewBox:this.viewBox.slice(),scale:_t,rotation:ht,offsetX:Ft,offsetY:St,dontFlip:Lt})}convertToViewportPoint(_t,ht){return vt.Util.applyTransform([_t,ht],this.transform)}convertToViewportRectangle(_t){const ht=vt.Util.applyTransform([_t[0],_t[1]],this.transform),Ft=vt.Util.applyTransform([_t[2],_t[3]],this.transform);return[ht[0],ht[1],Ft[0],Ft[1]]}convertToPdfPoint(_t,ht){return vt.Util.applyInverseTransform([_t,ht],this.transform)}}E.PageViewport=pt;class et extends vt.BaseException{constructor(_t,ht){super(_t,"RenderingCancelledException"),this.type=ht}}E.RenderingCancelledException=et;function W(ot){const _t=ot.length;let ht=0;for(;ht<_t&&ot[ht].trim()==="";)ht++;return ot.substring(ht,ht+5).toLowerCase()==="data:"}function J(ot){return typeof ot=="string"&&/\.pdf$/i.test(ot)}function G(ot){const _t=ot.indexOf("#"),ht=ot.indexOf("?"),Ft=Math.min(_t>0?_t:ot.length,ht>0?ht:ot.length);return ot.substring(ot.lastIndexOf("/",Ft)+1,Ft)}function nt(ot,_t="document.pdf"){if(typeof ot!="string")return _t;if(W(ot))return(0,vt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),_t;const ht=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,St=ht.exec(ot);let Lt=Ft.exec(St[1])||Ft.exec(St[2])||Ft.exec(St[3]);if(Lt&&(Lt=Lt[0],Lt.includes("%")))try{Lt=Ft.exec(decodeURIComponent(Lt))[0]}catch{}return Lt||_t}class lt{constructor(){this.started=Object.create(null),this.times=[]}time(_t){_t in this.started&&(0,vt.warn)(`Timer is already running for ${_t}`),this.started[_t]=Date.now()}timeEnd(_t){_t in this.started||(0,vt.warn)(`Timer has not been started for ${_t}`),this.times.push({name:_t,start:this.started[_t],end:Date.now()}),delete this.started[_t]}toString(){const _t=[];let ht=0;for(const Ft of this.times){const St=Ft.name;St.length>ht&&(ht=St.length)}for(const Ft of this.times){const St=Ft.end-Ft.start;_t.push(`${Ft.name.padEnd(ht)} ${St}ms
`)}return _t.join("")}}E.StatTimer=lt;function tt(ot,_t){try{const{protocol:ht}=_t?new URL(ot,_t):new URL(ot);return ht==="http:"||ht==="https:"}catch{return!1}}function ut(ot,_t=!1){return new Promise((ht,Ft)=>{const St=document.createElement("script");St.src=ot,St.onload=function(Lt){_t&&St.remove(),ht(Lt)},St.onerror=function(){Ft(new Error(`Cannot load script at: ${St.src}`))},(document.head||document.documentElement).appendChild(St)})}function ft(ot){console.log("Deprecated API usage: "+ot)}let At;class Pt{static toDateObject(_t){if(!_t||typeof _t!="string")return null;At||(At=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ht=At.exec(_t);if(!ht)return null;const Ft=parseInt(ht[1],10);let St=parseInt(ht[2],10);St=St>=1&&St<=12?St-1:0;let Lt=parseInt(ht[3],10);Lt=Lt>=1&&Lt<=31?Lt:1;let $t=parseInt(ht[4],10);$t=$t>=0&&$t<=23?$t:0;let Dt=parseInt(ht[5],10);Dt=Dt>=0&&Dt<=59?Dt:0;let jt=parseInt(ht[6],10);jt=jt>=0&&jt<=59?jt:0;const Nt=ht[7]||"Z";let qt=parseInt(ht[8],10);qt=qt>=0&&qt<=23?qt:0;let rt=parseInt(ht[9],10)||0;return rt=rt>=0&&rt<=59?rt:0,Nt==="-"?($t+=qt,Dt+=rt):Nt==="+"&&($t-=qt,Dt-=rt),new Date(Date.UTC(Ft,St,Lt,$t,Dt,jt))}}E.PDFDateString=Pt;function V(ot,{scale:_t=1,rotation:ht=0}){const{width:Ft,height:St}=ot.attributes.style,Lt=[0,0,parseInt(Ft),parseInt(St)];return new pt({viewBox:Lt,scale:_t,rotation:ht})}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.BaseStandardFontDataFactory=E.BaseSVGFactory=E.BaseCanvasFactory=E.BaseCMapReaderFactory=void 0;var D=at(1);class vt{constructor(){this.constructor===vt&&(0,D.unreachable)("Cannot initialize BaseCanvasFactory.")}create(it,Y){if(it<=0||Y<=0)throw new Error("Invalid canvas size");const gt=this._createCanvas(it,Y);return{canvas:gt,context:gt.getContext("2d")}}reset(it,Y,gt){if(!it.canvas)throw new Error("Canvas is not specified");if(Y<=0||gt<=0)throw new Error("Invalid canvas size");it.canvas.width=Y,it.canvas.height=gt}destroy(it){if(!it.canvas)throw new Error("Canvas is not specified");it.canvas.width=0,it.canvas.height=0,it.canvas=null,it.context=null}_createCanvas(it,Y){(0,D.unreachable)("Abstract method `_createCanvas` called.")}}E.BaseCanvasFactory=vt;class ct{constructor({baseUrl:it=null,isCompressed:Y=!1}){this.constructor===ct&&(0,D.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=it,this.isCompressed=Y}async fetch({name:it}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!it)throw new Error("CMap name must be specified.");const Y=this.baseUrl+it+(this.isCompressed?".bcmap":""),gt=this.isCompressed?D.CMapCompressionType.BINARY:D.CMapCompressionType.NONE;return this._fetchData(Y,gt).catch(pt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Y}`)})}_fetchData(it,Y){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseCMapReaderFactory=ct;class Ct{constructor({baseUrl:it=null}){this.constructor===Ct&&(0,D.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=it}async fetch({filename:it}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!it)throw new Error("Font filename must be specified.");const Y=`${this.baseUrl}${it}`;return this._fetchData(Y).catch(gt=>{throw new Error(`Unable to load font data at: ${Y}`)})}_fetchData(it){(0,D.unreachable)("Abstract method `_fetchData` called.")}}E.BaseStandardFontDataFactory=Ct;class wt{constructor(){this.constructor===wt&&(0,D.unreachable)("Cannot initialize BaseSVGFactory.")}create(it,Y){if(it<=0||Y<=0)throw new Error("Invalid SVG dimensions");const gt=this._createSVG("svg:svg");return gt.setAttribute("version","1.1"),gt.setAttribute("width",`${it}px`),gt.setAttribute("height",`${Y}px`),gt.setAttribute("preserveAspectRatio","none"),gt.setAttribute("viewBox",`0 0 ${it} ${Y}`),gt}createElement(it){if(typeof it!="string")throw new Error("Invalid SVG element type");return this._createSVG(it)}_createSVG(it){(0,D.unreachable)("Abstract method `_createSVG` called.")}}E.BaseSVGFactory=wt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.FontLoader=E.FontFaceObject=void 0;var D=at(1);class vt{constructor({docId:bt,onUnsupportedFeature:it,ownerDocument:Y=globalThis.document,styleElement:gt=null}){this.constructor===vt&&(0,D.unreachable)("Cannot initialize BaseFontLoader."),this.docId=bt,this._onUnsupportedFeature=it,this._document=Y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(bt){this.nativeFontFaces.push(bt),this._document.fonts.add(bt)}insertRule(bt){let it=this.styleElement;it||(it=this.styleElement=this._document.createElement("style"),it.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(it));const Y=it.sheet;Y.insertRule(bt,Y.cssRules.length)}clear(){for(const bt of this.nativeFontFaces)this._document.fonts.delete(bt);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(bt){if(bt.attached||bt.missingFile)return;if(bt.attached=!0,this.isFontLoadingAPISupported){const Y=bt.createNativeFontFace();if(Y){this.addNativeFontFace(Y);try{await Y.loaded}catch(gt){throw this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,D.warn)(`Failed to load font '${Y.family}': '${gt}'.`),bt.disableFontFace=!0,gt}}return}const it=bt.createFontFaceRule();if(it){if(this.insertRule(it),this.isSyncFontLoadingSupported)return;await new Promise(Y=>{const gt=this._queueLoadingCallback(Y);this._prepareFontLoadEvent([it],[bt],gt)})}}_queueLoadingCallback(bt){(0,D.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var it;const bt=!!((it=this._document)!=null&&it.fonts);return(0,D.shadow)(this,"isFontLoadingAPISupported",bt)}get isSyncFontLoadingSupported(){(0,D.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,D.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(bt,it,Y){(0,D.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ct;E.FontLoader=ct,E.FontLoader=ct=class extends vt{constructor(bt){super(bt),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let bt=!1;if(typeof navigator=="undefined")bt=!0;else{const it=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(it==null?void 0:it[1])>=14&&(bt=!0)}return(0,D.shadow)(this,"isSyncFontLoadingSupported",bt)}_queueLoadingCallback(bt){function it(){for((0,D.assert)(!gt.done,"completeRequest() cannot be called twice."),gt.done=!0;Y.requests.length>0&&Y.requests[0].done;){const pt=Y.requests.shift();setTimeout(pt.callback,0)}}const Y=this.loadingContext,gt={id:`pdfjs-font-loading-${Y.nextRequestId++}`,done:!1,complete:it,callback:bt};return Y.requests.push(gt),gt}get _loadTestFont(){const bt=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,D.shadow)(this,"_loadTestFont",bt())}_prepareFontLoadEvent(bt,it,Y){function gt(Ft,St){return Ft.charCodeAt(St)<<24|Ft.charCodeAt(St+1)<<16|Ft.charCodeAt(St+2)<<8|Ft.charCodeAt(St+3)&255}function pt(Ft,St,Lt,$t){const Dt=Ft.substring(0,St),jt=Ft.substring(St+Lt);return Dt+$t+jt}let et,W;const J=this._document.createElement("canvas");J.width=1,J.height=1;const G=J.getContext("2d");let nt=0;function lt(Ft,St){if(nt++,nt>30){(0,D.warn)("Load test font never loaded."),St();return}if(G.font="30px "+Ft,G.fillText(".",0,20),G.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(lt.bind(null,Ft,St))}const tt=`lt${Date.now()}${this.loadTestFontId++}`;let ut=this._loadTestFont;ut=pt(ut,976,tt.length,tt);const At=16,Pt=1482184792;let V=gt(ut,At);for(et=0,W=tt.length-3;et<W;et+=4)V=V-Pt+gt(tt,et)|0;et<tt.length&&(V=V-Pt+gt(tt+"XXX",et)|0),ut=pt(ut,At,4,(0,D.string32)(V));const Z=`url(data:font/opentype;base64,${btoa(ut)});`,ot=`@font-face {font-family:"${tt}";src:${Z}}`;this.insertRule(ot);const _t=[];for(const Ft of it)_t.push(Ft.loadedName);_t.push(tt);const ht=this._document.createElement("div");ht.style.visibility="hidden",ht.style.width=ht.style.height="10px",ht.style.position="absolute",ht.style.top=ht.style.left="0px";for(const Ft of _t){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Ft,ht.appendChild(St)}this._document.body.appendChild(ht),lt(tt,()=>{ht.remove(),Y.complete()})}};class Ct{constructor(bt,{isEvalSupported:it=!0,disableFontFace:Y=!1,ignoreErrors:gt=!1,onUnsupportedFeature:pt,fontRegistry:et=null}){this.compiledGlyphs=Object.create(null);for(const W in bt)this[W]=bt[W];this.isEvalSupported=it!==!1,this.disableFontFace=Y===!0,this.ignoreErrors=gt===!0,this._onUnsupportedFeature=pt,this.fontRegistry=et}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let bt;if(!this.cssFontInfo)bt=new FontFace(this.loadedName,this.data,{});else{const it={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(it.style=`oblique ${this.cssFontInfo.italicAngle}deg`),bt=new FontFace(this.cssFontInfo.fontFamily,this.data,it)}return this.fontRegistry&&this.fontRegistry.registerFont(this),bt}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const bt=(0,D.bytesToString)(this.data),it=`url(data:${this.mimetype};base64,${btoa(bt)});`;let Y;if(!this.cssFontInfo)Y=`@font-face {font-family:"${this.loadedName}";src:${it}}`;else{let gt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(gt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${gt}src:${it}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,it),Y}getPathGenerator(bt,it){if(this.compiledGlyphs[it]!==void 0)return this.compiledGlyphs[it];let Y;try{Y=bt.get(this.loadedName+"_path_"+it)}catch(gt){if(!this.ignoreErrors)throw gt;return this._onUnsupportedFeature({featureId:D.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,D.warn)(`getPathGenerator - ignoring character: "${gt}".`),this.compiledGlyphs[it]=function(pt,et){}}if(this.isEvalSupported&&D.FeatureTest.isEvalSupported){const gt=[];for(const pt of Y){const et=pt.args!==void 0?pt.args.join(","):"";gt.push("c.",pt.cmd,"(",et,`);
`)}return this.compiledGlyphs[it]=new Function("c","size",gt.join(""))}return this.compiledGlyphs[it]=function(gt,pt){for(const et of Y)et.cmd==="scale"&&(et.args=[pt,-pt]),gt[et.cmd].apply(gt,et.args)}}}E.FontFaceObject=Ct},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationStorage=void 0;var D=at(9),vt=at(1);class ct{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(wt,bt){const it=this._storage.get(wt);return it===void 0?bt:Object.assign(bt,it)}getRawValue(wt){return this._storage.get(wt)}setValue(wt,bt){const it=this._storage.get(wt);let Y=!1;if(it!==void 0)for(const[gt,pt]of Object.entries(bt))it[gt]!==pt&&(Y=!0,it[gt]=pt);else Y=!0,this._storage.set(wt,bt);Y&&this._setModified()}getAll(){return this._storage.size>0?(0,vt.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const wt=new D.MurmurHash3_64;for(const[bt,it]of this._storage)wt.update(`${bt}:${JSON.stringify(it)}`);return wt.hexdigest()}}E.AnnotationStorage=ct},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MurmurHash3_64=void 0;var D=at(1);const vt=3285377520,ct=4294901760,Ct=65535;class wt{constructor(it){this.h1=it?it&4294967295:vt,this.h2=it?it&4294967295:vt}update(it){let Y,gt;if(typeof it=="string"){Y=new Uint8Array(it.length*2),gt=0;for(let Pt=0,V=it.length;Pt<V;Pt++){const Z=it.charCodeAt(Pt);Z<=255?Y[gt++]=Z:(Y[gt++]=Z>>>8,Y[gt++]=Z&255)}}else if((0,D.isArrayBuffer)(it))Y=it.slice(),gt=Y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const pt=gt>>2,et=gt-pt*4,W=new Uint32Array(Y.buffer,0,pt);let J=0,G=0,nt=this.h1,lt=this.h2;const tt=3432918353,ut=461845907,ft=tt&Ct,At=ut&Ct;for(let Pt=0;Pt<pt;Pt++)Pt&1?(J=W[Pt],J=J*tt&ct|J*ft&Ct,J=J<<15|J>>>17,J=J*ut&ct|J*At&Ct,nt^=J,nt=nt<<13|nt>>>19,nt=nt*5+3864292196):(G=W[Pt],G=G*tt&ct|G*ft&Ct,G=G<<15|G>>>17,G=G*ut&ct|G*At&Ct,lt^=G,lt=lt<<13|lt>>>19,lt=lt*5+3864292196);switch(J=0,et){case 3:J^=Y[pt*4+2]<<16;case 2:J^=Y[pt*4+1]<<8;case 1:J^=Y[pt*4],J=J*tt&ct|J*ft&Ct,J=J<<15|J>>>17,J=J*ut&ct|J*At&Ct,pt&1?nt^=J:lt^=J}this.h1=nt,this.h2=lt}hexdigest(){let it=this.h1,Y=this.h2;it^=Y>>>1,it=it*3981806797&ct|it*36045&Ct,Y=Y*4283543511&ct|((Y<<16|it>>>16)*2950163797&ct)>>>16,it^=Y>>>1,it=it*444984403&ct|it*60499&Ct,Y=Y*3301882366&ct|((Y<<16|it>>>16)*3120437893&ct)>>>16,it^=Y>>>1;const gt=(it>>>0).toString(16),pt=(Y>>>0).toString(16);return gt.padStart(8,"0")+pt.padStart(8,"0")}}E.MurmurHash3_64=wt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.CanvasGraphics=void 0;var D=at(1),vt=at(11),ct=at(12),Ct=at(3),wt=at(5);const bt=16,it=100,Y=4096,gt=15,pt=10,et=1e3,W=16,J=1.000001;function G(rt,B){if(rt._removeMirroring)throw new Error("Context is already forwarding operations.");rt.__originalSave=rt.save,rt.__originalRestore=rt.restore,rt.__originalRotate=rt.rotate,rt.__originalScale=rt.scale,rt.__originalTranslate=rt.translate,rt.__originalTransform=rt.transform,rt.__originalSetTransform=rt.setTransform,rt.__originalResetTransform=rt.resetTransform,rt.__originalClip=rt.clip,rt.__originalMoveTo=rt.moveTo,rt.__originalLineTo=rt.lineTo,rt.__originalBezierCurveTo=rt.bezierCurveTo,rt.__originalRect=rt.rect,rt.__originalClosePath=rt.closePath,rt.__originalBeginPath=rt.beginPath,rt._removeMirroring=()=>{rt.save=rt.__originalSave,rt.restore=rt.__originalRestore,rt.rotate=rt.__originalRotate,rt.scale=rt.__originalScale,rt.translate=rt.__originalTranslate,rt.transform=rt.__originalTransform,rt.setTransform=rt.__originalSetTransform,rt.resetTransform=rt.__originalResetTransform,rt.clip=rt.__originalClip,rt.moveTo=rt.__originalMoveTo,rt.lineTo=rt.__originalLineTo,rt.bezierCurveTo=rt.__originalBezierCurveTo,rt.rect=rt.__originalRect,rt.closePath=rt.__originalClosePath,rt.beginPath=rt.__originalBeginPath,delete rt._removeMirroring},rt.save=function(){B.save(),this.__originalSave()},rt.restore=function(){B.restore(),this.__originalRestore()},rt.translate=function(Q,A){B.translate(Q,A),this.__originalTranslate(Q,A)},rt.scale=function(Q,A){B.scale(Q,A),this.__originalScale(Q,A)},rt.transform=function(Q,A,R,q,K,X){B.transform(Q,A,R,q,K,X),this.__originalTransform(Q,A,R,q,K,X)},rt.setTransform=function(Q,A,R,q,K,X){B.setTransform(Q,A,R,q,K,X),this.__originalSetTransform(Q,A,R,q,K,X)},rt.resetTransform=function(){B.resetTransform(),this.__originalResetTransform()},rt.rotate=function(Q){B.rotate(Q),this.__originalRotate(Q)},rt.clip=function(Q){B.clip(Q),this.__originalClip(Q)},rt.moveTo=function(U,Q){B.moveTo(U,Q),this.__originalMoveTo(U,Q)},rt.lineTo=function(U,Q){B.lineTo(U,Q),this.__originalLineTo(U,Q)},rt.bezierCurveTo=function(U,Q,A,R,q,K){B.bezierCurveTo(U,Q,A,R,q,K),this.__originalBezierCurveTo(U,Q,A,R,q,K)},rt.rect=function(U,Q,A,R){B.rect(U,Q,A,R),this.__originalRect(U,Q,A,R)},rt.closePath=function(){B.closePath(),this.__originalClosePath()},rt.beginPath=function(){B.beginPath(),this.__originalBeginPath()}}function nt(rt){if(rt._transformStack&&(rt._transformStack=[]),!rt.mozCurrentTransform){rt._originalSave=rt.save,rt._originalRestore=rt.restore,rt._originalRotate=rt.rotate,rt._originalScale=rt.scale,rt._originalTranslate=rt.translate,rt._originalTransform=rt.transform,rt._originalSetTransform=rt.setTransform,rt._originalResetTransform=rt.resetTransform,rt._transformMatrix=rt._transformMatrix||[1,0,0,1,0,0],rt._transformStack=[];try{const B=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(rt),"lineWidth");rt._setLineWidth=B.set,rt._getLineWidth=B.get,Object.defineProperty(rt,"lineWidth",{set:function(Q){this._setLineWidth(Q*J)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(rt,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(rt,"mozCurrentTransformInverse",{get:function(){const[U,Q,A,R,q,K]=this._transformMatrix,X=U*R-Q*A,dt=Q*A-U*R;return[R/X,Q/dt,A/dt,U/X,(R*q-A*K)/dt,(Q*q-U*K)/X]}}),rt.save=function(){const U=this._transformMatrix;this._transformStack.push(U),this._transformMatrix=U.slice(0,6),this._originalSave()},rt.restore=function(){this._transformStack.length===0&&(0,D.warn)("Tried to restore a ctx when the stack was already empty.");const U=this._transformStack.pop();U&&(this._transformMatrix=U,this._originalRestore())},rt.translate=function(U,Q){const A=this._transformMatrix;A[4]=A[0]*U+A[2]*Q+A[4],A[5]=A[1]*U+A[3]*Q+A[5],this._originalTranslate(U,Q)},rt.scale=function(U,Q){const A=this._transformMatrix;A[0]*=U,A[1]*=U,A[2]*=Q,A[3]*=Q,this._originalScale(U,Q)},rt.transform=function(U,Q,A,R,q,K){const X=this._transformMatrix;this._transformMatrix=[X[0]*U+X[2]*Q,X[1]*U+X[3]*Q,X[0]*A+X[2]*R,X[1]*A+X[3]*R,X[0]*q+X[2]*K+X[4],X[1]*q+X[3]*K+X[5]],rt._originalTransform(U,Q,A,R,q,K)},rt.setTransform=function(U,Q,A,R,q,K){this._transformMatrix=[U,Q,A,R,q,K],rt._originalSetTransform(U,Q,A,R,q,K)},rt.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],rt._originalResetTransform()},rt.rotate=function(U){const Q=Math.cos(U),A=Math.sin(U),R=this._transformMatrix;this._transformMatrix=[R[0]*Q+R[2]*A,R[1]*Q+R[3]*A,R[0]*-A+R[2]*Q,R[1]*-A+R[3]*Q,R[4],R[5]],this._originalRotate(U)}}}class lt{constructor(B){this.canvasFactory=B,this.cache=Object.create(null)}getCanvas(B,U,Q,A){let R;return this.cache[B]!==void 0?(R=this.cache[B],this.canvasFactory.reset(R,U,Q),R.context.setTransform(1,0,0,1,0,0)):(R=this.canvasFactory.create(U,Q),this.cache[B]=R),A&&nt(R.context),R}delete(B){delete this.cache[B]}clear(){for(const B in this.cache){const U=this.cache[B];this.canvasFactory.destroy(U),delete this.cache[B]}}}function tt(rt,B,U,Q,A,R,q,K,X,dt){const[mt,kt,yt,Rt,xt,Ot]=rt.mozCurrentTransform;if(kt===0&&yt===0){const Wt=q*mt+xt,It=Math.round(Wt),zt=K*Rt+Ot,Vt=Math.round(zt),Ut=(q+X)*mt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(K+dt)*Rt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(Math.sign(mt),0,0,Math.sign(Rt),It,Vt),rt.drawImage(B,U,Q,A,R,0,0,se,Kt),rt.setTransform(mt,kt,yt,Rt,xt,Ot),[se,Kt]}if(mt===0&&Rt===0){const Wt=K*yt+xt,It=Math.round(Wt),zt=q*kt+Ot,Vt=Math.round(zt),Ut=(K+dt)*yt+xt,se=Math.abs(Math.round(Ut)-It)||1,te=(q+X)*kt+Ot,Kt=Math.abs(Math.round(te)-Vt)||1;return rt.setTransform(0,Math.sign(kt),Math.sign(yt),0,It,Vt),rt.drawImage(B,U,Q,A,R,0,0,Kt,se),rt.setTransform(mt,kt,yt,Rt,xt,Ot),[Kt,se]}rt.drawImage(B,U,Q,A,R,q,K,X,dt);const Bt=Math.hypot(mt,kt),Ht=Math.hypot(yt,Rt);return[Bt*X,Ht*dt]}function ut(rt){const{width:B,height:U}=rt;if(B>et||U>et)return null;const Q=1e3,A=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),R=B+1;let q=new Uint8Array(R*(U+1)),K,X,dt;const mt=B+7&-8;let kt=new Uint8Array(mt*U),yt=0;for(const It of rt.data){let zt=128;for(;zt>0;)kt[yt++]=It&zt?0:255,zt>>=1}let Rt=0;for(yt=0,kt[yt]!==0&&(q[0]=1,++Rt),X=1;X<B;X++)kt[yt]!==kt[yt+1]&&(q[X]=kt[yt]?2:1,++Rt),yt++;for(kt[yt]!==0&&(q[X]=2,++Rt),K=1;K<U;K++){yt=K*mt,dt=K*R,kt[yt-mt]!==kt[yt]&&(q[dt]=kt[yt]?1:8,++Rt);let It=(kt[yt]?4:0)+(kt[yt-mt]?8:0);for(X=1;X<B;X++)It=(It>>2)+(kt[yt+1]?4:0)+(kt[yt-mt+1]?8:0),A[It]&&(q[dt+X]=A[It],++Rt),yt++;if(kt[yt-mt]!==kt[yt]&&(q[dt+X]=kt[yt]?2:4,++Rt),Rt>Q)return null}for(yt=mt*(U-1),dt=K*R,kt[yt]!==0&&(q[dt]=8,++Rt),X=1;X<B;X++)kt[yt]!==kt[yt+1]&&(q[dt+X]=kt[yt]?4:8,++Rt),yt++;if(kt[yt]!==0&&(q[dt+X]=4,++Rt),Rt>Q)return null;const xt=new Int32Array([0,R,-1,0,-R,0,0,0,1]);let Ot,Bt,Ht;for(Ct.isNodeJS?Bt=[]:Ot=new Path2D,K=0;Rt&&K<=U;K++){let It=K*R;const zt=It+B;for(;It<zt&&!q[It];)It++;if(It===zt)continue;Ot?Ot.moveTo(It%R,K):Ht=[It%R,K];const Vt=It;let Ut=q[It];do{const se=xt[Ut];do It+=se;while(!q[It]);const te=q[It];te!==5&&te!==10?(Ut=te,q[It]=0):(Ut=te&51*Ut>>4,q[It]&=Ut>>2|Ut<<2),Ot?Ot.lineTo(It%R,It/R|0):Ht.push(It%R,It/R|0),q[It]||--Rt}while(Vt!==It);Ot||Bt.push(Ht),--K}return kt=null,q=null,function(It){if(It.save(),It.scale(1/B,-1/U),It.translate(0,-U),Ot)It.fill(Ot);else{It.beginPath();for(const zt of Bt){It.moveTo(zt[0],zt[1]);for(let Vt=2,Ut=zt.length;Vt<Ut;Vt+=2)It.lineTo(zt[Vt],zt[Vt+1])}It.fill()}It.beginPath(),It.restore()}}class ft{constructor(B,U){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=D.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=D.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,B,U])}clone(){const B=Object.create(this);return B.clipBox=this.clipBox.slice(),B}setCurrentPoint(B,U){this.x=B,this.y=U}updatePathMinMax(B,U,Q){[U,Q]=D.Util.applyTransform([U,Q],B),this.minX=Math.min(this.minX,U),this.minY=Math.min(this.minY,Q),this.maxX=Math.max(this.maxX,U),this.maxY=Math.max(this.maxY,Q)}updateRectMinMax(B,U){const Q=D.Util.applyTransform(U,B),A=D.Util.applyTransform(U.slice(2),B);this.minX=Math.min(this.minX,Q[0],A[0]),this.minY=Math.min(this.minY,Q[1],A[1]),this.maxX=Math.max(this.maxX,Q[0],A[0]),this.maxY=Math.max(this.maxY,Q[1],A[1])}updateScalingPathMinMax(B,U){D.Util.scaleMinMax(B,U),this.minX=Math.min(this.minX,U[0]),this.maxX=Math.max(this.maxX,U[1]),this.minY=Math.min(this.minY,U[2]),this.maxY=Math.max(this.maxY,U[3])}updateCurvePathMinMax(B,U,Q,A,R,q,K,X,dt,mt){const kt=D.Util.bezierBoundingBox(U,Q,A,R,q,K,X,dt);if(mt){mt[0]=Math.min(mt[0],kt[0],kt[2]),mt[1]=Math.max(mt[1],kt[0],kt[2]),mt[2]=Math.min(mt[2],kt[1],kt[3]),mt[3]=Math.max(mt[3],kt[1],kt[3]);return}this.updateRectMinMax(B,kt)}getPathBoundingBox(B=vt.PathType.FILL,U=null){const Q=[this.minX,this.minY,this.maxX,this.maxY];if(B===vt.PathType.STROKE){U||(0,D.unreachable)("Stroke bounding box must include transform.");const A=D.Util.singularValueDecompose2dScale(U),R=A[0]*this.lineWidth/2,q=A[1]*this.lineWidth/2;Q[0]-=R,Q[1]-=q,Q[2]+=R,Q[3]+=q}return Q}updateClipFromPath(){const B=D.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(B||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(B){this.clipBox=B,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(B=vt.PathType.FILL,U=null){return D.Util.intersect(this.clipBox,this.getPathBoundingBox(B,U))}}function At(rt,B,U=null){if(typeof ImageData!="undefined"&&B instanceof ImageData){rt.putImageData(B,0,0);return}const Q=B.height,A=B.width,R=Q%W,q=(Q-R)/W,K=R===0?q:q+1,X=rt.createImageData(A,W);let dt=0,mt;const kt=B.data,yt=X.data;let Rt,xt,Ot,Bt,Ht,Wt,It,zt;if(U)switch(U.length){case 1:Ht=U[0],Wt=U[0],It=U[0],zt=U[0];break;case 4:Ht=U[0],Wt=U[1],It=U[2],zt=U[3];break}if(B.kind===D.ImageKind.GRAYSCALE_1BPP){const Vt=kt.byteLength,Ut=new Uint32Array(yt.buffer,0,yt.byteLength>>2),se=Ut.length,te=A+7>>3;let Kt=4294967295,Zt=D.FeatureTest.isLittleEndian?4278190080:255;for(zt&&zt[0]===255&&zt[255]===0&&([Kt,Zt]=[Zt,Kt]),Rt=0;Rt<K;Rt++){for(Ot=Rt<q?W:R,mt=0,xt=0;xt<Ot;xt++){const ie=Vt-dt;let ce=0;const re=ie>te?A:ie*8-7,fe=re&-8;let ee=0,Mt=0;for(;ce<fe;ce+=8)Mt=kt[dt++],Ut[mt++]=Mt&128?Kt:Zt,Ut[mt++]=Mt&64?Kt:Zt,Ut[mt++]=Mt&32?Kt:Zt,Ut[mt++]=Mt&16?Kt:Zt,Ut[mt++]=Mt&8?Kt:Zt,Ut[mt++]=Mt&4?Kt:Zt,Ut[mt++]=Mt&2?Kt:Zt,Ut[mt++]=Mt&1?Kt:Zt;for(;ce<re;ce++)ee===0&&(Mt=kt[dt++],ee=128),Ut[mt++]=Mt&ee?Kt:Zt,ee>>=1}for(;mt<se;)Ut[mt++]=0;rt.putImageData(X,0,Rt*W)}}else if(B.kind===D.ImageKind.RGBA_32BPP){const Vt=!!(Ht||Wt||It);for(xt=0,Bt=A*W*4,Rt=0;Rt<q;Rt++){if(yt.set(kt.subarray(dt,dt+Bt)),dt+=Bt,Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,xt),xt+=W}if(Rt<K){if(Bt=A*R*4,yt.set(kt.subarray(dt,dt+Bt)),Vt)for(let Ut=0;Ut<Bt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,xt)}}else if(B.kind===D.ImageKind.RGB_24BPP){const Vt=!!(Ht||Wt||It);for(Ot=W,Bt=A*Ot,Rt=0;Rt<K;Rt++){for(Rt>=q&&(Ot=R,Bt=A*Ot),mt=0,xt=Bt;xt--;)yt[mt++]=kt[dt++],yt[mt++]=kt[dt++],yt[mt++]=kt[dt++],yt[mt++]=255;if(Vt)for(let Ut=0;Ut<mt;Ut+=4)Ht&&(yt[Ut+0]=Ht[yt[Ut+0]]),Wt&&(yt[Ut+1]=Wt[yt[Ut+1]]),It&&(yt[Ut+2]=It[yt[Ut+2]]);rt.putImageData(X,0,Rt*W)}}else throw new Error(`bad image kind: ${B.kind}`)}function Pt(rt,B){if(B.bitmap){rt.drawImage(B.bitmap,0,0);return}const U=B.height,Q=B.width,A=U%W,R=(U-A)/W,q=A===0?R:R+1,K=rt.createImageData(Q,W);let X=0;const dt=B.data,mt=K.data;for(let kt=0;kt<q;kt++){const yt=kt<R?W:A;({srcPos:X}=(0,ct.applyMaskImageData)({src:dt,srcPos:X,dest:mt,width:Q,height:yt})),rt.putImageData(K,0,kt*W)}}function V(rt,B){const U=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let Q=0,A=U.length;Q<A;Q++){const R=U[Q];rt[R]!==void 0&&(B[R]=rt[R])}rt.setLineDash!==void 0&&(B.setLineDash(rt.getLineDash()),B.lineDashOffset=rt.lineDashOffset)}function Z(rt,B){rt.strokeStyle=rt.fillStyle=B||"#000000",rt.fillRule="nonzero",rt.globalAlpha=1,rt.lineWidth=1,rt.lineCap="butt",rt.lineJoin="miter",rt.miterLimit=10,rt.globalCompositeOperation="source-over",rt.font="10px sans-serif",rt.setLineDash!==void 0&&(rt.setLineDash([]),rt.lineDashOffset=0)}function ot(rt,B,U,Q){const A=rt.length;for(let R=3;R<A;R+=4){const q=rt[R];if(q===0)rt[R-3]=B,rt[R-2]=U,rt[R-1]=Q;else if(q<255){const K=255-q;rt[R-3]=rt[R-3]*q+B*K>>8,rt[R-2]=rt[R-2]*q+U*K>>8,rt[R-1]=rt[R-1]*q+Q*K>>8}}}function _t(rt,B,U){const Q=rt.length,A=1/255;for(let R=3;R<Q;R+=4){const q=U?U[rt[R]]:rt[R];B[R]=B[R]*q*A|0}}function ht(rt,B,U){const Q=rt.length;for(let A=3;A<Q;A+=4){const R=rt[A-3]*77+rt[A-2]*152+rt[A-1]*28;B[A]=U?B[A]*U[R>>8]>>8:B[A]*R>>16}}function Ft(rt,B,U,Q,A,R,q,K,X,dt,mt){const kt=!!R,yt=kt?R[0]:0,Rt=kt?R[1]:0,xt=kt?R[2]:0;let Ot;A==="Luminosity"?Ot=ht:Ot=_t;const Ht=Math.min(Q,Math.ceil(1048576/U));for(let Wt=0;Wt<Q;Wt+=Ht){const It=Math.min(Ht,Q-Wt),zt=rt.getImageData(K-dt,Wt+(X-mt),U,It),Vt=B.getImageData(K,Wt+X,U,It);kt&&ot(zt.data,yt,Rt,xt),Ot(zt.data,Vt.data,q),B.putImageData(Vt,K,Wt+X)}}function St(rt,B,U,Q){const A=Q[0],R=Q[1],q=Q[2]-A,K=Q[3]-R;q===0||K===0||(Ft(B.context,U,q,K,B.subtype,B.backdrop,B.transferMap,A,R,B.offsetX,B.offsetY),rt.save(),rt.globalAlpha=1,rt.globalCompositeOperation="source-over",rt.setTransform(1,0,0,1,0,0),rt.drawImage(U.canvas,0,0),rt.restore())}function Lt(rt,B){const U=D.Util.singularValueDecompose2dScale(rt);U[0]=Math.fround(U[0]),U[1]=Math.fround(U[1]);const Q=Math.fround((globalThis.devicePixelRatio||1)*wt.PixelsPerInch.PDF_TO_CSS_UNITS);return B!==void 0?B:U[0]<=Q||U[1]<=Q}const $t=["butt","round","square"],Dt=["miter","round","bevel"],jt={},Nt={};class qt{constructor(B,U,Q,A,R,q,K,X){this.ctx=B,this.current=new ft(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=U,this.objs=Q,this.canvasFactory=A,this.imageLayer=R,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=q,this.cachedCanvases=new lt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(X==null?void 0:X.background)||null,this.foregroundColor=(X==null?void 0:X.foreground)||null,B&&nt(B),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(B,U=null){return typeof B=="string"?B.startsWith("g_")?this.commonObjs.get(B):this.objs.get(B):U}beginDrawing({transform:B,viewport:U,transparency:Q=!1,background:A=null}){const R=this.ctx.canvas.width,q=this.ctx.canvas.height,K=A||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const dt=this.backgroundColor=this.ctx.fillStyle;let mt=!0,kt=K;if(this.ctx.fillStyle=K,kt=this.ctx.fillStyle,mt=typeof kt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(kt),X==="#000000"&&dt==="#ffffff"||X===dt||!mt)this.foregroundColor=this.backgroundColor=null;else{const yt=parseInt(kt.slice(1),16),Rt=(yt&&16711680)>>16,xt=(yt&&65280)>>8,Ot=yt&&255,Bt=Wt=>(Wt/=255,Wt<=.03928?Wt/12.92:((Wt+.055)/1.055)**2.4),Ht=Math.round(.2126*Bt(Rt)+.7152*Bt(xt)+.0722*Bt(Ot));this.selectColor=(Wt,It,zt)=>{const Vt=.2126*Bt(Wt)+.7152*Bt(It)+.0722*Bt(zt);return Math.round(Vt)===Ht?dt:X}}}if(this.ctx.fillStyle=this.backgroundColor||K,this.ctx.fillRect(0,0,R,q),this.ctx.restore(),Q){const X=this.cachedCanvases.getCanvas("transparent",R,q,!0);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),Z(this.ctx,this.foregroundColor),B&&(this.ctx.transform.apply(this.ctx,B),this.outputScaleX=B[0],this.outputScaleY=B[0]),this.ctx.transform.apply(this.ctx,U.transform),this.viewportScale=U.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(B,U,Q,A){const R=B.argsArray,q=B.fnArray;let K=U||0;const X=R.length;if(X===K)return K;const dt=X-K>pt&&typeof Q=="function",mt=dt?Date.now()+gt:0;let kt=0;const yt=this.commonObjs,Rt=this.objs;let xt;for(;;){if(A!==void 0&&K===A.nextBreakPoint)return A.breakIt(K,Q),K;if(xt=q[K],xt!==D.OPS.dependency)this[xt].apply(this,R[K]);else for(const Ot of R[K]){const Bt=Ot.startsWith("g_")?yt:Rt;if(!Bt.has(Ot))return Bt.get(Ot,Q),K}if(K++,K===X)return K;if(dt&&++kt>pt){if(Date.now()>mt)return Q(),K;kt=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const B of this._cachedBitmapsMap.values()){for(const U of B.values())typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement&&(U.width=U.height=0);B.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(B,U){const Q=B.width,A=B.height;let R=Math.max(Math.hypot(U[0],U[1]),1),q=Math.max(Math.hypot(U[2],U[3]),1),K=Q,X=A,dt="prescale1",mt,kt;for(;R>2&&K>1||q>2&&X>1;){let yt=K,Rt=X;R>2&&K>1&&(yt=Math.ceil(K/2),R/=K/yt),q>2&&X>1&&(Rt=Math.ceil(X/2),q/=X/Rt),mt=this.cachedCanvases.getCanvas(dt,yt,Rt,!1),kt=mt.context,kt.clearRect(0,0,yt,Rt),kt.drawImage(B,0,0,K,X,0,0,yt,Rt),B=mt.canvas,K=yt,X=Rt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:B,paintWidth:K,paintHeight:X}}_createMaskCanvas(B){const U=this.ctx,{width:Q,height:A}=B,R=this.current.fillColor,q=this.current.patternFill,K=U.mozCurrentTransform;let X,dt,mt,kt;if((B.bitmap||B.data)&&B.count>1){const se=B.bitmap||B.data.buffer,te=K.slice(0,4);dt=JSON.stringify(q?te:[te,R]),X=this._cachedBitmapsMap.get(se),X||(X=new Map,this._cachedBitmapsMap.set(se,X));const Kt=X.get(dt);if(Kt&&!q){const Zt=Math.round(Math.min(K[0],K[2])+K[4]),ie=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Kt,offsetX:Zt,offsetY:ie}}mt=Kt}mt||(kt=this.cachedCanvases.getCanvas("maskCanvas",Q,A,!1),Pt(kt.context,B));let yt=D.Util.transform(K,[1/Q,0,0,-1/A,0,0]);yt=D.Util.transform(yt,[1,0,0,1,0,-A]);const Rt=D.Util.applyTransform([0,0],yt),xt=D.Util.applyTransform([Q,A],yt),Ot=D.Util.normalizeRect([Rt[0],Rt[1],xt[0],xt[1]]),Bt=Math.round(Ot[2]-Ot[0])||1,Ht=Math.round(Ot[3]-Ot[1])||1,Wt=this.cachedCanvases.getCanvas("fillCanvas",Bt,Ht,!0),It=Wt.context,zt=Math.min(Rt[0],xt[0]),Vt=Math.min(Rt[1],xt[1]);It.translate(-zt,-Vt),It.transform.apply(It,yt),mt||(mt=this._scaleImage(kt.canvas,It.mozCurrentTransformInverse),mt=mt.img,X&&q&&X.set(dt,mt)),It.imageSmoothingEnabled=Lt(It.mozCurrentTransform,B.interpolate),tt(It,mt,0,0,mt.width,mt.height,0,0,Q,A),It.globalCompositeOperation="source-in";const Ut=D.Util.transform(It.mozCurrentTransformInverse,[1,0,0,1,-zt,-Vt]);return It.fillStyle=q?R.getPattern(U,this,Ut,vt.PathType.FILL):R,It.fillRect(0,0,Q,A),X&&!q&&(this.cachedCanvases.delete("fillCanvas"),X.set(dt,Wt.canvas)),{canvas:Wt.canvas,offsetX:Math.round(zt),offsetY:Math.round(Vt)}}setLineWidth(B){B!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=B,this.ctx.lineWidth=B}setLineCap(B){this.ctx.lineCap=$t[B]}setLineJoin(B){this.ctx.lineJoin=Dt[B]}setMiterLimit(B){this.ctx.miterLimit=B}setDash(B,U){const Q=this.ctx;Q.setLineDash!==void 0&&(Q.setLineDash(B),Q.lineDashOffset=U)}setRenderingIntent(B){}setFlatness(B){}setGState(B){for(let U=0,Q=B.length;U<Q;U++){const A=B[U],R=A[0],q=A[1];switch(R){case"LW":this.setLineWidth(q);break;case"LC":this.setLineCap(q);break;case"LJ":this.setLineJoin(q);break;case"ML":this.setMiterLimit(q);break;case"D":this.setDash(q[0],q[1]);break;case"RI":this.setRenderingIntent(q);break;case"FL":this.setFlatness(q);break;case"Font":this.setFont(q[0],q[1]);break;case"CA":this.current.strokeAlpha=A[1];break;case"ca":this.current.fillAlpha=A[1],this.ctx.globalAlpha=A[1];break;case"BM":this.ctx.globalCompositeOperation=q;break;case"SMask":this.current.activeSMask=q?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=q}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const B=this.inSMaskMode;this.current.activeSMask&&!B?this.beginSMaskMode():!this.current.activeSMask&&B&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const B=this.ctx.canvas.width,U=this.ctx.canvas.height,Q="smaskGroupAt"+this.groupLevel,A=this.cachedCanvases.getCanvas(Q,B,U,!0);this.suspendedCtx=this.ctx,this.ctx=A.context;const R=this.ctx;R.setTransform.apply(R,this.suspendedCtx.mozCurrentTransform),V(this.suspendedCtx,R),G(R,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(B){if(!this.current.activeSMask)return;B?(B[0]=Math.floor(B[0]),B[1]=Math.floor(B[1]),B[2]=Math.ceil(B[2]),B[3]=Math.ceil(B[3])):B=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const U=this.current.activeSMask,Q=this.suspendedCtx;St(Q,U,this.ctx,B),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const B=this.current;this.stateStack.push(B),this.current=B.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(B,U,Q,A,R,q){this.ctx.transform(B,U,Q,A,R,q),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(B,U,Q){const A=this.ctx,R=this.current;let q=R.x,K=R.y,X,dt;const mt=A.mozCurrentTransform,kt=mt[0]===0&&mt[3]===0||mt[1]===0&&mt[2]===0,yt=kt?Q.slice(0):null;for(let Rt=0,xt=0,Ot=B.length;Rt<Ot;Rt++)switch(B[Rt]|0){case D.OPS.rectangle:q=U[xt++],K=U[xt++];const Bt=U[xt++],Ht=U[xt++],Wt=q+Bt,It=K+Ht;A.moveTo(q,K),Bt===0||Ht===0?A.lineTo(Wt,It):(A.lineTo(Wt,K),A.lineTo(Wt,It),A.lineTo(q,It)),kt||R.updateRectMinMax(mt,[q,K,Wt,It]),A.closePath();break;case D.OPS.moveTo:q=U[xt++],K=U[xt++],A.moveTo(q,K),kt||R.updatePathMinMax(mt,q,K);break;case D.OPS.lineTo:q=U[xt++],K=U[xt++],A.lineTo(q,K),kt||R.updatePathMinMax(mt,q,K);break;case D.OPS.curveTo:X=q,dt=K,q=U[xt+4],K=U[xt+5],A.bezierCurveTo(U[xt],U[xt+1],U[xt+2],U[xt+3],q,K),R.updateCurvePathMinMax(mt,X,dt,U[xt],U[xt+1],U[xt+2],U[xt+3],q,K,yt),xt+=6;break;case D.OPS.curveTo2:X=q,dt=K,A.bezierCurveTo(q,K,U[xt],U[xt+1],U[xt+2],U[xt+3]),R.updateCurvePathMinMax(mt,X,dt,q,K,U[xt],U[xt+1],U[xt+2],U[xt+3],yt),q=U[xt+2],K=U[xt+3],xt+=4;break;case D.OPS.curveTo3:X=q,dt=K,q=U[xt+2],K=U[xt+3],A.bezierCurveTo(U[xt],U[xt+1],q,K,q,K),R.updateCurvePathMinMax(mt,X,dt,U[xt],U[xt+1],q,K,q,K,yt),xt+=4;break;case D.OPS.closePath:A.closePath();break}kt&&R.updateScalingPathMinMax(mt,yt),R.setCurrentPoint(q,K)}closePath(){this.ctx.closePath()}stroke(B){B=typeof B!="undefined"?B:!0;const U=this.ctx,Q=this.current.strokeColor;U.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Q=="object"&&(Q==null?void 0:Q.getPattern)?(U.save(),U.strokeStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.STROKE),this.rescaleAndStroke(!1),U.restore()):this.rescaleAndStroke(!0)),B&&this.consumePath(this.current.getClippedPathBoundingBox()),U.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(B){B=typeof B!="undefined"?B:!0;const U=this.ctx,Q=this.current.fillColor,A=this.current.patternFill;let R=!1;A&&(U.save(),U.fillStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.FILL),R=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(U.fill("evenodd"),this.pendingEOFill=!1):U.fill()),R&&U.restore(),B&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jt}eoClip(){this.pendingClip=Nt}beginText(){this.current.textMatrix=D.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const B=this.pendingTextPaths,U=this.ctx;if(B===void 0){U.beginPath();return}U.save(),U.beginPath();for(let Q=0;Q<B.length;Q++){const A=B[Q];U.setTransform.apply(U,A.transform),U.translate(A.x,A.y),A.addToPath(U,A.fontSize)}U.restore(),U.clip(),U.beginPath(),delete this.pendingTextPaths}setCharSpacing(B){this.current.charSpacing=B}setWordSpacing(B){this.current.wordSpacing=B}setHScale(B){this.current.textHScale=B/100}setLeading(B){this.current.leading=-B}setFont(B,U){const Q=this.commonObjs.get(B),A=this.current;if(!Q)throw new Error(`Can't find font for ${B}`);if(A.fontMatrix=Q.fontMatrix||D.FONT_IDENTITY_MATRIX,(A.fontMatrix[0]===0||A.fontMatrix[3]===0)&&(0,D.warn)("Invalid font matrix for font "+B),U<0?(U=-U,A.fontDirection=-1):A.fontDirection=1,this.current.font=Q,this.current.fontSize=U,Q.isType3Font)return;const R=Q.loadedName||"sans-serif";let q="normal";Q.black?q="900":Q.bold&&(q="bold");const K=Q.italic?"italic":"normal",X=`"${R}", ${Q.fallbackName}`;let dt=U;U<bt?dt=bt:U>it&&(dt=it),this.current.fontSizeScale=U/dt,this.ctx.font=`${K} ${q} ${dt}px ${X}`}setTextRenderingMode(B){this.current.textRenderingMode=B}setTextRise(B){this.current.textRise=B}moveText(B,U){this.current.x=this.current.lineX+=B,this.current.y=this.current.lineY+=U}setLeadingMoveText(B,U){this.setLeading(-U),this.moveText(B,U)}setTextMatrix(B,U,Q,A,R,q){this.current.textMatrix=[B,U,Q,A,R,q],this.current.textMatrixScale=Math.hypot(B,U),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(B,U,Q,A){const R=this.ctx,q=this.current,K=q.font,X=q.textRenderingMode,dt=q.fontSize/q.fontSizeScale,mt=X&D.TextRenderingMode.FILL_STROKE_MASK,kt=!!(X&D.TextRenderingMode.ADD_TO_PATH_FLAG),yt=q.patternFill&&!K.missingFile;let Rt;(K.disableFontFace||kt||yt)&&(Rt=K.getPathGenerator(this.commonObjs,B)),K.disableFontFace||yt?(R.save(),R.translate(U,Q),R.beginPath(),Rt(R,dt),A&&R.setTransform.apply(R,A),(mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fill(),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.stroke(),R.restore()):((mt===D.TextRenderingMode.FILL||mt===D.TextRenderingMode.FILL_STROKE)&&R.fillText(B,U,Q),(mt===D.TextRenderingMode.STROKE||mt===D.TextRenderingMode.FILL_STROKE)&&R.strokeText(B,U,Q)),kt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:R.mozCurrentTransform,x:U,y:Q,fontSize:dt,addToPath:Rt})}get isFontSubpixelAAEnabled(){const{context:B}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);B.scale(1.5,1),B.fillText("I",0,10);const U=B.getImageData(0,0,10,10).data;let Q=!1;for(let A=3;A<U.length;A+=4)if(U[A]>0&&U[A]<255){Q=!0;break}return(0,D.shadow)(this,"isFontSubpixelAAEnabled",Q)}showText(B){const U=this.current,Q=U.font;if(Q.isType3Font)return this.showType3Text(B);const A=U.fontSize;if(A===0)return;const R=this.ctx,q=U.fontSizeScale,K=U.charSpacing,X=U.wordSpacing,dt=U.fontDirection,mt=U.textHScale*dt,kt=B.length,yt=Q.vertical,Rt=yt?1:-1,xt=Q.defaultVMetrics,Ot=A*U.fontMatrix[0],Bt=U.textRenderingMode===D.TextRenderingMode.FILL&&!Q.disableFontFace&&!U.patternFill;R.save(),R.transform.apply(R,U.textMatrix),R.translate(U.x,U.y+U.textRise),dt>0?R.scale(mt,-1):R.scale(mt,1);let Ht;if(U.patternFill){R.save();const Ut=U.fillColor.getPattern(R,this,R.mozCurrentTransformInverse,vt.PathType.FILL);Ht=R.mozCurrentTransform,R.restore(),R.fillStyle=Ut}let Wt=U.lineWidth;const It=U.textMatrixScale;if(It===0||Wt===0){const Ut=U.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;(Ut===D.TextRenderingMode.STROKE||Ut===D.TextRenderingMode.FILL_STROKE)&&(Wt=this.getSinglePixelWidth())}else Wt/=It;q!==1&&(R.scale(q,q),Wt/=q),R.lineWidth=Wt;let zt=0,Vt;for(Vt=0;Vt<kt;++Vt){const Ut=B[Vt];if(typeof Ut=="number"){zt+=Rt*Ut*A/1e3;continue}let se=!1;const te=(Ut.isSpace?X:0)+K,Kt=Ut.fontChar,Zt=Ut.accent;let ie,ce,re=Ut.width;if(yt){const ee=Ut.vmetric||xt,Mt=-(Ut.vmetric?ee[1]:re*.5)*Ot,Tt=ee[2]*Ot;re=ee?-ee[0]:re,ie=Mt/q,ce=(zt+Tt)/q}else ie=zt/q,ce=0;if(Q.remeasure&&re>0){const ee=R.measureText(Kt).width*1e3/A*q;if(re<ee&&this.isFontSubpixelAAEnabled){const Mt=re/ee;se=!0,R.save(),R.scale(Mt,1),ie/=Mt}else re!==ee&&(ie+=(re-ee)/2e3*A/q)}if(this.contentVisible&&(Ut.isInFont||Q.missingFile)){if(Bt&&!Zt)R.fillText(Kt,ie,ce);else if(this.paintChar(Kt,ie,ce,Ht),Zt){const ee=ie+A*Zt.offset.x/q,Mt=ce-A*Zt.offset.y/q;this.paintChar(Zt.fontChar,ee,Mt,Ht)}}let fe;yt?fe=re*Ot-te*dt:fe=re*Ot+te*dt,zt+=fe,se&&R.restore()}yt?U.y-=zt:U.x+=zt*mt,R.restore(),this.compose()}showType3Text(B){const U=this.ctx,Q=this.current,A=Q.font,R=Q.fontSize,q=Q.fontDirection,K=A.vertical?1:-1,X=Q.charSpacing,dt=Q.wordSpacing,mt=Q.textHScale*q,kt=Q.fontMatrix||D.FONT_IDENTITY_MATRIX,yt=B.length,Rt=Q.textRenderingMode===D.TextRenderingMode.INVISIBLE;let xt,Ot,Bt,Ht;if(!(Rt||R===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,U.save(),U.transform.apply(U,Q.textMatrix),U.translate(Q.x,Q.y),U.scale(mt,q),xt=0;xt<yt;++xt){if(Ot=B[xt],typeof Ot=="number"){Ht=K*Ot*R/1e3,this.ctx.translate(Ht,0),Q.x+=Ht*mt;continue}const Wt=(Ot.isSpace?dt:0)+X,It=A.charProcOperatorList[Ot.operatorListId];if(!It){(0,D.warn)(`Type3 character "${Ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ot,this.save(),U.scale(R,R),U.transform.apply(U,kt),this.executeOperatorList(It),this.restore()),Bt=D.Util.applyTransform([Ot.width,0],kt)[0]*R+Wt,U.translate(Bt,0),Q.x+=Bt*mt}U.restore(),this.processingType3=null}}setCharWidth(B,U){}setCharWidthAndBounds(B,U,Q,A,R,q){this.ctx.rect(Q,A,R-Q,q-A),this.ctx.clip(),this.endPath()}getColorN_Pattern(B){let U;if(B[0]==="TilingPattern"){const Q=B[1],A=this.baseTransform||this.ctx.mozCurrentTransform.slice(),R={createCanvasGraphics:q=>new qt(q,this.commonObjs,this.objs,this.canvasFactory)};U=new vt.TilingPattern(B,Q,this.ctx,R,A)}else U=this._getPattern(B[1],B[2]);return U}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(B,U,Q){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,B,U,Q))||D.Util.makeHexColor(B,U,Q);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(B,U,Q){var R;const A=((R=this.selectColor)==null?void 0:R.call(this,B,U,Q))||D.Util.makeHexColor(B,U,Q);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(B,U=null){let Q;return this.cachedPatterns.has(B)?Q=this.cachedPatterns.get(B):(Q=(0,vt.getShadingPattern)(this.objs.get(B)),this.cachedPatterns.set(B,Q)),U&&(Q.matrix=U),Q}shadingFill(B){if(!this.contentVisible)return;const U=this.ctx;this.save();const Q=this._getPattern(B);U.fillStyle=Q.getPattern(U,this,U.mozCurrentTransformInverse,vt.PathType.SHADING);const A=U.mozCurrentTransformInverse;if(A){const R=U.canvas,q=R.width,K=R.height,X=D.Util.applyTransform([0,0],A),dt=D.Util.applyTransform([0,K],A),mt=D.Util.applyTransform([q,0],A),kt=D.Util.applyTransform([q,K],A),yt=Math.min(X[0],dt[0],mt[0],kt[0]),Rt=Math.min(X[1],dt[1],mt[1],kt[1]),xt=Math.max(X[0],dt[0],mt[0],kt[0]),Ot=Math.max(X[1],dt[1],mt[1],kt[1]);this.ctx.fillRect(yt,Rt,xt-yt,Ot-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,D.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,D.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(B,U){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(B)&&B.length===6&&this.transform.apply(this,B),this.baseTransform=this.ctx.mozCurrentTransform,U)){const Q=U[2]-U[0],A=U[3]-U[1];this.ctx.rect(U[0],U[1],Q,A),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,U),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(B){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const U=this.ctx;B.isolated||(0,D.info)("TODO: Support non-isolated groups."),B.knockout&&(0,D.warn)("Knockout groups not supported.");const Q=U.mozCurrentTransform;if(B.matrix&&U.transform.apply(U,B.matrix),!B.bbox)throw new Error("Bounding box is required.");let A=D.Util.getAxialAlignedBoundingBox(B.bbox,U.mozCurrentTransform);const R=[0,0,U.canvas.width,U.canvas.height];A=D.Util.intersect(A,R)||[0,0,0,0];const q=Math.floor(A[0]),K=Math.floor(A[1]);let X=Math.max(Math.ceil(A[2])-q,1),dt=Math.max(Math.ceil(A[3])-K,1),mt=1,kt=1;X>Y&&(mt=X/Y,X=Y),dt>Y&&(kt=dt/Y,dt=Y),this.current.startNewPathAndClipBox([0,0,X,dt]);let yt="groupAt"+this.groupLevel;B.smask&&(yt+="_smask_"+this.smaskCounter++%2);const Rt=this.cachedCanvases.getCanvas(yt,X,dt,!0),xt=Rt.context;xt.scale(1/mt,1/kt),xt.translate(-q,-K),xt.transform.apply(xt,Q),B.smask?this.smaskStack.push({canvas:Rt.canvas,context:xt,offsetX:q,offsetY:K,scaleX:mt,scaleY:kt,subtype:B.smask.subtype,backdrop:B.smask.backdrop,transferMap:B.smask.transferMap||null,startTransformInverse:null}):(U.setTransform(1,0,0,1,0,0),U.translate(q,K),U.scale(mt,kt),U.save()),V(U,xt),this.ctx=xt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(U),this.groupLevel++}endGroup(B){if(!this.contentVisible)return;this.groupLevel--;const U=this.ctx,Q=this.groupStack.pop();if(this.ctx=Q,this.ctx.imageSmoothingEnabled=!1,B.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,A);const R=D.Util.getAxialAlignedBoundingBox([0,0,U.canvas.width,U.canvas.height],A);this.ctx.drawImage(U.canvas,0,0),this.ctx.restore(),this.compose(R)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(B,U,Q,A,R){if(this.save(),Array.isArray(U)&&U.length===4){const q=U[2]-U[0],K=U[3]-U[1];if(R&&this.annotationCanvasMap){Q=Q.slice(),Q[4]-=U[0],Q[5]-=U[1],U=U.slice(),U[0]=U[1]=0,U[2]=q,U[3]=K;const[X,dt]=D.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:mt}=this,kt=Math.ceil(q*this.outputScaleX*mt),yt=Math.ceil(K*this.outputScaleY*mt);this.annotationCanvas=this.canvasFactory.create(kt,yt);const{canvas:Rt,context:xt}=this.annotationCanvas,Ot=`var(--zoom-factor) * ${wt.PixelsPerInch.PDF_TO_CSS_UNITS}`;Rt.style.width=`calc(${q}px * ${Ot})`,Rt.style.height=`calc(${K}px * ${Ot})`,this.annotationCanvasMap.set(B,Rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=xt,this.ctx.setTransform(X,0,0,-dt,0,K*dt),nt(this.ctx),Z(this.ctx,this.foregroundColor)}else Z(this.ctx,this.foregroundColor),this.ctx.rect(U[0],U[1],q,K),this.ctx.clip(),this.endPath()}this.current=new ft(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,Q),this.transform.apply(this,A)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(B){if(!this.contentVisible)return;const U=B.count;B=this.getObject(B.data,B),B.count=U;const Q=this.ctx,A=this.processingType3;if(A&&(A.compiled===void 0&&(A.compiled=ut(B)),A.compiled)){A.compiled(Q);return}const R=this._createMaskCanvas(B),q=R.canvas;Q.save(),Q.setTransform(1,0,0,1,0,0),Q.drawImage(q,R.offsetX,R.offsetY),Q.restore(),this.compose()}paintImageMaskXObjectRepeat(B,U,Q=0,A=0,R,q){if(!this.contentVisible)return;B=this.getObject(B.data,B);const K=this.ctx;K.save();const X=K.mozCurrentTransform;K.transform(U,Q,A,R,0,0);const dt=this._createMaskCanvas(B);K.setTransform(1,0,0,1,0,0);for(let mt=0,kt=q.length;mt<kt;mt+=2){const yt=D.Util.transform(X,[U,Q,A,R,q[mt],q[mt+1]]),[Rt,xt]=D.Util.applyTransform([0,0],yt);K.drawImage(dt.canvas,Rt,xt)}K.restore(),this.compose()}paintImageMaskXObjectGroup(B){if(!this.contentVisible)return;const U=this.ctx,Q=this.current.fillColor,A=this.current.patternFill;for(let R=0,q=B.length;R<q;R++){const K=B[R],X=K.width,dt=K.height,mt=this.cachedCanvases.getCanvas("maskCanvas",X,dt,!1),kt=mt.context;kt.save(),Pt(kt,K),kt.globalCompositeOperation="source-in",kt.fillStyle=A?Q.getPattern(kt,this,U.mozCurrentTransformInverse,vt.PathType.FILL):Q,kt.fillRect(0,0,X,dt),kt.restore(),U.save(),U.transform.apply(U,K.transform),U.scale(1,-1),tt(U,mt.canvas,0,0,X,dt,0,-1,1,1),U.restore()}this.compose()}paintImageXObject(B){if(!this.contentVisible)return;const U=this.getObject(B);if(!U){(0,D.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(U)}paintImageXObjectRepeat(B,U,Q,A){if(!this.contentVisible)return;const R=this.getObject(B);if(!R){(0,D.warn)("Dependent image isn't ready yet");return}const q=R.width,K=R.height,X=[];for(let dt=0,mt=A.length;dt<mt;dt+=2)X.push({transform:[U,0,0,Q,A[dt],A[dt+1]],x:0,y:0,w:q,h:K});this.paintInlineImageXObjectGroup(R,X)}paintInlineImageXObject(B){if(!this.contentVisible)return;const U=B.width,Q=B.height,A=this.ctx;this.save(),A.scale(1/U,-1/Q);let R;if(typeof HTMLElement=="function"&&B instanceof HTMLElement||!B.data)R=B;else{const dt=this.cachedCanvases.getCanvas("inlineImage",U,Q,!1),mt=dt.context;At(mt,B,this.current.transferMaps),R=dt.canvas}const q=this._scaleImage(R,A.mozCurrentTransformInverse);A.imageSmoothingEnabled=Lt(A.mozCurrentTransform,B.interpolate);const[K,X]=tt(A,q.img,0,0,q.paintWidth,q.paintHeight,0,-Q,U,Q);if(this.imageLayer){const dt=this.getCanvasPosition(0,-Q);this.imageLayer.appendImage({imgData:B,left:dt[0],top:dt[1],width:K,height:X})}this.compose(),this.restore()}paintInlineImageXObjectGroup(B,U){if(!this.contentVisible)return;const Q=this.ctx,A=B.width,R=B.height,q=this.cachedCanvases.getCanvas("inlineImage",A,R,!1),K=q.context;At(K,B,this.current.transferMaps);for(let X=0,dt=U.length;X<dt;X++){const mt=U[X];if(Q.save(),Q.transform.apply(Q,mt.transform),Q.scale(1,-1),tt(Q,q.canvas,mt.x,mt.y,mt.w,mt.h,0,-1,1,1),this.imageLayer){const kt=this.getCanvasPosition(mt.x,mt.y);this.imageLayer.appendImage({imgData:B,left:kt[0],top:kt[1],width:A,height:R})}Q.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(B){}markPointProps(B,U){}beginMarkedContent(B){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(B,U){B==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(U)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(B){const U=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(B);const Q=this.ctx;this.pendingClip&&(U||(this.pendingClip===Nt?Q.clip("evenodd"):Q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Q.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const B=this.ctx.mozCurrentTransform;if(B[1]===0&&B[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(B[0]),Math.abs(B[3]));else{const U=Math.abs(B[0]*B[3]-B[2]*B[1]),Q=Math.hypot(B[0],B[2]),A=Math.hypot(B[1],B[3]);this._cachedGetSinglePixelWidth=Math.max(Q,A)/U}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:B}=this.current,U=this.ctx.mozCurrentTransform;let Q,A;if(U[1]===0&&U[2]===0){const R=Math.abs(U[0]),q=Math.abs(U[3]);if(B===0)Q=1/R,A=1/q;else{const K=R*B,X=q*B;Q=K<1?1/K:1,A=X<1?1/X:1}}else{const R=Math.abs(U[0]*U[3]-U[2]*U[1]),q=Math.hypot(U[0],U[1]),K=Math.hypot(U[2],U[3]);if(B===0)Q=K/R,A=q/R;else{const X=B*R;Q=K>X?K/X:1,A=q>X?q/X:1}}this._cachedScaleForStroking=[Q,A]}return this._cachedScaleForStroking}rescaleAndStroke(B){const{ctx:U}=this,{lineWidth:Q}=this.current,[A,R]=this.getScaleForStroking();if(U.lineWidth=Q||1,A===1&&R===1){U.stroke();return}let q,K,X;B&&(q=U.mozCurrentTransform.slice(),K=U.getLineDash().slice(),X=U.lineDashOffset),U.scale(A,R);const dt=Math.max(A,R);U.setLineDash(U.getLineDash().map(mt=>mt/dt)),U.lineDashOffset/=dt,U.stroke(),B&&(U.setTransform(...q),U.setLineDash(K),U.lineDashOffset=X)}getCanvasPosition(B,U){const Q=this.ctx.mozCurrentTransform;return[Q[0]*B+Q[2]*U+Q[4],Q[1]*B+Q[3]*U+Q[5]]}isContentVisible(){for(let B=this.markedContentStack.length-1;B>=0;B--)if(!this.markedContentStack[B].visible)return!1;return!0}}E.CanvasGraphics=qt;for(const rt in D.OPS)qt.prototype[rt]!==void 0&&(qt.prototype[D.OPS[rt]]=qt.prototype[rt])},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.TilingPattern=E.PathType=void 0,E.getShadingPattern=et;var D=at(1),vt=at(3);const ct={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};E.PathType=ct;function Ct(G,nt){if(!nt||vt.isNodeJS)return;const lt=nt[2]-nt[0],tt=nt[3]-nt[1],ut=new Path2D;ut.rect(nt[0],nt[1],lt,tt),G.clip(ut)}class wt{constructor(){this.constructor===wt&&(0,D.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,D.unreachable)("Abstract method `getPattern` called.")}}class bt extends wt{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let lt;this._type==="axial"?lt=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(lt=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const tt of this._colorStops)lt.addColorStop(tt[0],tt[1]);return lt}getPattern(nt,lt,tt,ut){let ft;if(ut===ct.STROKE||ut===ct.FILL){const At=lt.current.getClippedPathBoundingBox(ut,nt.mozCurrentTransform)||[0,0,0,0],Pt=Math.ceil(At[2]-At[0])||1,V=Math.ceil(At[3]-At[1])||1,Z=lt.cachedCanvases.getCanvas("pattern",Pt,V,!0),ot=Z.context;ot.clearRect(0,0,ot.canvas.width,ot.canvas.height),ot.beginPath(),ot.rect(0,0,ot.canvas.width,ot.canvas.height),ot.translate(-At[0],-At[1]),tt=D.Util.transform(tt,[1,0,0,1,At[0],At[1]]),ot.transform.apply(ot,lt.baseTransform),this.matrix&&ot.transform.apply(ot,this.matrix),Ct(ot,this._bbox),ot.fillStyle=this._createGradient(ot),ot.fill(),ft=nt.createPattern(Z.canvas,"no-repeat");const _t=new DOMMatrix(tt);try{ft.setTransform(_t)}catch(ht){(0,D.warn)(`RadialAxialShadingPattern.getPattern: "${ht==null?void 0:ht.message}".`)}}else Ct(nt,this._bbox),ft=this._createGradient(nt);return ft}}function it(G,nt,lt,tt,ut,ft,At,Pt){const V=nt.coords,Z=nt.colors,ot=G.data,_t=G.width*4;let ht;V[lt+1]>V[tt+1]&&(ht=lt,lt=tt,tt=ht,ht=ft,ft=At,At=ht),V[tt+1]>V[ut+1]&&(ht=tt,tt=ut,ut=ht,ht=At,At=Pt,Pt=ht),V[lt+1]>V[tt+1]&&(ht=lt,lt=tt,tt=ht,ht=ft,ft=At,At=ht);const Ft=(V[lt]+nt.offsetX)*nt.scaleX,St=(V[lt+1]+nt.offsetY)*nt.scaleY,Lt=(V[tt]+nt.offsetX)*nt.scaleX,$t=(V[tt+1]+nt.offsetY)*nt.scaleY,Dt=(V[ut]+nt.offsetX)*nt.scaleX,jt=(V[ut+1]+nt.offsetY)*nt.scaleY;if(St>=jt)return;const Nt=Z[ft],qt=Z[ft+1],rt=Z[ft+2],B=Z[At],U=Z[At+1],Q=Z[At+2],A=Z[Pt],R=Z[Pt+1],q=Z[Pt+2],K=Math.round(St),X=Math.round(jt);let dt,mt,kt,yt,Rt,xt,Ot,Bt;for(let Ht=K;Ht<=X;Ht++){if(Ht<$t){let Ut;Ht<St?Ut=0:Ut=(St-Ht)/(St-$t),dt=Ft-(Ft-Lt)*Ut,mt=Nt-(Nt-B)*Ut,kt=qt-(qt-U)*Ut,yt=rt-(rt-Q)*Ut}else{let Ut;Ht>jt?Ut=1:$t===jt?Ut=0:Ut=($t-Ht)/($t-jt),dt=Lt-(Lt-Dt)*Ut,mt=B-(B-A)*Ut,kt=U-(U-R)*Ut,yt=Q-(Q-q)*Ut}let Wt;Ht<St?Wt=0:Ht>jt?Wt=1:Wt=(St-Ht)/(St-jt),Rt=Ft-(Ft-Dt)*Wt,xt=Nt-(Nt-A)*Wt,Ot=qt-(qt-R)*Wt,Bt=rt-(rt-q)*Wt;const It=Math.round(Math.min(dt,Rt)),zt=Math.round(Math.max(dt,Rt));let Vt=_t*Ht+It*4;for(let Ut=It;Ut<=zt;Ut++)Wt=(dt-Ut)/(dt-Rt),Wt<0?Wt=0:Wt>1&&(Wt=1),ot[Vt++]=mt-(mt-xt)*Wt|0,ot[Vt++]=kt-(kt-Ot)*Wt|0,ot[Vt++]=yt-(yt-Bt)*Wt|0,ot[Vt++]=255}}function Y(G,nt,lt){const tt=nt.coords,ut=nt.colors;let ft,At;switch(nt.type){case"lattice":const Pt=nt.verticesPerRow,V=Math.floor(tt.length/Pt)-1,Z=Pt-1;for(ft=0;ft<V;ft++){let ot=ft*Pt;for(let _t=0;_t<Z;_t++,ot++)it(G,lt,tt[ot],tt[ot+1],tt[ot+Pt],ut[ot],ut[ot+1],ut[ot+Pt]),it(G,lt,tt[ot+Pt+1],tt[ot+1],tt[ot+Pt],ut[ot+Pt+1],ut[ot+1],ut[ot+Pt])}break;case"triangles":for(ft=0,At=tt.length;ft<At;ft+=3)it(G,lt,tt[ft],tt[ft+1],tt[ft+2],ut[ft],ut[ft+1],ut[ft+2]);break;default:throw new Error("illegal figure")}}class gt extends wt{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,lt,tt){const Pt=Math.floor(this._bounds[0]),V=Math.floor(this._bounds[1]),Z=Math.ceil(this._bounds[2])-Pt,ot=Math.ceil(this._bounds[3])-V,_t=Math.min(Math.ceil(Math.abs(Z*nt[0]*1.1)),3e3),ht=Math.min(Math.ceil(Math.abs(ot*nt[1]*1.1)),3e3),Ft=Z/_t,St=ot/ht,Lt={coords:this._coords,colors:this._colors,offsetX:-Pt,offsetY:-V,scaleX:1/Ft,scaleY:1/St},$t=_t+2*2,Dt=ht+2*2,jt=tt.getCanvas("mesh",$t,Dt,!1),Nt=jt.context,qt=Nt.createImageData(_t,ht);if(lt){const B=qt.data;for(let U=0,Q=B.length;U<Q;U+=4)B[U]=lt[0],B[U+1]=lt[1],B[U+2]=lt[2],B[U+3]=255}for(const B of this._figures)Y(qt,B,Lt);return Nt.putImageData(qt,2,2),{canvas:jt.canvas,offsetX:Pt-2*Ft,offsetY:V-2*St,scaleX:Ft,scaleY:St}}getPattern(nt,lt,tt,ut){Ct(nt,this._bbox);let ft;if(ut===ct.SHADING)ft=D.Util.singularValueDecompose2dScale(nt.mozCurrentTransform);else if(ft=D.Util.singularValueDecompose2dScale(lt.baseTransform),this.matrix){const Pt=D.Util.singularValueDecompose2dScale(this.matrix);ft=[ft[0]*Pt[0],ft[1]*Pt[1]]}const At=this._createMeshCanvas(ft,ut===ct.SHADING?null:this._background,lt.cachedCanvases);return ut!==ct.SHADING&&(nt.setTransform.apply(nt,lt.baseTransform),this.matrix&&nt.transform.apply(nt,this.matrix)),nt.translate(At.offsetX,At.offsetY),nt.scale(At.scaleX,At.scaleY),nt.createPattern(At.canvas,"no-repeat")}}class pt extends wt{getPattern(){return"hotpink"}}function et(G){switch(G[0]){case"RadialAxial":return new bt(G);case"Mesh":return new gt(G);case"Dummy":return new pt}throw new Error(`Unknown IR type: ${G[0]}`)}const W={COLORED:1,UNCOLORED:2};class J{static get MAX_PATTERN_SIZE(){return(0,D.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(nt,lt,tt,ut,ft){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=lt,this.ctx=tt,this.canvasGraphicsFactory=ut,this.baseTransform=ft}createPatternCanvas(nt){const lt=this.operatorList,tt=this.bbox,ut=this.xstep,ft=this.ystep,At=this.paintType,Pt=this.tilingType,V=this.color,Z=this.canvasGraphicsFactory;(0,D.info)("TilingType: "+Pt);const ot=tt[0],_t=tt[1],ht=tt[2],Ft=tt[3],St=D.Util.singularValueDecompose2dScale(this.matrix),Lt=D.Util.singularValueDecompose2dScale(this.baseTransform),$t=[St[0]*Lt[0],St[1]*Lt[1]],Dt=this.getSizeAndScale(ut,this.ctx.canvas.width,$t[0]),jt=this.getSizeAndScale(ft,this.ctx.canvas.height,$t[1]),Nt=nt.cachedCanvases.getCanvas("pattern",Dt.size,jt.size,!0),qt=Nt.context,rt=Z.createCanvasGraphics(qt);rt.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(rt,At,V);let B=ot,U=_t,Q=ht,A=Ft;return ot<0&&(B=0,Q+=Math.abs(ot)),_t<0&&(U=0,A+=Math.abs(_t)),qt.translate(-(Dt.scale*B),-(jt.scale*U)),rt.transform(Dt.scale,0,0,jt.scale,0,0),qt.save(),this.clipBbox(rt,B,U,Q,A),rt.baseTransform=rt.ctx.mozCurrentTransform.slice(),rt.executeOperatorList(lt),rt.endDrawing(),{canvas:Nt.canvas,scaleX:Dt.scale,scaleY:jt.scale,offsetX:B,offsetY:U}}getSizeAndScale(nt,lt,tt){nt=Math.abs(nt);const ut=Math.max(J.MAX_PATTERN_SIZE,lt);let ft=Math.ceil(nt*tt);return ft>=ut?ft=ut:tt=ft/nt,{scale:tt,size:ft}}clipBbox(nt,lt,tt,ut,ft){const At=ut-lt,Pt=ft-tt;nt.ctx.rect(lt,tt,At,Pt),nt.current.updateRectMinMax(nt.ctx.mozCurrentTransform,[lt,tt,ut,ft]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,lt,tt){const ut=nt.ctx,ft=nt.current;switch(lt){case W.COLORED:const At=this.ctx;ut.fillStyle=At.fillStyle,ut.strokeStyle=At.strokeStyle,ft.fillColor=At.fillStyle,ft.strokeColor=At.strokeStyle;break;case W.UNCOLORED:const Pt=D.Util.makeHexColor(tt[0],tt[1],tt[2]);ut.fillStyle=Pt,ut.strokeStyle=Pt,ft.fillColor=Pt,ft.strokeColor=Pt;break;default:throw new D.FormatError(`Unsupported paint type: ${lt}`)}}getPattern(nt,lt,tt,ut){let ft=tt;ut!==ct.SHADING&&(ft=D.Util.transform(ft,lt.baseTransform),this.matrix&&(ft=D.Util.transform(ft,this.matrix)));const At=this.createPatternCanvas(lt);let Pt=new DOMMatrix(ft);Pt=Pt.translate(At.offsetX,At.offsetY),Pt=Pt.scale(1/At.scaleX,1/At.scaleY);const V=nt.createPattern(At.canvas,"repeat");try{V.setTransform(Pt)}catch(Z){(0,D.warn)(`TilingPattern.getPattern: "${Z==null?void 0:Z.message}".`)}return V}}E.TilingPattern=J},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.applyMaskImageData=vt;var D=at(1);function vt({src:ct,srcPos:Ct=0,dest:wt,destPos:bt=0,width:it,height:Y,inverseDecode:gt=!1}){const pt=D.FeatureTest.isLittleEndian?4278190080:255,[et,W]=gt?[0,pt]:[pt,0],J=it>>3,G=it&7,nt=ct.length;wt=new Uint32Array(wt.buffer);for(let lt=0;lt<Y;lt++){for(const ut=Ct+J;Ct<ut;Ct++){const ft=Ct<nt?ct[Ct]:255;wt[bt++]=ft&128?W:et,wt[bt++]=ft&64?W:et,wt[bt++]=ft&32?W:et,wt[bt++]=ft&16?W:et,wt[bt++]=ft&8?W:et,wt[bt++]=ft&4?W:et,wt[bt++]=ft&2?W:et,wt[bt++]=ft&1?W:et}if(G===0)continue;const tt=Ct<nt?ct[Ct++]:255;for(let ut=0;ut<G;ut++)wt[bt++]=tt&1<<7-ut?W:et}return{srcPos:Ct,destPos:bt}}},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.GlobalWorkerOptions=void 0;const at=Object.create(null);E.GlobalWorkerOptions=at,at.workerPort=at.workerPort===void 0?null:at.workerPort,at.workerSrc=at.workerSrc===void 0?"":at.workerSrc},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.MessageHandler=void 0;var D=at(1);const vt={UNKNOWN:0,DATA:1,ERROR:2},ct={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ct(bt){switch(bt instanceof Error||typeof bt=="object"&&bt!==null||(0,D.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),bt.name){case"AbortException":return new D.AbortException(bt.message);case"MissingPDFException":return new D.MissingPDFException(bt.message);case"PasswordException":return new D.PasswordException(bt.message,bt.code);case"UnexpectedResponseException":return new D.UnexpectedResponseException(bt.message,bt.status);case"UnknownErrorException":return new D.UnknownErrorException(bt.message,bt.details);default:return new D.UnknownErrorException(bt.message,bt.toString())}}class wt{constructor(it,Y,gt){this.sourceName=it,this.targetName=Y,this.comObj=gt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=pt=>{const et=pt.data;if(et.targetName!==this.sourceName)return;if(et.stream){this._processStreamMessage(et);return}if(et.callback){const J=et.callbackId,G=this.callbackCapabilities[J];if(!G)throw new Error(`Cannot resolve callback ${J}`);if(delete this.callbackCapabilities[J],et.callback===vt.DATA)G.resolve(et.data);else if(et.callback===vt.ERROR)G.reject(Ct(et.reason));else throw new Error("Unexpected callback case");return}const W=this.actionHandler[et.action];if(!W)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const J=this.sourceName,G=et.sourceName;new Promise(function(nt){nt(W(et.data))}).then(function(nt){gt.postMessage({sourceName:J,targetName:G,callback:vt.DATA,callbackId:et.callbackId,data:nt})},function(nt){gt.postMessage({sourceName:J,targetName:G,callback:vt.ERROR,callbackId:et.callbackId,reason:Ct(nt)})});return}if(et.streamId){this._createStreamSink(et);return}W(et.data)},gt.addEventListener("message",this._onComObjOnMessage)}on(it,Y){const gt=this.actionHandler;if(gt[it])throw new Error(`There is already an actionName called "${it}"`);gt[it]=Y}send(it,Y,gt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,data:Y},gt)}sendWithPromise(it,Y,gt){const pt=this.callbackId++,et=(0,D.createPromiseCapability)();this.callbackCapabilities[pt]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:it,callbackId:pt,data:Y},gt)}catch(W){et.reject(W)}return et.promise}sendWithStream(it,Y,gt,pt){const et=this.streamId++,W=this.sourceName,J=this.targetName,G=this.comObj;return new ReadableStream({start:nt=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et]={controller:nt,startCall:lt,pullCall:null,cancelCall:null,isClosed:!1},G.postMessage({sourceName:W,targetName:J,action:it,streamId:et,data:Y,desiredSize:nt.desiredSize},pt),lt.promise},pull:nt=>{const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].pullCall=lt,G.postMessage({sourceName:W,targetName:J,stream:ct.PULL,streamId:et,desiredSize:nt.desiredSize}),lt.promise},cancel:nt=>{(0,D.assert)(nt instanceof Error,"cancel must have a valid reason");const lt=(0,D.createPromiseCapability)();return this.streamControllers[et].cancelCall=lt,this.streamControllers[et].isClosed=!0,G.postMessage({sourceName:W,targetName:J,stream:ct.CANCEL,streamId:et,reason:Ct(nt)}),lt.promise}},gt)}_createStreamSink(it){const Y=it.streamId,gt=this.sourceName,pt=it.sourceName,et=this.comObj,W=this,J=this.actionHandler[it.action],G={enqueue(nt,lt=1,tt){if(this.isCancelled)return;const ut=this.desiredSize;this.desiredSize-=lt,ut>0&&this.desiredSize<=0&&(this.sinkCapability=(0,D.createPromiseCapability)(),this.ready=this.sinkCapability.promise),et.postMessage({sourceName:gt,targetName:pt,stream:ct.ENQUEUE,streamId:Y,chunk:nt},tt)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:gt,targetName:pt,stream:ct.CLOSE,streamId:Y}),delete W.streamSinks[Y])},error(nt){(0,D.assert)(nt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:gt,targetName:pt,stream:ct.ERROR,streamId:Y,reason:Ct(nt)}))},sinkCapability:(0,D.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:it.desiredSize,ready:null};G.sinkCapability.resolve(),G.ready=G.sinkCapability.promise,this.streamSinks[Y]=G,new Promise(function(nt){nt(J(it.data,G))}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ct.START_COMPLETE,streamId:Y,success:!0})},function(nt){et.postMessage({sourceName:gt,targetName:pt,stream:ct.START_COMPLETE,streamId:Y,reason:Ct(nt)})})}_processStreamMessage(it){const Y=it.streamId,gt=this.sourceName,pt=it.sourceName,et=this.comObj,W=this.streamControllers[Y],J=this.streamSinks[Y];switch(it.stream){case ct.START_COMPLETE:it.success?W.startCall.resolve():W.startCall.reject(Ct(it.reason));break;case ct.PULL_COMPLETE:it.success?W.pullCall.resolve():W.pullCall.reject(Ct(it.reason));break;case ct.PULL:if(!J){et.postMessage({sourceName:gt,targetName:pt,stream:ct.PULL_COMPLETE,streamId:Y,success:!0});break}J.desiredSize<=0&&it.desiredSize>0&&J.sinkCapability.resolve(),J.desiredSize=it.desiredSize,new Promise(function(G){G(J.onPull&&J.onPull())}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ct.PULL_COMPLETE,streamId:Y,success:!0})},function(G){et.postMessage({sourceName:gt,targetName:pt,stream:ct.PULL_COMPLETE,streamId:Y,reason:Ct(G)})});break;case ct.ENQUEUE:if((0,D.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(it.chunk);break;case ct.CLOSE:if((0,D.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,Y);break;case ct.ERROR:(0,D.assert)(W,"error should have stream controller"),W.controller.error(Ct(it.reason)),this._deleteStreamController(W,Y);break;case ct.CANCEL_COMPLETE:it.success?W.cancelCall.resolve():W.cancelCall.reject(Ct(it.reason)),this._deleteStreamController(W,Y);break;case ct.CANCEL:if(!J)break;new Promise(function(G){G(J.onCancel&&J.onCancel(Ct(it.reason)))}).then(function(){et.postMessage({sourceName:gt,targetName:pt,stream:ct.CANCEL_COMPLETE,streamId:Y,success:!0})},function(G){et.postMessage({sourceName:gt,targetName:pt,stream:ct.CANCEL_COMPLETE,streamId:Y,reason:Ct(G)})}),J.sinkCapability.reject(Ct(it.reason)),J.isCancelled=!0,delete this.streamSinks[Y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(it,Y){await Promise.allSettled([it.startCall&&it.startCall.promise,it.pullCall&&it.pullCall.promise,it.cancelCall&&it.cancelCall.promise]),delete this.streamControllers[Y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}E.MessageHandler=wt},(st,E,at)=>{var ct,Ct;Object.defineProperty(E,"__esModule",{value:!0}),E.Metadata=void 0;var D=at(1);class vt{constructor({parsedData:bt,rawData:it}){le(this,ct,void 0);le(this,Ct,void 0);he(this,ct,bt),he(this,Ct,it)}getRaw(){return Yt(this,Ct)}get(bt){var it;return(it=Yt(this,ct).get(bt))!=null?it:null}getAll(){return(0,D.objectFromMap)(Yt(this,ct))}has(bt){return Yt(this,ct).has(bt)}}ct=new WeakMap,Ct=new WeakMap,E.Metadata=vt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.OptionalContentConfig=void 0;var D=at(1);class vt{constructor(wt,bt){this.visible=!0,this.name=wt,this.intent=bt}}class ct{constructor(wt){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,wt!==null){this.name=wt.name,this.creator=wt.creator,this._order=wt.order;for(const bt of wt.groups)this._groups.set(bt.id,new vt(bt.name,bt.intent));if(wt.baseState==="OFF")for(const bt of this._groups)bt.visible=!1;for(const bt of wt.on)this._groups.get(bt).visible=!0;for(const bt of wt.off)this._groups.get(bt).visible=!1}}_evaluateVisibilityExpression(wt){const bt=wt.length;if(bt<2)return!0;const it=wt[0];for(let Y=1;Y<bt;Y++){const gt=wt[Y];let pt;if(Array.isArray(gt))pt=this._evaluateVisibilityExpression(gt);else if(this._groups.has(gt))pt=this._groups.get(gt).visible;else return(0,D.warn)(`Optional content group not found: ${gt}`),!0;switch(it){case"And":if(!pt)return!1;break;case"Or":if(pt)return!0;break;case"Not":return!pt;default:return!0}}return it==="And"}isVisible(wt){if(this._groups.size===0)return!0;if(!wt)return(0,D.warn)("Optional content group not defined."),!0;if(wt.type==="OCG")return this._groups.has(wt.id)?this._groups.get(wt.id).visible:((0,D.warn)(`Optional content group not found: ${wt.id}`),!0);if(wt.type==="OCMD"){if(wt.expression)return this._evaluateVisibilityExpression(wt.expression);if(!wt.policy||wt.policy==="AnyOn"){for(const bt of wt.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!0}return!1}else if(wt.policy==="AllOn"){for(const bt of wt.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!1}return!0}else if(wt.policy==="AnyOff"){for(const bt of wt.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(!this._groups.get(bt).visible)return!0}return!1}else if(wt.policy==="AllOff"){for(const bt of wt.ids){if(!this._groups.has(bt))return(0,D.warn)(`Optional content group not found: ${bt}`),!0;if(this._groups.get(bt).visible)return!1}return!0}return(0,D.warn)(`Unknown optional content policy ${wt.policy}.`),!0}return(0,D.warn)(`Unknown group type ${wt.type}.`),!0}setVisibility(wt,bt=!0){if(!this._groups.has(wt)){(0,D.warn)(`Optional content group not found: ${wt}`);return}this._groups.get(wt).visible=!!bt}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,D.objectFromMap)(this._groups):null}getGroup(wt){return this._groups.get(wt)||null}}E.OptionalContentConfig=ct},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFDataTransportStream=void 0;var D=at(1),vt=at(5);class ct{constructor(it,Y){(0,D.assert)(Y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=it.progressiveDone||!1,this._contentDispositionFilename=it.contentDispositionFilename||null;const gt=it.initialData;if((gt==null?void 0:gt.length)>0){const pt=new Uint8Array(gt).buffer;this._queuedChunks.push(pt)}this._pdfDataRangeTransport=Y,this._isStreamingSupported=!it.disableStream,this._isRangeSupported=!it.disableRange,this._contentLength=it.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((pt,et)=>{this._onReceiveData({begin:pt,chunk:et})}),this._pdfDataRangeTransport.addProgressListener((pt,et)=>{this._onProgress({loaded:pt,total:et})}),this._pdfDataRangeTransport.addProgressiveReadListener(pt=>{this._onReceiveData({chunk:pt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(it){const Y=new Uint8Array(it.chunk).buffer;if(it.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Y):this._queuedChunks.push(Y);else{const gt=this._rangeReaders.some(function(pt){return pt._begin!==it.begin?!1:(pt._enqueue(Y),!0)});(0,D.assert)(gt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var it,Y;return(Y=(it=this._fullRequestReader)==null?void 0:it._loaded)!=null?Y:0}_onProgress(it){if(it.total===void 0){const Y=this._rangeReaders[0];Y!=null&&Y.onProgress&&Y.onProgress({loaded:it.loaded})}else{const Y=this._fullRequestReader;Y!=null&&Y.onProgress&&Y.onProgress({loaded:it.loaded,total:it.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(it){const Y=this._rangeReaders.indexOf(it);Y>=0&&this._rangeReaders.splice(Y,1)}getFullReader(){(0,D.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const it=this._queuedChunks;return this._queuedChunks=null,new Ct(this,it,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(it,Y){if(Y<=this._progressiveDataLength)return null;const gt=new wt(this,it,Y);return this._pdfDataRangeTransport.requestDataRange(it,Y),this._rangeReaders.push(gt),gt}cancelAllRequests(it){this._fullRequestReader&&this._fullRequestReader.cancel(it);for(const Y of this._rangeReaders.slice(0))Y.cancel(it);this._pdfDataRangeTransport.abort()}}E.PDFDataTransportStream=ct;class Ct{constructor(it,Y,gt=!1,pt=null){this._stream=it,this._done=gt||!1,this._filename=(0,vt.isPdfFile)(pt)?pt:null,this._queuedChunks=Y||[],this._loaded=0;for(const et of this._queuedChunks)this._loaded+=et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),it._fullRequestReader=this,this.onProgress=null}_enqueue(it){this._done||(this._requests.length>0?this._requests.shift().resolve({value:it,done:!1}):this._queuedChunks.push(it),this._loaded+=it.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wt{constructor(it,Y,gt){this._stream=it,this._begin=Y,this._end=gt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(it){if(!this._done){if(this._requests.length===0)this._queuedChunk=it;else{this._requests.shift().resolve({value:it,done:!1});for(const gt of this._requests)gt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Y=this._queuedChunk;return this._queuedChunk=null,{value:Y,done:!1}}if(this._done)return{value:void 0,done:!0};const it=(0,D.createPromiseCapability)();return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaText=void 0;class at{static textContent(vt){const ct=[],Ct={items:ct,styles:Object.create(null)};function wt(bt){var gt;if(!bt)return;let it=null;const Y=bt.name;if(Y==="#text")it=bt.value;else if(at.shouldBuildText(Y))(gt=bt==null?void 0:bt.attributes)!=null&&gt.textContent?it=bt.attributes.textContent:bt.value&&(it=bt.value);else return;if(it!==null&&ct.push({str:it}),!!bt.children)for(const pt of bt.children)wt(pt)}return wt(vt),Ct}static shouldBuildText(vt){return!(vt==="textarea"||vt==="input"||vt==="option"||vt==="select")}}E.XfaText=at},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.NodeStandardFontDataFactory=E.NodeCanvasFactory=E.NodeCMapReaderFactory=void 0;var D=at(6);const vt=function(bt){return new Promise((it,Y)=>{require$$4.readFile(bt,(pt,et)=>{if(pt||!et){Y(new Error(pt));return}it(new Uint8Array(et))})})};class ct extends D.BaseCanvasFactory{_createCanvas(it,Y){return require$$4.createCanvas(it,Y)}}E.NodeCanvasFactory=ct;class Ct extends D.BaseCMapReaderFactory{_fetchData(it,Y){return vt(it).then(gt=>({cMapData:gt,compressionType:Y}))}}E.NodeCMapReaderFactory=Ct;class wt extends D.BaseStandardFontDataFactory{_fetchData(it){return vt(it)}}E.NodeStandardFontDataFactory=wt},(st,E,at)=>{var B,Ee;Object.defineProperty(E,"__esModule",{value:!0}),E.AnnotationLayer=void 0;var D=at(1),vt=at(5),ct=at(8),Ct=at(21),wt=at(22);const bt=1e3,it=new WeakSet;function Y(Q){return{width:Q[2]-Q[0],height:Q[3]-Q[1]}}class gt{static create(A){switch(A.data.annotationType){case D.AnnotationType.LINK:return new et(A);case D.AnnotationType.TEXT:return new W(A);case D.AnnotationType.WIDGET:switch(A.data.fieldType){case"Tx":return new G(A);case"Btn":return A.data.radioButton?new lt(A):A.data.checkBox?new nt(A):new tt(A);case"Ch":return new ut(A)}return new J(A);case D.AnnotationType.POPUP:return new ft(A);case D.AnnotationType.FREETEXT:return new Pt(A);case D.AnnotationType.LINE:return new V(A);case D.AnnotationType.SQUARE:return new Z(A);case D.AnnotationType.CIRCLE:return new ot(A);case D.AnnotationType.POLYLINE:return new _t(A);case D.AnnotationType.CARET:return new Ft(A);case D.AnnotationType.INK:return new St(A);case D.AnnotationType.POLYGON:return new ht(A);case D.AnnotationType.HIGHLIGHT:return new Lt(A);case D.AnnotationType.UNDERLINE:return new $t(A);case D.AnnotationType.SQUIGGLY:return new Dt(A);case D.AnnotationType.STRIKEOUT:return new jt(A);case D.AnnotationType.STAMP:return new Nt(A);case D.AnnotationType.FILEATTACHMENT:return new qt(A);default:return new pt(A)}}}class pt{constructor(A,{isRenderable:R=!1,ignoreBorder:q=!1,createQuadrilaterals:K=!1}={}){this.isRenderable=R,this.data=A.data,this.layer=A.layer,this.page=A.page,this.viewport=A.viewport,this.linkService=A.linkService,this.downloadManager=A.downloadManager,this.imageResourcesPath=A.imageResourcesPath,this.renderForms=A.renderForms,this.svgFactory=A.svgFactory,this.annotationStorage=A.annotationStorage,this.enableScripting=A.enableScripting,this.hasJSActions=A.hasJSActions,this._fieldObjects=A.fieldObjects,this._mouseState=A.mouseState,R&&(this.container=this._createContainer(q)),K&&(this.quadrilaterals=this._createQuadrilaterals(q))}_createContainer(A=!1){const R=this.data,q=this.page,K=this.viewport,X=document.createElement("section");let{width:dt,height:mt}=Y(R.rect);X.setAttribute("data-annotation-id",R.id);const kt=D.Util.normalizeRect([R.rect[0],q.view[3]-R.rect[1]+q.view[1],R.rect[2],q.view[3]-R.rect[3]+q.view[1]]);if(R.hasOwnCanvas){const yt=K.transform.slice(),[Rt,xt]=D.Util.singularValueDecompose2dScale(yt);dt=Math.ceil(dt*Rt),mt=Math.ceil(mt*xt),kt[0]*=Rt,kt[1]*=xt;for(let Ot=0;Ot<4;Ot++)yt[Ot]=Math.sign(yt[Ot]);X.style.transform=`matrix(${yt.join(",")})`}else X.style.transform=`matrix(${K.transform.join(",")})`;if(X.style.transformOrigin=`${-kt[0]}px ${-kt[1]}px`,!A&&R.borderStyle.width>0){X.style.borderWidth=`${R.borderStyle.width}px`,R.borderStyle.style!==D.AnnotationBorderStyleType.UNDERLINE&&(dt-=2*R.borderStyle.width,mt-=2*R.borderStyle.width);const yt=R.borderStyle.horizontalCornerRadius,Rt=R.borderStyle.verticalCornerRadius;if(yt>0||Rt>0){const Ot=`${yt}px / ${Rt}px`;X.style.borderRadius=Ot}switch(R.borderStyle.style){case D.AnnotationBorderStyleType.SOLID:X.style.borderStyle="solid";break;case D.AnnotationBorderStyleType.DASHED:X.style.borderStyle="dashed";break;case D.AnnotationBorderStyleType.BEVELED:(0,D.warn)("Unimplemented border style: beveled");break;case D.AnnotationBorderStyleType.INSET:(0,D.warn)("Unimplemented border style: inset");break;case D.AnnotationBorderStyleType.UNDERLINE:X.style.borderBottomStyle="solid";break}R.borderColor||R.color||null?X.style.borderColor=D.Util.makeHexColor(R.color[0]|0,R.color[1]|0,R.color[2]|0):X.style.borderWidth=0}return X.style.left=`${kt[0]}px`,X.style.top=`${kt[1]}px`,R.hasOwnCanvas?X.style.width=X.style.height="auto":(X.style.width=`${dt}px`,X.style.height=`${mt}px`),X}get _commonActions(){const A=(R,q,K)=>{const X=K.detail[R];K.target.style[q]=Ct.ColorConverters[`${X[0]}_HTML`](X.slice(1))};return(0,D.shadow)(this,"_commonActions",{display:R=>{const q=R.detail.display%2===1;R.target.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:q,print:R.detail.display===0||R.detail.display===3})},print:R=>{this.annotationStorage.setValue(this.data.id,{print:R.detail.print})},hidden:R=>{R.target.style.visibility=R.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:R.detail.hidden})},focus:R=>{setTimeout(()=>R.target.focus({preventScroll:!1}),0)},userName:R=>{R.target.title=R.detail.userName},readonly:R=>{R.detail.readonly?R.target.setAttribute("readonly",""):R.target.removeAttribute("readonly")},required:R=>{R.detail.required?R.target.setAttribute("required",""):R.target.removeAttribute("required")},bgColor:R=>{A("bgColor","backgroundColor",R)},fillColor:R=>{A("fillColor","backgroundColor",R)},fgColor:R=>{A("fgColor","color",R)},textColor:R=>{A("textColor","color",R)},borderColor:R=>{A("borderColor","borderColor",R)},strokeColor:R=>{A("strokeColor","borderColor",R)}})}_dispatchEventFromSandbox(A,R){const q=this._commonActions;for(const K of Object.keys(R.detail)){const X=A[K]||q[K];X&&X(R)}}_setDefaultPropertiesFromJS(A){if(!this.enableScripting)return;const R=this.annotationStorage.getRawValue(this.data.id);if(!R)return;const q=this._commonActions;for(const[K,X]of Object.entries(R)){const dt=q[K];dt&&(dt({detail:X,target:A}),delete R[K])}}_createQuadrilaterals(A=!1){if(!this.data.quadPoints)return null;const R=[],q=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],R.push(this._createContainer(A));return this.data.rect=q,R}_createPopup(A,R){let q=this.container;this.quadrilaterals&&(A=A||this.quadrilaterals,q=this.quadrilaterals[0]),A||(A=document.createElement("div"),A.style.height=q.style.height,A.style.width=q.style.width,q.appendChild(A));const X=new At({container:q,trigger:A,color:R.color,titleObj:R.titleObj,modificationDate:R.modificationDate,contentsObj:R.contentsObj,richText:R.richText,hideWrapper:!0}).render();X.style.left=q.style.width,q.appendChild(X)}_renderQuadrilaterals(A){for(const R of this.quadrilaterals)R.className=A;return this.quadrilaterals}render(){(0,D.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(A,R=null){const q=[];if(this._fieldObjects){const K=this._fieldObjects[A];if(K)for(const{page:X,id:dt,exportValues:mt}of K){if(X===-1||dt===R)continue;const kt=typeof mt=="string"?mt:null,yt=document.getElementById(dt);if(yt&&!it.has(yt)){(0,D.warn)(`_getElementsByName - element not allowed: ${dt}`);continue}q.push({id:dt,exportValue:kt,domElement:yt})}return q}for(const K of document.getElementsByName(A)){const{id:X,exportValue:dt}=K;X!==R&&(!it.has(K)||q.push({id:X,exportValue:dt,domElement:K}))}return q}static get platform(){const A=typeof navigator!="undefined"?navigator.platform:"";return(0,D.shadow)(this,"platform",{isWin:A.includes("Win"),isMac:A.includes("Mac")})}}class et extends pt{constructor(A,R=null){const q=!!(A.data.url||A.data.dest||A.data.action||A.data.isTooltipOnly||A.data.resetForm||A.data.actions&&(A.data.actions.Action||A.data.actions["Mouse Up"]||A.data.actions["Mouse Down"]));super(A,{isRenderable:q,ignoreBorder:!!(R!=null&&R.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:A,linkService:R}=this,q=document.createElement("a");if(A.url)R.addLinkAttributes(q,A.url,A.newWindow);else if(A.action)this._bindNamedAction(q,A.action);else if(A.dest)this._bindLink(q,A.dest);else{let K=!1;A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(K=!0,this._bindJSAction(q,A)),A.resetForm?this._bindResetFormAction(q,A.resetForm):K||this._bindLink(q,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((K,X)=>{const dt=X===0?q:q.cloneNode();return K.appendChild(dt),K}):(this.container.className="linkAnnotation",this.container.appendChild(q),this.container)}_bindLink(A,R){A.href=this.linkService.getDestinationHash(R),A.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&(A.className="internalLink")}_bindNamedAction(A,R){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(R),!1),A.className="internalLink"}_bindJSAction(A,R){A.href=this.linkService.getAnchorUrl("");const q=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(R.actions)){const X=q.get(K);!X||(A[X]=()=>{var dt;return(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:K}}),!1})}A.onclick||(A.onclick=()=>!1),A.className="internalLink"}_bindResetFormAction(A,R){const q=A.onclick;if(q||(A.href=this.linkService.getAnchorUrl("")),A.className="internalLink",!this._fieldObjects){(0,D.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),q||(A.onclick=()=>!1);return}A.onclick=()=>{var Rt;q&&q();const{fields:K,refs:X,include:dt}=R,mt=[];if(K.length!==0||X.length!==0){const xt=new Set(X);for(const Ot of K){const Bt=this._fieldObjects[Ot]||[];for(const{id:Ht}of Bt)xt.add(Ht)}for(const Ot of Object.values(this._fieldObjects))for(const Bt of Ot)xt.has(Bt.id)===dt&&mt.push(Bt)}else for(const xt of Object.values(this._fieldObjects))mt.push(...xt);const kt=this.annotationStorage,yt=[];for(const xt of mt){const{id:Ot}=xt;switch(yt.push(Ot),xt.type){case"text":{const Ht=xt.defaultValue||"";kt.setValue(Ot,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=xt.defaultValue===xt.exportValues;kt.setValue(Ot,{value:Ht});break}case"combobox":case"listbox":{const Ht=xt.defaultValue||"";kt.setValue(Ot,{value:Ht});break}default:continue}const Bt=document.getElementById(Ot);!Bt||!it.has(Bt)||Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yt,name:"ResetForm"}})),!1}}}class W extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R})}render(){this.container.className="textAnnotation";const A=document.createElement("img");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",A.alt="[{{type}} Annotation]",A.dataset.l10nId="text_annotation_type",A.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(A,this.data),this.container.appendChild(A),this.container}}class J extends pt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(A){const{isWin:R,isMac:q}=pt.platform;return R&&A.ctrlKey||q&&A.metaKey}_setEventListener(A,R,q,K){R.includes("mouse")?A.addEventListener(R,X=>{var dt;(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(X),shift:X.shiftKey,modifier:this._getKeyModifier(X)}})}):A.addEventListener(R,X=>{var dt;(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:K(X)}})})}_setEventListeners(A,R,q){var K;for(const[X,dt]of R)(dt==="Action"||((K=this.data.actions)==null?void 0:K[dt]))&&this._setEventListener(A,X,dt,q)}_setBackgroundColor(A){const R=this.data.backgroundColor||null;A.style.backgroundColor=R===null?"transparent":D.Util.makeHexColor(R[0],R[1],R[2])}}class G extends J{constructor(A){const R=A.renderForms||!A.data.hasAppearance&&!!A.data.fieldValue;super(A,{isRenderable:R})}setPropertyOnSiblings(A,R,q,K){const X=this.annotationStorage;for(const dt of this._getElementsByName(A.name,A.id))dt.domElement&&(dt.domElement[R]=q),X.setValue(dt.id,{[K]:q})}render(){var K;const A=this.annotationStorage,R=this.data.id;this.container.className="textWidgetAnnotation";let q=null;if(this.renderForms){const X=A.getValue(R,{value:this.data.fieldValue}),dt=X.formattedValue||X.value||"",mt={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=dt):(q=document.createElement("input"),q.type="text",q.setAttribute("value",dt)),it.add(q),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=bt,mt.userValue=dt,q.setAttribute("id",R),q.addEventListener("input",yt=>{A.setValue(R,{value:yt.target.value}),this.setPropertyOnSiblings(q,"value",yt.target.value,"value")}),q.addEventListener("resetform",yt=>{var xt;const Rt=(xt=this.data.defaultFieldValue)!=null?xt:"";q.value=mt.userValue=Rt,mt.formattedValue=null});let kt=yt=>{const{formattedValue:Rt}=mt;Rt!=null&&(yt.target.value=Rt),yt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",Rt=>{mt.userValue&&(Rt.target.value=mt.userValue),mt.valueOnFocus=Rt.target.value}),q.addEventListener("updatefromsandbox",Rt=>{const xt={value(Ot){var Bt;mt.userValue=(Bt=Ot.detail.value)!=null?Bt:"",A.setValue(R,{value:mt.userValue.toString()}),Ot.target.value=mt.userValue},formattedValue(Ot){const{formattedValue:Bt}=Ot.detail;mt.formattedValue=Bt,Bt!=null&&Ot.target!==document.activeElement&&(Ot.target.value=Bt),A.setValue(R,{formattedValue:Bt})},selRange(Ot){Ot.target.setSelectionRange(...Ot.detail.selRange)}};this._dispatchEventFromSandbox(xt,Rt)}),q.addEventListener("keydown",Rt=>{var Bt;let xt=-1;if(Rt.key==="Escape"?xt=0:Rt.key==="Enter"?xt=2:Rt.key==="Tab"&&(xt=3),xt===-1)return;const{value:Ot}=Rt.target;mt.valueOnFocus!==Ot&&(mt.userValue=Ot,(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Ot,willCommit:!0,commitKey:xt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const yt=kt;kt=null,q.addEventListener("blur",Rt=>{var Ot;const{value:xt}=Rt.target;mt.userValue=xt,this._mouseState.isDown&&mt.valueOnFocus!==xt&&((Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,willCommit:!0,commitKey:1,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),yt(Rt)}),(K=this.data.actions)!=null&&K.Keystroke&&q.addEventListener("beforeinput",Rt=>{var Vt;const{data:xt,target:Ot}=Rt,{value:Bt,selectionStart:Ht,selectionEnd:Wt}=Ot;let It=Ht,zt=Wt;switch(Rt.inputType){case"deleteWordBackward":{const Ut=Bt.substring(0,Ht).match(/\w*[^\w]*$/);Ut&&(It-=Ut[0].length);break}case"deleteWordForward":{const Ut=Bt.substring(Ht).match(/^[^\w]*\w*/);Ut&&(zt+=Ut[0].length);break}case"deleteContentBackward":Ht===Wt&&(It-=1);break;case"deleteContentForward":Ht===Wt&&(zt+=1);break}Rt.preventDefault(),(Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:Bt,change:xt||"",willCommit:!1,selStart:It,selEnd:zt}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(kt&&q.addEventListener("blur",kt),this.data.maxLen!==null&&(q.maxLength=this.data.maxLen),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;q.classList.add("comb"),q.style.letterSpacing=`calc(${Rt}px - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.appendChild(q),this.container}_setTextStyle(A){const R=["left","center","right"],{fontSize:q,fontColor:K}=this.data.defaultAppearanceData,X=A.style;q&&(X.fontSize=`${q}px`),X.color=D.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(X.textAlign=R[this.data.textAlignment])}}class nt extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.exportValue===R.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",A.setValue(q,{value:K})),this.container.className="buttonWidgetAnnotation checkBox";const X=document.createElement("input");return it.add(X),X.disabled=R.readOnly,X.type="checkbox",X.name=R.fieldName,K&&X.setAttribute("checked",!0),X.setAttribute("id",q),X.setAttribute("exportValue",R.exportValue),X.tabIndex=bt,X.addEventListener("change",dt=>{const{name:mt,checked:kt}=dt.target;for(const yt of this._getElementsByName(mt,q)){const Rt=kt&&yt.exportValue===R.exportValue;yt.domElement&&(yt.domElement.checked=Rt),A.setValue(yt.id,{value:Rt})}A.setValue(q,{value:kt})}),X.addEventListener("resetform",dt=>{const mt=R.defaultFieldValue||"Off";dt.target.checked=mt===R.exportValue}),this.enableScripting&&this.hasJSActions&&(X.addEventListener("updatefromsandbox",dt=>{const mt={value(kt){kt.target.checked=kt.detail.value!=="Off",A.setValue(q,{value:kt.target.checked})}};this._dispatchEventFromSandbox(mt,dt)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.appendChild(X),this.container}}class lt extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const A=this.annotationStorage,R=this.data,q=R.id;let K=A.getValue(q,{value:R.fieldValue===R.buttonValue}).value;typeof K=="string"&&(K=K!==R.buttonValue,A.setValue(q,{value:K}));const X=document.createElement("input");if(it.add(X),X.disabled=R.readOnly,X.type="radio",X.name=R.fieldName,K&&X.setAttribute("checked",!0),X.setAttribute("id",q),X.tabIndex=bt,X.addEventListener("change",dt=>{const{name:mt,checked:kt}=dt.target;for(const yt of this._getElementsByName(mt,q))A.setValue(yt.id,{value:!1});A.setValue(q,{value:kt})}),X.addEventListener("resetform",dt=>{const mt=R.defaultFieldValue;dt.target.checked=mt!=null&&mt===R.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=R.buttonValue;X.addEventListener("updatefromsandbox",mt=>{const kt={value:yt=>{const Rt=dt===yt.detail.value;for(const xt of this._getElementsByName(yt.target.name)){const Ot=Rt&&xt.id===q;xt.domElement&&(xt.domElement.checked=Ot),A.setValue(xt.id,{value:Ot})}}};this._dispatchEventFromSandbox(kt,mt)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],mt=>mt.target.checked)}return this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.appendChild(X),this.container}}class tt extends et{constructor(A){super(A,{ignoreBorder:A.data.hasAppearance})}render(){const A=super.render();return A.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(A.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(A),A}}class ut extends J{constructor(A){super(A,{isRenderable:A.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const A=this.annotationStorage,R=this.data.id,q=A.getValue(R,{value:this.data.fieldValue});let{fontSize:K}=this.data.defaultAppearanceData;K||(K=9);const X=`calc(${K}px * var(--zoom-factor))`,dt=document.createElement("select");it.add(dt),dt.disabled=this.data.readOnly,dt.name=this.data.fieldName,dt.setAttribute("id",R),dt.tabIndex=bt,dt.style.fontSize=`${K}px`,this.data.combo||(dt.size=this.data.options.length,this.data.multiSelect&&(dt.multiple=!0)),dt.addEventListener("resetform",yt=>{const Rt=this.data.defaultFieldValue;for(const xt of dt.options)xt.selected=xt.value===Rt});for(const yt of this.data.options){const Rt=document.createElement("option");Rt.textContent=yt.displayValue,Rt.value=yt.exportValue,this.data.combo&&(Rt.style.fontSize=X),q.value.includes(yt.exportValue)&&Rt.setAttribute("selected",!0),dt.appendChild(Rt)}const mt=(yt,Rt)=>{const xt=Rt?"value":"textContent",Ot=yt.target.options;return yt.target.multiple?Array.prototype.filter.call(Ot,Bt=>Bt.selected).map(Bt=>Bt[xt]):Ot.selectedIndex===-1?null:Ot[Ot.selectedIndex][xt]},kt=yt=>{const Rt=yt.target.options;return Array.prototype.map.call(Rt,xt=>({displayValue:xt.textContent,exportValue:xt.value}))};return this.enableScripting&&this.hasJSActions?(dt.addEventListener("updatefromsandbox",yt=>{const Rt={value(xt){const Ot=xt.detail.value,Bt=new Set(Array.isArray(Ot)?Ot:[Ot]);for(const Ht of dt.options)Ht.selected=Bt.has(Ht.value);A.setValue(R,{value:mt(xt,!0)})},multipleSelection(xt){dt.multiple=!0},remove(xt){const Ot=dt.options,Bt=xt.detail.remove;Ot[Bt].selected=!1,dt.remove(Bt),Ot.length>0&&Array.prototype.findIndex.call(Ot,Wt=>Wt.selected)===-1&&(Ot[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},clear(xt){for(;dt.length!==0;)dt.remove(0);A.setValue(R,{value:null,items:[]})},insert(xt){const{index:Ot,displayValue:Bt,exportValue:Ht}=xt.detail.insert,Wt=document.createElement("option");Wt.textContent=Bt,Wt.value=Ht,dt.insertBefore(Wt,dt.children[Ot]),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},items(xt){const{items:Ot}=xt.detail;for(;dt.length!==0;)dt.remove(0);for(const Bt of Ot){const{displayValue:Ht,exportValue:Wt}=Bt,It=document.createElement("option");It.textContent=Ht,It.value=Wt,dt.appendChild(It)}dt.options.length>0&&(dt.options[0].selected=!0),A.setValue(R,{value:mt(xt,!0),items:kt(xt)})},indices(xt){const Ot=new Set(xt.detail.indices);for(const Bt of xt.target.options)Bt.selected=Ot.has(Bt.index);A.setValue(R,{value:mt(xt,!0)})},editable(xt){xt.target.disabled=!xt.detail.editable}};this._dispatchEventFromSandbox(Rt,yt)}),dt.addEventListener("input",yt=>{var Ot;const Rt=mt(yt,!0),xt=mt(yt,!1);A.setValue(R,{value:Rt}),(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:xt,changeEx:Rt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(dt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],yt=>yt.target.checked)):dt.addEventListener("input",function(yt){A.setValue(R,{value:mt(yt,!0)})}),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.appendChild(dt),this.container}}class ft extends pt{constructor(A){var q,K,X;const R=!!(((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R})}render(){const A=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",A.includes(this.data.parentType))return this.container;const R=`[data-annotation-id="${this.data.parentId}"]`,q=this.layer.querySelectorAll(R);if(q.length===0)return this.container;const K=new At({container:this.container,trigger:Array.from(q),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),X=this.page,dt=D.Util.normalizeRect([this.data.parentRect[0],X.view[3]-this.data.parentRect[1]+X.view[1],this.data.parentRect[2],X.view[3]-this.data.parentRect[3]+X.view[1]]),mt=dt[0]+this.data.parentRect[2]-this.data.parentRect[0],kt=dt[1];return this.container.style.transformOrigin=`${-mt}px ${-kt}px`,this.container.style.left=`${mt}px`,this.container.style.top=`${kt}px`,this.container.appendChild(K.render()),this.container}}class At{constructor(A){this.container=A.container,this.trigger=A.trigger,this.color=A.color,this.titleObj=A.titleObj,this.modificationDate=A.modificationDate,this.contentsObj=A.contentsObj,this.richText=A.richText,this.hideWrapper=A.hideWrapper||!1,this.pinned=!1}render(){var mt,kt;const R=document.createElement("div");R.className="popupWrapper",this.hideElement=this.hideWrapper?R:this.container,this.hideElement.hidden=!0;const q=document.createElement("div");q.className="popup";const K=this.color;if(K){const yt=.7*(255-K[0])+K[0],Rt=.7*(255-K[1])+K[1],xt=.7*(255-K[2])+K[2];q.style.backgroundColor=D.Util.makeHexColor(yt|0,Rt|0,xt|0)}const X=document.createElement("h1");X.dir=this.titleObj.dir,X.textContent=this.titleObj.str,q.appendChild(X);const dt=vt.PDFDateString.toDateObject(this.modificationDate);if(dt){const yt=document.createElement("span");yt.className="popupDate",yt.textContent="{{date}}, {{time}}",yt.dataset.l10nId="annotation_date_string",yt.dataset.l10nArgs=JSON.stringify({date:dt.toLocaleDateString(),time:dt.toLocaleTimeString()}),q.appendChild(yt)}if(((mt=this.richText)==null?void 0:mt.str)&&(!((kt=this.contentsObj)!=null&&kt.str)||this.contentsObj.str===this.richText.str))wt.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:q}),q.lastChild.className="richText popupContent";else{const yt=this._formatContents(this.contentsObj);q.appendChild(yt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const yt of this.trigger)yt.addEventListener("click",this._toggle.bind(this)),yt.addEventListener("mouseover",this._show.bind(this,!1)),yt.addEventListener("mouseout",this._hide.bind(this,!1));return q.addEventListener("click",this._hide.bind(this,!0)),R.appendChild(q),R}_formatContents({str:A,dir:R}){const q=document.createElement("p");q.className="popupContent",q.dir=R;const K=A.split(/(?:\r\n?|\n)/);for(let X=0,dt=K.length;X<dt;++X){const mt=K[X];q.appendChild(document.createTextNode(mt)),X<dt-1&&q.appendChild(document.createElement("br"))}return q}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(A=!1){A&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(A=!0){A&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class Pt extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=this.svgFactory.createElement("svg:line");return X.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),X.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),X.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),X.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),X.setAttribute("stroke-width",A.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),K.appendChild(X),this.container.append(K),this._createPopup(X,A),this.container}}class Z extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=A.borderStyle.width,dt=this.svgFactory.createElement("svg:rect");return dt.setAttribute("x",X/2),dt.setAttribute("y",X/2),dt.setAttribute("width",R-X),dt.setAttribute("height",q-X),dt.setAttribute("stroke-width",X||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),K.appendChild(dt),this.container.append(K),this._createPopup(dt,A),this.container}}class ot extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q),X=A.borderStyle.width,dt=this.svgFactory.createElement("svg:ellipse");return dt.setAttribute("cx",R/2),dt.setAttribute("cy",q/2),dt.setAttribute("rx",R/2-X/2),dt.setAttribute("ry",q/2-X/2),dt.setAttribute("stroke-width",X||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),K.appendChild(dt),this.container.append(K),this._createPopup(dt,A),this.container}}class _t extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q);let X=[];for(const mt of A.vertices){const kt=mt.x-A.rect[0],yt=A.rect[3]-mt.y;X.push(kt+","+yt)}X=X.join(" ");const dt=this.svgFactory.createElement(this.svgElementName);return dt.setAttribute("points",X),dt.setAttribute("stroke-width",A.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),K.appendChild(dt),this.container.append(K),this._createPopup(dt,A),this.container}}class ht extends _t{constructor(A){super(A),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ft extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class St extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const A=this.data,{width:R,height:q}=Y(A.rect),K=this.svgFactory.create(R,q);for(const X of A.inkLists){let dt=[];for(const kt of X){const yt=kt.x-A.rect[0],Rt=A.rect[3]-kt.y;dt.push(`${yt},${Rt}`)}dt=dt.join(" ");const mt=this.svgFactory.createElement(this.svgElementName);mt.setAttribute("points",dt),mt.setAttribute("stroke-width",A.borderStyle.width||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),this._createPopup(mt,A),K.appendChild(mt)}return this.container.append(K),this.container}}class Lt extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $t extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Dt extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class jt extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Nt extends pt{constructor(A){var q,K,X;const R=!!(A.data.hasPopup||((q=A.data.titleObj)==null?void 0:q.str)||((K=A.data.contentsObj)==null?void 0:K.str)||((X=A.data.richText)==null?void 0:X.str));super(A,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class qt extends pt{constructor(A){var K;super(A,{isRenderable:!0});const{filename:R,content:q}=this.data.file;this.filename=(0,vt.getFilenameFromUrl)(R),this.content=q,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:R,content:q})}render(){var R,q;this.container.className="fileAttachmentAnnotation";const A=document.createElement("div");return A.style.height=this.container.style.height,A.style.width=this.container.style.width,A.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((R=this.data.titleObj)==null?void 0:R.str)||((q=this.data.contentsObj)==null?void 0:q.str)||this.data.richText)&&this._createPopup(A,this.data),this.container.appendChild(A),this.container}_download(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)}}class rt{static render(A){const R=[],q=[];for(const X of A.annotations){if(!X)continue;const{width:dt,height:mt}=Y(X.rect);if(!(dt<=0||mt<=0)){if(X.annotationType===D.AnnotationType.POPUP){q.push(X);continue}R.push(X)}}q.length&&R.push(...q);const K=A.div;for(const X of R){const dt=gt.create({data:X,layer:K,page:A.page,viewport:A.viewport,linkService:A.linkService,downloadManager:A.downloadManager,imageResourcesPath:A.imageResourcesPath||"",renderForms:A.renderForms!==!1,svgFactory:new vt.DOMSVGFactory,annotationStorage:A.annotationStorage||new ct.AnnotationStorage,enableScripting:A.enableScripting,hasJSActions:A.hasJSActions,fieldObjects:A.fieldObjects,mouseState:A.mouseState||{isDown:!1}});if(dt.isRenderable){const mt=dt.render();if(X.hidden&&(mt.style.visibility="hidden"),Array.isArray(mt))for(const kt of mt)K.appendChild(kt);else dt instanceof ft?K.prepend(mt):K.appendChild(mt)}}Ae(this,B,Ee).call(this,K,A.annotationCanvasMap)}static update(A){const{page:R,viewport:q,annotations:K,annotationCanvasMap:X,div:dt}=A,mt=q.transform,kt=`matrix(${mt.join(",")})`;let yt,Rt;for(const xt of K){const Ot=dt.querySelectorAll(`[data-annotation-id="${xt.id}"]`);if(Ot)for(const Bt of Ot)if(xt.hasOwnCanvas){const Ht=D.Util.normalizeRect([xt.rect[0],R.view[3]-xt.rect[1]+R.view[1],xt.rect[2],R.view[3]-xt.rect[3]+R.view[1]]);if(!Rt){yt=Math.abs(mt[0]||mt[1]);const zt=mt.slice();for(let Vt=0;Vt<4;Vt++)zt[Vt]=Math.sign(zt[Vt]);Rt=`matrix(${zt.join(",")})`}const Wt=Ht[0]*yt,It=Ht[1]*yt;Bt.style.left=`${Wt}px`,Bt.style.top=`${It}px`,Bt.style.transformOrigin=`${-Wt}px ${-It}px`,Bt.style.transform=Rt}else Bt.style.transform=kt}Ae(this,B,Ee).call(this,dt,X),dt.hidden=!1}}B=new WeakSet,Ee=function(A,R){if(!!R){for(const[q,K]of R){const X=A.querySelector(`[data-annotation-id="${q}"]`);if(!X)continue;const{firstChild:dt}=X;dt.nodeName==="CANVAS"?X.replaceChild(K,dt):X.insertBefore(K,dt)}R.clear()}},le(rt,B),E.AnnotationLayer=rt},(st,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.ColorConverters=void 0;function at(vt){return Math.floor(Math.max(0,Math.min(1,vt))*255).toString(16).padStart(2,"0")}class D{static CMYK_G([ct,Ct,wt,bt]){return["G",1-Math.min(1,.3*ct+.59*wt+.11*Ct+bt)]}static G_CMYK([ct]){return["CMYK",0,0,0,1-ct]}static G_RGB([ct]){return["RGB",ct,ct,ct]}static G_HTML([ct]){const Ct=at(ct);return`#${Ct}${Ct}${Ct}`}static RGB_G([ct,Ct,wt]){return["G",.3*ct+.59*Ct+.11*wt]}static RGB_HTML([ct,Ct,wt]){const bt=at(ct),it=at(Ct),Y=at(wt);return`#${bt}${it}${Y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ct,Ct,wt,bt]){return["RGB",1-Math.min(1,ct+bt),1-Math.min(1,wt+bt),1-Math.min(1,Ct+bt)]}static CMYK_HTML(ct){return this.RGB_HTML(this.CMYK_RGB(ct))}static RGB_CMYK([ct,Ct,wt]){const bt=1-ct,it=1-Ct,Y=1-wt,gt=Math.min(bt,it,Y);return["CMYK",bt,it,Y,gt]}}E.ColorConverters=D},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.XfaLayer=void 0;var D=at(18);class vt{static setupStorage(Ct,wt,bt,it,Y){const gt=it.getValue(wt,{value:null});switch(bt.name){case"textarea":if(gt.value!==null&&(Ct.textContent=gt.value),Y==="print")break;Ct.addEventListener("input",pt=>{it.setValue(wt,{value:pt.target.value})});break;case"input":if(bt.attributes.type==="radio"||bt.attributes.type==="checkbox"){if(gt.value===bt.attributes.xfaOn?Ct.setAttribute("checked",!0):gt.value===bt.attributes.xfaOff&&Ct.removeAttribute("checked"),Y==="print")break;Ct.addEventListener("change",pt=>{it.setValue(wt,{value:pt.target.checked?pt.target.getAttribute("xfaOn"):pt.target.getAttribute("xfaOff")})})}else{if(gt.value!==null&&Ct.setAttribute("value",gt.value),Y==="print")break;Ct.addEventListener("input",pt=>{it.setValue(wt,{value:pt.target.value})})}break;case"select":if(gt.value!==null)for(const pt of bt.children)pt.attributes.value===gt.value&&(pt.attributes.selected=!0);Ct.addEventListener("input",pt=>{const et=pt.target.options,W=et.selectedIndex===-1?"":et[et.selectedIndex].value;it.setValue(wt,{value:W})});break}}static setAttributes({html:Ct,element:wt,storage:bt=null,intent:it,linkService:Y}){const{attributes:gt}=wt,pt=Ct instanceof HTMLAnchorElement;gt.type==="radio"&&(gt.name=`${gt.name}-${it}`);for(const[et,W]of Object.entries(gt))if(!(W==null||et==="dataId"))if(et!=="style")if(et==="textContent")Ct.textContent=W;else if(et==="class")W.length&&Ct.setAttribute(et,W.join(" "));else{if(pt&&(et==="href"||et==="newWindow"))continue;Ct.setAttribute(et,W)}else Object.assign(Ct.style,W);pt&&Y.addLinkAttributes(Ct,gt.href,gt.newWindow),bt&&gt.dataId&&this.setupStorage(Ct,gt.dataId,wt,bt)}static render(Ct){var J;const wt=Ct.annotationStorage,bt=Ct.linkService,it=Ct.xfaHtml,Y=Ct.intent||"display",gt=document.createElement(it.name);it.attributes&&this.setAttributes({html:gt,element:it,intent:Y,linkService:bt});const pt=[[it,-1,gt]],et=Ct.div;if(et.appendChild(gt),Ct.viewport){const G=`matrix(${Ct.viewport.transform.join(",")})`;et.style.transform=G}Y!=="richText"&&et.setAttribute("class","xfaLayer xfaFont");const W=[];for(;pt.length>0;){const[G,nt,lt]=pt[pt.length-1];if(nt+1===G.children.length){pt.pop();continue}const tt=G.children[++pt[pt.length-1][1]];if(tt===null)continue;const{name:ut}=tt;if(ut==="#text"){const At=document.createTextNode(tt.value);W.push(At),lt.appendChild(At);continue}let ft;if((J=tt==null?void 0:tt.attributes)!=null&&J.xmlns?ft=document.createElementNS(tt.attributes.xmlns,ut):ft=document.createElement(ut),lt.appendChild(ft),tt.attributes&&this.setAttributes({html:ft,element:tt,storage:wt,intent:Y,linkService:bt}),tt.children&&tt.children.length>0)pt.push([tt,-1,ft]);else if(tt.value){const At=document.createTextNode(tt.value);D.XfaText.shouldBuildText(ut)&&W.push(At),ft.appendChild(At)}}for(const G of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))G.setAttribute("readOnly",!0);return{textDivs:W}}static update(Ct){const wt=`matrix(${Ct.viewport.transform.join(",")})`;Ct.div.style.transform=wt,Ct.div.hidden=!1}}E.XfaLayer=vt},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.renderTextLayer=nt;var D=at(1);const vt=1e5,ct=30,Ct=.8,wt=new Map,bt=/^\s+$/g;function it(lt,tt){const ut=wt.get(lt);if(ut)return ut;tt.save(),tt.font=`${ct}px ${lt}`;const ft=tt.measureText("");let At=ft.fontBoundingBoxAscent,Pt=Math.abs(ft.fontBoundingBoxDescent);if(At){tt.restore();const Z=At/(At+Pt);return wt.set(lt,Z),Z}tt.strokeStyle="red",tt.clearRect(0,0,ct,ct),tt.strokeText("g",0,0);let V=tt.getImageData(0,0,ct,ct).data;Pt=0;for(let Z=V.length-1-3;Z>=0;Z-=4)if(V[Z]>0){Pt=Math.ceil(Z/4/ct);break}tt.clearRect(0,0,ct,ct),tt.strokeText("A",0,ct),V=tt.getImageData(0,0,ct,ct).data,At=0;for(let Z=0,ot=V.length;Z<ot;Z+=4)if(V[Z]>0){At=ct-Math.floor(Z/4/ct);break}if(tt.restore(),At){const Z=At/(At+Pt);return wt.set(lt,Z),Z}return wt.set(lt,Ct),Ct}function Y(lt,tt,ut,ft){const At=document.createElement("span"),Pt=lt._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:tt.str!=="",hasEOL:tt.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:tt.str!=="",hasEOL:tt.hasEOL};lt._textDivs.push(At);const V=D.Util.transform(lt._viewport.transform,tt.transform);let Z=Math.atan2(V[1],V[0]);const ot=ut[tt.fontName];ot.vertical&&(Z+=Math.PI/2);const _t=Math.hypot(V[2],V[3]),ht=_t*it(ot.fontFamily,ft);let Ft,St;Z===0?(Ft=V[4],St=V[5]-ht):(Ft=V[4]+ht*Math.sin(Z),St=V[5]-ht*Math.cos(Z)),At.style.left=`${Ft}px`,At.style.top=`${St}px`,At.style.fontSize=`${_t}px`,At.style.fontFamily=ot.fontFamily,At.setAttribute("role","presentation"),At.textContent=tt.str,At.dir=tt.dir,lt._fontInspectorEnabled&&(At.dataset.fontName=tt.fontName),Z!==0&&(Pt.angle=Z*(180/Math.PI));let Lt=!1;if(tt.str.length>1||lt._enhanceTextSelection&&bt.test(tt.str))Lt=!0;else if(tt.str!==" "&&tt.transform[0]!==tt.transform[3]){const $t=Math.abs(tt.transform[0]),Dt=Math.abs(tt.transform[3]);$t!==Dt&&Math.max($t,Dt)/Math.min($t,Dt)>1.5&&(Lt=!0)}if(Lt&&(ot.vertical?Pt.canvasWidth=tt.height*lt._viewport.scale:Pt.canvasWidth=tt.width*lt._viewport.scale),lt._textDivProperties.set(At,Pt),lt._textContentStream&&lt._layoutText(At),lt._enhanceTextSelection&&Pt.hasText){let $t=1,Dt=0;Z!==0&&($t=Math.cos(Z),Dt=Math.sin(Z));const jt=(ot.vertical?tt.height:tt.width)*lt._viewport.scale,Nt=_t;let qt,rt;Z!==0?(qt=[$t,Dt,-Dt,$t,Ft,St],rt=D.Util.getAxialAlignedBoundingBox([0,0,jt,Nt],qt)):rt=[Ft,St,Ft+jt,St+Nt],lt._bounds.push({left:rt[0],top:rt[1],right:rt[2],bottom:rt[3],div:At,size:[jt,Nt],m:qt})}}function gt(lt){if(lt._canceled)return;const tt=lt._textDivs,ut=lt._capability,ft=tt.length;if(ft>vt){lt._renderingDone=!0,ut.resolve();return}if(!lt._textContentStream)for(let At=0;At<ft;At++)lt._layoutText(tt[At]);lt._renderingDone=!0,ut.resolve()}function pt(lt,tt,ut){let ft=0;for(let At=0;At<ut;At++){const Pt=lt[tt++];Pt>0&&(ft=ft?Math.min(Pt,ft):Pt)}return ft}function et(lt){const tt=lt._bounds,ut=lt._viewport,ft=W(ut.width,ut.height,tt);for(let At=0;At<ft.length;At++){const Pt=tt[At].div,V=lt._textDivProperties.get(Pt);if(V.angle===0){V.paddingLeft=tt[At].left-ft[At].left,V.paddingTop=tt[At].top-ft[At].top,V.paddingRight=ft[At].right-tt[At].right,V.paddingBottom=ft[At].bottom-tt[At].bottom,lt._textDivProperties.set(Pt,V);continue}const Z=ft[At],ot=tt[At],_t=ot.m,ht=_t[0],Ft=_t[1],St=[[0,0],[0,ot.size[1]],[ot.size[0],0],ot.size],Lt=new Float64Array(64);for(let Dt=0,jt=St.length;Dt<jt;Dt++){const Nt=D.Util.applyTransform(St[Dt],_t);Lt[Dt+0]=ht&&(Z.left-Nt[0])/ht,Lt[Dt+4]=Ft&&(Z.top-Nt[1])/Ft,Lt[Dt+8]=ht&&(Z.right-Nt[0])/ht,Lt[Dt+12]=Ft&&(Z.bottom-Nt[1])/Ft,Lt[Dt+16]=Ft&&(Z.left-Nt[0])/-Ft,Lt[Dt+20]=ht&&(Z.top-Nt[1])/ht,Lt[Dt+24]=Ft&&(Z.right-Nt[0])/-Ft,Lt[Dt+28]=ht&&(Z.bottom-Nt[1])/ht,Lt[Dt+32]=ht&&(Z.left-Nt[0])/-ht,Lt[Dt+36]=Ft&&(Z.top-Nt[1])/-Ft,Lt[Dt+40]=ht&&(Z.right-Nt[0])/-ht,Lt[Dt+44]=Ft&&(Z.bottom-Nt[1])/-Ft,Lt[Dt+48]=Ft&&(Z.left-Nt[0])/Ft,Lt[Dt+52]=ht&&(Z.top-Nt[1])/-ht,Lt[Dt+56]=Ft&&(Z.right-Nt[0])/Ft,Lt[Dt+60]=ht&&(Z.bottom-Nt[1])/-ht}const $t=1+Math.min(Math.abs(ht),Math.abs(Ft));V.paddingLeft=pt(Lt,32,16)/$t,V.paddingTop=pt(Lt,48,16)/$t,V.paddingRight=pt(Lt,0,16)/$t,V.paddingBottom=pt(Lt,16,16)/$t,lt._textDivProperties.set(Pt,V)}}function W(lt,tt,ut){const ft=ut.map(function(Pt,V){return{x1:Pt.left,y1:Pt.top,x2:Pt.right,y2:Pt.bottom,index:V,x1New:void 0,x2New:void 0}});J(lt,ft);const At=new Array(ut.length);for(const Pt of ft){const V=Pt.index;At[V]={left:Pt.x1New,top:0,right:Pt.x2New,bottom:0}}ut.map(function(Pt,V){const Z=At[V],ot=ft[V];ot.x1=Pt.top,ot.y1=lt-Z.right,ot.x2=Pt.bottom,ot.y2=lt-Z.left,ot.index=V,ot.x1New=void 0,ot.x2New=void 0}),J(tt,ft);for(const Pt of ft){const V=Pt.index;At[V].top=Pt.x1New,At[V].bottom=Pt.x2New}return At}function J(lt,tt){tt.sort(function(At,Pt){return At.x1-Pt.x1||At.index-Pt.index});const ft=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const At of tt){let Pt=0;for(;Pt<ft.length&&ft[Pt].end<=At.y1;)Pt++;let V=ft.length-1;for(;V>=0&&ft[V].start>=At.y2;)V--;let Z,ot,_t,ht,Ft=-1/0;for(_t=Pt;_t<=V;_t++){Z=ft[_t],ot=Z.boundary;let $t;ot.x2>At.x1?$t=ot.index>At.index?ot.x1New:At.x1:ot.x2New===void 0?$t=(ot.x2+At.x1)/2:$t=ot.x2New,$t>Ft&&(Ft=$t)}for(At.x1New=Ft,_t=Pt;_t<=V;_t++)Z=ft[_t],ot=Z.boundary,ot.x2New===void 0?ot.x2>At.x1?ot.index>At.index&&(ot.x2New=ot.x2):ot.x2New=Ft:ot.x2New>Ft&&(ot.x2New=Math.max(Ft,ot.x2));const St=[];let Lt=null;for(_t=Pt;_t<=V;_t++){Z=ft[_t],ot=Z.boundary;const $t=ot.x2>At.x2?ot:At;Lt===$t?St[St.length-1].end=Z.end:(St.push({start:Z.start,end:Z.end,boundary:$t}),Lt=$t)}for(ft[Pt].start<At.y1&&(St[0].start=At.y1,St.unshift({start:ft[Pt].start,end:At.y1,boundary:ft[Pt].boundary})),At.y2<ft[V].end&&(St[St.length-1].end=At.y2,St.push({start:At.y2,end:ft[V].end,boundary:ft[V].boundary})),_t=Pt;_t<=V;_t++){if(Z=ft[_t],ot=Z.boundary,ot.x2New!==void 0)continue;let $t=!1;for(ht=Pt-1;!$t&&ht>=0&&ft[ht].start>=ot.y1;ht--)$t=ft[ht].boundary===ot;for(ht=V+1;!$t&&ht<ft.length&&ft[ht].end<=ot.y2;ht++)$t=ft[ht].boundary===ot;for(ht=0;!$t&&ht<St.length;ht++)$t=St[ht].boundary===ot;$t||(ot.x2New=Ft)}Array.prototype.splice.apply(ft,[Pt,V-Pt+1].concat(St))}for(const At of ft){const Pt=At.boundary;Pt.x2New===void 0&&(Pt.x2New=Math.max(lt,Pt.x2))}}class G{constructor({textContent:tt,textContentStream:ut,container:ft,viewport:At,textDivs:Pt,textContentItemsStr:V,enhanceTextSelection:Z}){var ot;this._textContent=tt,this._textContentStream=ut,this._container=ft,this._document=ft.ownerDocument,this._viewport=At,this._textDivs=Pt||[],this._textContentItemsStr=V||[],this._enhanceTextSelection=!!Z,this._fontInspectorEnabled=!!((ot=globalThis.FontInspector)!=null&&ot.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,D.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new D.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(tt,ut){for(let ft=0,At=tt.length;ft<At;ft++){if(tt[ft].str===void 0){if(tt[ft].type==="beginMarkedContentProps"||tt[ft].type==="beginMarkedContent"){const Pt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),tt[ft].id!==null&&this._container.setAttribute("id",`${tt[ft].id}`),Pt.appendChild(this._container)}else tt[ft].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(tt[ft].str),Y(this,tt[ft],ut,this._layoutTextCtx)}}_layoutText(tt){const ut=this._textDivProperties.get(tt);let ft="";if(ut.canvasWidth!==0&&ut.hasText){const{fontSize:At,fontFamily:Pt}=tt.style;(At!==this._layoutTextLastFontSize||Pt!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${At} ${Pt}`,this._layoutTextLastFontSize=At,this._layoutTextLastFontFamily=Pt);const{width:V}=this._layoutTextCtx.measureText(tt.textContent);if(V>0){const Z=ut.canvasWidth/V;this._enhanceTextSelection&&(ut.scale=Z),ft=`scaleX(${Z})`}}if(ut.angle!==0&&(ft=`rotate(${ut.angle}deg) ${ft}`),ft.length>0&&(this._enhanceTextSelection&&(ut.originalTransform=ft),tt.style.transform=ft),ut.hasText&&this._container.appendChild(tt),ut.hasEOL){const At=document.createElement("br");At.setAttribute("role","presentation"),this._container.appendChild(At)}}_render(tt=0){const ut=(0,D.createPromiseCapability)();let ft=Object.create(null);const At=this._document.createElement("canvas");if(At.height=At.width=ct,this._layoutTextCtx=At.getContext("2d",{alpha:!1}),this._textContent){const Pt=this._textContent.items,V=this._textContent.styles;this._processItems(Pt,V),ut.resolve()}else if(this._textContentStream){const Pt=()=>{this._reader.read().then(({value:V,done:Z})=>{if(Z){ut.resolve();return}Object.assign(ft,V.styles),this._processItems(V.items,ft),Pt()},ut.reject)};this._reader=this._textContentStream.getReader(),Pt()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');ut.promise.then(()=>{ft=null,tt?this._renderTimer=setTimeout(()=>{gt(this),this._renderTimer=null},tt):gt(this)},this._capability.reject)}expandTextDivs(tt=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(et(this),this._bounds=null);const ut=[],ft=[];for(let At=0,Pt=this._textDivs.length;At<Pt;At++){const V=this._textDivs[At],Z=this._textDivProperties.get(V);!Z.hasText||(tt?(ut.length=0,ft.length=0,Z.originalTransform&&ut.push(Z.originalTransform),Z.paddingTop>0?(ft.push(`${Z.paddingTop}px`),ut.push(`translateY(${-Z.paddingTop}px)`)):ft.push(0),Z.paddingRight>0?ft.push(`${Z.paddingRight/Z.scale}px`):ft.push(0),Z.paddingBottom>0?ft.push(`${Z.paddingBottom}px`):ft.push(0),Z.paddingLeft>0?(ft.push(`${Z.paddingLeft/Z.scale}px`),ut.push(`translateX(${-Z.paddingLeft/Z.scale}px)`)):ft.push(0),V.style.padding=ft.join(" "),ut.length&&(V.style.transform=ut.join(" "))):(V.style.padding=null,V.style.transform=Z.originalTransform))}}}function nt(lt){const tt=new G({textContent:lt.textContent,textContentStream:lt.textContentStream,container:lt.container,viewport:lt.viewport,textDivs:lt.textDivs,textContentItemsStr:lt.textContentItemsStr,enhanceTextSelection:lt.enhanceTextSelection});return tt._render(lt.timeout),tt}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.SVGGraphics=void 0;var D=at(1),vt=at(5),ct=at(3);let Ct=class{constructor(){(0,D.unreachable)("Not implemented: SVGGraphics")}};E.SVGGraphics=Ct;{let lt=function(V){let Z=[];const ot=[];for(const _t of V){if(_t.fn==="save"){Z.push({fnId:92,fn:"group",items:[]}),ot.push(Z),Z=Z[Z.length-1].items;continue}_t.fn==="restore"?Z=ot.pop():Z.push(_t)}return Z},tt=function(V){if(Number.isInteger(V))return V.toString();const Z=V.toFixed(10);let ot=Z.length-1;if(Z[ot]!=="0")return Z;do ot--;while(Z[ot]==="0");return Z.substring(0,Z[ot]==="."?ot:ot+1)},ut=function(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${tt(V[0])} ${tt(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const Z=Math.acos(V[0])*180/Math.PI;return`rotate(${tt(Z)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${tt(V[4])} ${tt(V[5])})`;return`matrix(${tt(V[0])} ${tt(V[1])} ${tt(V[2])} ${tt(V[3])} ${tt(V[4])} ${tt(V[5])})`};var wt=lt,bt=tt,it=ut;const Y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},gt="http://www.w3.org/XML/1998/namespace",pt="http://www.w3.org/1999/xlink",et=["butt","round","square"],W=["miter","round","bevel"],J=function(V,Z="",ot=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!ot)return URL.createObjectURL(new Blob([V],{type:Z}));const _t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ht=`data:${Z};base64,`;for(let Ft=0,St=V.length;Ft<St;Ft+=3){const Lt=V[Ft]&255,$t=V[Ft+1]&255,Dt=V[Ft+2]&255,jt=Lt>>2,Nt=(Lt&3)<<4|$t>>4,qt=Ft+1<St?($t&15)<<2|Dt>>6:64,rt=Ft+2<St?Dt&63:64;ht+=_t[jt]+_t[Nt]+_t[qt]+_t[rt]}return ht},G=function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),Z=12,ot=new Int32Array(256);for(let Dt=0;Dt<256;Dt++){let jt=Dt;for(let Nt=0;Nt<8;Nt++)jt&1?jt=3988292384^jt>>1&2147483647:jt=jt>>1&2147483647;ot[Dt]=jt}function _t(Dt,jt,Nt){let qt=-1;for(let rt=jt;rt<Nt;rt++){const B=(qt^Dt[rt])&255,U=ot[B];qt=qt>>>8^U}return qt^-1}function ht(Dt,jt,Nt,qt){let rt=qt;const B=jt.length;Nt[rt]=B>>24&255,Nt[rt+1]=B>>16&255,Nt[rt+2]=B>>8&255,Nt[rt+3]=B&255,rt+=4,Nt[rt]=Dt.charCodeAt(0)&255,Nt[rt+1]=Dt.charCodeAt(1)&255,Nt[rt+2]=Dt.charCodeAt(2)&255,Nt[rt+3]=Dt.charCodeAt(3)&255,rt+=4,Nt.set(jt,rt),rt+=jt.length;const U=_t(Nt,qt+4,rt);Nt[rt]=U>>24&255,Nt[rt+1]=U>>16&255,Nt[rt+2]=U>>8&255,Nt[rt+3]=U&255}function Ft(Dt,jt,Nt){let qt=1,rt=0;for(let B=jt;B<Nt;++B)qt=(qt+(Dt[B]&255))%65521,rt=(rt+qt)%65521;return rt<<16|qt}function St(Dt){if(!ct.isNodeJS)return Lt(Dt);try{let jt;parseInt(process.versions.node)>=8?jt=Dt:jt=Buffer.from(Dt);const Nt=require("zlib").deflateSync(jt,{level:9});return Nt instanceof Uint8Array?Nt:new Uint8Array(Nt)}catch(jt){(0,D.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+jt)}return Lt(Dt)}function Lt(Dt){let jt=Dt.length;const Nt=65535,qt=Math.ceil(jt/Nt),rt=new Uint8Array(2+jt+qt*5+4);let B=0;rt[B++]=120,rt[B++]=156;let U=0;for(;jt>Nt;)rt[B++]=0,rt[B++]=255,rt[B++]=255,rt[B++]=0,rt[B++]=0,rt.set(Dt.subarray(U,U+Nt),B),B+=Nt,U+=Nt,jt-=Nt;rt[B++]=1,rt[B++]=jt&255,rt[B++]=jt>>8&255,rt[B++]=~jt&65535&255,rt[B++]=(~jt&65535)>>8&255,rt.set(Dt.subarray(U),B),B+=Dt.length-U;const Q=Ft(Dt,0,Dt.length);return rt[B++]=Q>>24&255,rt[B++]=Q>>16&255,rt[B++]=Q>>8&255,rt[B++]=Q&255,rt}function $t(Dt,jt,Nt,qt){const rt=Dt.width,B=Dt.height;let U,Q,A;const R=Dt.data;switch(jt){case D.ImageKind.GRAYSCALE_1BPP:Q=0,U=1,A=rt+7>>3;break;case D.ImageKind.RGB_24BPP:Q=2,U=8,A=rt*3;break;case D.ImageKind.RGBA_32BPP:Q=6,U=8,A=rt*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+A)*B);let K=0,X=0;for(let xt=0;xt<B;++xt)q[K++]=0,q.set(R.subarray(X,X+A),K),X+=A,K+=A;if(jt===D.ImageKind.GRAYSCALE_1BPP&&qt){K=0;for(let xt=0;xt<B;xt++){K++;for(let Ot=0;Ot<A;Ot++)q[K++]^=255}}const dt=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,B>>24&255,B>>16&255,B>>8&255,B&255,U,Q,0,0,0]),mt=St(q),kt=V.length+Z*3+dt.length+mt.length,yt=new Uint8Array(kt);let Rt=0;return yt.set(V,Rt),Rt+=V.length,ht("IHDR",dt,yt,Rt),Rt+=Z+dt.length,ht("IDATA",mt,yt,Rt),Rt+=Z+mt.length,ht("IEND",new Uint8Array(0),yt,Rt),J(yt,"image/png",Nt)}return function(jt,Nt,qt){const rt=jt.kind===void 0?D.ImageKind.GRAYSCALE_1BPP:jt.kind;return $t(jt,rt,Nt,qt)}}();class nt{constructor(){this.fontSizeScale=1,this.fontWeight=Y.fontWeight,this.fontSize=0,this.textMatrix=D.IDENTITY_MATRIX,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=D.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Z,ot){this.x=Z,this.y=ot}}let ft=0,At=0,Pt=0;E.SVGGraphics=Ct=class{constructor(V,Z,ot=!1){this.svgFactory=new vt.DOMSVGFactory,this.current=new nt,this.transformMatrix=D.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=V,this.objs=Z,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ot,this._operatorIdMapping=[];for(const _t in D.OPS)this._operatorIdMapping[D.OPS[_t]]=_t}save(){this.transformStack.push(this.transformMatrix);const V=this.current;this.extraStack.push(V),this.current=V.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(V){this.save(),this.executeOpTree(V),this.restore()}loadDependencies(V){const Z=V.fnArray,ot=V.argsArray;for(let _t=0,ht=Z.length;_t<ht;_t++)if(Z[_t]===D.OPS.dependency)for(const Ft of ot[_t]){const St=Ft.startsWith("g_")?this.commonObjs:this.objs,Lt=new Promise($t=>{St.get(Ft,$t)});this.current.dependencies.push(Lt)}return Promise.all(this.current.dependencies)}transform(V,Z,ot,_t,ht,Ft){const St=[V,Z,ot,_t,ht,Ft];this.transformMatrix=D.Util.transform(this.transformMatrix,St),this.tgrp=null}getSVG(V,Z){this.viewport=Z;const ot=this._initialize(Z);return this.loadDependencies(V).then(()=>(this.transformMatrix=D.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(V)),ot))}convertOpList(V){const Z=this._operatorIdMapping,ot=V.argsArray,_t=V.fnArray,ht=[];for(let Ft=0,St=_t.length;Ft<St;Ft++){const Lt=_t[Ft];ht.push({fnId:Lt,fn:Z[Lt],args:ot[Ft]})}return lt(ht)}executeOpTree(V){for(const Z of V){const ot=Z.fn,_t=Z.fnId,ht=Z.args;switch(_t|0){case D.OPS.beginText:this.beginText();break;case D.OPS.dependency:break;case D.OPS.setLeading:this.setLeading(ht);break;case D.OPS.setLeadingMoveText:this.setLeadingMoveText(ht[0],ht[1]);break;case D.OPS.setFont:this.setFont(ht);break;case D.OPS.showText:this.showText(ht[0]);break;case D.OPS.showSpacedText:this.showText(ht[0]);break;case D.OPS.endText:this.endText();break;case D.OPS.moveText:this.moveText(ht[0],ht[1]);break;case D.OPS.setCharSpacing:this.setCharSpacing(ht[0]);break;case D.OPS.setWordSpacing:this.setWordSpacing(ht[0]);break;case D.OPS.setHScale:this.setHScale(ht[0]);break;case D.OPS.setTextMatrix:this.setTextMatrix(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5]);break;case D.OPS.setTextRise:this.setTextRise(ht[0]);break;case D.OPS.setTextRenderingMode:this.setTextRenderingMode(ht[0]);break;case D.OPS.setLineWidth:this.setLineWidth(ht[0]);break;case D.OPS.setLineJoin:this.setLineJoin(ht[0]);break;case D.OPS.setLineCap:this.setLineCap(ht[0]);break;case D.OPS.setMiterLimit:this.setMiterLimit(ht[0]);break;case D.OPS.setFillRGBColor:this.setFillRGBColor(ht[0],ht[1],ht[2]);break;case D.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ht[0],ht[1],ht[2]);break;case D.OPS.setStrokeColorN:this.setStrokeColorN(ht);break;case D.OPS.setFillColorN:this.setFillColorN(ht);break;case D.OPS.shadingFill:this.shadingFill(ht[0]);break;case D.OPS.setDash:this.setDash(ht[0],ht[1]);break;case D.OPS.setRenderingIntent:this.setRenderingIntent(ht[0]);break;case D.OPS.setFlatness:this.setFlatness(ht[0]);break;case D.OPS.setGState:this.setGState(ht[0]);break;case D.OPS.fill:this.fill();break;case D.OPS.eoFill:this.eoFill();break;case D.OPS.stroke:this.stroke();break;case D.OPS.fillStroke:this.fillStroke();break;case D.OPS.eoFillStroke:this.eoFillStroke();break;case D.OPS.clip:this.clip("nonzero");break;case D.OPS.eoClip:this.clip("evenodd");break;case D.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case D.OPS.paintImageXObject:this.paintImageXObject(ht[0]);break;case D.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ht[0]);break;case D.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ht[0]);break;case D.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ht[0],ht[1]);break;case D.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case D.OPS.closePath:this.closePath();break;case D.OPS.closeStroke:this.closeStroke();break;case D.OPS.closeFillStroke:this.closeFillStroke();break;case D.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case D.OPS.nextLine:this.nextLine();break;case D.OPS.transform:this.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5]);break;case D.OPS.constructPath:this.constructPath(ht[0],ht[1]);break;case D.OPS.endPath:this.endPath();break;case 92:this.group(Z.items);break;default:(0,D.warn)(`Unimplemented operator ${ot}`);break}}}setWordSpacing(V){this.current.wordSpacing=V}setCharSpacing(V){this.current.charSpacing=V}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(V,Z,ot,_t,ht,Ft){const St=this.current;St.textMatrix=St.lineMatrix=[V,Z,ot,_t,ht,Ft],St.textMatrixScale=Math.hypot(V,Z),St.x=St.lineX=0,St.y=St.lineY=0,St.xcoords=[],St.ycoords=[],St.tspan=this.svgFactory.createElement("svg:tspan"),St.tspan.setAttributeNS(null,"font-family",St.fontFamily),St.tspan.setAttributeNS(null,"font-size",`${tt(St.fontSize)}px`),St.tspan.setAttributeNS(null,"y",tt(-St.y)),St.txtElement=this.svgFactory.createElement("svg:text"),St.txtElement.appendChild(St.tspan)}beginText(){const V=this.current;V.x=V.lineX=0,V.y=V.lineY=0,V.textMatrix=D.IDENTITY_MATRIX,V.lineMatrix=D.IDENTITY_MATRIX,V.textMatrixScale=1,V.tspan=this.svgFactory.createElement("svg:tspan"),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtgrp=this.svgFactory.createElement("svg:g"),V.xcoords=[],V.ycoords=[]}moveText(V,Z){const ot=this.current;ot.x=ot.lineX+=V,ot.y=ot.lineY+=Z,ot.xcoords=[],ot.ycoords=[],ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.tspan.setAttributeNS(null,"font-family",ot.fontFamily),ot.tspan.setAttributeNS(null,"font-size",`${tt(ot.fontSize)}px`),ot.tspan.setAttributeNS(null,"y",tt(-ot.y))}showText(V){const Z=this.current,ot=Z.font,_t=Z.fontSize;if(_t===0)return;const ht=Z.fontSizeScale,Ft=Z.charSpacing,St=Z.wordSpacing,Lt=Z.fontDirection,$t=Z.textHScale*Lt,Dt=ot.vertical,jt=Dt?1:-1,Nt=ot.defaultVMetrics,qt=_t*Z.fontMatrix[0];let rt=0;for(const Q of V){if(Q===null){rt+=Lt*St;continue}else if(typeof Q=="number"){rt+=jt*Q*_t/1e3;continue}const A=(Q.isSpace?St:0)+Ft,R=Q.fontChar;let q,K,X=Q.width;if(Dt){let mt;const kt=Q.vmetric||Nt;mt=Q.vmetric?kt[1]:X*.5,mt=-mt*qt;const yt=kt[2]*qt;X=kt?-kt[0]:X,q=mt/ht,K=(rt+yt)/ht}else q=rt/ht,K=0;(Q.isInFont||ot.missingFile)&&(Z.xcoords.push(Z.x+q),Dt&&Z.ycoords.push(-Z.y+K),Z.tspan.textContent+=R);let dt;Dt?dt=X*qt-A*Lt:dt=X*qt+A*Lt,rt+=dt}Z.tspan.setAttributeNS(null,"x",Z.xcoords.map(tt).join(" ")),Dt?Z.tspan.setAttributeNS(null,"y",Z.ycoords.map(tt).join(" ")):Z.tspan.setAttributeNS(null,"y",tt(-Z.y)),Dt?Z.y-=rt:Z.x+=rt*$t,Z.tspan.setAttributeNS(null,"font-family",Z.fontFamily),Z.tspan.setAttributeNS(null,"font-size",`${tt(Z.fontSize)}px`),Z.fontStyle!==Y.fontStyle&&Z.tspan.setAttributeNS(null,"font-style",Z.fontStyle),Z.fontWeight!==Y.fontWeight&&Z.tspan.setAttributeNS(null,"font-weight",Z.fontWeight);const B=Z.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK;if(B===D.TextRenderingMode.FILL||B===D.TextRenderingMode.FILL_STROKE?(Z.fillColor!==Y.fillColor&&Z.tspan.setAttributeNS(null,"fill",Z.fillColor),Z.fillAlpha<1&&Z.tspan.setAttributeNS(null,"fill-opacity",Z.fillAlpha)):Z.textRenderingMode===D.TextRenderingMode.ADD_TO_PATH?Z.tspan.setAttributeNS(null,"fill","transparent"):Z.tspan.setAttributeNS(null,"fill","none"),B===D.TextRenderingMode.STROKE||B===D.TextRenderingMode.FILL_STROKE){const Q=1/(Z.textMatrixScale||1);this._setStrokeAttributes(Z.tspan,Q)}let U=Z.textMatrix;Z.textRise!==0&&(U=U.slice(),U[5]+=Z.textRise),Z.txtElement.setAttributeNS(null,"transform",`${ut(U)} scale(${tt($t)}, -1)`),Z.txtElement.setAttributeNS(gt,"xml:space","preserve"),Z.txtElement.appendChild(Z.tspan),Z.txtgrp.appendChild(Z.txtElement),this._ensureTransformGroup().appendChild(Z.txtElement)}setLeadingMoveText(V,Z){this.setLeading(-Z),this.moveText(V,Z)}addFontStyle(V){if(!V.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const Z=J(V.data,V.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${V.loadedName}"; src: url(${Z}); }
`}setFont(V){const Z=this.current,ot=this.commonObjs.get(V[0]);let _t=V[1];Z.font=ot,this.embedFonts&&!ot.missingFile&&!this.embeddedFonts[ot.loadedName]&&(this.addFontStyle(ot),this.embeddedFonts[ot.loadedName]=ot),Z.fontMatrix=ot.fontMatrix||D.FONT_IDENTITY_MATRIX;let ht="normal";ot.black?ht="900":ot.bold&&(ht="bold");const Ft=ot.italic?"italic":"normal";_t<0?(_t=-_t,Z.fontDirection=-1):Z.fontDirection=1,Z.fontSize=_t,Z.fontFamily=ot.loadedName,Z.fontWeight=ht,Z.fontStyle=Ft,Z.tspan=this.svgFactory.createElement("svg:tspan"),Z.tspan.setAttributeNS(null,"y",tt(-Z.y)),Z.xcoords=[],Z.ycoords=[]}endText(){var Z;const V=this.current;V.textRenderingMode&D.TextRenderingMode.ADD_TO_PATH_FLAG&&((Z=V.txtElement)==null?void 0:Z.hasChildNodes())&&(V.element=V.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(V){V>0&&(this.current.lineWidth=V)}setLineCap(V){this.current.lineCap=et[V]}setLineJoin(V){this.current.lineJoin=W[V]}setMiterLimit(V){this.current.miterLimit=V}setStrokeAlpha(V){this.current.strokeAlpha=V}setStrokeRGBColor(V,Z,ot){this.current.strokeColor=D.Util.makeHexColor(V,Z,ot)}setFillAlpha(V){this.current.fillAlpha=V}setFillRGBColor(V,Z,ot){this.current.fillColor=D.Util.makeHexColor(V,Z,ot),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(V){this.current.strokeColor=this._makeColorN_Pattern(V)}setFillColorN(V){this.current.fillColor=this._makeColorN_Pattern(V)}shadingFill(V){const Z=this.viewport.width,ot=this.viewport.height,_t=D.Util.inverseTransform(this.transformMatrix),ht=D.Util.applyTransform([0,0],_t),Ft=D.Util.applyTransform([0,ot],_t),St=D.Util.applyTransform([Z,0],_t),Lt=D.Util.applyTransform([Z,ot],_t),$t=Math.min(ht[0],Ft[0],St[0],Lt[0]),Dt=Math.min(ht[1],Ft[1],St[1],Lt[1]),jt=Math.max(ht[0],Ft[0],St[0],Lt[0]),Nt=Math.max(ht[1],Ft[1],St[1],Lt[1]),qt=this.svgFactory.createElement("svg:rect");qt.setAttributeNS(null,"x",$t),qt.setAttributeNS(null,"y",Dt),qt.setAttributeNS(null,"width",jt-$t),qt.setAttributeNS(null,"height",Nt-Dt),qt.setAttributeNS(null,"fill",this._makeShadingPattern(V)),this.current.fillAlpha<1&&qt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(qt)}_makeColorN_Pattern(V){return V[0]==="TilingPattern"?this._makeTilingPattern(V):this._makeShadingPattern(V)}_makeTilingPattern(V){const Z=V[1],ot=V[2],_t=V[3]||D.IDENTITY_MATRIX,[ht,Ft,St,Lt]=V[4],$t=V[5],Dt=V[6],jt=V[7],Nt=`shading${Pt++}`,[qt,rt,B,U]=D.Util.normalizeRect([...D.Util.applyTransform([ht,Ft],_t),...D.Util.applyTransform([St,Lt],_t)]),[Q,A]=D.Util.singularValueDecompose2dScale(_t),R=$t*Q,q=Dt*A,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",Nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",R),K.setAttributeNS(null,"height",q),K.setAttributeNS(null,"x",`${qt}`),K.setAttributeNS(null,"y",`${rt}`);const X=this.svg,dt=this.transformMatrix,mt=this.current.fillColor,kt=this.current.strokeColor,yt=this.svgFactory.create(B-qt,U-rt);if(this.svg=yt,this.transformMatrix=_t,jt===2){const Rt=D.Util.makeHexColor(...Z);this.current.fillColor=Rt,this.current.strokeColor=Rt}return this.executeOpTree(this.convertOpList(ot)),this.svg=X,this.transformMatrix=dt,this.current.fillColor=mt,this.current.strokeColor=kt,K.appendChild(yt.childNodes[0]),this.defs.appendChild(K),`url(#${Nt})`}_makeShadingPattern(V){switch(typeof V=="string"&&(V=this.objs.get(V)),V[0]){case"RadialAxial":const Z=`shading${Pt++}`,ot=V[3];let _t;switch(V[1]){case"axial":const ht=V[4],Ft=V[5];_t=this.svgFactory.createElement("svg:linearGradient"),_t.setAttributeNS(null,"id",Z),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"x1",ht[0]),_t.setAttributeNS(null,"y1",ht[1]),_t.setAttributeNS(null,"x2",Ft[0]),_t.setAttributeNS(null,"y2",Ft[1]);break;case"radial":const St=V[4],Lt=V[5],$t=V[6],Dt=V[7];_t=this.svgFactory.createElement("svg:radialGradient"),_t.setAttributeNS(null,"id",Z),_t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_t.setAttributeNS(null,"cx",Lt[0]),_t.setAttributeNS(null,"cy",Lt[1]),_t.setAttributeNS(null,"r",Dt),_t.setAttributeNS(null,"fx",St[0]),_t.setAttributeNS(null,"fy",St[1]),_t.setAttributeNS(null,"fr",$t);break;default:throw new Error(`Unknown RadialAxial type: ${V[1]}`)}for(const ht of ot){const Ft=this.svgFactory.createElement("svg:stop");Ft.setAttributeNS(null,"offset",ht[0]),Ft.setAttributeNS(null,"stop-color",ht[1]),_t.appendChild(Ft)}return this.defs.appendChild(_t),`url(#${Z})`;case"Mesh":return(0,D.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${V[0]}`)}}setDash(V,Z){this.current.dashArray=V,this.current.dashPhase=Z}constructPath(V,Z){const ot=this.current;let _t=ot.x,ht=ot.y,Ft=[],St=0;for(const Lt of V)switch(Lt|0){case D.OPS.rectangle:_t=Z[St++],ht=Z[St++];const $t=Z[St++],Dt=Z[St++],jt=_t+$t,Nt=ht+Dt;Ft.push("M",tt(_t),tt(ht),"L",tt(jt),tt(ht),"L",tt(jt),tt(Nt),"L",tt(_t),tt(Nt),"Z");break;case D.OPS.moveTo:_t=Z[St++],ht=Z[St++],Ft.push("M",tt(_t),tt(ht));break;case D.OPS.lineTo:_t=Z[St++],ht=Z[St++],Ft.push("L",tt(_t),tt(ht));break;case D.OPS.curveTo:_t=Z[St+4],ht=Z[St+5],Ft.push("C",tt(Z[St]),tt(Z[St+1]),tt(Z[St+2]),tt(Z[St+3]),tt(_t),tt(ht)),St+=6;break;case D.OPS.curveTo2:Ft.push("C",tt(_t),tt(ht),tt(Z[St]),tt(Z[St+1]),tt(Z[St+2]),tt(Z[St+3])),_t=Z[St+2],ht=Z[St+3],St+=4;break;case D.OPS.curveTo3:_t=Z[St+2],ht=Z[St+3],Ft.push("C",tt(Z[St]),tt(Z[St+1]),tt(_t),tt(ht),tt(_t),tt(ht)),St+=4;break;case D.OPS.closePath:Ft.push("Z");break}Ft=Ft.join(" "),ot.path&&V.length>0&&V[0]!==D.OPS.rectangle&&V[0]!==D.OPS.moveTo?Ft=ot.path.getAttributeNS(null,"d")+Ft:(ot.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(ot.path)),ot.path.setAttributeNS(null,"d",Ft),ot.path.setAttributeNS(null,"fill","none"),ot.element=ot.path,ot.setCurrentPoint(_t,ht)}endPath(){const V=this.current;if(V.path=null,!this.pendingClip)return;if(!V.element){this.pendingClip=null;return}const Z=`clippath${ft++}`,ot=this.svgFactory.createElement("svg:clipPath");ot.setAttributeNS(null,"id",Z),ot.setAttributeNS(null,"transform",ut(this.transformMatrix));const _t=V.element.cloneNode(!0);if(this.pendingClip==="evenodd"?_t.setAttributeNS(null,"clip-rule","evenodd"):_t.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ot.appendChild(_t),this.defs.appendChild(ot),V.activeClipUrl){V.clipGroup=null;for(const ht of this.extraStack)ht.clipGroup=null;ot.setAttributeNS(null,"clip-path",V.activeClipUrl)}V.activeClipUrl=`url(#${Z})`,this.tgrp=null}clip(V){this.pendingClip=V}closePath(){const V=this.current;if(V.path){const Z=`${V.path.getAttributeNS(null,"d")}Z`;V.path.setAttributeNS(null,"d",Z)}}setLeading(V){this.current.leading=-V}setTextRise(V){this.current.textRise=V}setTextRenderingMode(V){this.current.textRenderingMode=V}setHScale(V){this.current.textHScale=V/100}setRenderingIntent(V){}setFlatness(V){}setGState(V){for(const[Z,ot]of V)switch(Z){case"LW":this.setLineWidth(ot);break;case"LC":this.setLineCap(ot);break;case"LJ":this.setLineJoin(ot);break;case"ML":this.setMiterLimit(ot);break;case"D":this.setDash(ot[0],ot[1]);break;case"RI":this.setRenderingIntent(ot);break;case"FL":this.setFlatness(ot);break;case"Font":this.setFont(ot);break;case"CA":this.setStrokeAlpha(ot);break;case"ca":this.setFillAlpha(ot);break;default:(0,D.warn)(`Unimplemented graphic state operator ${Z}`);break}}fill(){const V=this.current;V.element&&(V.element.setAttributeNS(null,"fill",V.fillColor),V.element.setAttributeNS(null,"fill-opacity",V.fillAlpha),this.endPath())}stroke(){const V=this.current;V.element&&(this._setStrokeAttributes(V.element),V.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(V,Z=1){const ot=this.current;let _t=ot.dashArray;Z!==1&&_t.length>0&&(_t=_t.map(function(ht){return Z*ht})),V.setAttributeNS(null,"stroke",ot.strokeColor),V.setAttributeNS(null,"stroke-opacity",ot.strokeAlpha),V.setAttributeNS(null,"stroke-miterlimit",tt(ot.miterLimit)),V.setAttributeNS(null,"stroke-linecap",ot.lineCap),V.setAttributeNS(null,"stroke-linejoin",ot.lineJoin),V.setAttributeNS(null,"stroke-width",tt(Z*ot.lineWidth)+"px"),V.setAttributeNS(null,"stroke-dasharray",_t.map(tt).join(" ")),V.setAttributeNS(null,"stroke-dashoffset",tt(Z*ot.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width","1px"),V.setAttributeNS(null,"height","1px"),V.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(V)}paintImageXObject(V){const Z=V.startsWith("g_")?this.commonObjs.get(V):this.objs.get(V);if(!Z){(0,D.warn)(`Dependent image with object ID ${V} is not ready yet`);return}this.paintInlineImageXObject(Z)}paintInlineImageXObject(V,Z){const ot=V.width,_t=V.height,ht=G(V,this.forceDataSchema,!!Z),Ft=this.svgFactory.createElement("svg:rect");Ft.setAttributeNS(null,"x","0"),Ft.setAttributeNS(null,"y","0"),Ft.setAttributeNS(null,"width",tt(ot)),Ft.setAttributeNS(null,"height",tt(_t)),this.current.element=Ft,this.clip("nonzero");const St=this.svgFactory.createElement("svg:image");St.setAttributeNS(pt,"xlink:href",ht),St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y",tt(-_t)),St.setAttributeNS(null,"width",tt(ot)+"px"),St.setAttributeNS(null,"height",tt(_t)+"px"),St.setAttributeNS(null,"transform",`scale(${tt(1/ot)} ${tt(-1/_t)})`),Z?Z.appendChild(St):this._ensureTransformGroup().appendChild(St)}paintImageMaskXObject(V){const Z=this.current,ot=V.width,_t=V.height,ht=Z.fillColor;Z.maskId=`mask${At++}`;const Ft=this.svgFactory.createElement("svg:mask");Ft.setAttributeNS(null,"id",Z.maskId);const St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y","0"),St.setAttributeNS(null,"width",tt(ot)),St.setAttributeNS(null,"height",tt(_t)),St.setAttributeNS(null,"fill",ht),St.setAttributeNS(null,"mask",`url(#${Z.maskId})`),this.defs.appendChild(Ft),this._ensureTransformGroup().appendChild(St),this.paintInlineImageXObject(V,Ft)}paintFormXObjectBegin(V,Z){if(Array.isArray(V)&&V.length===6&&this.transform(V[0],V[1],V[2],V[3],V[4],V[5]),Z){const ot=Z[2]-Z[0],_t=Z[3]-Z[1],ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x",Z[0]),ht.setAttributeNS(null,"y",Z[1]),ht.setAttributeNS(null,"width",tt(ot)),ht.setAttributeNS(null,"height",tt(_t)),this.current.element=ht,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(V){const Z=this.svgFactory.create(V.width,V.height),ot=this.svgFactory.createElement("svg:defs");Z.appendChild(ot),this.defs=ot;const _t=this.svgFactory.createElement("svg:g");return _t.setAttributeNS(null,"transform",ut(V.transform)),Z.appendChild(_t),this.svg=_t,Z}_ensureClipGroup(){if(!this.current.clipGroup){const V=this.svgFactory.createElement("svg:g");V.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(V),this.current.clipGroup=V}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ut(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNodeStream=void 0;var D=at(1),vt=at(26);const ct=require$$4,Ct=require$$4,wt=require$$4,bt=require$$4,it=/^file:\/\/\/[a-zA-Z]:\//;function Y(tt){const ut=bt.parse(tt);return ut.protocol==="file:"||ut.host?ut:/^[a-z]:[/\\]/i.test(tt)?bt.parse(`file:///${tt}`):(ut.host||(ut.protocol="file:"),ut)}class gt{constructor(ut){this.source=ut,this.url=Y(ut.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ut.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ut,ft;return(ft=(ut=this._fullRequestReader)==null?void 0:ut._loaded)!=null?ft:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new nt(this):new J(this),this._fullRequestReader}getRangeReader(ut,ft){if(ft<=this._progressiveDataLength)return null;const At=this.isFsUrl?new lt(this,ut,ft):new G(this,ut,ft);return this._rangeRequestReaders.push(At),At}cancelAllRequests(ut){this._fullRequestReader&&this._fullRequestReader.cancel(ut);for(const ft of this._rangeRequestReaders.slice(0))ft.cancel(ut)}}E.PDFNodeStream=gt;class pt{constructor(ut){this._url=ut.url,this._done=!1,this._storedError=null,this.onProgress=null;const ft=ut.source;this._contentLength=ft.length,this._loaded=0,this._filename=null,this._disableRange=ft.disableRange||!1,this._rangeChunkSize=ft.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ft.disableStream,this._isRangeSupported=!ft.disableRange,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)(),this._headersCapability=(0,D.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ut=this._readableStream.read();return ut===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ut.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ut).buffer,done:!1})}cancel(ut){if(!this._readableStream){this._error(ut);return}this._readableStream.destroy(ut)}_error(ut){this._storedError=ut,this._readCapability.resolve()}_setReadableStream(ut){this._readableStream=ut,ut.on("readable",()=>{this._readCapability.resolve()}),ut.on("end",()=>{ut.destroy(),this._done=!0,this._readCapability.resolve()}),ut.on("error",ft=>{this._error(ft)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new D.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class et{constructor(ut){this._url=ut.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,D.createPromiseCapability)();const ft=ut.source;this._isStreamingSupported=!ft.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ut=this._readableStream.read();return ut===null?(this._readCapability=(0,D.createPromiseCapability)(),this.read()):(this._loaded+=ut.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(ut).buffer,done:!1})}cancel(ut){if(!this._readableStream){this._error(ut);return}this._readableStream.destroy(ut)}_error(ut){this._storedError=ut,this._readCapability.resolve()}_setReadableStream(ut){this._readableStream=ut,ut.on("readable",()=>{this._readCapability.resolve()}),ut.on("end",()=>{ut.destroy(),this._done=!0,this._readCapability.resolve()}),ut.on("error",ft=>{this._error(ft)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(tt,ut){return{protocol:tt.protocol,auth:tt.auth,host:tt.hostname,port:tt.port,path:tt.path,method:"GET",headers:ut}}class J extends pt{constructor(ut){super(ut);const ft=At=>{if(At.statusCode===404){const ot=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot,this._headersCapability.reject(ot);return}this._headersCapability.resolve(),this._setReadableStream(At);const Pt=ot=>this._readableStream.headers[ot.toLowerCase()],{allowRangeRequests:V,suggestedLength:Z}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:Pt,isHttp:ut.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=Z||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(Pt)};this._request=null,this._url.protocol==="http:"?this._request=Ct.request(W(this._url,ut.httpHeaders),ft):this._request=wt.request(W(this._url,ut.httpHeaders),ft),this._request.on("error",At=>{this._storedError=At,this._headersCapability.reject(At)}),this._request.end()}}class G extends et{constructor(ut,ft,At){super(ut),this._httpHeaders={};for(const V in ut.httpHeaders){const Z=ut.httpHeaders[V];typeof Z!="undefined"&&(this._httpHeaders[V]=Z)}this._httpHeaders.Range=`bytes=${ft}-${At-1}`;const Pt=V=>{if(V.statusCode===404){const Z=new D.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Z;return}this._setReadableStream(V)};this._request=null,this._url.protocol==="http:"?this._request=Ct.request(W(this._url,this._httpHeaders),Pt):this._request=wt.request(W(this._url,this._httpHeaders),Pt),this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class nt extends pt{constructor(ut){super(ut);let ft=decodeURIComponent(this._url.path);it.test(this._url.href)&&(ft=ft.replace(/^\//,"")),ct.lstat(ft,(At,Pt)=>{if(At){At.code==="ENOENT"&&(At=new D.MissingPDFException(`Missing PDF "${ft}".`)),this._storedError=At,this._headersCapability.reject(At);return}this._contentLength=Pt.size,this._setReadableStream(ct.createReadStream(ft)),this._headersCapability.resolve()})}}class lt extends et{constructor(ut,ft,At){super(ut);let Pt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(Pt=Pt.replace(/^\//,"")),this._setReadableStream(ct.createReadStream(Pt,{start:ft,end:At-1}))}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.createResponseStatusError=bt,E.extractFilenameFromHeader=wt,E.validateRangeRequestCapabilities=Ct,E.validateResponseStatus=it;var D=at(1),vt=at(27),ct=at(5);function Ct({getResponseHeader:Y,isHttp:gt,rangeChunkSize:pt,disableRange:et}){const W={allowRangeRequests:!1,suggestedLength:void 0},J=parseInt(Y("Content-Length"),10);return!Number.isInteger(J)||(W.suggestedLength=J,J<=2*pt)||et||!gt||Y("Accept-Ranges")!=="bytes"||(Y("Content-Encoding")||"identity")!=="identity"||(W.allowRangeRequests=!0),W}function wt(Y){const gt=Y("Content-Disposition");if(gt){let pt=(0,vt.getFilenameFromContentDispositionHeader)(gt);if(pt.includes("%"))try{pt=decodeURIComponent(pt)}catch{}if((0,ct.isPdfFile)(pt))return pt}return null}function bt(Y,gt){return Y===404||Y===0&&gt.startsWith("file:")?new D.MissingPDFException('Missing PDF "'+gt+'".'):new D.UnexpectedResponseException(`Unexpected server response (${Y}) while retrieving PDF "${gt}".`,Y)}function it(Y){return Y===200||Y===206}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.getFilenameFromContentDispositionHeader=vt;var D=at(1);function vt(ct){let Ct=!0,wt=bt("filename\\*","i").exec(ct);if(wt){wt=wt[1];let J=pt(wt);return J=unescape(J),J=et(J),J=W(J),Y(J)}if(wt=gt(ct),wt){const J=W(wt);return Y(J)}if(wt=bt("filename","i").exec(ct),wt){wt=wt[1];let J=pt(wt);return J=W(J),Y(J)}function bt(J,G){return new RegExp("(?:^|;)\\s*"+J+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',G)}function it(J,G){if(J){if(!/^[\x00-\xFF]+$/.test(G))return G;try{const nt=new TextDecoder(J,{fatal:!0}),lt=(0,D.stringToBytes)(G);G=nt.decode(lt),Ct=!1}catch{}}return G}function Y(J){return Ct&&/[\x80-\xff]/.test(J)&&(J=it("utf-8",J),Ct&&(J=it("iso-8859-1",J))),J}function gt(J){const G=[];let nt;const lt=bt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(nt=lt.exec(J))!==null;){let[,ut,ft,At]=nt;if(ut=parseInt(ut,10),ut in G){if(ut===0)break;continue}G[ut]=[ft,At]}const tt=[];for(let ut=0;ut<G.length&&ut in G;++ut){let[ft,At]=G[ut];At=pt(At),ft&&(At=unescape(At),ut===0&&(At=et(At))),tt.push(At)}return tt.join("")}function pt(J){if(J.startsWith('"')){const G=J.slice(1).split('\\"');for(let nt=0;nt<G.length;++nt){const lt=G[nt].indexOf('"');lt!==-1&&(G[nt]=G[nt].slice(0,lt),G.length=nt+1),G[nt]=G[nt].replace(/\\(.)/g,"$1")}J=G.join('"')}return J}function et(J){const G=J.indexOf("'");if(G===-1)return J;const nt=J.slice(0,G),tt=J.slice(G+1).replace(/^[^']*'/,"");return it(nt,tt)}function W(J){return!J.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(J)?J:J.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(G,nt,lt,tt){if(lt==="q"||lt==="Q")return tt=tt.replace(/_/g," "),tt=tt.replace(/=([0-9a-fA-F]{2})/g,function(ut,ft){return String.fromCharCode(parseInt(ft,16))}),it(nt,tt);try{tt=atob(tt)}catch{}return it(nt,tt)})}return""}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFNetworkStream=void 0;var D=at(1),vt=at(26);const ct=200,Ct=206;function wt(pt){const et=pt.response;return typeof et!="string"?et:(0,D.stringToBytes)(et).buffer}class bt{constructor(et,W={}){this.url=et,this.isHttp=/^https?:/i.test(et),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(et,W,J){const G={begin:et,end:W};for(const nt in J)G[nt]=J[nt];return this.request(G)}requestFull(et){return this.request(et)}request(et){const W=this.getXhr(),J=this.currXhrId++,G=this.pendingRequests[J]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const nt in this.httpHeaders){const lt=this.httpHeaders[nt];typeof lt!="undefined"&&W.setRequestHeader(nt,lt)}return this.isHttp&&"begin"in et&&"end"in et?(W.setRequestHeader("Range",`bytes=${et.begin}-${et.end-1}`),G.expectedStatus=Ct):G.expectedStatus=ct,W.responseType="arraybuffer",et.onError&&(W.onerror=function(nt){et.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,J),W.onprogress=this.onProgress.bind(this,J),G.onHeadersReceived=et.onHeadersReceived,G.onDone=et.onDone,G.onError=et.onError,G.onProgress=et.onProgress,W.send(null),J}onProgress(et,W){var G;const J=this.pendingRequests[et];!J||(G=J.onProgress)==null||G.call(J,W)}onStateChange(et,W){var ut,ft,At;const J=this.pendingRequests[et];if(!J)return;const G=J.xhr;if(G.readyState>=2&&J.onHeadersReceived&&(J.onHeadersReceived(),delete J.onHeadersReceived),G.readyState!==4||!(et in this.pendingRequests))return;if(delete this.pendingRequests[et],G.status===0&&this.isHttp){(ut=J.onError)==null||ut.call(J,G.status);return}const nt=G.status||ct;if(!(nt===ct&&J.expectedStatus===Ct)&&nt!==J.expectedStatus){(ft=J.onError)==null||ft.call(J,G.status);return}const tt=wt(G);if(nt===Ct){const Pt=G.getResponseHeader("Content-Range"),V=/bytes (\d+)-(\d+)\/(\d+)/.exec(Pt);J.onDone({begin:parseInt(V[1],10),chunk:tt})}else tt?J.onDone({begin:0,chunk:tt}):(At=J.onError)==null||At.call(J,G.status)}getRequestXhr(et){return this.pendingRequests[et].xhr}isPendingRequest(et){return et in this.pendingRequests}abortRequest(et){const W=this.pendingRequests[et].xhr;delete this.pendingRequests[et],W.abort()}}class it{constructor(et){this._source=et,this._manager=new bt(et.url,{httpHeaders:et.httpHeaders,withCredentials:et.withCredentials}),this._rangeChunkSize=et.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(et){const W=this._rangeRequestReaders.indexOf(et);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Y(this._manager,this._source),this._fullRequestReader}getRangeReader(et,W){const J=new gt(this._manager,et,W);return J.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(J),J}cancelAllRequests(et){var W;(W=this._fullRequestReader)==null||W.cancel(et);for(const J of this._rangeRequestReaders.slice(0))J.cancel(et)}}E.PDFNetworkStream=it;class Y{constructor(et,W){this._manager=et;const J={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=et.requestFull(J),this._headersReceivedCapability=(0,D.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const et=this._fullRequestId,W=this._manager.getRequestXhr(et),J=lt=>W.getResponseHeader(lt),{allowRangeRequests:G,suggestedLength:nt}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});G&&(this._isRangeSupported=!0),this._contentLength=nt||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(J),this._isRangeSupported&&this._manager.abortRequest(et),this._headersReceivedCapability.resolve()}_onDone(et){if(et&&(this._requests.length>0?this._requests.shift().resolve({value:et.chunk,done:!1}):this._cachedChunks.push(et.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(et){this._storedError=(0,vt.createResponseStatusError)(et,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(et){var W;(W=this.onProgress)==null||W.call(this,{loaded:et.loaded,total:et.lengthComputable?et.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0,this._headersReceivedCapability.reject(et);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gt{constructor(et,W,J){this._manager=et;const G={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._requestId=et.requestRange(W,J,G),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var et;(et=this.onClosed)==null||et.call(this,this)}_onDone(et){const W=et.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const J of this._requests)J.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(et){this._storedError=(0,vt.createResponseStatusError)(et,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(et){var W;this.isStreamingSupported||(W=this.onProgress)==null||W.call(this,{loaded:et.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const W=this._queuedChunk;return this._queuedChunk=null,{value:W,done:!1}}if(this._done)return{value:void 0,done:!0};const et=(0,D.createPromiseCapability)();return this._requests.push(et),et.promise}cancel(et){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(st,E,at)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.PDFFetchStream=void 0;var D=at(1),vt=at(26);function ct(Y,gt,pt){return{method:"GET",headers:Y,signal:pt==null?void 0:pt.signal,mode:"cors",credentials:gt?"include":"same-origin",redirect:"follow"}}function Ct(Y){const gt=new Headers;for(const pt in Y){const et=Y[pt];typeof et!="undefined"&&gt.append(pt,et)}return gt}class wt{constructor(gt){this.source=gt,this.isHttp=/^https?:/i.test(gt.url),this.httpHeaders=this.isHttp&&gt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var gt,pt;return(pt=(gt=this._fullRequestReader)==null?void 0:gt._loaded)!=null?pt:0}getFullReader(){return(0,D.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bt(this),this._fullRequestReader}getRangeReader(gt,pt){if(pt<=this._progressiveDataLength)return null;const et=new it(this,gt,pt);return this._rangeRequestReaders.push(et),et}cancelAllRequests(gt){this._fullRequestReader&&this._fullRequestReader.cancel(gt);for(const pt of this._rangeRequestReaders.slice(0))pt.cancel(gt)}}E.PDFFetchStream=wt;class bt{constructor(gt){this._stream=gt,this._reader=null,this._loaded=0,this._filename=null;const pt=gt.source;this._withCredentials=pt.withCredentials||!1,this._contentLength=pt.length,this._headersCapability=(0,D.createPromiseCapability)(),this._disableRange=pt.disableRange||!1,this._rangeChunkSize=pt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!pt.disableStream,this._isRangeSupported=!pt.disableRange,this._headers=Ct(this._stream.httpHeaders);const et=pt.url;fetch(et,ct(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,vt.validateResponseStatus)(W.status))throw(0,vt.createResponseStatusError)(W.status,et);this._reader=W.body.getReader(),this._headersCapability.resolve();const J=lt=>W.headers.get(lt),{allowRangeRequests:G,suggestedLength:nt}=(0,vt.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=G,this._contentLength=nt||this._contentLength,this._filename=(0,vt.extractFilenameFromHeader)(J),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new D.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:gt,done:pt}=await this._reader.read();return pt?{value:gt,done:pt}:(this._loaded+=gt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(gt).buffer,done:!1})}cancel(gt){this._reader&&this._reader.cancel(gt),this._abortController&&this._abortController.abort()}}class it{constructor(gt,pt,et){this._stream=gt,this._reader=null,this._loaded=0;const W=gt.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,D.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=Ct(this._stream.httpHeaders),this._headers.append("Range",`bytes=${pt}-${et-1}`);const J=W.url;fetch(J,ct(this._headers,this._withCredentials,this._abortController)).then(G=>{if(!(0,vt.validateResponseStatus)(G.status))throw(0,vt.createResponseStatusError)(G.status,J);this._readCapability.resolve(),this._reader=G.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:gt,done:pt}=await this._reader.read();return pt?{value:gt,done:pt}:(this._loaded+=gt.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(gt).buffer,done:!1})}cancel(gt){this._reader&&this._reader.cancel(gt),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(st){var E=__webpack_module_cache__[st];if(E!==void 0)return E.exports;var at=__webpack_module_cache__[st]={exports:{}};return __webpack_modules__[st](at,at.exports,__w_pdfjs_require__),at.exports}var __webpack_exports__={};return(()=>{var st=__webpack_exports__;Object.defineProperty(st,"__esModule",{value:!0}),Object.defineProperty(st,"AnnotationLayer",{enumerable:!0,get:function(){return vt.AnnotationLayer}}),Object.defineProperty(st,"AnnotationMode",{enumerable:!0,get:function(){return E.AnnotationMode}}),Object.defineProperty(st,"CMapCompressionType",{enumerable:!0,get:function(){return E.CMapCompressionType}}),Object.defineProperty(st,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ct.GlobalWorkerOptions}}),Object.defineProperty(st,"InvalidPDFException",{enumerable:!0,get:function(){return E.InvalidPDFException}}),Object.defineProperty(st,"LoopbackPort",{enumerable:!0,get:function(){return at.LoopbackPort}}),Object.defineProperty(st,"MissingPDFException",{enumerable:!0,get:function(){return E.MissingPDFException}}),Object.defineProperty(st,"OPS",{enumerable:!0,get:function(){return E.OPS}}),Object.defineProperty(st,"PDFDataRangeTransport",{enumerable:!0,get:function(){return at.PDFDataRangeTransport}}),Object.defineProperty(st,"PDFDateString",{enumerable:!0,get:function(){return D.PDFDateString}}),Object.defineProperty(st,"PDFWorker",{enumerable:!0,get:function(){return at.PDFWorker}}),Object.defineProperty(st,"PasswordResponses",{enumerable:!0,get:function(){return E.PasswordResponses}}),Object.defineProperty(st,"PermissionFlag",{enumerable:!0,get:function(){return E.PermissionFlag}}),Object.defineProperty(st,"PixelsPerInch",{enumerable:!0,get:function(){return D.PixelsPerInch}}),Object.defineProperty(st,"RenderingCancelledException",{enumerable:!0,get:function(){return D.RenderingCancelledException}}),Object.defineProperty(st,"SVGGraphics",{enumerable:!0,get:function(){return bt.SVGGraphics}}),Object.defineProperty(st,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return E.UNSUPPORTED_FEATURES}}),Object.defineProperty(st,"UnexpectedResponseException",{enumerable:!0,get:function(){return E.UnexpectedResponseException}}),Object.defineProperty(st,"Util",{enumerable:!0,get:function(){return E.Util}}),Object.defineProperty(st,"VerbosityLevel",{enumerable:!0,get:function(){return E.VerbosityLevel}}),Object.defineProperty(st,"XfaLayer",{enumerable:!0,get:function(){return it.XfaLayer}}),Object.defineProperty(st,"build",{enumerable:!0,get:function(){return at.build}}),Object.defineProperty(st,"createPromiseCapability",{enumerable:!0,get:function(){return E.createPromiseCapability}}),Object.defineProperty(st,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return E.createValidAbsoluteUrl}}),Object.defineProperty(st,"getDocument",{enumerable:!0,get:function(){return at.getDocument}}),Object.defineProperty(st,"getFilenameFromUrl",{enumerable:!0,get:function(){return D.getFilenameFromUrl}}),Object.defineProperty(st,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return D.getPdfFilenameFromUrl}}),Object.defineProperty(st,"getXfaPageViewport",{enumerable:!0,get:function(){return D.getXfaPageViewport}}),Object.defineProperty(st,"isPdfFile",{enumerable:!0,get:function(){return D.isPdfFile}}),Object.defineProperty(st,"loadScript",{enumerable:!0,get:function(){return D.loadScript}}),Object.defineProperty(st,"renderTextLayer",{enumerable:!0,get:function(){return wt.renderTextLayer}}),Object.defineProperty(st,"shadow",{enumerable:!0,get:function(){return E.shadow}}),Object.defineProperty(st,"version",{enumerable:!0,get:function(){return at.version}});var E=__w_pdfjs_require__(1),at=__w_pdfjs_require__(4),D=__w_pdfjs_require__(5),vt=__w_pdfjs_require__(20),ct=__w_pdfjs_require__(13),Ct=__w_pdfjs_require__(3),wt=__w_pdfjs_require__(23),bt=__w_pdfjs_require__(24),it=__w_pdfjs_require__(22);if(Ct.isNodeJS){const{PDFNodeStream:Y}=__w_pdfjs_require__(25);(0,at.setPDFNetworkStreamFactory)(gt=>new Y(gt))}else{const{PDFNetworkStream:Y}=__w_pdfjs_require__(28),{PDFFetchStream:gt}=__w_pdfjs_require__(29);(0,at.setPDFNetworkStreamFactory)(pt=>(0,D.isValidFetchUrl)(pt.url)?new gt(pt):new Y(pt))}})(),__webpack_exports__})())})(pdf);var t,u,r,o$1,i=0,c=[],f=[],e$1=l$1.__b,a=l$1.__r,v=l$1.diffed,l=l$1.__c,m=l$1.unmount;function p(st,E){l$1.__h&&l$1.__h(u,st,i||E),i=0;var at=u.__H||(u.__H={__:[],__h:[]});return st>=at.__.length&&at.__.push({__V:f}),at.__[st]}function y(st){return i=1,d(z,st)}function d(st,E,at){var D=p(t++,2);return D.t=st,D.__c||(D.__=[at?at(E):z(void 0,E),function(vt){var ct=D.t(D.__[0],vt);D.__[0]!==ct&&(D.__=[ct,D.__[1]],D.__c.setState({}))}],D.__c=u),D.__}function s(st){return i=5,F(function(){return{current:st}},[])}function F(st,E){var at=p(t++,7);return w(at.__H,E)?(at.__V=st(),at.u=E,at.__h=st,at.__V):at.__}function T(st,E){return i=8,F(function(){return st},E)}function b(){for(var st;st=c.shift();)if(st.__P)try{st.__H.__h.forEach(j),st.__H.__h.forEach(k),st.__H.__h=[]}catch(E){st.__H.__h=[],l$1.__e(E,st.__v)}}l$1.__b=function(st){u=null,e$1&&e$1(st)},l$1.__r=function(st){a&&a(st),t=0;var E=(u=st.__c).__H;E&&(r===u?(E.__h=[],u.__h=[],E.__.forEach(function(at){at.__V=f,at.u=void 0})):(E.__h.forEach(j),E.__h.forEach(k),E.__h=[])),r=u},l$1.diffed=function(st){v&&v(st);var E=st.__c;E&&E.__H&&(E.__H.__h.length&&(c.push(E)!==1&&o$1===l$1.requestAnimationFrame||((o$1=l$1.requestAnimationFrame)||function(at){var D,vt=function(){clearTimeout(ct),g&&cancelAnimationFrame(D),setTimeout(at)},ct=setTimeout(vt,100);g&&(D=requestAnimationFrame(vt))})(b)),E.__H.__.forEach(function(at){at.u&&(at.__H=at.u),at.__V!==f&&(at.__=at.__V),at.u=void 0,at.__V=f})),r=u=null},l$1.__c=function(st,E){E.some(function(at){try{at.__h.forEach(j),at.__h=at.__h.filter(function(D){return!D.__||k(D)})}catch(D){E.some(function(vt){vt.__h&&(vt.__h=[])}),E=[],l$1.__e(D,at.__v)}}),l&&l(st,E)},l$1.unmount=function(st){m&&m(st);var E,at=st.__c;at&&at.__H&&(at.__H.__.forEach(function(D){try{j(D)}catch(vt){E=vt}}),E&&l$1.__e(E,at.__v))};var g=typeof requestAnimationFrame=="function";function j(st){var E=u,at=st.__c;typeof at=="function"&&(st.__c=void 0,at()),u=E}function k(st){var E=u;st.__c=st.__(),u=E}function w(st,E){return!st||st.length!==E.length||E.some(function(at,D){return at!==st[D]})}function z(st,E){return typeof E=="function"?E(st):E}var o=0;function e(st,E,at,D,vt){var ct,Ct,wt={};for(Ct in E)Ct=="ref"?ct=E[Ct]:wt[Ct]=E[Ct];var bt={type:st,props:wt,key:at,ref:ct,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:vt,__self:D};if(typeof st=="function"&&(ct=st.defaultProps))for(Ct in ct)wt[Ct]===void 0&&(wt[Ct]=ct[Ct]);return l$1.vnode&&l$1.vnode(bt),bt}pdf.exports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";function App(){const st=s(new OffscreenCanvas(100,100)),[E,at]=y([]),D=T(vt=>{if(!vt.currentTarget.files||vt.currentTarget.files.length<1||!st.current)return;const ct=[],Ct=vt.currentTarget.files[0];if(Ct.type&&Ct.type!=="image/pdf"){console.log("File is not a PDF.",Ct.type,Ct);return}const wt=new FileReader;wt.addEventListener("load",async bt=>{if(!st.current)return;const Y=await pdf.exports.getDocument(bt.target.result).promise;for(let pt=1;pt<=Y.numPages;pt++){const et=await Y.getPage(pt),W=st.current.getContext("2d"),J=et.getViewport({scale:1.5});st.current.height=J.height,st.current.width=J.width;var gt={canvasContext:W,viewport:J};await et.render(gt).promise;const G=await st.current.convertToBlob({type:"image/png"});ct.push(URL.createObjectURL(G))}at(ct)}),wt.readAsArrayBuffer(Ct)},[]);return e("main",{children:[e("h1",{class:"text-3xl font-bold underline",children:"PDF 2 PNG"}),e("input",{type:"file",name:"pdf-upload",id:"pdf-upload",accept:".pdf",onChange:D}),E.map((vt,ct)=>e("a",{href:vt,download:`page-${ct+1}.png`,children:e("button",{children:["Download Page ",ct+1]})},ct))]})}var index=(()=>`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.text-3xl{font-size:1.875rem;line-height:2.25rem}.font-bold{font-weight:700}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}
`)();S(e(App,{}),document.getElementById("app"));
